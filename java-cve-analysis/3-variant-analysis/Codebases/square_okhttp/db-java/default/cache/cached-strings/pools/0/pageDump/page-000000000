import Proxyimport Listimport SocketFactoryimport RecordingProxySelectorimport Testimport static Util.immutableListOfimport static Assertions.assertThatstmt...=...Dns.SYSTEMgetDefault(...)Authenticator.NONEimmutableListOf(...)Protocol.HTTP_1_1ConnectionSpec.MODERN_TLSnew RecordingProxySelector(...)super(...)<obinit>(...)Dns dns, ...;SocketFactory socketFactory, ...;Authenticator authenticator, ...;List<Protocol> protocols, ...;List<ConnectionSpec> connectionSpecs, ...;RecordingProxySelector proxySelector, ...;Address anew Address(...)Address bisEqualTo(...)assertThat(...)p0hashCode(...)isNotEqualTo(...)Address addresstoString(...)Proxy.NO_PROXY... + .../* Copyright (C) 2014 Square, Inc. ... */import IOExceptionimport CountDownLatchimport TimeUnitimport AtomicLongimport AtomicReferenceimport ByteStringimport static Util.userAgent/** Exercises the web socket implementation against the <a ... */new OkHttpClient(...)String HOST, ...;...[]run(...)new AutobahnTester(...)OkHttpClient client, ...;Request requestbuild(...)url(...)new Builder(...)Request.BuildernewWebSocket(...)long countgetTestCount(...)println(...)System.outlong number... <= ......++runTest(...)updateReports(...)shutdown(...)executorService(...)dispatcher(...)CountDownLatch latchnew CountDownLatch(...)AtomicLong startNanosnew AtomicLong(...)long endNanosnanoTime(...)long tookMstoMillis(...)TimeUnit.NANOSECONDS... - ...get(...)new (...)new WebSocketListener(...) { ... }set(...)send(...)close(...)countDown(...)printStackTrace(...)!...await(...)TimeUnit.SECONDSnew IllegalStateException(...)InterruptedException enew AssertionError(...)AtomicLong countRefAtomicReference<Throwable> failureRefnew AtomicReference<Throwable>(...)Throwable failureparseLong(...)... != ...new RuntimeException(...)/* Copyright (C) 2015 Square, Inc. ... */import static Assertions.failCacheControl cacheControlCacheControl.BuilderisFalse(...)noCache(...)noStore(...)-...maxAgeSeconds(...)sMaxAgeSeconds(...)isPrivate(...)isPublic(...)mustRevalidate(...)maxStaleSeconds(...)minFreshSeconds(...)onlyIfCached(...)immutable(...)noTransform(...)minFresh(...)maxStale(...)maxAge(...)isTrue(...)parse(...)Headers.BuilderString headerHeaders headersof(...)String valuenew String(...)isSameAs(...)TimeUnit.DAYS... * ...Integer.MAX_VALUEBuilder builderfail(...)IllegalArgumentException expectedTimeUnit.MILLISECONDS// These members are accessible to response headers only.// Example from http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.6// Testing instance equality.// Longer than Integer.MAX_VALUE seconds.import Fileimport CookieManagerimport HttpURLConnectionimport ResponseCacheimport Principalimport Certificateimport DateFormatimport SimpleDateFormatimport Dateimport Iteratorimport Localeimport NoSuchElementExceptionimport TimeZoneimport HostnameVerifierimport MockResponseimport MockWebServerimport RecordedRequestimport Internalimport Platformimport PlatformRuleimport HandshakeCertificatesimport Bufferimport BufferedSinkimport BufferedSourceimport GzipSinkimport Okioimport Pathimport FakeFileSystemimport AfterEachimport BeforeEachimport Tagimport RegisterExtensionimport static SocketPolicy.DISCONNECT_AT_ENDimport static Internal.cacheGetimport static TlsUtil.localhostimport static Offset.offsetnew FakeFileSystem(...)new OkHttpClientTestRule(...)new PlatformRule(...)localhost(...)new CookieManager(...)...->...new HostnameVerifier(...) { ... }HostnameVerifier NULL_HOSTNAME_VERIFIER, ...;FakeFileSystem fileSystem, ...;OkHttpClientTestRule clientTestRule, ...;PlatformRule platform, ...;MockWebServer server, ...;MockWebServer server2, ...;HandshakeCertificates handshakeCertificates, ...;Cache cache, ...;CookieManager cookieManager, ...;this.serverthisthis.server2assumeNotOpenJSSE(...)assumeNotBouncyCastle(...)setProtocolNegotiationEnabled(...)new Cache(...)cookieJar(...)cache(...)new JavaNetCookieJar(...)newClientBuilder(...)setDefault(...)delete(...)/** Test that response caching is consistent with the RI and the spec. ... */assertCached(...)int expectedResponseCodeMockResponse mockResponseaddHeader(...)setBody(...)setResponseCode(...)new MockResponse(...)formatDate(...)TimeUnit.HOURSResponse responseexecute(...)newCall(...)Response cachedcacheGet(...)new MockWebServer(...)... == ...HttpURLConnection.HTTP_PROXY_AUTHHttpURLConnection.HTTP_UNAUTHORIZED... || ...HttpURLConnection.HTTP_NO_CONTENTHttpURLConnection.HTTP_RESETenqueue(...)HttpURLConnection.HTTP_CLIENT_TIMEOUTsetHeader(...)start(...)code(...)string(...)body(...)isNotNull(...)isNull(...)testResponseCaching(...)TransferKind.FIXED_LENGTHTransferKind.CHUNKEDTransferKind.END_OF_STREAM/** Skipping bytes in the input stream caused ResponseCache corruption. ... */setStatus(...)Response response1BufferedSource in1source(...)Response response2BufferedSource in2readUtf8(...)length(...)skip(...)exhausted(...)writeSuccessCount(...)writeAbortCount(...)message(...)requestCount(...)hitCount(...)BufferedSource inCipherSuite cipherSuitecipherSuite(...)handshake(...)List<Certificate> localCertslocalCertificates(...)List<Certificate> serverCertspeerCertificates(...)Principal peerPrincipalpeerPrincipal(...)Principal localPrincipallocalPrincipal(...)useHttps(...)sslSocketFactory(...)hostnameVerifier(...)newBuilder(...)trustManager(...)networkCount(...)HttpURLConnection.HTTP_MOVED_PERMRequest request1RecordedRequest recordedRequest1takeRequest(...)Request request2RecordedRequest recordedRequest2Request request3Response response3RecordedRequest recordedRequest3getRequestLine(...)getSequenceNumber(...)/** We've had bugs where caching and cross-protocol redirects yield class cast exceptions internal ... */temporaryRedirectCachedWithCachingHeader(...)temporaryRedirectNotCachedWithoutCachingHeader(...)HttpUrl url/** https://github.com/square/okhttp/issues/2198 */testServerPrematureDisconnect(...)BufferedSource bodySourcetruncateViolently(...)readUtf8Line(...)IOException expectedtestClientPrematureDisconnect(...)throttleBody(...)readByte(...)IllegalStateException expectedheader(...)String lastModifiedDateRecordedRequest conditionalRequestassertConditionallyCached(...)getHeader(...)addQueryParameter(...)assertNotCached(...)assertFullyCached(...)TimeUnit.MINUTEStestRequestMethod(...)method(...)requestBodyOrNull(...)...?...:...create(...)equals(...)testMethodInvalidates(...)Response invalidateput(...)clearHeaders(...)/** If both If-Modified-Since and If-None-Match conditions apply, send only If-None-Match. */Response rangeHttpURLConnection.HTTP_PARTIAL/** When the server returns a full response body we will store it and return it regardless of what ... */HttpURLConnection.HTTP_NOT_MODIFIEDcacheControl(...)assertNonIdentityEncodingCached(...)gzip(...)/** https://github.com/square/okhttp/issues/947 */ensureAllConnectionsReleased(...)idleConnectionCount(...)connectionPool(...)MockResponse responseString ifModifiedSinceDateRecordedRequest requestassertClientSuppliedCondition(...)/** For Last-Modified and Date headers, we should echo the date back in the exact format we were ... */Date lastModifiedDatenew Date(...)currentTimeMillis(...)Date servedDateDateFormat dateFormatnew SimpleDateFormat(...)Locale.USString lastModifiedStringformat(...)String servedStringRecordedRequest request1RecordedRequest request2setTimeZone(...)getTimeZone(...)Request frRequestResponse frResponseRequest enRequestResponse enResponseResponse fooresponseRecordingCookieJar cookieJarnew RecordingCookieJar(...)assertResponseCookies(...)long t0long t1Long updatedTimestampreceivedResponseAtMillis(...)isCloseTo(...)(...)...offset(...)sleep(...)HttpURLConnection.HTTP_OKgetRequestCount(...)Builder headersadd(...)addHeaderLenient(...)setHeaders(...)/** Old implementations of OkHttp's response cache wrote header fields like ":status: 200 OK". This ... */String urlKeykey(...)String entryMetadataString entryBodyString journalBodycreateDirectory(...)directoryPath(...)writeFile(...)getPath(...)directory(...)/** Exercise the cache format in OkHttp 2.7 and all earlier releases. */String prefixgetPrefix(...)/** The TLS version is present in OkHttp 3.0 and beyond. */evictAll(...)size(...)AtomicReference<String> ifNoneMatchnew AtomicReference<String>(...)addNetworkInterceptor(...)new Interceptor(...) { ... }compareAndSet(...)request(...)proceed(...)HttpUrl urlAHttpUrl urlBHttpUrl urlCIterator<String> iurls(...)hasNext(...)next(...)NoSuchElementException expectedremove(...)/** Test https://github.com/square/okhttp/issues/1712. */{...}headers(...)BufferedSink sinkbuffer(...)sink(...)resolve(...)writeUtf8(...)/** @param ... */DateFormat rfc1123/** @return */HttpUrl validHttpUrl invalidResponse response4/** Shortens the body of {@code response} but not the corresponding headers. Only useful to test ... */getHeaders(...)Buffer truncatedBodynew Buffer(...)setSocketPolicy(...)write(...)getBody(...)new TransferKind(...) { ... }setChunkedBody(...)removeHeader(...)TransferKind CHUNKED, ...;TransferKind FIXED_LENGTH, ...;TransferKind END_OF_STREAM, ...;/** Returns a gzipped copy of {@code bytes}. */Buffer resultnew GzipSink(...)/* Copyright (C) 2011 The Android Open Source Project ... */// Test each documented HTTP/1.1 code, plus the first unused value in each range.// http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html// We can't test 100 because it's not really a response.// assertCached(false, 100);//Electing to not cache partial responses// the HTTP spec permits caching 410s, but the RI doesn't.// We forbid bodies for 204 and 205.// 408's are a bit of an outlier because we may repeat the request if we encounter this// response code. In this scenario, there are 2 responses: the initial 408 and then the 200// because of the retry. We just want to ensure the initial 408 isn't cached.// Exhaust the content stream.// tearDown() isn't sufficient; this test starts multiple servers// Make sure that calling skip() doesn't omit bytes from the cache.// OpenJDK 6 fails on this line, complaining that the connection isn't open yet// Cached!// 2 requests + 2 redirects// an unrelated request should reuse the pooled connection// 2 direct + 2 redirect = 4// Intentionally empty. This case doesn't make sense because there's no// such thing as a premature disconnect when the disconnect itself// indicates the end of the data stream.// Setting a low transfer speed ensures that stream discarding will time out.//      last modified: 105 seconds ago//             served:   5 seconds ago//   default lifetime: (105 - 5) / 10 = 10 seconds//            expires:  10 seconds from served date = 5 seconds from now//      last modified: 115 seconds ago//             served:  15 seconds ago//   default lifetime: (115 - 15) / 10 = 10 seconds//            expires:  10 seconds from served date = 5 seconds ago//      last modified: 105 days ago//             served:   5 days ago//   default lifetime: (105 - 5) / 10 = 10 days//            expires:  10 days from served date = 5 days from now// Chrome interprets max-age relative to the local clock. Both our cache// and Firefox both use the earlier of the local and server's clock.// We could support this but choose not to for implementation simplicity// 1. Seed the cache (potentially).// 2. Expect a cache hit or miss.// 1. Seed the cache.// 2. Invalidate it.// 3. Expect a cache miss.// 2. Invalidate it with an uncacheable response.// 1. Request a range.// 2. Request a full document, expecting a cache miss.// At least three request/response pairs are required because after the first request is cached// a different execution path might be taken. Thus modifications to the cache applied during// the second request might not be visible until another request is performed.// Add a stale response to the cache.// With max-stale, we'll return that stale response.// (no responses enqueued)// seed// Serve a response with a non-standard date format that OkHttp supports.// This response should be conditionally cached.// The first request has no conditions.// The 2nd request uses the server's date format.// A cache miss writes the cache.// A conditional cache hit updates the cache.// Make sure t0 and t1 are distinct.// A full cache hit reads the cache.// Seed the cache.// Confirm the value is cached and intercepted.// Confirm the interceptor isn't exercised.// Put some responses in the cache.// Confirm the iterator returns those responses...// ... and nothing else.// Put a response in the cache.// Remove it with iteration.// Confirm that subsequent requests suffer a cache miss.// Too many calls to remove().// The URL will remain available if hasNext() returned true...// ...so even when we evict the element, we still get something back.// Remove does nothing. But most importantly, it doesn't throw!// The URL was evicted before hasNext() made any promises.// The original 'A' header is retained because the network response doesn't have one.// The original 'B' headers are replaced by the network response.// The network's 'C' header is added.// scenario 1: condition succeeds// scenario 2: condition fails// regular get// conditional getimport FileNotFoundExceptionimport InputStreamimport InterruptedIOExceptionimport HttpCookieimport InetAddressimport ProtocolExceptionimport SocketTimeoutExceptionimport UnknownHostExceptionimport UnknownServiceExceptionimport Durationimport ArrayListimport Arraysimport Collectionsimport LinkedHashSetimport Setimport BlockingQueueimport ExecutorServiceimport Executorsimport Futureimport SynchronousQueueimport AtomicBooleanimport AtomicIntegerimport Nullableimport SSLExceptionimport SSLHandshakeExceptionimport SSLPeerUnverifiedExceptionimport SSLProtocolExceptionimport SSLSocketimport SSLSocketFactoryimport Dispatcherimport QueueDispatcherimport SocketPolicyimport CallEndimport ConnectStartimport ConnectionAcquiredimport ConnectionReleasedimport ResponseFailedimport DoubleInetAddressDnsimport RecordingOkAuthenticatorimport Utilimport LoggingFilesystemimport Flakyimport HeldCertificateimport ForwardingSourceimport Disabledimport Timeoutimport static CookiePolicy.ACCEPT_ORIGINAL_SERVERimport static Arrays.asListimport static Collections.singletonListimport static CipherSuite.TLS_DH_anon_WITH_AES_128_GCM_SHA256import static TestUtil.awaitGarbageCollectionimport static Internal.addHeaderLenientimport static Assertions.assertArrayEqualsimport static Assumptions.assumeFalsenew TestLogHandler(...)OkHttpClient.classnew RecordingEventListener(...)eventListenerFactory(...)wrap(...)new RecordingCallback(...)new LoggingFilesystem(...)TestLogHandler testLogHandler, ...;RecordingEventListener listener, ...;RecordingCallback callback, ...;checkNoOpenFiles(...)long sentAtRecordedResponse recordedResponseexecuteSynchronously(...)long receivedAtRecordedRequest recordedRequestassertReceivedResponseAtMillis(...)assertSentRequestAtMillis(...)assertBody(...)assertHeaders(...)assertSuccessful(...)assertCode(...)getMethod(...)Builder requestBuildergetMessage(...)assertNotSuccessful(...)enableProtocol(...)Protocol.HTTP_2enableTls(...)assertHeader(...)containsExactly(...)values(...)repeatedHeaderNames(...)head(...)Request headRequestRequest getRequestassertArrayEquals(...)new byte[]bytes(...)post(...)postZeroLength(...)postBodyRetransmittedAfterAuthorizationFail(...)/** Don't explode when resending an empty post. https://github.com/square/okhttp/issues/1131 */String credentialbasic(...)authenticator(...)new RecordingOkAuthenticator(...)int i... < .../** We had a bug where we were passing a null route to the authenticator. ... */RecordingOkAuthenticator authenticatorSocketPolicy.DISCONNECT_AT_ENDonlyRoute(...)patch(...)Call callIllegalStateException eCall clonedclone(...)RecordedResponse firstResponseRecordedResponse secondResponseSet<String> bodiesnew LinkedHashSet<String>(...)p3p4p5p6p7p8p9contains(...)new Callback(...) { ... }new IOException(...)take(...)/** Each OkHttpClient used to get its own instance of NullProxySelector, and because these weren't ... */proxy(...)toProxyAddress(...)OkHttpClient.BuilderInputStream bytesbyteStream(...)read(...)long startNanosreadTimeout(...)ofSeconds(...)ofMillis(...)long elapsedNanoslong elapsedMillisisLessThan(...)/** https://github.com/square/okhttp/issues/442 */SocketPolicy.NO_RESPONSEInterruptedIOException expected/** Make a request with two routes. The first route will time out because it's connecting to a ... */RecordingProxySelector proxySelectorproxySelector.proxiesnew Proxy(...)Proxy.Type.HTTPTestUtil.UNREACHABLE_ADDRESSProxy.TypeconnectTimeout(...)proxySelector(...)/** https://github.com/square/okhttp/issues/4875 */SocketPolicy.DISCONNECT_AT_STARTaddInterceptor(...)/** https://github.com/square/okhttp/issues/4761 */hasMessageContaining(...)/** Make a request with two routes. The first route will fail because the null server connects but ... */SocketPolicy.STALL_SOCKET_AT_STARTassertFailure(...)SocketTimeoutException.class/** https://github.com/square/okhttp/issues/1801 */OkHttpClient cRecordedResponse responseresponse.requestRequestBody requestBody1new RequestBody(...) { ... }deadline(...)timeout(...)RequestBody requestBody2hasDeadline(...)BufferedSource body1BufferedSource body2assertHandshake(...)CountDownLatch requestFinishedQueueDispatcher dispatchernew QueueDispatcher(...) { ... }getSocketPolicy(...)SocketPolicy.DISCONNECT_AFTER_REQUESTpeek(...)dispatch(...)superenqueueResponse(...)setDispatcher(...)new RecordingEventListener(...) { ... }responseHeadersStart(...)dns(...)new DoubleInetAddressDns(...)retryOnConnectionFailure(...)removeUpToEvent(...)CallEnd.classConnectionAcquired.classResponseFailed.classConnectionReleased.classrecoverWhenRetryOnConnectionFailureIsTrue(...)assertFailureMatches(...)IOException.classredact(...)noRecoverWhenRetryOnConnectionFailureIsFalse(...)SocketPolicy.FAIL_HANDSHAKESSLException.classSSLProtocolException.classSSLHandshakeException.classdoesNotContain(...)ConnectionSpec.COMPATIBLE_TLSconnectionSpecs(...)suppressTlsFallbackClientSocketFactory(...)asList(...)new RecordingHostnameVerifier(...)ConnectionSpec.RESTRICTED_TLSString tlsFallbackScsvList<String> supportedCiphersgetSupportedCipherSuites(...)RecordingSSLSocketFactory clientSocketFactorynew RecordingSSLSocketFactory(...)List<SSLSocket> clientSocketsgetSocketsCreated(...)SSLSocket firstSocketSSLSocket secondSocketassumeNotConscrypt(...)SSLHandshakeException expectedgetEnabledCipherSuites(...)ConnectionSpec.CLEARTEXTSSLProtocolException expectedSSLException expectedString jvmVersiongetProperty(...)HeldCertificate serverCertificateaddSubjectAlternativeName(...)commonName(...)HeldCertificate.BuilderHandshakeCertificates serverCertificatesheldCertificate(...)HandshakeCertificates.BuilderHandshakeCertificates clientCertificatesaddTrustedCertificate(...)certificate(...)assumeNotWindows(...)/** Anonymous cipher suites were disabled in OpenJDK because they're rarely used and permit ... */assumeFalse(...)matches(...)socketFactoryWithCipherSuite(...)cipherSuites(...)ConnectionSpec.BuilderUnknownServiceException expectedprotocols(...)singletonList(...)Protocol.H2_PRIOR_KNOWLEDGEfollowSslRedirects(...)CertificatePinner.BuilderBuilder certificatePinnerBuilderCertificate certificategetHostName(...)pin(...)certificatePinner(...)isNotSameAs(...)SSLPeerUnverifiedException expectedstartsWith(...)RecordedRequest getRecordedRequest post1RecordedRequest post2postBodyRetransmittedOnFailureRecovery(...)long request1SentAtlong request1ReceivedAtRecordedResponse cacheHitassertRequestHeader(...)assertRequestUrl(...)assertRequestMethod(...)cacheResponse(...)assertNoNetworkResponse(...)long request2SentAtlong request2ReceivedAtnetworkResponse(...)RecordedResponse cacheMissassertNoCacheResponse(...)new FakeDns(...)UnknownHostException.classpriorResponse(...)RecordedRequest page1RecordedRequest page2HttpURLConnection.HTTP_MOVED_TEMPint attempt, ...;List<Cookie> responseCookiestakeResponseCookies(...)enqueueRequestCookies(...)domain(...)value(...)name(...)Cookie.BuilderCookieManager cookieManagerHttpCookie cookienew HttpCookie(...)String portListgetPort(...)setDomain(...)setPath(...)setPortlist(...)getCookieStore(...)uri(...)RecordedRequest redirectRequestString longLinestringFill(...)setProtocols(...)char[] valuenew char[]fill(...)cancel(...)cancelDuringConnect(...)/** Cancel a call that's waiting for connect to complete. */long cancelDelayMillisscheme(...)cancelLater(...)cancelAll(...)EventListener listenernew EventListener(...) { ... }join(...)eventListener(...)cancelWhileRequestHeadersAreSent(...)ExecutorService executornewSingleThreadExecutor(...)Future<Response> resultsubmit(...)...::...new Callable<Response>(...) { ... }new Dispatcher(...) { ... }cancelInFlightBeforeResponseReadThrowsIOE(...)/** This test puts a request in front of one that is to be canceled, so that it is canceled before ... */Dispatcher dispatchernew Dispatcher(...)Request requestARequest requestBCall callACall callBsetMaxRequests(...)char nextResponse, ...;canceledBeforeIOSignalsOnFailure(...)canceledBeforeResponseReadSignalsOnFailure(...)/** There's a race condition where the cancel may apply after the stream has already been ... */AtomicReference<String> bodyRefAtomicBoolean failureRefnew AtomicBoolean(...)IOException ecanceledAfterResponseIsDeliveredBreaksStreamButSignalsOnce(...)Buffer gzippedBodyString bodySizeRecordedResponse userResponse/** https://github.com/square/okhttp/issues/1927 */snapshot(...)readByteString(...)BlockingQueue<Response> responseRefnew SynchronousQueue<Response>(...)followRedirects(...)SocketPolicy.EXPECT_CONTINUEexpect100ContinueEmptyRequestBody(...)SocketTimeoutException expectedexpect100ContinueTimesOutWithoutContinue(...)SocketPolicy.CONTINUE_ALWAYSserverRespondsWithUnsolicited100Continue(...)serverRespondsWith100ContinueOnly(...)successfulExpectContinuePermitsConnectionReuse(...)assumeHttp2Support(...)/** We forbid non-ASCII characters in outgoing request headers, but accept UTF-8. */Builder headersBuilderFakeDns dnshost(...)lookup(...)assertRequests(...)List<InetAddress> ipAddressesnew ArrayList<InetAddress>(...)/** We had a bug where failed HTTP/2 calls could break the entire connection. */RequestBody requestBodyflush(...)makeFailingCall(...)isNotBlank(...)isJdk8(...)long connectCountcount(...)filter(...)stream(...)getEventSequence(...)new Predicate<CallEvent>(...) { ... }...instanceof.../** Test which headers are sent unencrypted to the HTTP proxy. */RecordingHostnameVerifier hostnameVerifierRecordedRequest connectSocketPolicy.UPGRADE_TO_SSL_AT_ENDhostnameVerifier.calls/** We had a bug where OkHttp would crash if HTTP proxies returned a truncated response. ... */hasMessage(...)/** Respond to a proxy authorization challenge. */RecordedRequest connect1RecordedRequest connect2proxyAuthenticator(...)/** Confirm that the proxy authenticator works for unencrypted HTTP proxies. */RecordedRequest get1RecordedRequest get2/** OkHttp has a bug where a `Connection: close` response header is not honored when establishing a ... */ProtocolException expected/** Confirm that we don't send the Proxy-Authorization header from the request to the proxy server. ... *//** Confirm that we can send authentication information without being prompted first. */new Authenticator(...) { ... }List<Challenge> challengeschallenges(...)List<String> challengeSchemesnew ArrayList<String>(...)/** https://github.com/square/okhttp/issues/4915 */AtomicReference<Protocol> protocolRefnew AtomicReference<Protocol>(...)Interceptor interceptorprotocol(...)connection(...)addProxy(...)new FakeProxySelector(...)upload(...)getBodySize(...)isNotEmpty(...)getChunkSizes(...)isEmpty(...)requestBody(...)/** https://github.com/square/okhttp/issues/2344 */byte[] bufferint count...+=...min(...)String messagenew ConnectionPool(...)awaitGarbageCollection(...)String localIpAddressgetHostAddress(...)getLoopbackAddress(...)HeldCertificate heldCertificateHandshakeCertificates handshakeCertificatesAtomicInteger callednew AtomicInteger(...)RequestBody bodyincrementAndGet(...)new FileNotFoundException(...)FileNotFoundException.classsetTrailers(...)BufferedSource sourcetrailers(...)closeQuietly(...)socket(...)getFailure(...)requestBodyThrowsUnrelatedToNetwork(...)/** This test cancels the call just after the response body ends. In effect we end up with a ... */OkHttpClient cancelClient/** https://github.com/square/okhttp/issues/4583 */AtomicBoolean closedForwardingSource closeTrackingSourcenew ForwardingSource(...) { ... }call(...)OkHttpClient nonRetryingClientint sizeheaders.length...[...]String bodyStringnew RecordedResponse(...)/** Tests that use this will fail unless boot classpath is set. Ex. {@code ... */Thread threadnew Thread(...) { ... }new DelegatingSSLSocketFactory(...) { ... }setEnabledCipherSuites(...)new String[]javaName(...)configureSocket(...)new ArrayList<SSLSocket>(...)List<SSLSocket> socketsCreated, ...;/** Used during tests that involve TLS connection fallback attempts. OkHttp includes the ... */new FallbackTestClientSocketFactory(...)/* Copyright (C) 2013 Square, Inc. ... */// This request will share a connection with 'A' cause it's all done.// New connection.// Connection reuse!// First request: time out after 1s.// Second request: time out after 250ms.// The second byte of this request will be delayed by 750ms so we should time out after 250ms.// Timed out as expected.// If this succeeds, too many requests were made.// Call 1: set a deadline on the request body.// Call 2: check for the absence of a deadline on the request body.// Use sequence numbers to confirm the connection was pooled.// Call 1: set a deadline on the response body.// Set to 2 because the seeding request will count down before the retried request does.// The call that seeds the connection pool.// The ResponseFailed event is not necessarily fatal!// JDK 11 response to the FAIL_HANDSHAKE// RI response to the FAIL_HANDSHAKE// Android's response to the FAIL_HANDSHAKE// Attempt RESTRICTED_TLS then fall back to MODERN_TLS.// This only works if the client socket supports TLS_FALLBACK_SCSV.// Unusued for hostname verification.// The _anon_ suites became unsupported in "1.8.0_201" and "11.0.2".// Configure the client with only TLS configurations. No cleartext!// Fails on 11.0.1 https://github.com/square/okhttp/issues/4703// Make a first request without certificate pinning. Use it to collect certificates to pin.// Make another request with certificate pinning. It should complete normally.// Pin publicobject.com's cert.// When we pin the wrong certificate, connectivity fails.// Seed the connection pool so we have something that can fail.// Store a response in the cache.// Hit that stored response. It's different, but Vary says it doesn't matter.// Make sure the timestamps are unique.// Check the merged response. The request is the application's original request.// Check the cached response. Its request contains only the saved Vary headers.// No If-None-Match on the user's request.// No Vary on Accept-Language.// Because of Vary on Accept-Charset.// This wasn't present in the original request.// Check the network response. It has the caller's request, plus some caching headers.// If-None-Match in the validation request.// Different request, but Vary says it doesn't matter.// Check the user response. It has the application's original request.// Check the cache response. Even though it's a miss, we used the cache.// Check the network response. It has the network request, plus caching headers.// Attempt conditional cache validation and a DNS miss.// Connection reused.// Connection reused again!// given// when// then// Cancel call from another thread to avoid reentrance.// wait for it to go in flight.// Force requests to be executed serially.// At this point we know the callback is ready, and that it will receive a cancel failure.// It is ok if this broke the stream.// We expect to not loop into onFailure in this case.// We expect an exception.// Confirm that the user request doesn't have Accept-Encoding, and the user// response doesn't have a Content-Encoding or Content-Length.// But the network request doesn't lie. OkHttp used gzip for this call.// Enqueue a gzipped response. Our request isn't expecting it, but that's okay.// Make a range request.// The response is not decompressed.// The request did not offer gzip support.// Make another request just to confirm that that connection can be reused...// ... even before we close the response body!// Configure a DNS that returns our local MockWebServer for android.com.// First CONNECT call needs a new connection.// Second CONNECT call needs a new connection.// GET reuses the connection from the second connect.// Capture the protocol as it is observed by the interceptor.// Make an HTTP/2 request and confirm that the protocol matches.// Enable a misconfigured proxy selector to guarantee that the request is retried.// This may fail in DNS lookup, which we don't have timeouts for.// Use a proxy to fake IPv6 connectivity, even if localhost doesn't have IPv6.// Ignore the response so it gets leaked then GC'd.// There's some flakiness when triggering a GC for objects in a separate thread. Adding a// small delay appears to ensure the objects will get GC'd.// Create a certificate with an IP address in the subject alt name.// Use that certificate on the server and trust it on the client.// Make a request.// Confirm that the IP address was used in the host header.// For determinism, always send a partial request to the server.// Cancel after we have the response.import X509Certificateimport X509TrustManagerimport CertificateChainCleanerHeldCertificate rootAserialNumber(...)HeldCertificate rootBCertificateChainCleaner.CompanionX509TrustManager x509TrustManagerHeldCertificate rootCertificateChainCleaner cleanerlist(...)clean(...)HeldCertificate certAsignedBy(...)HeldCertificate certBHeldCertificate certCHeldCertificate certUnnecessaryHeldCertificate selfSignedHeldCertificate trustedHeldCertificate unknownSignerHeldCertificate intermediateCaHeldCertificate certificateList<HeldCertificate> heldCertificateschainOfLength(...)List<Certificate> certificatesnew ArrayList<Certificate>(...)X509Certificate rootsubList(...)/** Returns a chain starting at the leaf certificate and progressing to the root. */List<HeldCertificate> resultnew ArrayList<HeldCertificate>(...)List<Certificate> result/* Copyright (C) 2016 Square, Inc. ... */// Root is added!import HashSetimport static CertificatePinner.sha1Hashimport static ByteString.decodeBase64import static Assertions.assertEqualsimport static Assertions.assertFalseimport static Assertions.assertTruebase64(...)sha1Hash(...)HeldCertificate certA1, ...;String certA1Sha256Pin, ...;HeldCertificate certB1, ...;String certB1Sha256Pin, ...;HeldCertificate certC1, ...;String certC1Sha1Pin, ...;/** Multiple certificates generated from the same keypair have the same pin. */HeldCertificate heldCertificateA2keyPair(...)String keypairACertificate2PinHeldCertificate heldCertificateB2String keypairBCertificate2PinCertificatePinner certificatePinnercheck(...)new Pin(...)CertificatePinner.PinIllegalArgumentException iaePin pinassertEquals(...)decodeBase64(...)getHash(...)getHashAlgorithm(...)getPattern(...)assertTrue(...)matchesHostname(...)assertFalse(...)matchesCertificate(...)List<Pin> expectedPinsgetPins(...)new HashSet<Pin>(...)// Should be pinned:// Should not be pinned:// expectedimport static CipherSuite.TLS_KRB5_WITH_DES_CBC_MD5import static CipherSuite.TLS_RSA_EXPORT_WITH_RC4_40_MD5import static CipherSuite.TLS_RSA_WITH_AES_128_CBC_SHA256import static CipherSuite.forJavaNameimport static Internal.applyConnectionSpecforJavaName(...)NullPointerException expectedCipherSuite csoverridingErrorMessage(...)identityHashCode(...)/** Tests that interned CipherSuite instances remain the case across garbage collections, even if ... */gc(...)/** On the Oracle JVM some older cipher suites have the "SSL_" prefix and others have the "TLS_" ... */FakeSslSocket socketnew FakeSslSocket(...)ConnectionSpec connectionSpectlsVersions(...)TlsVersion.TLS_1_0setEnabledProtocols(...)setSupportedCipherSuites(...)applyConnectionSpec(...)socket.enabledCipherSuitesTlsVersion.TLS_1_1TlsVersion.TLS_1_2TlsVersion.TLS_1_3socket.enabledProtocols...[] enabledProtocols, ...;...[] supportedCipherSuites, ...;...[] enabledCipherSuites, ...;this.enabledProtocolsthis.supportedCipherSuitesthis.enabledCipherSuites/* Copyright (C) 2016 Google Inc. ... */// This one's javaName starts with "SSL_".// This one's javaName matches the identifier.// We're not holding onto a reference to this String instance outside of the CipherSuite...// Unless cs references the String instance, it may now be garbage collected.// Shouldn't throw.// These would have been considered equal in OkHttp 3.3.1, but now aren't.import InetSocketAddressHeldCertificate rootCa, ...;HeldCertificate certificate, ...;FakeDns dns, ...;HttpUrl url, ...;List<InetAddress> serverIps, ...;HandshakeCertificates serverHandshakeCertificatescertificateAuthority(...)emptyList(...)/** Test connecting to the main host then an alternative, although only subject alternative names ... */HttpUrl sanUrlassert200Http2Response(...)connectionCount(...)/** Test connecting to an alternative host then common name, although only subject alternative ... *//** Test a previously coalesced connection that's no longer healthy. */AtomicReference<Connection> connectionnew AtomicReference<Connection>(...)/** This is an extraordinary test case. Here's what it's trying to simulate. ... */CountDownLatch latch1CountDownLatch latch2CountDownLatch latch3CountDownLatch latch4EventListener listener1EventListener request2ListenerOkHttpClient client1Call call1OkHttpClient client2Call call2/** If the existing connection matches a SAN but not a match for DNS then skip. */HttpUrl differentDnsUrl/** Not in the certificate SAN. */HttpUrl nonsanUrl/** Can still coalesce when pinning is used if pins match. */CertificatePinner pinner/** Certificate pinning used and not a match will avoid coalescing and try to connect. *//** Skips coalescing when hostname verifier is overridden since the intention of the hostname ... */HostnameVerifier verifier/** Check we would use an existing connection to a later DNS result instead of connecting to the ... */AtomicInteger connectCountgetAndIncrement(...)getByAddress(...)/** Check that wildcard SANs are supported. *//** Network interceptors check for changes to target. *//** Won't coalesce if we can't clean certs e.g. a dev setup. */X509TrustManager TRUST_MANAGERnew X509TrustManager(...) { ... }new X509Certificate[]/* Copyright (C) 2017 Square, Inc. ... */// Simulate a stale connection in the pool.// Wait for request2 to guarantee we make 2 separate connections to the server.// We have the connection and it's in the pool. Let request2 proceed to make a connection.// Let request1 proceed to make a connection.// Wait until request1 makes the connection and puts it in the connection pool.// We obtained the coalesced connection. Let request1 violently destroy it.// Get a reference to the connection so we can violently destroy it.// Wait until request2 acquires the connection before we destroy it violently.// Fresh connection.// Seed the connection pool.// Use the coalesced connection which should retry on a fresh connection.import static Util.closeQuietlynewClient(...)assertConnectionReused(...)enableHttp2(...)assertConnectionNotReused(...)setBodyDelay(...)Response responseAResponse responseBHandshakeCertificates handshakeCertificates2OkHttpClient anotherClientenableHttps(...)/** Regression test for an edge case where closing response body in the HTTP engine doesn't release ... */List<Response> responsesNotClosednew ArrayList<Response>(...)enableHttpsAndAlpn(...)requests.length// Discard the response body.// Give the thread pool a chance to evict.// This client shares a connection pool but has a different SSL socket factory.// This client fails to connect because the new SSL socket factory refuses.// Since this test knowingly leaks a connection, avoid using the default shared connection// pool, which should remain clean for subsequent tests.// No connection reuse.import PlatformVersionimport CopyOnWriteArraySetnew TlsVersion[]new CipherSuite[]ConnectionSpec cleartextSpecisTls(...)ConnectionSpec tlsSpecsupportsTlsExtensions(...)CipherSuite.TLS_RSA_WITH_RC4_128_MD5SSLSocket socketcreateSocket(...)CipherSuite.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256CipherSuite.TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHAisCompatible(...)getEnabledProtocols(...)containsExactlyInAnyOrder(...)List<String> expectedCipherSuitescontainsExactlyElementsOf(...)allEnabledCipherSuites(...)SSLSocket sslSocketisAndroid(...)Integer sdkVersionandroidSdkVersion(...)... && ...... >= ...CipherSuite.TLS_AES_128_GCM_SHA256CipherSuite.TLS_AES_256_GCM_SHA384CipherSuite.TLS_CHACHA20_POLY1305_SHA256allEnabledTlsVersions(...)... > ...getMajorVersion(...)PlatformVersion.INSTANCETlsVersion.SSL_3_0Platform.CompanionConnectionSpec allCipherSuitesConnectionSpec allTlsVersionsSet<Object> setnew CopyOnWriteArraySet<Object>(...)/* isFallback */// Supporting arbitrary input strings allows users to enable suites and versions that are not// yet known to the library, but are supported by the platform.// https://developer.android.com/reference/javax/net/ssl/SSLSocketimport ParseExceptionimport Objectsimport static Internal.parseCookieimport static DatesKt.MAX_DATECookie cookieexpiresAt(...)parseCookie(...)Long.MIN_VALUEpath(...)hostOnly(...)secure(...)httpOnly(...)date(...)/** If no domain is present, match only the origin domain. *//** Ignore an optional leading `.` in the domain. *//** Ignore the entire attribute if the domain ends with `.`. */HttpUrl urlWithIp/** These public suffixes were selected by inspecting the publicsuffix.org list. It's possible they ... */HttpUrl asciiHttpUrl unicodeHttpUrl punycode/** If a cookie incorrectly defines multiple 'Max-Age' attributes, the last one defined wins. *//** If a cookie incorrectly defines multiple 'Expires' attributes, the last one defined wins. */persistent(...)List<Cookie> cookiesparseAll(...)hostOnlyDomain(...)Long.MAX_VALUEgetTime(...)List<String> cookieStringsString stringACookie cookieAString stringBCookie cookieBSimpleDateFormat formatUtil.UTC// Max-Age = 1, Expires = 2. In either order.// Max-Age = 2, Expires = 1. In either order.import CookieHandlerimport URIimport LinkedHashMapimport Map/** Derived from Android's CookiesTest. */HttpUrl urlWithIpAddressurlWithIpAddress(...)List<HttpCookie> cookiesgetCookies(...)getName(...)getValue(...)getComment(...)getCommentURL(...)getDiscard(...)isGreaterThan(...)getMaxAge(...)getSecure(...)getVersion(...)HttpUrl serverUrlHttpCookie cookieAHttpCookie cookieBCookieHandler androidCookieHandlernew CookieHandler(...) { ... }singletonMap(...)MockWebServer redirectTargetHttpUrl redirectTargetUrlMockWebServer redirectSourceHttpUrl redirectSourceUrlnames(...)new CookieManager(...) { ... }Map<String,List<String>> resultnew LinkedHashMap<String,List<String>>(...)p10p11p12p13p14p15p16p17p18p19JavaNetCookieJar cookieJarList<Cookie> actualCookiesloadForRequest(...)saveFromResponse(...)HttpUrl url1HttpUrl url2getByName(...)/* Copyright (C) 2010 The Android Open Source Project ... */// Converting to a fixed date can cause rounding!import SSLSessionimport SSLSessionContext/** An {@link SSLSession} that delegates all calls. */SSLSession delegate, ...;this.delegategetId(...)getSessionContext(...)getCreationTime(...)getLastAccessedTime(...)invalidate(...)isValid(...)putValue(...)removeValue(...)getValueNames(...)getPeerCertificates(...)getLocalCertificates(...)getPeerCertificateChain(...)getPeerPrincipal(...)getLocalPrincipal(...)getCipherSuite(...)getProtocol(...)getPeerHost(...)getPeerPort(...)getPacketBufferSize(...)getApplicationBufferSize(...)/* Copyright 2019 Square Inc. ... */import OutputStreamimport InvocationTargetExceptionimport Socketimport SocketAddressimport SocketExceptionimport SocketOptionimport SocketChannelimport HandshakeCompletedListenerimport SSLParameters/** An {@link SSLSocket} that delegates all calls. */SSLSocket delegate, ...;shutdownInput(...)shutdownOutput(...)getSupportedProtocols(...)getSession(...)addHandshakeCompletedListener(...)removeHandshakeCompletedListener(...)startHandshake(...)setUseClientMode(...)getUseClientMode(...)setNeedClientAuth(...)setWantClientAuth(...)getNeedClientAuth(...)getWantClientAuth(...)setEnableSessionCreation(...)getEnableSessionCreation(...)getSSLParameters(...)setSSLParameters(...)getInetAddress(...)getInputStream(...)getKeepAlive(...)getLocalAddress(...)getLocalPort(...)getOutputStream(...)getSoLinger(...)getReceiveBufferSize(...)getSendBufferSize(...)getSoTimeout(...)getTcpNoDelay(...)setKeepAlive(...)setSendBufferSize(...)setReceiveBufferSize(...)setSoLinger(...)setSoTimeout(...)setTcpNoDelay(...)getLocalSocketAddress(...)getRemoteSocketAddress(...)isBound(...)isConnected(...)isClosed(...)bind(...)connect(...)isInputShutdown(...)isOutputShutdown(...)setReuseAddress(...)getReuseAddress(...)setOOBInline(...)getOOBInline(...)setTrafficClass(...)getTrafficClass(...)sendUrgentData(...)getChannel(...)setPerformancePreferences(...)// Java 9 methods.invoke(...)SSLSocket.classReflectiveOperationException e...|...SocketOption<>.classObject.class? .../* Copyright 2014 Square Inc. ... */// Can only override with JDK 9+// Using reflection to delegate./** A {@link SSLSocketFactory} that delegates calls. Sockets can be configured after creation by ... */SSLSocketFactory delegate, ...;getDefaultCipherSuites(...)// No-op by default.import ServerSocketimport ServerSocketFactory/** A {@link ServerSocketFactory} that delegates calls. Sockets can be configured after creation by ... */ServerSocketFactory delegate, ...;ServerSocket serverSocketcreateServerSocket(...)configureServerSocket(...)/** A {@link SocketFactory} that delegates calls. Sockets can be configured after creation by ... */SocketFactory delegate, ...;Socket socketimport static TimeUnit.SECONDSnew RecordingExecutor(...)new RecordingWebSocketListener(...)RecordingExecutor executor, ...;RecordingWebSocketListener webSocketListener, ...;Dispatcher dispatcher, ...;setMaxRequestsPerHost(...)forbidLock(...)newRequest(...)assertJobs(...)finishJob(...)Call c1Call c2Call a1Call a2Call a3Call a4Call a5runningCallsCount(...)queuedCallsCount(...)runningCalls(...)queuedCalls(...)CountDownLatch readyCountDownLatch waitingThread t1makeSynchronousCall(...)Thread t2isExecuted(...)isCanceled(...)AtomicBoolean idleCountDownLatch proceedsetIdleCallback(...)new Runnable(...) { ... }InterruptedIOException.classrecordedEventTypes(...)new Thread(...)tag(...)// We created 4 calls and started 2 of them. That's 2 running calls and 0 queued.// Cancel some calls. That doesn't impact running or queued.// Let the calls finish.// Now we should have 0 running calls and 0 queued calls.// Trigger promotion.import LinkedBlockingQueueimport MockDuplexResponseBodyimport AsyncRequestBodyimport MwsDuplexAccessimport ErrorCodeimport static TestCase.assertTruenew AsyncRequestBody(...)MockDuplexResponseBody mockDuplexResponseBodyenqueueResponseWithBody(...)exhaustResponse(...)exhaustRequest(...)sendResponse(...)receiveRequest(...)new MockDuplexResponseBody(...)BufferedSink requestBodytakeSink(...)BufferedSource responseBodyawaitSuccess(...)/** Duplex calls that have follow-ups are weird. By the time we know there's a follow-up we've ... */CountDownLatch duplexResponseSentrequestIOException(...)responseHeadersEnd(...)/** Auth requires follow-ups. Unlike redirects, the auth follow-up also has a request body. This ... */MockDuplexResponseBody mockResponseBody1MockDuplexResponseBody mockResponseBody2BufferedSink requestBody1BufferedSink requestBody2BufferedSource responseBody2assertNoMoreSinks(...)setHeadersDelay(...)new UppercaseResponseInterceptor(...)new UppercaseRequestInterceptor(...)/** OkHttp currently doesn't implement failing the request body stream independently of failing the ... */BlockingQueue<String> lognew LinkedBlockingQueue<String>(...)cancelStream(...)ErrorCode.NO_ERRORException eMwsDuplexAccess.instance/* Copyright (C) 2018 Square, Inc. ... */// Wait for the server to send the duplex response before acting on the 301 response// and resetting the stream.// First duplex request is detached with violence.// Second duplex request proceeds normally.// No more requests attempted!// Long enough for the first TLS handshake.import CallFailedimport CallStartimport ConnectEndimport ConnectFailedimport DnsEndimport DnsStartimport RequestBodyEndimport RequestBodyStartimport RequestHeadersEndimport RequestHeadersStartimport ResponseBodyEndimport ResponseBodyStartimport ResponseHeadersEndimport ResponseHeadersStartimport SecureConnectEndimport SecureConnectStartimport RealConnectionPoolimport HttpLoggingInterceptorimport BaseMatcherimport CoreMatchersimport Descriptionimport Matcherimport Assertimport static CoreMatchers.anyimport static CoreMatchers.equalToimport static Assume.assumeThatany(...)Response.classMatcher<Response> anyResponse, ...;SocksProxy socksProxy, ...;RealConnectionPool.CompanionCountDownLatch completionLatchCallback callbackisIn(...)ResponseFailed responseFailedSocketPolicy.DISCONNECT_DURING_RESPONSE_BODYgetIoe(...)assumeThat(...)enableTlsWithTunnel(...)RequestHeadersEnd responseHeadersEndRequestHeadersEnd.classgetHeaderLength(...)RequestBodyEnd responseBodyEndRequestBodyEnd.classgetBytesWritten(...)ResponseHeadersEnd responseHeadersEndResponseHeadersEnd.classResponseBodyEnd responseBodyEndResponseBodyEnd.classgetBytesRead(...)new BaseMatcher<Long>(...) { ... }appendText(...)new BaseMatcher<Response>(...) { ... }assertSuccessfulEventOrder(...)matchesProtocol(...)assertBytesReadWritten(...)greaterThan(...)equalTo(...)Long.classDnsStart dnsStartDnsStart.classDnsEnd dnsEndDnsEnd.classgetCall(...)getDomainName(...)getInetAddressList(...)List<String> recordedEventsclearAllEvents(...)CallFailed callFailedCallFailed.classisInstanceOf(...)Dns emptyDnsnew Dns(...) { ... }InetAddress addressInetSocketAddress expectedAddressnew InetSocketAddress(...)ConnectStart connectStartConnectStart.classConnectEnd connectEndConnectEnd.classgetInetSocketAddress(...)getProxy(...)ConnectFailed connectFailedConnectFailed.classProxy proxySocksProxy.HOSTNAME_THAT_ONLY_THE_PROXY_KNOWScreateUnresolved(...)new SocksProxy(...)play(...)SecureConnectStart secureStartSecureConnectStart.classSecureConnectEnd secureEndSecureConnectEnd.classgetHandshake(...)ConnectionAcquired connectionAcquiredgetConnection(...)List<String> remainingEventsConnectionAcquired connectionAcquired1ConnectionAcquired connectionAcquired2responseBodyFail(...)int responseBodySizerequestBodyFail(...)NonCompletingRequestBody requestnew NonCompletingRequestBody(...)SocketPolicy.DISCONNECT_DURING_REQUEST_BODYrequest.ioeIOException ioe, ...;writeChunk(...)int failureCountrequestBodySuccess(...)setLevel(...)new HttpLoggingInterceptor(...)HttpLoggingInterceptor.Level.BODYHttpLoggingInterceptor.LeveltimeToFirstByte(...)/** Test to confirm that events are reported at the time they occur and no earlier and no later. ... */long applicationInterceptorDelaylong networkInterceptorDelaylong requestBodyDelaylong responseHeadersStartDelaylong responseBodyStartDelaylong responseBodyEndDelayCall warmUpCallnew InterruptedIOException(...)Response warmUpResponsetakeEvent(...)CallStart.classRequestHeadersStart.classRequestBodyStart.classResponseHeadersStart.classResponseBodyStart.classMockWebServer otherServerResponse aResponse.Builder/** Response headers start, then the entire request body, then response headers end. */enableCache(...)CacheControl.FORCE_CACHEmakeCache(...)File cacheDircreateTempFile(...)// STDOUT logging enabled for test// Seed the pool.// Use a 2 MiB body so the disconnect won't happen until the client has read some data.// 2 MiB// soft failure since client may not support depending on Platform// Warm up the client so the timing part of the test gets a pooled connection.// Create a client with artificial delays.// Create a request body with artificial delays.// Create a response with artificial delays.// Make the call.// Confirm the events occur when expected./** An SSLSocketFactory that delegates calls. Sockets created by the delegate are wrapped with ones ... */String TLS_FALLBACK_SCSV, ...;/** The cipher suite used during TLS connection fallback to indicate a fallback. See ... */new TlsFallbackScsvDisabledSSLSocket(...)List<String> enabledCipherSuitessuites.lengthString suitetoArray(...)import StandardCharsetsimport CharsetFormBody bodyFormBody.BuilderString expectedBuffer outencodedName(...)encodedValue(...)contentType(...)contentLength(...)writeTo(...)addEncoded(...)Buffer bufferformEncode(...)new int[]StandardCharsets.ISO_8859_1// Browsers convert '\u0000' to '%EF%BF%BD'.// Browsers convert '\n' to '\r\n'// Browsers convert '\r' to '\r\n'// Browsers use '+' for space.// Wrap the codepoint with regular printable characters to prevent trimming.// Skip "a=b" prefix.// Skip the "c" suffix.import Instantimport HttpHeadersimport Headerimport Http2ExchangeCodecimport static Collections.emptyListimport static Collections.emptyMapimport static Collections.singletonMapimport static TestUtil.headerEntriesHeaders headerBlockreadHttp2HeadersList(...)Http2ExchangeCodec.CompanionList<Header> expectedheaderEntries(...)http2HeadersList(...)addUnsafeNonAscii(...)String[] namesAndValuesMap<String,String> namesAndValuesnew LinkedHashMap<String,String>(...)Map<String,List<String>> headerMaptoMultimap(...)IndexOutOfBoundsException expectedHeaders headers1Headers headers2Headers sourceHeadersaddAll(...)/** See https://github.com/square/okhttp/issues/2780. */parseChallenges(...)Map<String,String> expectedAuthParamsrealm(...)authParams(...)emptyMap(...)new Challenge(...)byteCount(...)Util.EMPTY_HEADERSDate expectedgetDate(...)Instant expectedofEpochMilli(...)getInstant(...)/* Copyright (C) 2012 Square, Inc. ... */// Name leading whitespace is trimmed.// Name trailing whitespace is trimmed.// '\t' also counts as whitespace// Value whitespace is trimmed.// Space after colon is not required.// Strict RFC 2617 camelcased.// Scheme only.IllegalArgumentException e/* Copyright (C) 2020 Square, Inc. ... */import URLimport Componentimport EncodingHttpUrl expectedString hostassertInvalid(...)encodedPath(...)HttpUrl baseHttpUrl baseWithPasswordAndUsernameHttpUrl baseWithUsernameOnlyHttpUrl baseWithPasswordOnly/** https://tools.ietf.org/html/rfc3986#section-5.4.1 *//** https://tools.ietf.org/html/rfc3986#section-5.4.2 *//** Given multiple '@' characters, the last one is the delimiter. */HttpUrl httpUrlusername(...)password(...)/** Given multiple ':' characters, the first one is the delimiter. */encodedPassword(...)test(...)escapeForUri(...)Component.USERoverride(...)Encoding.SKIPnewInstance(...)Encoding.PERCENTComponent.PASSWORDstripForUri(...)Component.HOSTEncoding.IDENTITYEncoding.FORBIDDENnonAscii(...)nonPrintableAscii(...)/** This one's ugly: the HttpUrl's host is non-empty, but the URI's host is null. */getHost(...)port(...)String a3/** The builder permits square braces but does not require them. *//** Strip unexpected characters when converting to URI (which is more strict). ... *//** Confirm that URI retains other characters. https://github.com/square/okhttp/issues/5236 */Component.PATHComponent.QUERYComponent.QUERY_VALUEComponent.FRAGMENTfragment(...)encodedFragment(...)new URI(...)pathSegments(...)HttpUrl.Builderquery(...)addPathSegment(...)encodedUsername(...)encodedQuery(...)addEncodedPathSegment(...)encodedPathSegments(...)pathSize(...)addPathSegments(...)addEncodedPathSegments(...)setPathSegment(...)setEncodedPathSegment(...)removePathSegment(...)URL javaNetUrlURI uriqueryParameter(...)/** When callers use {@code addEncodedQueryParameter()} we only encode what's strictly required. We ... */addEncodedQueryParameter(...)/** When callers parse a URL with query components that aren't encoded, we shouldn't convert them ... */new URL(...)assumeNotAndroid(...)queryParameterValue(...)queryParameterName(...)singleton(...)queryParameterNames(...)queryParameterValues(...)querySize(...)removeAllQueryParameters(...)removeAllEncodedQueryParameters(...)setQueryParameter(...)setEncodedQueryParameter(...)/** Although HttpUrl prefers percent-encodings in uppercase, it should preserve the exact structure ... */String urlStringtopPrivateDomain(...)// Leading.// Trailing.// Both.// TODO make exception message escape non-printable characters// Whitespace characters list from Google's Guava team: http://goo.gl/IcR9RD// line tabulation// information separator 4// information separator 3// information separator 2// information separator 1// next line// non-breaking space// ogham space mark// mongolian vowel separator// en quad// em quad// en space// em space// three-per-em space// four-per-em space// six-per-em space// figure space// punctuation space// thin space// hair space// zero-width space// zero-width non-joiner// zero-width joiner// left-to-right mark// right-to-left mark// line separator// paragraph separator// narrow non-breaking space// medium mathematical space// ideographic space// Non-exhaustive tests because implementation is the same as resolve.// No 'g:' scheme in HttpUrl.// "http:g" also okay.// Chrome doesn't mind, but Firefox rejects URLs with empty usernames and non-empty passwords.// The soft hyphen () should be ignored.// Map the single character telephone symbol () to the string "tel".// Host names are special://  * Several characters are forbidden and must throw exceptions if used.//  * They don't use percent escaping at all.//  * They use punycode for internationalization.//  * URI is much more strict that HttpUrl or URL on what's accepted.// HttpUrl is quite lenient with what characters it accepts. In particular, characters like '{'// and '"' are permitted but unlikely to occur in real-world URLs. Unfortunately we can't just// lock it down due to URL templating: "http://{env}.{dc}.example.com".// Square braces are absent from host()...// ... but they're included in toString().// IPv6 colons don't interfere with port numbers or passwords.// Permit the contents of IPv6 addresses to be percent-encoded...// Including the Square braces themselves! (This is what Chrome does.)// Multiple representations of the same address; see http://tools.ietf.org/html/rfc5952.// java.net.InetAddress parses scoped addresses. These aren't valid in URLs.// Guava's been buggy on this case. https://github.com/google/guava/issues/3116// Chrome interprets a leading '0' as octal; Firefox rejects them. (We reject them.)// Chrome interprets a leading '0x' as hexadecimal; Firefox rejects them. (We reject them.)// To Chrome & Safari these are well-formed; Firefox disagrees. (We're consistent with Firefox).// Control characters may be stripped!// Unicode replacement character.// Replace a partial UTF-8 sequence with the Unicode replacement character.// Add a string with zero slashes: resulting URL gains one slash.// Add a string with one slash: resulting URL gains two slashes.// Add a string with two slashes: resulting URL gains three slashes.// Add a string with zero slashes: resulting URL gains zero slashes.// Add a string with one slash: resulting URL gains one slash.// Add a string with two slashes: resulting URL gains two slashes.// Percent-encoded in the path.// Percent-encoded in the query.// Stripped from the fragment.// java.net.MalformedURLException: unknown protocol: mailto// Ambiguous! (Though working as designed.)// https://github.com/square/okhttp/issues/6109// https://www.gosecure.net/blog/2020/10/27/weakness-in-java-tls-host-verification/// Map the Kelvin symbol () to the string "k".import ThreadPoolExecutorimport Unitimport ForwardingSinkimport Sinkimport Sourceimport static TestUtil.assertSuppressedResponse interceptorResponseaddress(...)route(...)String sameHostint differentPortConnection connectionRequest networkRequestResponse networkResponseRequest originalRequestMediaType mediaTyperewriteRequestToServer(...)uppercase(...)rewriteResponseFromServer(...)Response originalResponsemultipleInterceptors(...)asyncInterceptors(...)/** Make sure interceptors can interact with the OkHttp client. *//** Make sure interceptors can interact with the OkHttp client asynchronously. */RecordingCallback callbackBRecordingCallback callbackAinterceptorThrowsRuntimeExceptionSynchronous(...)/** When an interceptor throws an unexpected exception, synchronous callers can catch it and deal ... */RuntimeException expectedInterceptor modifyHeaderInterceptorRequest modifiedRequestinterceptorThrowsRuntimeExceptionAsynchronous(...)/** When an interceptor throws an unexpected exception, asynchronous calls are canceled. The ... */RuntimeException boomExceptionCatchingExecutor executornew ExceptionCatchingExecutor(...)recordedResponse.failureassertSuppressed(...)new Function1<List<Throwable>,Unit>(...) { ... }Unit.INSTANCEtakeException(...)Interceptor interceptor1Interceptor.ChainChain chainBwithConnectTimeout(...)connectTimeoutMillis(...)Interceptor interceptor2InetAddress localhostnew ServerSocket(...)getCanonicalHostName(...)new Socket(...)withReadTimeout(...)readTimeoutMillis(...)ResponseBody bodywithWriteTimeout(...)writeTimeoutMillis(...)byte[] datawriteTimeout(...)AtomicReference<Call> callRefnew AtomicReference<Call>(...)Sink uppercaseBufferedSink bufferedSinkemit(...)new ForwardingSink(...) { ... }toUpperCase(...)Buffer mixedCase/** Catches exceptions that are otherwise headed for the uncaught exception handler. */new LinkedBlockingQueue<Exception>(...)BlockingQueue<Exception> exceptions, ...;new SynchronousQueue<Runnable>(...)// Accept no connections.// The network request has everything: User-Agent, Host, Accept-Encoding.// The network response also has everything, including the raw gzipped content.// No extra headers in the application's request.// No extra headers in the application's response.// 1. Added first.// 4. Added last.// 2. Added second.// 3. Added third.// Fetched by interceptor.// Fetched directly.// Fill backlog queue with this request so subsequent requests will be blocked.// 2 MiB.// we want this call to throw a SocketTimeoutExceptionimport static StandardCharsets.UTF_8/** Test MediaType API and parsing. ... */type(...)subtype(...)charset(...)assertMediaType(...)parameter(...)/** This is invalid according to RFC 822. But it's what Chrome does and it avoids a potentially ... */MediaType noCharsetMediaType charsetStandardCharsets.US_ASCII// Charset.forName("'utf-8'") == UTF-8MultipartBody.BuilderMultipartBody bodyaddPart(...)boundary(...)MultipartBody.MIXEDparts(...)addFormDataPart(...)setType(...)MultipartBody.FORMgetBytes(...)new StreamingBody(...)String body, ...;this.bodyBuilder multipartBuffer part1BufferMultipartBody.PartPart part1part(...)import ProxySelectorimport KeyManagementExceptionimport AbstractListimport SSLContextimport NullProxySelectorimport static Assertions.assertNotSameimport static Assertions.assertSameProxySelector DEFAULT_PROXY_SELECTOR, ...;CookieHandler DEFAULT_COOKIE_HANDLER, ...;ResponseCache DEFAULT_RESPONSE_CACHE, ...;OkHttpClient clientcallTimeoutMillis(...)pingIntervalMillis(...)minWebSocketMessageToCompress(...)callTimeout(...)ofNanos(...)IllegalArgumentException ignoredofDays(...)OkHttpClient originalinterceptors(...)networkInterceptors(...)/** When copying the client, stateful things like the connection pool are shared across all ... */OkHttpClient aOkHttpClient bx509TrustManager(...)Protocol.HTTP_1_0OkHttpClient clientAOkHttpClient clientBOkHttpClient okHttpClientsocketFactory(...)List<Protocol> nullHostileProtocolsnew AbstractList<Protocol>(...) { ... }new NullPointerException(...)indexOf(...)new IndexOutOfBoundsException(...)List<Protocol> protocolsnew ArrayList<Protocol>(...)Protocol.SPDY_3isNotInstanceOf(...)NullProxySelector.classFakeProxySelector.classProxySelector proxySelectornew ProxySelector(...) { ... }X509TrustManager trustManagerplatformTrustManager(...)SSLContext sslContextnewSSLContext(...)init(...)assertNotSame(...)getRouteDatabase(...)assertSame(...)getSocketFactory(...)// Values should be non-null.// Multiple clients share the instances.// new client, may share all same fields but likely different connection pool// same client with no change affecting route db// logically different scope of client for route dbimport static Assertions.assertThrowsProtocol.QUICassertThrows(...)new Executable(...) { ... }import HttpMethodpermitsRequestBody(...)requiresRequestBody(...)hasBody(...)/* Copyright (C) 2019 Square, Inc. ... *//** A received response or failure recorded by the response recorder. */Request request, ...;Response response, ...;WebSocket webSocket, ...;IOException failure, ...;this.requestthis.responsethis.webSocketthis.failureisSuccessful(...)Handshake handshaketlsVersion(...)/** Asserts that the current response was redirected and returns the prior response. */Response priorResponse/** Asserts that the current response used the network and returns the network response. *//** Asserts that the current response didn't use the network. *//** Asserts that the current response didn't use the cache. *//** Asserts that the current response used the cache and returns the cache response. */Response cacheResponseboolean foundClass<> expectedClassisInstance(...)String patternassertDateInRange(...)sentRequestAtMillis(...)isBetween(...)/** Records received HTTP responses so they can be later retrieved by tests. */new ArrayList<RecordedResponse>(...)long TIMEOUT_MILLIS, ...;List<RecordedResponse> responses, ...;notifyAll(...)String body/** Returns the recorded response triggered by {@code request}. Throws if the response isn't ... */long timeoutMillislong nowMillisIterator<RecordedResponse> iiterator(...)recordedResponse.requestwait(...)// TODOimport FileWriterimport UUIDMediaType contentTypebodyToHex(...)encodeUtf8(...)File fileFileWriter writernew FileWriter(...)/** Common verbs used for apis such as GitHub, AWS, and Google Cloud. */Request getRequest headRequest deleteRequest postRequest putRequest patchRequest requestWithoutCacheRequest builtRequestWithoutCacheRequest requestWithCacheRequest builtRequestWithCacheassertForbiddenHeader(...)UUID.classString.classUUID tagrandomUUID(...)UUID uuidTagUUID uuidTag1UUID uuidTag2String stringTagLong longTagObject objectTagnew Object(...)/** Confirm that we don't accidentally share the backing map between objects. */Request requestChex(...)// cache url objectimport InputStreamReaderimport Readernew ResponseBody(...) { ... }Buffer sourceexhaust(...)charStream(...)Reader reader... & ...bytes(...).lengthbyte[] bytesByteString.EMPTYbyteString(...)ByteString actualByteString expecteddecodeHex(...)new InputStreamReader(...)StringBuilder buildernew StringBuilder(...)char[] bufint readappend(...)import static Assertions.assertThatThrownBynewResponse(...)responseBody(...)ResponseBody peekedBodypeekBody(...)ResponseBody p1ResponseBody p2assertThatThrownBy(...)IllegalStateException.classnew ThrowingCallable(...) { ... }/** Returns a new response body that refuses to be read once it has been closed. This is true of ... */Buffer dataSource sourcenew Source(...) { ... }boolean closed, ...;Timeout.NONEimport ConcurrentHashMapimport Levelimport Logger/** A limited implementation of SOCKS Protocol Version 5, intended to be similar to MockWebServer. ... */newCachedThreadPool(...)threadFactory(...)newSetFromMap(...)new ConcurrentHashMap<K,V>(...)getLogger(...)SocksProxy.classString HOSTNAME_THAT_ONLY_THE_PROXY_KNOWS, ...;int VERSION_5, ...;int METHOD_NONE, ...;int METHOD_NO_AUTHENTICATION_REQUIRED, ...;int ADDRESS_TYPE_IPV4, ...;int ADDRESS_TYPE_DOMAIN_NAME, ...;int COMMAND_CONNECT, ...;int REPLY_SUCCEEDED, ...;Logger logger, ...;ExecutorService executor, ...;ServerSocket serverSocket, ...;AtomicInteger connectionCount, ...;Set<Socket> openSockets, ...;String threadNamesetName(...)currentThread(...)accept(...)service(...)SocketException einfo(...)log(...)Level.WARNINGProxy.Type.SOCKSawaitTermination(...)BufferedSource fromSourceBufferedSink fromSinkhello(...)acceptCommand(...)int versionint methodCountint selectedMethodnew ProtocolException(...)int candidateMethodwriteByte(...)int commandint reservedint addressTypeInetAddress toAddressint portreadShort(...)int domainNameLengthString domainNamereadByteArray(...)equalsIgnoreCase(...)Socket toSocketbyte[] localAddressgetAddress(...)BufferedSource toSourceBufferedSink toSinklocalAddress.lengthwriteShort(...)Level.INFOtransfer(...)long byteCount// Read the command.// Resolve HOSTNAME_THAT_ONLY_THE_PROXY_KNOWS to localhost.// Write the reply.// Copy sources to sinks in both directions.// The HTTP calls should share a single connection.// This testcase will fail if the target is resolved locally instead of through the proxy.import Handlerimport LogRecordimport AfterEachCallbackimport BeforeEachCallbackimport ExtensionContextimport TestRuleimport Statement/** A log handler that records which log messages were published so that a calling test can make ... */new Handler(...) { ... }getLevel(...)BlockingQueue<String> logs, ...;Handler handler, ...;Level previousLevel, ...;addHandler(...)Level.FINESTremoveHandler(...)new Statement(...) { ... }beforeEach(...)evaluate(...)afterEach(...)List<String> listdrainTo(...)poll(...)import Securityimport ConscryptCipherSuite.TLS_AES_128_CCM_SHA256CipherSuite.TLS_AES_128_CCM_8_SHA256...[] TLS13_CIPHER_SUITES, ...;// TLS 1.3ConnectionSpec TLS_13, ...;/** A TLS 1.3 only Connection Spec. This will be eventually be exposed ... */ConnectionSpec TLS_12, ...;List<String> urlsinsertProviderAt(...)provideTrustManager(...)newProviderBuilder(...)testClient(...)buildClient(...)String urlsendRequest(...)shutdownNow(...)printf(...)IOException ioe//System.setProperty("javax.net.debug", "ssl:handshake:verbose");// https://github.com/tlswg/tls13-spec/wiki/Implementationsimport Authenticatorimport ConnectExceptionimport PasswordAuthenticationimport URLConnectionimport KeyStoreimport CertificateExceptionimport EnumSetimport GZIPInputStreamimport TrustManagerimport TrustManagerFactoryimport RecordingAuthenticatorimport Utf8import TempDirimport TestAbortedExceptionimport static HttpURLConnection.HTTP_MOVED_TEMPimport static Locale.USimport static TimeUnit.MILLISECONDSimport static TimeUnit.NANOSECONDSimport static SocketPolicy.DISCONNECT_AFTER_REQUESTimport static SocketPolicy.DISCONNECT_AT_STARTimport static SocketPolicy.FAIL_HANDSHAKEimport static SocketPolicy.SHUTDOWN_INPUT_AT_ENDimport static SocketPolicy.SHUTDOWN_OUTPUT_AT_ENDimport static SocketPolicy.UPGRADE_TO_SSL_AT_ENDimport static StatusLine.HTTP_PERM_REDIRECTimport static StatusLine.HTTP_TEMP_REDIRECT/** Android's URLConnectionTest, ported to exercise OkHttp's Call API. */File tempDir, ...;clearProperty(...)Headers requestHeadersgetResponse(...)newSet(...)new LinkedHashSet<E>(...)Headers responseHeaderstestRequestBodySurvivesRetries(...)newRequestBody(...)assertContent(...)// http://code.google.com/p/android/issues/detail?id=2939// recycled connection doesn't get the unread tail of the first request's response.// Check that if we don't read to the end of a response, the next request on theResponse c1Response c2testServerClosesOutput(...)UnknownHostException expectedMockResponse responseAfterRecordedRequest requestAfternew WriteKind(...)WriteKind BYTE_BY_BYTE, ...;WriteKind SMALL_BUFFERS, ...;WriteKind LARGE_BUFFERS, ...;doUpload(...)WriteKind.BYTE_BY_BYTEWriteKind.SMALL_BUFFERSWriteKind.LARGE_BUFFERSint n++...byte[] bufbuf.lengthsetBodyLimit(...)connectViaHttpsReusingConnections(...)SSLSocketFactory clientSocketFactoryCookieJar cookieJarConnectionPool connectionPoolSSLContext sslContext2SSLSocketFactory sslSocketFactory2TrustManagerFactory trustManagerFactorygetInstance(...)getDefaultAlgorithm(...)getTrustManagers(...)// TODO(jwilson): tests below this marker need to be migrated to OkHttp's request/response API.RecordedRequest failHandshakeRequestRecordedRequest fallbackRequestgetTlsVersion(...)hasSize(...)/** When a pooled connection fails, don't blame the route. Otherwise pooled connection failures can ... */Set<TlsVersion> tlsVersions/** Verify that we don't retry connections on certificate verification errors. ... */isConscrypt(...)CertificateException.classgetCause(...)testConnectViaProxy(...)ProxyConfig.CREATE_ARGProxyConfig.PROXY_SYSTEM_PROPERTYProxyConfig.HTTP_PROXY_SYSTEM_PROPERTYSocketFactory uselessSocketFactorynew SocketFactory(...) { ... }new IllegalArgumentException(...)testConnectViaSocketFactory(...)Buffer fullBodytestConnectViaDirectProxyToHttps(...)ProxyConfig.NO_PROXYtestConnectViaHttpProxyToHttps(...)/** We weren't honoring all of the appropriate proxy system properties when connecting via HTTPS. ... */ProxyConfig.HTTPS_PROXY_SYSTEM_PROPERTY/** We were verifying the wrong hostname when connecting to an HTTPS site through a proxy. ... *//** Tolerate bad https proxy response when using HttpResponseCache. Android bug 6754912. */MockResponse badProxyResponseinitResponseCache(...)new RecordingAuthenticator(...)Authenticator.JAVA_NET_AUTHENTICATORRecordingAuthenticator.BASE_64_CREDENTIALS// http://code.google.com/p/android/issues/detail?id=37221// Don't disconnect after building a tunnel with CONNECTSSLSocketFactory socketFactoryInputStream inAtomicReference<Call> callReferencenew DisconnectingCookieJar(...)setDefaultRequestProperty(...)getDefaultRequestProperty(...)/** Reads {@code count} characters from the stream. If the stream is exhausted before {@code count} ... */StringBuilder resultint valuetestMarkAndReset(...)markSupported(...)mark(...)readAscii(...)reset(...)/** We've had a bug where we forget the HTTP response when we see response code 401. This causes a ... *//** This test checks whether connections are gzipped by default. This behavior in not required by ... */Buffer bodyBytesInputStream gunzippedInnew GZIPInputStream(...)testClientConfiguredGzipContentEncodingAndConnectionReuse(...)/** Test a bug where gzip input streams weren't exhausting the input stream, which corrupted the ... */MockResponse responseOneMockResponse responseTwotestEarlyDisconnectDoesntHarmPooling(...)MockResponse mockResponse1MockResponse mockResponse2InputStream in1InputStream in2Response connection1testAuthenticateWithStreamingPost(...)new JavaNetAuthenticator(...)List<String> callsauthCallsForHeader(...)// http://code.google.com/p/android/issues/detail?id=11140// Digest auth is currently unsupported. Test that digest requests should fail reasonably.URL urlString callAuthenticator.RequestorType.SERVERAuthenticator.RequestorTypetoLowerCase(...)Authenticator.RequestorType.PROXYboolean proxyint responseCodeRecordingAuthenticator authenticatorauthenticator.callsassertMethodForbidsRequestBody(...)assertMethodPermitsRequestBody(...)assertMethodPermitsNoRequestBody(...)assertMethodForbidsNoRequestBody(...)assertValidRequestMethod(...)testSecureStreamingPost(...)/** Users have reported problems using HTTPS with streaming request bodies. ... */MockResponse pleaseAuthenticateRecordedRequest request3new PasswordAuthentication(...)toCharArray(...)/** https://code.google.com/p/android/issues/detail?id=74026 */MockResponse successfulResponse/** https://github.com/square/okhttp/issues/342 */testRedirected(...)RecordedRequest firstRecordedRequest retryredirectToAnotherOriginServer(...)String server1HostString server2HostList<URI> proxySelectionRequestsnew ArrayList<URI>(...)MockWebServer proxyServertoURI(...)testResponseRedirectedWithPost(...)HttpURLConnection.HTTP_MULT_CHOICEHttpURLConnection.HTTP_SEE_OTHERHttpURLConnection.HTTP_USE_PROXYtestRedirect(...)/** In OkHttp 4.5 and earlier, HTTP 307 and 308 redirects were only honored if the request method ... */int codeString methodString locationMockResponse response1String responseStringnew LegacyRedirectInterceptor(...)RecordingTrustManager trustManagernew RecordingTrustManager(...)new TrustManager[]trustManager.callsenqueueClientRequestTimeoutResponses(...)/** Confirm that an unacknowledged write times out. */MockWebServer serverint SOCKET_BUFFER_SIZEsetServerSocketFactory(...)new DelegatingServerSocketFactory(...) { ... }new DelegatingSocketFactory(...) { ... }Response b/** Retry redirects if the socket is closed. ... */testFlushAfterStreamTransmitted(...)/** We explicitly permit apps to close the upload stream even after it has been transmitted.  We ... */AtomicReference<BufferedSink> sinkReferencenew AtomicReference<BufferedSink>(...)new ForwardingRequestBody(...) { ... }BufferedSource source1inputStream(...)ConnectException expected/** http://code.google.com/p/android/issues/detail?id=14562 */// http://code.google.com/p/android/issues/detail?id=20442testInputStreamAvailable(...)isGreaterThanOrEqualTo(...)available(...)charAt(...)reusedConnectionFailsWithPost(...)char[] requestBodyCharsString requestBodyRecordedRequest requestARecordedRequest requestBint jIOException socketExceptionResponse postonlyResponse(...)Response challengeResponseauthenticator.responsesResponse redirectedBysetsNegotiatedProtocolHeader(...)/** For example, empty Protobuf RPC messages end up as a zero-length POST. */zeroLengthPayload(...)zeroLengthPost(...)/** For example, creating an Amazon S3 bucket ends up as a zero-length POST. */zeroLengthPut(...)RecordedRequest zeroLengthPayloadlong contentLengthlong bytesWrittenint byteCountbuffer.lengthSocketException expected/** We had a bug where we attempted to gunzip responses that didn't have a body. This only came up ... *//** We had a bug where we weren't closing Gzip streams on redirects. ... *//** The RFC is unclear in this regard as it only specifies that this should invalidate the cache ... */String redirectUrlassumeJdk9(...)UnsupportedOperationException expected/** Confirm that runtime exceptions thrown inside of OkHttp propagate to the caller. */BufferedSink gzipSinknew TestAbortedException(...)new ProxyConfig(...) { ... }Call.FactorysetProperty(...)ProxyConfig NO_PROXY, ...;ProxyConfig CREATE_ARG, ...;ProxyConfig PROXY_SYSTEM_PROPERTY, ...;ProxyConfig HTTP_PROXY_SYSTEM_PROPERTY, ...;ProxyConfig HTTPS_PROXY_SYSTEM_PROPERTY, ...;List<String> calls, ...;X509TrustManager delegate, ...;getAcceptedIssuers(...)certificatesToString(...)List<String> resultX509Certificate certificategetSerialNumber(...)getSubjectDN(...)/* Copyright (C) 2009 The Android Open Source Project ... */// Use a misconfigured proxy to guarantee that the request is retried.// Note that 1234.1.1.1 is an invalid host in a URI, but URL isn't as strict.// Enqueue 2x because the broken connection may be reused.// Give the server time to enact the socket policy if it's one that could happen after the// client has received the response.// Check that a fresh connection was created, either immediately or after attempting reuse.// We know that a fresh connection was created if the server recorded a request with sequence// number 0. Since the client may have attempted to reuse the broken connection just before// creating a fresh connection, the server may have recorded 2 requests at this point. The order// of recording is non-deterministic.// The pool will only reuse sockets if the SSL socket factories are the same.// install a custom SSL socket factory so the server can be authorized// Give the server time to disconnect.// v1.2 on OpenJDK 8.// Flaky https://github.com/square/okhttp/issues/5222// unused// Allow conscrypt to fail in different ways// https should not use http proxy// The inclusion of a body in the response to a CONNECT is key to reproducing b/6754912.// Configure a single IP address for the host and a single configuration, so we only need one// failure to fail permanently.// Reading 'B' may succeed if it's buffered.// But 'C' shouldn't be buffered (the response is throttled) and this should fail.// Seed the pool with a bad connection.// This connection will need to be recovered. When it is, transparent gzip should still work!// Connection is not pooled.// Connection is pooled!// This response takes at least a full second to serve: 10,000 bytes served 100 bytes at a time.// If we're working correctly, this should be greater than 100ms, but less than double that.// Previously we had a bug where we would download the entire response body as long as no// individual read took longer than 100ms.// Do another request to confirm that the discarded connection was not pooled.// No authorization header for the request...// lowercase for the RI.// Fail auth three times...// ...then succeed the fourth time.// No authorization header for the first request...// ...but the three requests that follow include an authorization header.// ...but the three requests that follow requests include an authorization header.// UTF-8 encoding for the first credential.// ISO-8859-1 encoding for the second credential.// no authorization header for the first request...// ...but the three requests that follow requests include an authorization header// make sure the first server was careful to recycle the connection// Chrome doesn't follow the redirect, but Firefox and the RI both do// Fails on the RI, which gets "Proxy Response".// This relies on the fact that MockWebServer doesn't close the// connection after a response has been sent. This causes the client to// try to read more bytes than are sent, which results in a timeout.// to keep the server alive// If Content-Length was accurate, this would return -1 immediately.// Sockets on some platforms can have large buffers that mean writes do not block when// required. These socket factories explicitly set the buffer sizes on sockets created.// Prevent the server from reading!// Server doesn't honor the connection: close header!// The request should work once and then fail.// throws IOException in Gingerbread.// If the request body is larger than OkHttp's replay buffer, the failure may still occur.// If there's a socket exception, this must have a streamed request body.// TODO: write a test that shows pooled connections detect HTTP/1.0 (vs. HTTP/1.1)// Do cookie headers get processed too many times?/* tunnelProxy */// JDK 1.9 response to the FAIL_HANDSHAKE// javax.net.ssl.SSLException: Unexpected handshake message: client_hello// Conscrypt's response to the FAIL_HANDSHAKE// Kotlin 1.4// Send a separate request which will trigger a GOAWAY frame on the healthy connection.// Ensure the GOAWAY frame has time to be read and processed./** Tests how each code point is encoded and decoded in the context of each URL component. */new LinkedHashMap<Integer,Encoding>(...)int UNICODE_2, ...;int UNICODE_3, ...;// Arbitrary code point that's 2 bytes in UTF-8.int UNICODE_4, ...;// Arbitrary code point that's 3 bytes in UTF-8.Map<Integer,Encoding> encodings, ...;// Arbitrary code point that's 4 bytes in UTF-8.StringBuilder uriEscapedCodePoints, ...;StringBuilder uriStrippedCodePoints, ...;/** Returns a new instance configured with a default encode set for the ASCII range. The specific ... */allAscii(...)new UrlComponentEncodingTester(...)int codePoint/** Configure code points to be escaped for conversion to {@code java.net.URI}. That class is more ... */codePoints.length/** Configure code points to be stripped in conversion to {@code java.net.URI}. That class is more ... */Entry<Integer,Encoding> entryMap<>.Entry<Integer,Encoding>entrySet(...)Encoding encodinggetKey(...)String codePointStringencode(...)testForbidden(...)testEncodeAndDecode(...)testParseOriginal(...)testParseAlreadyEncoded(...)testToUrl(...)testFromUrl(...)testUri(...)canonicalize(...)urlString(...)String actualString encodedHttpUrl toAndFromJavaNetUrlHttpUrl toAndFromUriboolean uriStrippedboolean uriEscapednew Encoding(...) { ... }ByteString utf8Buffer percentEncodedgetByte(...)new Encoding(...)Encoding IDENTITY, ...;Encoding PERCENT, ...;Encoding FORBIDDEN, ...;/** URLs that contain this character in this component are invalid. */Encoding SKIP, ...;/** This code point is special and should not be tested. */new UnsupportedOperationException(...)new Component(...) { ... }substring(...)Locale.ROOTString pathString pathSegmentString queryString fragmentComponent USER, ...;Component PASSWORD, ...;Component HOST, ...;Component PATH, ...;Component QUERY, ...;Component QUERY_VALUE, ...;Component FRAGMENT, ...;/** Returns a character equivalent to 's' in this component. This is used to convert hostname ... */// Null character// Start of Header// Start of Text// End of Text// End of Transmission// Enquiry// Acknowledgment// Bell// Backspace// Vertical Tab// Shift Out// Shift In// Data Link Escape// Device Control 1 (oft. XON)// Device Control 2// Device Control 3 (oft. XOFF)// Device Control 4// Negative Acknowledgment// Synchronous idle// End of Transmission Block// Cancel// End of Medium// Substitute// Escape// File Separator// Group Separator// Record Separator// Unit Separator// Delete// If the URI has more escaping than the HttpURL, check that the decoded values still match.// Check that the URI and HttpURL have the exact same escaping.import ParameterizedTestimport ArgumentsSource/** Runs the web platform URL tests against Java URL models. */List<Object> resultnew ArrayList<Object>(...)WebPlatformUrlTestData urlTestDataloadTests(...)List<String> HTTP_URL_SCHEMES, ...;List<String> KNOWN_FAILURES, ...;TestDataParamProvider.class/** Test how {@link HttpUrl} does against the web platform test suite. */testData.schemeSystem.errtestData.basetestHttpUrl(...)Throwable etestData.inputHttpUrl baseUrlexpectParseFailure(...)String effectivePortdefaultPort(...)String effectiveQueryString effectiveFragmentString effectiveHosttestData.hosttestData.porttestData.pathtestData.querytestData.fragmentgetResourceAsStream(...)WebPlatformUrlTest.classload(...)import EOFException/** A test from the <a href="https://github.com/w3c/web-platform-tests/tree/master/url">Web Platform ... */String input, ...;String base, ...;String scheme, ...;String username, ...;String password, ...;String host, ...;String port, ...;String path, ...;String query, ...;String fragment, ...;List<WebPlatformUrlTestData> listnew ArrayList<WebPlatformUrlTestData>(...)String lineString[] partssplit(...)WebPlatformUrlTestData elementnew WebPlatformUrlTestData(...)String baseparts.lengthelement.inputunescape(...)element.baseget(...).baseString pieceString[] nameAndValueBuffer inint creadUtf8CodePoint(...)parseInt(...)repeat(...)String BIG_ENOUGH_BODY, ...;/** A large response body. Smaller bodies might successfully read after the socket is closed! */timeoutNanos(...)OkHttpClient timeoutClienttoNanos(...)sleepingRequestBody(...)AtomicReference<Throwable> exceptionRef// Flaky https://github.com/square/okhttp/issues/5304import Dns/** A network that always resolves two IP addresses per host. Use this when testing route selection ... */List<InetAddress> addressesString BASE_64_CREDENTIALS, ...;/** base64("username:password") */PasswordAuthentication authentication, ...;this.authenticationthis(...)this.callsgetRequestingScheme(...)getRequestingProtocol(...)getRequestingPrompt(...)getRequestorType(...)getRequestingURL(...)getRequestingPort(...)getRequestingHost(...)getRequestingSite(...)/* Copyright (C) 2013 The Android Open Source Project ... */import Challengeimport Requestimport Responseimport Routenew ArrayList<Route>(...)List<Response> responses, ...;List<Route> routes, ...;String credential, ...;this.credentialthis.schemeschemeMatches(...)Challenge challengeimport Methodimport Dequeimport LinkedBlockingDequeimport DelegatingSSLSocketimport DelegatingSSLSocketFactory/** Records all bytes written and read from a socket and makes them available for inspection. */new LinkedBlockingDeque<RecordedSocket>(...)Deque<RecordedSocket> recordedSockets, ...;/** Returns an SSLSocketFactory whose sockets will record all transmitted bytes. */RecordedSocket recordedSocketnew RecordedSocket(...)new RecordingSSLSocket(...)/** A bidirectional transfer of unadulterated bytes over a socket. */Buffer bytesWritten, ...;Buffer bytesRead, ...;/** Returns all bytes that have been written to this socket. *//** Returns all bytes that have been read from this socket. */Socket socket, ...;RecordedSocket recordedSocket, ...;this.socketthis.recordedSocketint bbyteRead(...)bytesRead(...)byteWritten(...)bytesWritten(...)InputStream inputStream, ...;OutputStream outputStream, ...;new RecordingInputStream(...)new RecordingOutputStream(...)Class<?> alpnClass<?> providerObject providerInstanceMethod putMethodforName(...)ClassNotFoundException ignoredMethod getMethod// Intercept the handshake to properly configure TLS extensions with Jetty ALPN. Jetty ALPN// expects the real SSLSocket to be placed in the global map. Because we are wrapping the real// SSLSocket, it confuses Jetty ALPN. This patches that up so things work as expected.// No Jetty, so nothing to worry about.// Jetty's on the classpath but TLS extensions weren't used.// TLS extensions were used; replace with the real SSLSocket to make Jetty ALPN happy.// If we replaced the SSLSocket in the global map, we must put the original back for// everything to work inside OkHttp.import RandomAccessFileimport RandomFile file, ...;RandomAccessFile randomAccessFile, ...;new File(...)new RandomAccessFile(...)FileOperator operatornew FileOperator(...)Buffer buffer1Buffer buffer2FileOperator operatorAFileOperator operatorBBuffer bufferABuffer bufferBByteString datarandomByteString(...)nextBytes(...)new Random(...)force(...)import Callableimport PipeByteString metadata, ...;Buffer upstreamRelay relayedit(...)Relay.CompanionnewSource(...)Buffer sourceBufferassertFile(...)Relay.PREFIX_CLEANBufferedSource source2Relay relay1Relay relay2metadata(...)Relay.PREFIX_DIRTYSource source1Source source2Pipe pipenew Pipe(...)Future<ByteString> future1sourceReader(...)Future<ByteString> future2/** Returns a callable that reads all of source, closes it, and returns the bytes. */new Callable<ByteString>(...) { ... }readLong(...)// Since relay1 is closed, new sources cannot be created.// Since relay2 is closed, new sources cannot be created.// Not exhausted!// Unnecessary. Shouldn't decrement the reference count.import Addressimport ConnectionPoolimport OkHttpClientimport TaskFakerimport TaskRunnergetTaskRunner(...)new TaskFaker(...)newAddress(...)newRoute(...)TaskRunner taskRunner, ...;/** The fake task runner prevents the cleanup runnable from being started. */Address addressA, ...;Route routeA1, ...;Address addressB, ...;Route routeB1, ...;Address addressC, ...;Route routeC1, ...;RealConnectionPool poolnew RealConnectionPool(...)RealConnection c1newConnection(...)cleanup(...)ConnectionPool poolApiRealCall callenterNetworkInterceptorExchange(...)acquireConnectionNoEvents(...)RealConnection c2RealConnection c3allocateAndLeakAllocation(...)getCalls(...)getNoNewExchanges(...)TaskRunner realTaskRunnerTaskRunner.INSTANCEThread[] threadsnew Thread[]activeCount(...)activeQueues(...)enumerate(...)Thread tinterrupt(...)/** Use a helper method so there's no hidden reference remaining on the stack. */RealConnection resultnewTestConnection(...)RealConnection.Companionnew Route(...)// Running at time 50, the pool returns that nothing can be evicted until time 150.// Running at time 60, the pool returns that nothing can be evicted until time 150.// Running at time 149, the pool returns that nothing can be evicted until time 150.// Running at time 150, the pool evicts.// Running again, the pool reports that no further runs are necessary.// Running at time 60, the pool returns that nothing can be evicted until time 160.// Running at time 160, the pool returns that nothing can be evicted until time 260.// Running at time 75, the pool returns that nothing can be evicted until time 150.// Running at time 150, the pool evicts c2.// Running at time 150, the pool returns that nothing can be evicted until time 175.// Running at time 175, the pool evicts c1.// With 2 connections, there's no need to evict until the connections time out.// Add a third connection// The third connection bounces the first.// Can't allocate once a leak has been detected.import ConnectionSpecimport TlsVersionnew SSLHandshakeException(...)SSLHandshakeException RETRYABLE_EXCEPTION, ...;ConnectionSpecSelector connectionSpecSelectorcreateConnectionSpecSelector(...)createSocketWithEnabledProtocols(...)boolean retryconnectionFailed(...)configureSecureSocket(...)SSLHandshakeException trustIssueExceptioninitCause(...)new CertificateException(...)ConnectionSpec sslV3TlsVersion[] enabledSocketTlsVersionsassertEnabledProtocols(...)new ConnectionSpecSelector(...)javaNames(...)String[] protocolstlsVersions.length// MODERN_TLS is used here.// COMPATIBLE_TLS is used here.// sslV3 is not used because SSLv3 is not enabled on the socket.IOException firstExceptionRouteException renew RouteException(...)getFirstConnectException(...)getLastConnectException(...)IOException secondExceptionIOException thirdExceptionIOException connectionIOExceptionaddConnectException(...)import HttpsURLConnectionimport Callimport EventListenerimport FakeDnsimport OkHttpClientTestRuleimport Protocolimport static Proxy.NO_PROXYnew RouteDatabase(...)int proxyAPort, ...;String proxyAHost, ...;Proxy proxyA, ...;int proxyBPort, ...;String proxyBHost, ...;Proxy proxyB, ...;String uriHost, ...;int uriPort, ...;Call call, ...;SSLSocketFactory sslSocketFactory, ...;HostnameVerifier hostnameVerifier, ...;RouteDatabase routeDatabase, ...;getDefaultHostnameVerifier(...)httpAddress(...)RouteSelector routeSelectornew RouteSelector(...)EventListener.NONERouteSelector.SelectionSelection selectionallocate(...)assertRoute(...)Route routefailed(...)/** Don't call through to the proxy selector if we don't have a host name. ... */String bogusHostnameProxySelector nullProxySelectorSelection selection1Selection selection2clear(...)httpsAddress(...)int numberOfAddressesList<Route> regularRoutesgetRoutes(...)Selection selection3List<Route> routesInetSocketAddress socketAddressgetSocketHost(...)RouteSelector.CompanionsocketAddress(...)/** Returns an address that's without an SSL socket factory or hostname verifier. */// No proxy selector requests!// The string '>' is okay in a hostname in HttpUrl, which does very light hostname validation.// It is not okay in URI, and so it's stripped and we get a URI with a null host.// First try the IP addresses of the first proxy, in sequence.// Next try the IP address of the second proxy.// No more proxies to try.// Only the origin server will be attempted.// Proxy A// Proxy B// No more proxies to attempt.// Extract the regular sequence of routes from selector.// Check that we do indeed have more than one route.// Add first regular route as failed.// Reset selector// The first selection prioritizes the non-failed routes.// The second selection will contain all failed routes.// Mark the ProxyA route as failed.// Confirm we enumerate both proxies, giving preference to the route from ProxyB.// Confirm the last selection contains the postponed route from ProxyA.// Name proxy specification.// InetAddress proxy specification.new ArrayList<Proxy>(...)List<Proxy> proxies, ...;List<URI> requestedUris, ...;List<String> failures, ...;StatusLine statusLineStatusLine.CompanionstatusLine.messagestatusLine.protocolstatusLine.code/** This is not defined in the protocol but some servers won't add the leading empty space when the ... */// https://github.com/square/okhttp/issues/386import DelegatingServerSocketFactoryimport DelegatingSocketFactoryimport MediaTypeimport RequestBodyint SOCKET_BUFFER_SIZE, ...;// The size of the socket buffers in bytes.interrupted(...)interruptLater(...)InputStream responseBodyThread toInterruptThread interruptingCow// Clear interrupted state.// 8 MiB.// 500 KbpsHttp2Reader.Handlerimport static Http2.FLAG_ACKimport static Http2.FLAG_END_HEADERSimport static Http2.FLAG_END_STREAMimport static Http2.FLAG_NONEimport static Http2.TYPE_CONTINUATIONimport static Http2.TYPE_DATAimport static Http2.TYPE_GOAWAYimport static Http2.TYPE_HEADERSimport static Http2.TYPE_PINGimport static Http2.TYPE_PUSH_PROMISEimport static Http2.TYPE_SETTINGS/** Real stream traffic applied to the log format. */frameLog(...)/** Ensures that valid flag combinations appear visually correct, and invalid show in hex.  This ... */List<String> formattedFlagsbyte iformatFlags(...)Http2.INSTANCE// Highest valid flag is 0x20.import static ByteString.decodeHexBuffer bytesIn, ...;Hpack.Reader hpackReader, ...;Hpack.ReaderBuffer bytesOut, ...;Hpack.Writer hpackWriter, ...;Hpack.WriternewReader(...)new Writer(...)/** Variable-length quantity special cases strings which are longer than 127 bytes.  Values such as ... */List<Header> headerBlockwriteHeaders(...)writeAll(...)readHeaders(...)hpackReader.headerCountgetAndResetHeaderList(...)/** HPACK has a max header table size, which can be smaller than the max header message. Ensure the ... *//** Oldest entries are evicted to support newer ones. */Writer writerint tableLengthwriter.dynamicTable.lengthwriter.dynamicTableHeader entrywriter.headerCountcheckEntry(...)Header entry1hpackReader.dynamicTablereaderHeaderTableLength(...)Header entry2/** Header table backing array is initially 8 long, let's ensure it grows. */new Reader(...)hpackReader.dynamicTableByteCount/** http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.2.1 *//** http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.2.2 */hpackWriter.dynamicTablehpackWriter.dynamicTable.lengthhpackWriter.headerCount// Example taken from twitter/hpack DecoderTest.testUnusedIndex// Example taken from twitter/hpack DecoderTest.testIllegalIndex// Example taken from twitter/hpack DecoderTest.testInsidiousIndex// Example taken from twitter/hpack DecoderTest.testHeaderTableSizeUpdatemaxDynamicTableByteCount(...)// Example taken from twitter/hpack DecoderTest.testIllegalHeaderTableSizeUpdate// Example taken from twitter/hpack DecoderTest.testInsidiousMaxHeaderSize/** http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.2.4 */new Header(...)/** http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.2 */firstRequestWithoutHuffman(...)checkReadFirstRequestWithoutHuffman(...)secondRequestWithoutHuffman(...)checkReadSecondRequestWithoutHuffman(...)thirdRequestWithoutHuffman(...)checkReadThirdRequestWithoutHuffman(...)/** http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.4 */firstRequestWithHuffman(...)checkReadFirstRequestWithHuffman(...)secondRequestWithHuffman(...)checkReadSecondRequestWithHuffman(...)thirdRequestWithHuffman(...)checkReadThirdRequestWithHuffman(...)readInt(...)... | ...writeInt(...)assertBytes(...)writeByteString(...)resizeHeaderTable(...)int currentSizehpackWriter.headerTableSizeSettinghpackWriter.maxDynamicTableByteCountintArrayToByteArray(...)utf8(...)entry.nameentry.valueentry.hpackSizebytes.lengthhpackReader.dynamicTable.length// Dynamic table size update (size = 1).// Literal indexed// Literal name (len = 10)// Literal value (len = 13)// Set to only support 110 bytes (enough for 2 headers).// Use a new Writer because we don't support change the dynamic table// size after Writer constructed.// Dynamic table size update (size = 110).// Once a header field is decoded and added to the reconstructed header// list, it cannot be removed from it. Hence, foo is here.// Simulate receiving a small dynamic table size update, that implies eviction.// Dynamic table size update (size = 55).// Lots of headers need more room!// Dynamic table size update (size = 16384).// == Literal indexed ==// Indexed name (idx = 4) -> :path// Literal value Huffman encoded 12 bytes// decodes to www.example.com which is length 15// == Literal not indexed ==// Literal value (len = 12)// Not indexed// == Literal never indexed ==// Never indexed// Indexed name and value (idx = 63)// == Indexed - Add ==// idx = 2 -> :method: GET// == Indexed - Add idx = 0// == Indexed - Add idx = 127// idx = -2147483521// encode size 4096// encode size 4097// count = -2147483648// Dynamic table size update (size = 0).// Not buffered in header table.// Indexed name (idx = 60) -> "www-authenticate"// Literal value (len = 5)// Literal value (len = 6)// idx = 7 -> :scheme: http// == Bad index! ==// Indexed name (idx = 4) -> :authority// Literal value (len = 15)// idx = 6 -> :path: /// [  1] (s =  57) :authority: www.example.com// Table size: 57// Decoded header list:// Indexed name (idx = 62) -> :authority: www.example.com// Indexed name (idx = 24) -> cache-control// Literal value (len = 8)// [  1] (s =  53) cache-control: no-cache// [  2] (s =  57) :authority: www.example.com// Table size: 110// idx = 5 -> :path: /index.html// Indexed name (idx = 63) -> :authority: www.example.com// [  1] (s =  54) custom-key: custom-value// [  2] (s =  53) cache-control: no-cache// [  3] (s =  57) :authority: www.example.com// Table size: 164// idx = 6 -> :scheme: http// idx = 4 -> :path: /// Indexed name (idx = 1) -> :authority// idx = 62 -> :authority: www.example.com// Literal value Huffman encoded 6 bytes// decodes to no-cache which is length 8// idx = 7 -> :scheme: https// idx = 63 -> :authority: www.example.com// Literal name Huffman encoded 8 bytes// decodes to custom-key which is length 10// Literal value Huffman encoded 9 bytes// decodes to custom-value which is length 12// Dynamic table size update (size = 2048).// Dynamic table size update (size = 8192).// No more dynamic table updates should be emitted.// Dynamic size update (size = 0).// Dynamic size update (size = 2048).// Literal header, new name.// String literal is Huffman encoded (len = 2).// 'foo' Huffman encoded.// String literal not Huffman encoded (len = 3).// If the :authority header somehow changes, it should be re-added to the dynamic table.import Headersimport TaskQueueimport InFrameimport AsyncTimeoutimport static TestUtil.repeatimport static Util.EMPTY_BYTE_ARRAYimport static Util.EMPTY_HEADERSimport static Http2Connection.AWAIT_PINGimport static Http2Connection.DEGRADED_PINGimport static Http2Connection.DEGRADED_PONG_TIMEOUT_NSimport static Listener.REFUSE_INCOMING_STREAMSimport static Settings.DEFAULT_INITIAL_WINDOW_SIZEimport static Settings.ENABLE_PUSHimport static Settings.HEADER_TABLE_SIZEimport static Settings.INITIAL_WINDOW_SIZEimport static Settings.MAX_CONCURRENT_STREAMSimport static Settings.MAX_FRAME_SIZEnew MockHttp2Peer(...)new PushObserver(...) { ... }MockHttp2Peer peer, ...;InFrame pingtakeFrame(...)settings(...)sendFrame(...)new Settings(...)acceptFrame(...)ping(...)Http2.TYPE_PINGping.typeping.streamIdping.payload1ping.payload2ping.ackSettings initialSettings shouldntImpactConnectionHttp2Connection connectionInFrame ackFrameHttp2Stream streamnewStream(...)Http2.TYPE_SETTINGSackFrame.typeackFrame.streamIdackFrame.ackgetInitialWindowSize(...)getPeerSettings(...)getWriteBytesTotal(...)getWriteBytesMaximum(...)boolean clientSettings settingsconnectWithSettings(...)Http2Writer writergetWriter(...)getHeaderTableSize(...)getHpackWriter(...).dynamicTableByteCountgetHpackWriter(...)getHpackWriter(...).headerTableSizeSettinggetEnablePush(...)int newMaxFrameSizegetMaxFrameSize(...)maxDataLength(...)/** Webservers may set the initial window size to zero, which is a special case because it means ... */getSink(...)InFrame headersInFrame data1InFrame data2setClient(...)windowUpdate(...)writePingAndAwaitPong(...)Http2.TYPE_HEADERSheaders.typeHttp2.TYPE_DATAdata1.typedata1.streamIddata1.datadata2.typedata2.streamIddata2.data/** Confirm that we account for discarded data frames. It's possible that data frames are in-flight ... */Http2Stream stream1getSource(...)InFrame frame1InFrame frame2InFrame frame3data(...)ErrorCode.CANCELframe1.typeHttp2.TYPE_RST_STREAMframe2.typeframe3.typegetReadBytesAcknowledged(...)getReadBytesTotal(...)Http2Stream stream2BufferedSink sink1BufferedSink sink2InFrame synStream1InFrame synStream2goAway(...)ErrorCode.PROTOCOL_ERRORConnectionShutdownException expectedisOpen(...)openStreamCount(...)synStream1.typesynStream2.typeint windowSizeint windowUpdateThresholdSource inInFrame synStreamgetOkHttpSettings(...)takeHeaders(...)synStream.typeList<Integer> windowUpdateStreamIdsnew ArrayList<Integer>(...)InFrame windowUpdateHttp2.TYPE_WINDOW_UPDATEwindowUpdate.typewindowUpdate.streamIdwindowUpdate.windowSizeIncrementHttp2Stream clientframeCount(...)BufferedSink outtakeFrame(...).typebyte[] buffmaxOutboundDataLength(...)InFrame datadata.data.lengthdata.dataList<Header> expectedRequestHeadersHeader.TARGET_METHODHeader.TARGET_SCHEMEHeader.TARGET_AUTHORITYHeader.TARGET_PATHList<Header> expectedResponseHeadersHeader.RESPONSE_STATUSRecordingPushObserver observernew RecordingPushObserver(...)pushPromise(...)takeFrame(...).errorCodeInFrame rstStreamPushObserver.CANCELrstStream.typerstStream.streamIdrstStream.errorCode/** When writing a set of headers fails due to an {@code IOException}, make sure the writer is left ... */String longStringHttp2.INITIAL_MAX_FRAME_SIZEopenSocket(...)pushObserver(...)Http2Connection.BuilderInFrame requestDataassertStreamData(...)synStream.outFinishedsynStream.streamIdsynStream.associatedStreamIdsynStream.headerBlockrequestData.data/** A server RST_STREAM shouldn't prevent the client from consuming the response body. */rstStream(...)/** A server RST_STREAM shouldn't prevent the client from consuming trailers. *//** A server RST_STREAM shouldn't prevent the client from consuming the response body, even if it ... */StreamResetException expectedexpected.errorCodeInFrame headers1InFrame headers2enqueueTrailers(...)headers1.typedata1.inFinishedheaders2.typeheaders2.inFinishedInFrame nextFramenextFrame.headerBlocklong pingAtNanosInFrame pingFramepingFrame.typepingFrame.streamIdpingFrame.payload1pingFrame.payload2pingFrame.ackInFrame ping2InFrame ping4ping2.payload1ping4.payload1CountDownLatch maxConcurrentStreamsUpdatedAtomicInteger maxConcurrentStreamsHttp2Connection.ListenerListener listenernew Http2Connection.Listener(...) { ... }getMaxConcurrentStreams(...)Settings settings1Settings settings2applyAndAckSettings(...)getReaderRunnable(...)synStream.inFinished/** Test that the client sends a RST_STREAM if doing so won't disrupt the output stream. *//** Test that the client doesn't send a RST_STREAM if doing so will disrupt the output stream. */InFrame findata.typefin.typefin.inFinishedfin.outFinishedint dataLengthErrorCode.REFUSED_STREAMUtil.EMPTY_BYTE_ARRAYInFrame goawayisHealthy(...)new ConnectionShutdownException(...)writePing(...)awaitPong(...)Http2.TYPE_GOAWAYgoaway.typegoaway.streamIdgoaway.errorCodeawaitWatchdogIdle(...)/** Confirm that the client times out if the server stalls after 3 bytes. After the timeout the ... */require(...)Settings peerSettingsSink sinkdata.inFinishedtruncateLastFrame(...)EOFException expectedint framesThatFillWindowroundUp(...)BufferedSink out1BufferedSink out2TaskFaker taskFakerTaskRunner taskRunnerList<TaskQueue> queues/** Returns true when all work currently in progress by the watchdog have completed. This method ... */AsyncTimeout watchdogJobnew AsyncTimeout(...) { ... }deadlineNanoTime(...)enter(...)... / ...Http2Connection.Listener.REFUSE_INCOMING_STREAMS/** Builds a new connection to {@code peer} with settings acked. */listener(...)PushObserver IGNORE, ...;List<Object> events, ...;// write the mocking script// ACK// PING// play it back// verify the peer received what was expected// ACK 2// HEADERS// Verify the peer received the second ACK.// This stream was created *after* the connection settings were adjusted.// New Stream is has the most recent initial window size.// Peer is server, so we are client.// Verify the peer's settings were read and applied.// Peer is client, so we are server.// The peer client disables push.// verify the peer's settings were read and applied.// Write the mocking script.// Increase the connection window size.// HEADERS STREAM 3// DATA STREAM 3 "abcde"// DATA STREAM 3 "fghi"// Play it back.// Ensure the SETTINGS have been received.// Verify the peer received what was expected.// SYN_STREAM 3// RST_STREAM// SYN_STREAM 5// DATA STREAM 3// Ensure the GO_AWAY that resets stream2 has been received.// SYN_STREAM// Send frames of summing to size 50, which is windowUpdateThreshold.// connection WINDOW UPDATE// stream WINDOW UPDATE// connection// stream// DATA// SYN_REPLY// SYN_STREAM./* sendConnectionPreface = */// PONG// We buffer some outbound data and headers and confirm that the END_STREAM flag comes with the// headers (and not with the data).// write the mocking script for the client// finish the stream// Ensure that the SYN_REPLY has been received.// OKok.// This pong is silently ignored.// ACK SETTINGS// fake a settings frame with clear flag set.// Ensure that the RST_CANCEL has been received.// Close throws because buffered data wasn't flushed.// DATA with FLAG_FIN// Ensure that inFinished has been received.// Ensure that the 2nd SYN REPLY has been received.// Ping just to make sure the stream was fastforwarded.// SYN_STREAM 1// PING.// DATA STREAM 1// GOAWAY// Should be ignored!// Prevent the peer from exiting prematurely./* 200ms delta */// DEGRADED PING// AWAIT PING// DEGRADED PONG// AWAIT PONG// When the timeout is sent the connection doesn't immediately go unhealthy.// But if the ping doesn't arrive, the connection goes unhealthy.// When a pong does arrive, the connection becomes healthy again.// Set the peer's receive window to 5 bytes!// Make sure settings have been received.// This will time out waiting on the write window.// Set the peer's receive window to 5 bytes. Give the stream 5 bytes back, so only the// connection-level window is applicable.// Make sure settings have been acked.// Make sure the window update has been received.// two outgoing writes// verify the peer received one incoming frame// Ensure that the HEADERS has been received.// Write the mocking script. This accepts more data frames than necessary!// SETTINGS ACK// SYN_STREAM on stream 1// DATA on stream 1// SYN_STREAM on stream 2// DATA on stream 2// Check that we've filled the window for both the stream and also the connection.// receiving a window update on the connection will unblock new streams.// Another stream should be able to send data even though 1 is blocked.// Write the mocking script. Note no SETTINGS frame is sent or acknowledged.// Due immediately!// verify the peer received the ACKimport static Http2.FLAG_COMPRESSEDimport static Http2.FLAG_PADDEDimport static Http2.FLAG_PRIORITYnew Http2Reader(...)Buffer frame, ...;Http2Reader reader, ...;int expectedStreamId, ...;writeMedium(...)Http2.FLAG_NONEnextFrame(...)new BaseTestHandler(...)List<Header> sentHeadersBuffer headerBytesliteralHeaders(...)sendHeaderFrames(...)new BaseTestHandler(...) { ... }/** Headers are compressed, then framed. */largeHeaders(...)Buffer headerBlockHttp2.TYPE_CONTINUATIONint expectedPromisedStreamIdList<Header> pushPromiseHttp2.TYPE_PUSH_PROMISEHttp2.FLAG_END_PUSH_PROMISEsendPushPromiseFrames(...)getHttpCode(...)int reducedTableSizeBytesAtomicInteger settingValueintValue(...)Integer.MIN_VALUEpow(...)int expectedPayload1int expectedPayload2Http2.FLAG_ACKsendPingFrame(...)byte[] expectedDataexpectedData.lengthsendDataFrame(...)byte btoByteArray(...)byte[] payloadpayload.length/** We do not send SETTINGS_COMPRESS_DATA = 1, nor want to. Let's make sure we error. */Buffer zippedint zippedSizereadAll(...)int paddingLengthbyte[] paddingassertData(...)assertHeaderBlock(...)long expectedWindowSizeIncrementErrorCode expectedErrorsendGoAway(...)ByteString expectedDatanew Http2Writer(...)frameHeader(...)Settings.MAX_FRAME_SIZEint streamId...|=...... << ...dataFrame(...)/** Create a sufficiently large header set to overflow INITIAL_MAX_FRAME_SIZE bytes. */String[] nameValueschar[] charsnameValues.lengthvalueOf(...)... >>> ...// has a 4-byte field// type 99// custom data// Should not callback.// Check writer sends the same bytes.// Independent stream.// Heaviest weight, zero-indexed.// Write the first headers frame.// Write the continuation frame, specifying no more frames are expected.// Reading the above frames should result in a concatenated headerBlock.// Write the push promise frame, specifying the associated stream ID.// Decoding the first header will cross frame boundaries.// 2 settings * 6 bytes (2 for the code and 4 for the value).// Settings are always on the connection stream 0.// SETTINGS_HEADER_TABLE_SIZE// SETTINGS_ENABLE_PUSH// No clearPrevious in HTTP/2.// 2 for the code and 4 for the value// old number for SETTINGS_INITIAL_WINDOW_SIZE// Id reserved for experimental use.// no-op// SETTINGS_INITIAL_WINDOW_SIZE// SETTINGS_MAX_FRAME_SIZE// length// connection-level// Padding was skipped.// Without debug data there's only 2 32-bit fields.// connection-scope// last good stream.// Compose the expected GOAWAY frame without debug data.// never read any stream!// TODO: real max is based on settings between 16384 and 16777215// set reserved bitimport PushPromiseimport Cacheimport Callbackimport Connectionimport Cookieimport Credentialsimport Interceptorimport RecordingCookieJarimport RecordingHostnameVerifierimport SimpleProviderimport TestLogHandlerimport TestUtilimport RealConnectionimport static Util.discardimport static Assumptions.assumeTrue/** Test how HTTP/2 interacts with HTTP features. */configureClientTestRule(...)Http2.class// Flaky https://github.com/square/okhttp/issues/4633// Flaky https://github.com/square/okhttp/issues/4632Protocol protocol, ...;OkHttpClientTestRule clientTestRulesetRecordTaskRunner(...)this.protocolProtocolParamProvider.classsetUp(...)MockResponse responseWithoutBodystatus(...)byte[] postBytespostBytes.lengthHttp2Connection.OKHTTP_CLIENT_WINDOW_SIZEwaitForDataFrames(...)discard(...)/** Wait for the client to receive {@code dataLength} DATA frames. */int expectedFrameCountint dataFrameCountString log/** https://github.com/square/okhttp/issues/373 */CountDownLatch countDownLatchnew AsyncRequest(...)RecordedRequest deniedRecordedRequest accepted/** Test to ensure we don't  throw a read timeout on responses that are progressing.  For this ... */char[] body/** Test to ensure we throw a read timeout on responses that are progressing too slowly.  For this ... */Call call3Cookie requestCookiesetHttp2ErrorCode(...)SocketPolicy.RESET_STREAM_AT_START/** We had a bug where we'd perform infinite retries of route that fail with connection shutdown ... */recoverFromOneHttp2ErrorRequiresNewConnection(...)ErrorCode.INTERNAL_ERRORList<CountDownLatch> responseDequeuedLatchesList<CountDownLatch> requestCanceledLatchesnew RespondAfterCancelDispatcher(...)callAndCancel(...)List<CountDownLatch> responseDequeuedLatches, ...;List<CountDownLatch> requestCanceledLatches, ...;int responseIndex, ...;this.responseDequeuedLatchesthis.requestCanceledLatches/** Make a call and canceling it as soon as it's accepted by the server. */noRecoveryFromErrorWithRetryDisabled(...)BlockingQueue<String> responsesnew SynchronousQueue<String>(...)Authenticator authenticatoroffer(...)OkHttpClient blockingAuthClientString response1String response2String response3PushPromise pushPromisenew PushPromise(...)RecordedRequest pushedRequestwithPush(...)List<String> logstakeAll(...)firstFrame(...)Util.EMPTY_REQUESTcountFrames(...)pingInterval(...)long executeAtNanoslong elapsedUntilFailureexpectFailureOnJdkVersion(...)Http2Connection.DEGRADED_PONG_TIMEOUT_NSint result/** Push a setting that permits up to 2 concurrent streams, then make 3 concurrent requests and ... */Settings.MAX_CONCURRENT_STREAMSwithSettings(...)/** This simulates a race condition where we receive a healthy HTTP/2 connection and just prior to ... */boolean executedCall, ...;RealConnection connectionBlockingQueue<String> bodies/** We don't know if the connection will support HTTP/2 until after we've connected. When multiple ... */QueueDispatcher queueDispatchernew QueueDispatcher(...)RecordedRequest call1ConnectRecordedRequest call2ConnectRecordedRequest call2GetRecordedRequest call1GetassumeTrue(...)int requestCount, ...;MockResponse result/** https://github.com/square/okhttp/issues/3103 */Buffer bytesOutCountDownLatch countDownLatch, ...;this.paththis.countDownLatchint callCount, ...;// Body contains nothing.// Content-Length header doesn't exist in a 204 response.// Content-Length header stays correctly.// push bytes into the stream's buffer// Http2Connection.writeData subject to write window// Http2Connection.writeData empty frame// Cancel the call and discard what we've buffered for the response body. This should free up// the connection flow-control window so new requests can proceed.// Cancel the call and close the response body. This should discard the buffered data and update// the connection flow-control window.// Make a second call that should transmit the response headers. The response body won't be// transmitted until the flow-control window is updated from the first request.// Close the response body. This should discard the buffered data and update the connection// flow-control window.// Make a call expecting a timeout reading the response headers.// Confirm that a subsequent request on the same connection is not impacted.// Confirm that the connection was reused.// 4KiB to read.// Slow connection 1KiB/second.// Half a second to read something.// Make a call expecting a timeout reading the response body.// Disconnect before the stream is created. A connection is still established!// That connection is pooled, and it works.// Clean up the connection.// Reused connection.// No synchronization is needed for the last request, which is not canceled.// Make a second request to ensure the connection is reused.// Make a third request to ensure the connection is reused.// This guarantees a deterministic sequence when handling the canceled request:// 1. Server reads request and dequeues first response// 2. Client cancels request// 3. Server tries to send response on the canceled stream// Otherwise, there is no guarantee for the sequence. For example, the server may use the// first mocked response to respond to the second request.// Make the first request waiting until we get our auth challenge.// Now make the second request which will restrict the first HTTP/2 connection from creating new// streams.// Let the first request proceed. It should discard the the held HTTP/2 connection and get a new// one.// While MockWebServer waits to read the client's HEADERS frame before sending the response, it// doesn't wait to read the client's DATA frame and may send a DATA frame before the client// does. So we can't assume the client's empty DATA will be logged first.// Ping every 500 ms, starting at 500 ms.// Delay the response to give 1 ping enough time to be sent and replied to.// Confirm a single ping was sent and received, and its reply was sent and received.// https://github.com/square/okhttp/issues/5221// Confirm we fail before the read timeout.// Set up the server to ignore the socket. It won't respond to pings!// Make a call. It'll fail as soon as our pings detect a problem.// Confirm a single ping was sent but not acknowledged.// Stalling the socket will cause TWO requests to time out!// The 3rd request should be sent to a fresh connection.// The first call times out.// The second call times out because it uses the same bad connection.// But after the degraded pong timeout, that connection is abandoned.// The second call succeeds.// Calls succeed after the degraded pong timeout because the degraded pong was received.// All calls share a connection.// Read & write a full request to confirm settings are accepted.// Settings connection.// Reuse settings connection.// New connection!// At this point, we have a healthy HTTP/2 connection. This call will trigger the// server to send a GOAWAY frame, leaving the connection in a shutdown state.// Wait until the GOAWAY has been processed.// Flaky https://github.com/square/okhttp/issues/4836// We use a re-entrant dispatcher to initiate one HTTPS connection while the other is in flight.// Before handling call1's CONNECT we do all of call2. This part re-entrant!/** Original version of this class was lifted from {@code com.twitter.hpack.HuffmanTest}. */String sRandom randomassertRoundTrip(...)Buffer encodeBufferBuffer decodeBufferHuffman.INSTANCEencodedLength(...)decode(...)/* Copyright 2013 Twitter, Inc. ... */import Closeable/** Replays prerecorded outgoing frames and records incoming frames. */new ArrayList<OutFrame>(...)new LinkedBlockingQueue<InFrame>(...)MockHttp2Peer.classint frameCount, ...;boolean client, ...;Http2Writer writer, ...;List<OutFrame> outFrames, ...;BlockingQueue<InFrame> inFrames, ...;int port, ...;this.clientthis.writer/** Maximum length of an outbound data frame. *//** Count of frames sent or received. */new OutFrame(...)/** Shortens the last frame from its original length to {@code length}. This will cause the peer to ... */OutFrame lastFrameBuffer fullBufferlastFrame.startlastFrame.sequencereadAndWriteFrames(...)MockHttp2Peer.thisOutputStream outHttp2Reader readerIterator<OutFrame> outFramesIteratorbyte[] outBytesOutFrame nextOutFrameisShutdown(...)nextOutFrame.sequencelong startnextOutFrame.startboolean truncatedlong endint lengthoutBytes.lengthnextOutFrame.truncatedInFrame inFramenew InFrame(...)int sequence, ...;long start, ...;boolean truncated, ...;this.sequencethis.startthis.truncatedint type, ...;boolean clearPrevious, ...;boolean outFinished, ...;boolean inFinished, ...;int streamId, ...;int associatedStreamId, ...;ErrorCode errorCode, ...;long windowSizeIncrement, ...;List<Header> headerBlock, ...;...[] data, ...;Settings settings, ...;boolean ack, ...;int payload1, ...;int payload2, ...;this.readerthis.typethis.clearPreviousthis.settingsthis.ackthis.inFinishedthis.streamIdthis.associatedStreamIdthis.headerBlockthis.datathis.errorCodethis.payload1this.payload2this.windowSizeIncrement// Move everything from bytesOut into a new buffer.// Copy back all but what we're truncating.// Bail out now if this instance was closed while waiting for the socket to accept.// Write a frame.// If the last frame was truncated, immediately close the connection.// read a frameisSet(...)Settings.HEADER_TABLE_SIZESettings.ENABLE_PUSHgetMaxHeaderListSize(...)Settings.MAX_HEADER_LIST_SIZESettings.INITIAL_WINDOW_SIZESettings aSettings bmerge(...)import static Java6Assertions.assertThatimport static Assume.assumeFalseimport static Assume.assumeTrueassumeJettyBootEnabled(...)buildIfSupported(...)Jdk8WithJettyBootPlatform.CompanionJdk9Platform.CompanionassumeJdk8(...)NoSuchMethodException nsmenew Jdk9Platform(...)DelegatingSSLSocket applicationProtocolUnsupportednew DelegatingSSLSocket(...) { ... }getSelectedProtocol(...)// also present on JDK8 after build 252.new Platform(...)/** Guard against the default value changing by accident. */// This is tautological so just confirms that it runs.import GzipSourceimport static HostnamesKt.toCanonicalHostimport static PublicSuffixDatabase.PUBLIC_SUFFIX_RESOURCEnew PublicSuffixDatabase(...)PublicSuffixDatabase publicSuffixDatabase, ...;setListBytes(...)getEffectiveTldPlusOne(...)Buffer exceptionInputStream resourcePublicSuffixDatabaseTest.classnew GzipSource(...)String publicSuffixreadUtf8LineStrict(...)String testreplaceAll(...)String exceptionString result/** These tests are provided by <a href="https://publicsuffix.org/list/">publicsuffix.org</a>. */checkPublicSuffix(...)String canonicalDomaintoCanonicalHost(...)// A wildcard rule, let's replace the wildcard with a value.// Any copyright is dedicated to the Public Domain.// https://creativecommons.org/publicdomain/zero/1.0/// null input.// Mixed case.// Leading dot.// Unlisted TLD.// Listed, but non-Internet, TLD.//checkPublicSuffix("local", null);//checkPublicSuffix("example.local", null);//checkPublicSuffix("b.example.local", null);//checkPublicSuffix("a.b.example.local", null);// TLD with only 1 rule.// TLD with some 2-level rules.// TLD with only 1 (wildcard) rule.// More complex TLD.// TLD with a wildcard rule and exceptions.// US K12.// IDN labels.// Same as above, but punycoded.import SortedSetimport TreeSet/** Downloads the public suffix list from https://publicsuffix.org/list/public_suffix_list.dat and ... */File.separatorString OKHTTP_RESOURCE_DIR, ...;String OKHTTP_TEST_RESOURCE_DIR, ...;File publicSuffixListDotDat, ...;ByteString EXCEPTION_RULE_MARKER, ...;String WILDCARD_CHAR, ...;File resourcesFile testResourcesgetParentFile(...)SortedSet<ByteString> sortedRulesnew TreeSet<ByteString>(...)SortedSet<ByteString> sortedExceptionRulesmkdirs(...)exists(...)Sink fileSinkint totalRuleBytesint totalExceptionRuleBytesPublicSuffixDatabase.PUBLIC_SUFFIX_RESOURCEByteString ruletrim(...)assertWildcardRule(...)ByteString domain/** These assertions ensure the {@link PublicSuffixDatabase} remains correct. The specification is ... */PublicSuffixDatabase.class// We use '\n' for end of value.import GeneralSecurityExceptionimport SecureRandomimport KeyManagerimport X509KeyManagerimport CertificatePinnerimport static TlsUtil.newKeyManagerimport static TlsUtil.newTrustManager/** The pinner should pull the root certificate from the trust manager. */HeldCertificate rootCa/** The pinner should accept an intermediate from the server's chain. */HeldCertificate goodIntermediateCaHeldCertificate goodCertificateHeldCertificate compromisedIntermediateCaHeldCertificate rogueCertificatenewServerSocketFactory(...)expectFailureOnConscryptPlatform(...)expectFailureOnCorrettoPlatform(...)HeldCertificate compromisedRootCaString keystoreTypeisJdk9(...)X509KeyManager x509KeyManagernewKeyManager(...)newTrustManager(...)new KeyManager[]new SecureRandom(...)// The request should complete successfully.// Confirm that a second request also succeeds. This should detect caching problems.// Force a fresh connection for the next request.// https://github.com/square/okhttp/issues/4729// Start with a trusted root CA certificate.// Add a good intermediate CA, and have that issue a good certificate to localhost. Prepare an// SSL context for an HTTP client under attack. It includes the trusted CA and a pinned// certificate.// Add a bad intermediate CA and have that issue a rogue certificate for localhost. Prepare// an SSL context for an attacking webserver. It includes both these rogue certificates plus the// trusted good certificate above. The attack is that by including the good certificate in the// chain, we may trick the certificate pinner into accepting the rouge certificate.// Make a request from client to server. It should succeed certificate checks (unfortunately the// rogue CA is trusted) but it should fail certificate pinning.// Certificate pinning fails!// Start with two root CA certificates, one is good and the other is compromised.// The attacker compromises the root CA, issues an intermediate with the same common name// "intermediate_ca" as the good CA. This signs a rogue certificate for localhost. The server// serves the good CAs certificate in the chain, which means the certificate pinner sees a// different set of certificates than the SSL verifier.// On Android, the handshake fails before the certificate pinner runs.// On OpenJDK, the handshake succeeds but the certificate pinner fails.// Test setup fails on JDK9// java.security.KeyStoreException: Certificate chain is not valid// at sun.security.pkcs12.PKCS12KeyStore.setKeyEntry// http://openjdk.java.net/jeps/229// http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/2c1c21d11e58/src/share/classes/sun/security/pkcs12/PKCS12KeyStore.java#l596import X500Principalimport MockWebServerExtensionimport RecordingEventListenerimport ConnectionShutdownExceptionimport ExtendWithimport static PlatformRule.getPlatformSystemPropertyMockWebServerExtension.classHeldCertificate serverRootCa, ...;HeldCertificate serverIntermediateCa, ...;HeldCertificate serverCert, ...;HeldCertificate clientRootCa, ...;HeldCertificate clientIntermediateCa, ...;HeldCertificate clientCert, ...;buildServerSslSocketFactory(...)requestClientAuth(...)new X500Principal(...)requireClientAuth(...)noClientAuth(...)PlatformRule.JDK9_PROPERTYPlatformRule.CONSCRYPT_PROPERTYgetPlatformSystemProperty(...)HeldCertificate clientCert2RecordingEventListener listenerList<String> recordedEventTypesvalidityInterval(...)endsWith(...)X509KeyManager keyManagerGeneralSecurityException e// Fails with 11.0.1 https://github.com/square/okhttp/issues/4598// StreamReset stream was reset: PROT...// Fails with https://github.com/square/okhttp/issues/4598// javax.net.ssl.SSLException: readRecord// It didn't fail until it reached the application layer.// Observed Events are variable// JDK 14// CallStart, ProxySelectStart, ProxySelectEnd, DnsStart, DnsEnd, ConnectStart, SecureConnectStart,// SecureConnectEnd, ConnectEnd, ConnectionAcquired, RequestHeadersStart, RequestHeadersEnd,// ResponseFailed, ConnectionReleased, CallFailed// JDK 8// ConnectFailed, CallFailed// Gradle - JDK 11// SecureConnectEnd, ConnectFailed, CallFailed// The test uses JDK default SSL Context instead of the Platform provided one// as Conscrypt seems to have some differences, we only want to test client side here.import ByteArrayInputStreamimport CertificateFactoryimport CertificateParsingExceptionimport Collectionimport Streamimport FakeSSLSessionimport TlsUtil/** Tests for our hostname verifier. Most of these tests are from AOSP, which itself includes tests ... */OkHostnameVerifier.INSTANCEOkHostnameVerifier verifier, ...;FakeSSLSession sessionnew FakeSSLSession(...)verify(...)SSLSession sessionsession(...)/** Ignored due to incompatibilities between Android and Java on how non-ASCII subject alt names ... */X509Certificate peerCertificatecertificateSANs(...)/** Previously ignored due to incompatibilities between Android and Java on how non-ASCII subject ... */getSubjectX500Principal(...)/** Earlier implementations of Android's hostname verifier required that wildcard names wouldn't ... */certificatePem(...)Collection<List<?>> subjectAlternativeNamesgetSubjectAlternativeNames(...)empty(...)map(...)new Function<List<?>,String>(...) { ... }HostnameVerifier localVerifiercreateSSLEngine(...)sslContext(...)OkHostnameVerifier.classcanParseAsIpAddress(...)generateCertificate(...)new ByteArrayInputStream(...)/* Licensed to the Apache Software Foundation (ASF) under one or more ... */// CN=foo.com// CN=&#x82b1;&#x5b50;.co.jp// CN=foo.com, subjectAlt=bar.com// CN=foo.com, subjectAlt=bar.com, subjectAlt=&#x82b1;&#x5b50;.co.jp// (hanako.co.jp in kanji)// these checks test alternative subjects. The test data contains an// alternative subject starting with a japanese kanji character. This is// not supported by Android because the underlying implementation from// harmony follows the definition from rfc 1034 page 10 for alternative// subject names. This causes the code to drop all alternative subjects.// subjectAlt=foo.com// CN=foo.com, CN=bar.com, CN=&#x82b1;&#x5b50;.co.jp// CN=*.foo.com// It's the CA's responsibility to not issue broad-matching certificates!// CN=*.co.jp// CN=*.foo.com, subjectAlt=*.bar.com, subjectAlt=*.&#x82b1;&#x5b50;.co.jp// (*.hanako.co.jp in kanji)// try the foo.com variations// cat cert.cnf// [req]// distinguished_name=distinguished_name// req_extensions=req_extensions// x509_extensions=x509_extensions// [distinguished_name]// [req_extensions]// [x509_extensions]// subjectAltName=DNS:localhost.localdomain,DNS:localhost,IP:127.0.0.1// $ openssl req -x509 -nodes -days 36500 -subj '/CN=localhost' -config ./cert.cnf \//     -newkey rsa:512 -out cert.pem// openssl req -x509 -nodes -days 36500 -subj '/CN=*.0.0.1' -newkey rsa:512 -out cert.pem// openssl req -x509 -nodes -days 36500 -subj '/CN=*.com' -newkey rsa:512 -out cert.pem// $ cat ./cert.cnf// subjectAltName=DNS:bar.com,DNS:baz.com// $ openssl req -x509 -nodes -days 36500 -subj '/CN=foo.com' -config ./cert.cnf \// subjectAltName=DNS:bar.com,DNS:*.baz.com// subjectAltName=IP:0:0:0:0:0:0:0:1,IP:2a03:2880:f003:c07:face:b00c::2,IP:0::5,IP:192.168.1.1// https://github.com/apache/httpcomponents-client/commit/303e435d7949652ea77a6c50df1c548682476b6e// These should ideally be false, but we know that hostname is usually already checked by us// Kelvin character below// OpenJDK related test.// subjectAltName=DNS:.com,DNS:.com// Replacement characters are deliberate, from certificate loading.// Since this is public API, okhttp3.internal.tls.OkHostnameVerifier.verify is also// IPv4// IPv6// Hostnamesimport static RealWebSocket.DEFAULT_MINIMUM_DEFLATE_SIZEnew TestStreams(...)Random random, ...;// from the perspective of a single peer.// zero effect on the behavior of the WebSocket API which is why tests are only written once// NOTE: Fields are named 'client' and 'server' for cognitive simplicity. This differentiation hasPipe client2Server, ...;Pipe server2client, ...;TestStreams client, ...;TestStreams server, ...;initWebSocket(...)assertExhausted(...)client.listenerserver.listenertearDown(...)server.webSocketclient.webSocketprocessNextFrame(...)assertClosing(...)assertClosed(...)pong(...)assertTextMessage(...)client.closedProtocolException.classEOFException.classclient.closeThrowslong elapsedUntilPing1long elapsedUntilPing2long elapsedUntilPing3long elapsedUntilPingclientSourceBufferSize(...)/** One peer's streams, listener, and web socket in the test. */RealWebSocket.StreamsString name, ...;WebSocketRecorder listener, ...;RealWebSocket webSocket, ...;boolean closeThrows, ...;this.namethis.listenernew WebSocketRecorder(...)new RealWebSocket(...)WebSocketExtensions.CompanioninitReaderAndWriter(...)/** Peeks the number of bytes available for the client to read immediately. This doesn't block so ... */getBuffer(...)// This will trigger a close response.// A failed write prevents further use of the WebSocket instance.// Close without code.// Read client closing, send server close.// Read server closing, close connection.// Server and client both finished closing, connection is closed.// Read server close, send client close, close connection.// Send close from both sides at the same time.// Read close, close connection close.// Client should not have sent second close.// Server should not have sent second close.// Invalid non-final ping frame.// Detects error, send close, close connection.// Not closed until close reply is received.// Manually write an invalid masked close frame.// Detects error, disconnects immediately since close already sent.// TODO(jwilson): come up with a way to test unchecked exceptions on the writer thread.// Ping.// Pong.// Don't process the ping and pong frames!// At 0ms the server sends 3 unexpected pongs. The client accepts 'em and ignores em.// After 500ms the client automatically pings and the server pongs back.// After 1000ms the client will attempt a ping 2, but we don't process it. That'll cause the// client to fail at 1500ms when it's time to send ping 3 because pong 2 hasn't been received.// Not compressed.// Compressed!import WebSocketimport WebSocketListener// Flaky https://github.com/square/okhttp/issues/4953// Flaky https://github.com/square/okhttp/issues/4515MockWebServer webServer, ...;WebSocketRecorder clientListener, ...;WebSocketRecorder serverListener, ...;this.webServerWebSocket webSocketWebSocket serverassertOpen(...)withWebSocketUpgrade(...)closeWebSockets(...)assertBinaryMessage(...)RuntimeException esetNextEventDelegate(...)AtomicInteger interceptedCountByteString messagelong messageCountboolean successlong queueSizequeueSize(...)String clientReasonString serverReasonString reasonwebsocketScheme(...)/** There's no read timeout when reading the first byte of a new frame. But as soon as we start ... */SocketPolicy.KEEP_OPENupgradeResponse(...)RealWebSocket webSocketRealWebSocket serverlong elapsedUntilPong3receivedPongCount(...)sentPingCount(...)receivedPingCount(...)/** Configure the websocket to send pings every 500 ms. Artificially prevent the server from ... */long openAtNanos/** https://github.com/square/okhttp/issues/2788 */long closeAtNanosDuration.ZERO/** We had a bug where web socket connections were leaked if the HTTP connection upgrade was not ... */Request regularRequestHttpURLConnection.HTTP_NOT_FOUND/** https://github.com/square/okhttp/issues/5705 */successfulExtensions(...)extensionNegotiationFailure(...)WebSocket clientString message1RealWebSocket.DEFAULT_MINIMUM_DEFLATE_SIZEString message2String message3String message4String message5String message6RecordedRequest upgradeRequestString keyacceptHeader(...)WebSocketProtocol.INSTANCE// Ensure application interceptors never see a null body.// Network interceptors don't execute.// Send messages until the client's outgoing buffer overflows!// Expect to fail before enqueueing 32 MiB.// Confirm all sent messages were received, followed by a client-initiated close.// When the server acknowledges the close the connection shuts down gracefully.// Truncated frame.// Sleep longer than the HTTP client's read timeout.// The client pinged the server 3 times, and it has ponged back 3 times.// The server has never pinged the client.// No pings and no pongs.// Stall in onOpen to prevent pongs from being sent.// The server can't respond to pings!// Initiate a close on the client, which will schedule a hard cancel in 500 ms.// Confirm that the hard cancel occurred after 500 ms.// Close the server and confirm it saw what we expected.// This test assumes HTTP/1.1 pooling semantics.// Server to client message big enough to be compressed.// Client to server message big enough to be compressed.// Empty server to client message.// Empty client to server message.// Server to client message that shares context with message1.// Client to server message that shares context with message2.new WebSocketReader(...)asFrameCallback(...)Buffer data, ...;WebSocketRecorder callback, ...;WebSocketReader serverReader, ...;// Mutually exclusive. Use the one corresponding to the peer whose behavior you wish to test.WebSocketReader serverReaderWithCompression, ...;WebSocketReader clientReader, ...;WebSocketReader clientReaderWithCompression, ...;ProtocolException eassertPong(...)EOFException ignoredIOException ignoredbinaryData(...)assertPing(...)byte[] junk// Empty pong.// Empty pong, flag 1 set.// Empty continuation, flag 1 set.// Empty pong, flag 2 set.// Empty pong, flag 3 set.// Hello// Hel// lo// first 4 bytes of compressed 'Hello'// last 3 bytes of compressed 'Hello'// Pong// Length = 5, "Hel"// Uncompressed 'Hello', flag 1 set// Empty ping// Ping with "Hello"// Empty close// Close with invalid 1-byte payload// Close with code and reason// Close with code 1// Close with code 5000// Close with code 1004// Close with code 1005// Close with code 1006// Close with code 'i'new LinkedBlockingQueue<Object>(...)BlockingQueue<Object> events, ...;WebSocketListener delegate, ...;/** Sets a delegate for handling the next callback to this listener. Cleared after invoked. */WebSocketListener delegatePlatform.INFOonOpen(...)new Open(...)onMessage(...)Message eventnew Message(...)onClosing(...)new Closing(...)onClosed(...)new Closed(...)onFailure(...)new Failure(...)Object eventObject actualnextEvent(...)new Ping(...)new Pong(...)(...).webSocketFailure failurefailure.responsefailure.tgetClass(...)messages.lengthfailure.responseBody/** Expose this recorder as a frame callback and shim in "ping" events. */WebSocketReader.FrameCallbacknew WebSocketReader.FrameCallback(...) { ... }Throwable t, ...;String responseBody, ...;String responseBodythis.tthis.responseBodyByteString bytes, ...;String string, ...;this.bytesthis.string(...).bytes(...).stringByteString payload, ...;this.payload(...).payloadint code, ...;String reason, ...;this.codethis.reason(...).code(...).reasonimport static WebSocketProtocol.OPCODE_BINARYimport static WebSocketProtocol.OPCODE_TEXTimport static WebSocketProtocol.PAYLOAD_BYTE_MAXimport static WebSocketProtocol.PAYLOAD_SHORT_MAXnew AfterEachCallback(...) { ... }isPresent(...)getExecutionException(...)new WebSocketWriter(...)AfterEachCallback noDataLeftBehind, ...;/** Check all data as verified inside of the test. We do this in an AfterEachCallback so that ... */WebSocketWriter serverWriter, ...;WebSocketWriter clientWriter, ...;writeMessageFrame(...)WebSocketWriter serverWriterByteString payloadWebSocketWriter clientWriterBuffer payloadcompleteSegmentByteCount(...)writeClose(...)writePong(...)ByteString longReason// Create a payload which will overflow the normal payload byte size.// Write directly to the unbuffered sink. This ensures it will become single frame.// 'e' == 4-byte follow-up length.// Create a payload which will overflow the normal and short payload byte size.// 'f' == 16-byte follow-up length.import Projectimport Workspaceimport BndEditModelimport LocalIndexedRepoimport Constantsimport RepositoryPluginimport Bndrunimport Filesimport CollectorsList<String> REQUIRED_BUNDLES, ...;/** Each is the Bundle-SymbolicName of an OkHttp module's OSGi configuration. */String RESOLVE_OSGI_FRAMEWORK, ...;/** Equinox must also be on the testing classpath. */String RESOLVE_JAVA_VERSION, ...;String REPO_NAME, ...;File testResourceDir, ...;File workspaceDir, ...;deleteDirectory(...)/** Resolve the OSGi metadata of the all okhttp3 modules. If required modules do not have OSGi ... */Workspace workspacecreateWorkspace(...)Bndrun bndRuncreateBndRun(...)File bndDirFile repoDirnew Workspace(...)Constants.PLUGINLocalIndexedRepo.PROP_LOCAL_DIRLocalIndexedRepo.PROP_NAMELocalIndexedRepo.classrefresh(...)prepareWorkspace(...)RepositoryPlugin repositoryPlugingetRepository(...)deployDirectory(...)deployClassPath(...)String runRequireStringcollect(...)joining(...)new Function<String,String>(...) { ... }BndEditModel bndEditModelnew BndEditModel(...)Bndrun resultnew Bndrun(...)setProject(...)new Project(...)setRunfw(...)setRunee(...)setRunRequires(...)File[] fileslistFiles(...)deployFile(...)String classpathString classPathEntryFile.pathSeparatorisDirectory(...)new PutOptions(...)RepositoryPlugin.PutOptionsforEach(...)walk(...)toPath(...)new Predicate<Path>(...) { ... }isRegularFile(...)new Function<Path,File>(...) { ... }toFile(...)new Consumer<File>(...) { ... }// Ensure we start from scratch.// Deploy the bundles in the deployments test directory.// Creating the run require string. It will always use the latest version of each bundle// available in the repository.// Temporary project to satisfy bnd API.intercept(...)BrotliInterceptor.INSTANCEimport HttpUrlOkHttpClient bootstrapClient, ...;buildLocalhost(...)List<InetAddress> resultdnsResponse(...)UnknownHostException uhechar[] arrayThrowable cause// TODO how closely to follow POST rules on caching?// 5. unsuccessful response// 4. successful stale cached GET response// 3. successful network response// 2. unsuccessful (404, 500) fresh cached GET response// 1. successful fresh cached GET response// TODO GET preferred order - with tests to confirm thisCache cacheOkHttpClient cachedClientDnsOverHttps cachedDnsresolvePrivateAddresses(...)includeIPv6(...)client(...)DnsOverHttps.BuilderUnknownHostException e// impossible for IP addressesimport static DnsRecordCodec.TYPE_Aimport static DnsRecordCodec.TYPE_AAAAencodeQuery(...)replace(...)base64Url(...)DnsRecordCodec.INSTANCEList<InetAddress> encodeddecodeAnswers(...)List<InetAddress> decoded/** Temporary registry of known DNS over HTTPS providers. ... */bootstrapDnsHosts(...)getByIp(...)List<DnsOverHttps> resultnew ArrayList<DnsOverHttps>(...)buildGoogle(...)buildGooglePost(...)buildCloudflare(...)buildCloudflareIp(...)buildCloudflarePost(...)buildCryptoSx(...)buildChantra(...)//result.add(buildCleanBrowsing(client)); // timeouts// 521 - server down// unlikelyOkHttpClient bootstrapClientList<String> namesnew OpenSSLProvider(...)List<DnsOverHttps> dnsProvidersproviders(...)Cache dnsCacheList<DnsOverHttps> badProvidersrunBatch(...)long timeDnsOverHttps dnsprint(...)List<InetAddress> resultsimport Patternimport ResponseBodynew LogRecorder(...)MediaType PLAIN, ...;LogRecorder networkLogs, ...;HttpLoggingInterceptor networkInterceptor, ...;LogRecorder applicationLogs, ...;HttpLoggingInterceptor applicationInterceptor, ...;Interceptor extraNetworkInterceptor, ...;Level.NONELevel levelassertNoMoreLogs(...)Level.BASICassertLogMatch(...)assertLogEqual(...)Level.HEADERSLevel.BODYbodyGetNoBody(...)ResponseBody responseBodywriteUtf8CodePoint(...)new UnknownHostException(...)HttpLoggingInterceptor networkInterceptorHttpLoggingInterceptor applicationInterceptorredactHeader(...)RequestBody asyncRequestBodyint counter, ...;isLessThanOrEqualTo(...)HttpLoggingInterceptor.LoggerList<String> logs, ...;int index, ...;compile(...)Pattern.DOTALL// The default is NONE.// It's invalid to return this if not requested, but the server might anyway// HTTP/2import static Protocol.HTTP_1_1import static Protocol.HTTP_2new Factory(...)LoggingEventListener.FactoryLogRecorder logRecorder, ...;LoggingEventListener.Factory loggingEventListenerFactory, ...;cacheConditionalHit(...)cacheHit(...)cacheMiss(...)satisfactionFailure(...)HttpLoggingInterceptorTest.LogRecorderString id, ...;String type, ...;String data, ...;this.idEvent otherother.idother.typeother.dataimport EventSourceimport EventSourcesnew EventSourceRecorder(...)EventSourceRecorder listener, ...;EventSource sourcenewEventSource(...)assertEvent(...)assertClose(...)EventSource.FactoryFactory factorycreateFactory(...)import EventSourceListenernew LinkedBlockingDeque<Object>(...)new Event(...)(...).eventSource(...).tEventSource eventSource, ...;this.eventSourceimport ArrayDequenew ArrayDeque<Object>(...)Deque<Object> callbacks, ...;/** Either {@link Event} or {@link Long} items for events and retry changes, respectively. */consumeEvents(...)ServerSentEventReader.Callbacknew ServerSentEventReader.Callback(...) { ... }ServerSentEventReader readernew ServerSentEventReader(...)processNextEvent(...)import Jsoupimport Documentimport Element/** Fetches HTML from a requested URL, follows the links, and repeats. */synchronizedSet(...)new LinkedBlockingQueue<HttpUrl>(...)new ConcurrentHashMap<String,AtomicInteger>(...)Set<HttpUrl> fetchedUrls, ...;LinkedBlockingQueue<HttpUrl> queue, ...;ConcurrentHashMap<String,AtomicInteger> hostnames, ...;newFixedThreadPool(...)drainQueue(...)Thread currentThreadString originalNamefetch(...)AtomicInteger hostnameCountAtomicInteger previousputIfAbsent(...)String responseSourceString contentTypeDocument documentElement elementselect(...)String hrefattr(...)HttpUrl linkint threadCountlong cacheByteCountCrawler crawlernew Crawler(...)args.lengthcrawler.queueparallelDrainQueue(...)// Skip hosts that we've visited many times.// URL is either invalid or its scheme isn't http/https.GetExample examplenew GetExample(...)String responseMediaType JSON, ...;PostExample examplenew PostExample(...)String jsonbowlingJson(...)new AccessHeaders(...)new AsynchronousGet(...)new Authenticate(...)// Give up, we've already attempted to authenticate.int cacheSizeString response1BodyString response2Bodynew CacheResponse(...)// 10 MiBimport ScheduledExecutorServicenewScheduledThreadPool(...)ScheduledExecutorService executor, ...;schedule(...)new CancelCall(...)// This URL is served with a 2 second delay.// Schedule a job to cancel the call in 1 second.new CertificatePinning(...)Set<String> blacklist, ...;String pinInterceptor CHECK_HANDSHAKE_INTERCEPTOR, ...;/** Rejects otherwise-trusted certificates. */new CheckHandshake(...)new ConfigureTimeouts(...)new CurrentDateInterceptor(...)Headers newHeadersRequest newRequestnew CurrentDateHeader(...)import NoSuchAlgorithmExceptionimport CipherSuiteList<CipherSuite> customCipherSuitesCipherSuite.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256CipherSuite.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384CipherSuite.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384ConnectionSpec specdefaultTrustManager(...)SSLSocketFactory sslSocketFactorydefaultSslSocketFactory(...)SSLSocketFactory customSslSocketFactory/** Returns the VM's default SSL socket factory, using {@code trustManager} for trusted root ... *//** Returns a trust manager that trusts the VM's default certificate authorities. */TrustManager[] trustManagerstrustManagers.lengthString[] resultresult.length/** An SSL socket factory that forwards all calls to a delegate. Override {@link #configureSocket} ... */new CustomCipherSuites(...)// Configure cipher suites to demonstrate how to customize which cipher suites will be used for// an OkHttp request. In order to be selected a cipher suite must be included in both OkHttp's// connection spec and in the SSLSocket's enabled cipher suites array. Most applications should// not customize the cipher suites list.import CertificatesdecodeCertificatePem(...)X509Certificate comodoRsaCertificationAuthority, ...;// Typically developers will need to get a PEM file from their organization's TLS administrator.// sufficient to connect to most HTTPS sites including https://godaddy.com and https://visa.com.// https://publicobject.com (Comodo) and https://squareup.com (Entrust). But they aren't// PEM files for root certificates of Comodo and Entrust. These two CAs are sufficient to viewX509Certificate entrustRootCertificateAuthority, ...;X509Certificate letsEncryptCertificateAuthority, ...;HandshakeCertificates certificatesnew CustomTrust(...)// This implementation just embeds the PEM files in Java strings; most applications will// instead read this from a resource file that gets bundled with the application.// Uncomment if standard certificates are also required.//.addPlatformTrustedCertificates()/** Create an HTTPS server with a self-signed certificate that OkHttp trusts. */String localhostHeldCertificate localhostCertificatenew HttpsServer(...)new LoggingInterceptor(...)LoggingInterceptors.classlong t2new LoggingInterceptors(...)import JsonAdapterimport MoshiMoshi.Builderadapter(...)Gist.classMoshi moshi, ...;JsonAdapter<Gist> gistJsonAdapter, ...;Gist gistfromJson(...)Entry<String,GistFile> entryMap<>.Entry<String,GistFile>gist.filesgetValue(...).contentMap<String,GistFile> files, ...;String content, ...;new ParseResponseWithMoshi(...)new PerCallSettings(...)// This URL is served with a 1 second delay.// Copy to customize OkHttp for this request.MediaType MEDIA_TYPE_MARKDOWN, ...;new PostFile(...)import FormBodyRequestBody formBodynew PostForm(...)import MultipartBodyString IMGUR_CLIENT_ID, ...;/** The imgur client ID for OkHttp recipes. If you're using imgur for anything other than running ... */MediaType MEDIA_TYPE_PNG, ...;new PostMultipart(...)// Use the imgur image upload API as documented at https://api.imgur.com/endpoints/imagefactor(...)int xnew PostStreaming(...)PipeBody pipeBodynew PipeBody(...)streamPrimesToSinkAsynchronously(...)/** This request body makes it possible for another thread to stream data to the uploading request. ... */Pipe pipe, ...;BufferedSink sink, ...;new PostStreamingWithPipe(...)String postBodynew PostString(...)new BasicAuthInterceptor(...)new PreemptiveAuth(...)String credentials, ...;this.credentialsthis.hostimport HandshakePrintingEventListener.FACTORYRequest washingtonPostRequestRequest newYorkTimesRequestnew PrintEvents(...)new Factory(...) { ... }AtomicLong nextCallId, ...;long callIdnew PrintingEventListener(...)Factory FACTORY, ...;long callId, ...;long callStartNanos, ...;this.callIdthis.callStartNanosprintEvent(...)// Consume and discard the response body./** This prints events for a single in-flight call. It won't work for multiple concurrent calls ... */new PrintEventsNonConcurrent(...)long nowNanosProgressListener progressListenernew ProgressListener(...) { ... }boolean firstUpdate, ...;new ProgressResponseBody(...)new Progress(...)ResponseBody responseBody, ...;ProgressListener progressListener, ...;BufferedSource bufferedSource, ...;this.progressListenerlong totalBytesRead, ...;long bytesReadupdate(...)// read() returns the number of bytes read, or -1 if this source is exhausted.import Typesnew GzipRequestInterceptor(...)newParameterizedType(...)Map<>.classString GOOGLE_API_KEY, ...;/** The Google API KEY for OkHttp recipes. If you're using Google APIs for anything other than ... */MediaType MEDIA_TYPE_JSON, ...;JsonAdapter<Map<String,String>> mapJsonAdapter, ...;Map<String,String> requestBodyRequestBody jsonRequestBodytoJson(...)new RequestBodyCompression(...)/** This interceptor compresses the HTTP request body. Many webservers can't handle this! */Request compressedRequest// We don't know the compressed length in advance!Interceptor REWRITE_CACHE_CONTROL_INTERCEPTOR, ...;/** Dangerous interceptor that rewrites the server's cache-control header. */OkHttpClient clientForCallnew RewriteResponseCacheControl(...)// Force this request's response to be written to the cache. This way, subsequent responses// can be read from the cache.new SynchronousGet(...)new WebSocketEcho(...)// Trigger shutdown of the dispatcher's executor so this process can exit cleanly.List<>.classContributor.classString ENDPOINT, ...;Moshi MOSHI, ...;JsonAdapter<List<Contributor>> CONTRIBUTORS_JSON_ADAPTER, ...;String login, ...;int contributions, ...;List<Contributor> contributorssort(...)new Comparator<Contributor>(...) { ... }c2.contributionsc1.contributionsContributor contributorcontributor.contributionscontributor.login// Create request for remote resource.// Execute the request and retrieve the response.// Deserialize HTTP response to concrete type.// Sort list by the most contributions.// Output list of contributors.// No instances./** Authorization for an application to make Slack API calls on behalf of a user. */boolean ok, ...;String access_token, ...;String scope, ...;String user_id, ...;String team_name, ...;String team_id, ...;this.okthis.access_tokenthis.scopethis.user_idthis.team_namethis.team_id/** Runs a MockWebServer on localhost and uses it as the backend to receive an OAuth session. ... */new LinkedHashMap<ByteString,Listener>(...)SecureRandom secureRandom, ...;SlackApi slackApi, ...;MockWebServer mockWebServer, ...;Map<ByteString,Listener> listeners, ...;/** Guarded by this. */this.slackApislackApi.portByteString staterandomToken(...)authorizeUrl(...)redirectUrl(...)/** When the browser hits the redirect URL, use the provided code to ask Slack for a session. */HttpUrl requestUrlString codeString stateStringOAuthSession sessionexchangeCode(...)sessionGranted(...)// Success!/** A realtime messaging session. */RtmStartResponse rtmStartResponsertmStart(...)rtm(...)rtmStartResponse.url//                the body from slack is a 0-byte-buffer// TODO(jwilson): can I read the response body? Do I have to?// TOOD(jwilson): decode incoming messages and dispatch them somewhere./** See https://api.slack.com/methods/rtm.start. */Object self, ...;Object team, ...;List<Object> users, ...;List<Object> channels, ...;List<Object> groups, ...;List<Object> mpims, ...;List<Object> ims, ...;List<Object> bots, ...;import FromJsonimport ToJson/** API access to the <a href="https://api.slack.com/apps">Slack API</a> as an application. One ... */HttpUrl baseUrl, ...;OkHttpClient httpClient, ...;String clientId, ...;String clientSecret, ...;this.httpClientthis.moshinew SlackJsonAdapters(...)this.clientIdthis.clientSecretthis.port/** See https://api.slack.com/docs/oauth. *//** See https://api.slack.com/methods/oauth.access. */JsonAdapter<OAuthSession> jsonAdapterOAuthSession.classJsonAdapter<RtmStartResponse> jsonAdapterRtmStartResponse.class/** See https://api.slack.com/rtm. *//** A connection to Slack as a single user. */OAuthSessionFactory sessionFactory, ...;OAuthSession session, ...;/** Shows a browser URL to authorize this app to act as this user. */HttpUrl authorizeUrlnewAuthorizeUrl(...)new Listener(...) { ... }initOauthSession(...)new OAuthSessionFactory(...)/** Set the OAuth session for this client. */this.session/** Waits for an OAuth session for this client to be set. */waitUntilNotified(...)/** Starts a real time messaging session. */String accessTokenRtmSession rtmSessionnew RtmSession(...)session.access_tokenopen(...)String clientIdString clientSecretSlackApi slackApinew SlackApi(...)SlackClient clientnew SlackClient(...)String scopesrequestOauthSession(...)new OAuthSession(...)awaitAccessToken(...)startRtm(...)import FileInputStreamimport KeyManagerFactorySSLContext sslContext, ...;String root, ...;this.sslContextthis.rootdirectoryToResponse(...)fileToResponse(...)FileNotFoundException eStringBuilder responseString filefileToBytes(...)String keystoreFileString passwordString rootSampleServer servernew SampleServer(...)KeyStore keystoregetDefaultType(...)KeyManagerFactory keyManagerFactorynew FileInputStream(...)getKeyManagers(...)/** Create UNIX domain sockets for MockWebServer and OkHttp and connect 'em together. Note that we ... */File socketFilenew UnixDomainSocketFactory(...)new UnixDomainServerSocketFactory(...)new ClientAndServer(...)// Clean up from previous runs.import UnixSocketimport UnixSocketAddressimport UnixSocketChannel/** Subtype UNIX socket for a higher-fidelity impersonation of TCP sockets. This is named "tunneling" ... */File path, ...;InetSocketAddress inetSocketAddress, ...;this.inetSocketAddressnew UnixSocketAddress(...)import ClosedChannelExceptionimport UnixServerSocketChannel/** Impersonate TCP-style ServerSocketFactory over UNIX domain sockets. */new UnixDomainServerSocket(...)UnixServerSocketChannel serverSocketChannel, ...;InetSocketAddress endpoint, ...;UnixSocketAddress addressthis.endpointconfigureBlocking(...)UnixSocketChannel channelnew TunnelingUnixSocket(...)ClosedChannelException eSocketException exceptionnew SocketException(...)// A white lie. There is no local port./** Impersonate TCP-style SocketFactory over UNIX domain sockets. */Socket resultTags.classExtensions.classParameterizedTestExtension.classArgumentsSources.class                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Y    Y    