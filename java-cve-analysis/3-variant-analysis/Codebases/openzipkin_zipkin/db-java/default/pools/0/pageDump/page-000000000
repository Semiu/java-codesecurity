C:/Users/Semiu/Java/openzipkin_zipkin/benchmarks/pom.xmlpomxmlC:/Users/Semiu/Java/openzipkin_zipkin/benchmarksbenchmarksC:/Users/Semiu/Java/openzipkin_zipkinopenzipkin_zipkinC:/Users/Semiu/JavaJavaC:/Users/SemiuSemiuC:/UsersUsersC:/

    Copyright 2015-2020 The OpenZipkin Authors

    Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
    in compliance with the License. You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software distributed under the License
    is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
    or implied. See the License for the specific language governing permissions and limitations under
    the License.

http://maven.apache.org/POM/4.0.0xsihttp://www.w3.org/2001/XMLSchema-instanceprojectschemaLocationhttp://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsdmodelVersion4.0.0parentgroupIdio.zipkinartifactIdzipkin-parentversion2.23.3-SNAPSHOTnameBenchmarksdescriptionBenchmarks (JMH)propertiesmain.basedir${project.basedir}/..main.java.version1.8main.signature.artifactjava18jmh.version1.27unpack-proto.directory${project.build.directory}/main/protodependencyManagementdependenciesdependencyio.nettynetty-bom${netty.version}typescopeimportcom.fasterxml.jacksonjackson-bom${jackson.version} for codec benchmarks com.google.code.gsongson${gson.version}com.squareup.moshimoshi1.11.0exclusions let wire control the okio version exclusioncom.squareup.okiookiocom.esotericsoftwarekryo${kryo.version}org.openjdk.jmhjmh-core${jmh.version}jmh-generator-annprocessprovidedcom.google.protobufprotobuf-java3.14.0${project.groupId}zipkin-server${project.version}${project.groupId}.zipkin2zipkin-storage-elasticsearchcom.squareup.wirewire-runtime${wire.version}io.zipkin.proto3zipkin-proto3${zipkin-proto3.version}zipkin-teststest zipkin-server optional dependencies for running ServerIntegratedBenchmark zipkin-storage-cassandra*com.datastax.ossjava-driver-core${java-driver.version}zipkin-storage-mysql-v1org.mariadb.jdbcmariadb-java-client${mariadb-java-client.version}com.zaxxerHikariCP${HikariCP.version}org.testcontainerstestcontainers${testcontainers.version}buildpluginspluginmaven-dependency-pluginwire-maven-pluginmaven-shade-pluginexecutionsexecutionphasepackagegoalsgoalshadeconfigurationfinalNametransformerstransformerimplementationorg.apache.maven.plugins.shade.resource.ManifestResourceTransformermainClassorg.openjdk.jmh.MaincreateDependencyReducedPomfalsemaven-compiler-pluginiddefault-compilecompilecombine.selfoverride instead of javac-with-errorprone compilerIdjavacsourcetarget scrub errorprone compiler args compilerArgsUTF-8C:/Users/Semiu/Java/openzipkin_zipkin/pom.xmlpackagingmodulesmodulezipkinzipkin-junitzipkin-storagezipkin-collector${project.basedir}project.build.sourceEncodingproject.build.resourceEncodingproject.build.outputEncodingproject.reporting.outputEncoding default bytecode version for src/main  override to set exclusions per-project errorprone.argserrorprone.version2.4.0zipkin-proto3.version1.0.0 This allows you to test feature branches with jitpack armeria.groupIdcom.linecorp.armeriaarmeria.version1.3.0 Match Armeria version to avoid conflicts including running tests in the IDE netty.version4.1.54.Final It's easy for Jackson dependencies to get misaligned, so we manage it ourselves. jackson.version2.12.0java-driver.version4.9.0micrometer.version1.6.2 Used for Generated annotations javax-annotation-api.version1.3.1 update together spring-boot.version2.4.1spring.version5.3.2 MySQL connector is GPL, even if it has an OSS exception.
         https://www.mysql.com/about/legal/licensing/foss-exception/

         MariaDB has a friendlier license, LGPL, which is less scary in audits.
    mariadb-java-client.version2.7.1HikariCP.version3.4.5slf4j.version1.7.30auto-value.version1.7.4git-commit-id.version4.0.3 Test only dependencies junit.version4.13.1junit-jupiter.version5.7.0mockito.version3.6.28assertj.version3.18.1awaitility.versionhamcrest.version1.3testcontainers.version1.15.1okhttp.versionkryo.version5.0.3 Only used for proto interop testing; wire-maven-plugin is usually behind latest. wire.version3.0.2gson.version2.8.6${project.build.directory}/test/protolicense.skip${skipTests}animal-sniffer-maven-plugin.version1.19go-offline-maven-plugin.version1.2.8 TODO: cleanup any redundant ignores now also in the 4.0 release (once final) license-maven-plugin.version4.0.rc2maven-bundle-plugin.version5.1.1maven-compiler-plugin.version3.8.1 Use same version as https://github.com/openzipkin/docker-java maven-dependency-plugin.version3.1.2maven-deploy-plugin.version3.0.0-M1maven-enforcer-plugin.version3.0.0-M3maven-help-plugin.version3.2.0maven-install-plugin.versionmaven-javadoc-plugin.versionmaven-jar-plugin.versionmaven-release-plugin.versionmaven-shade-plugin.version3.2.4maven-source-plugin.version3.2.1maven-surefire-plugin.version3.0.0-M5nexus-staging-maven-plugin.version1.6.8Zipkin (Parent)urlhttps://github.com/openzipkin/zipkininceptionYear2015organizationOpenZipkinhttp://zipkin.io/licenseslicenseThe Apache Software License, Version 2.0http://www.apache.org/licenses/LICENSE-2.0.txtdistributionreposcmconnectionscm:git:https://github.com/openzipkin/zipkin.gitdeveloperConnectiontagHEAD Developer section is needed for Maven Central, but doesn't need to include each person developersdeveloperopenzipkinOpenZipkin Gitterhttps://gitter.im/openzipkin/zipkindistributionManagementsnapshotRepositoryossrhhttps://oss.sonatype.org/content/repositories/snapshotsrepositoryhttps://oss.sonatype.org/service/local/staging/deploy/maven2/issueManagementsystemGithubhttps://github.com/openzipkin/zipkin/issues Be careful here, especially to not import BOMs as io.zipkin.zipkin2:zipkin has this parent.

         For example, if you imported Netty's BOM here, using Brave would also download that BOM as
         it depends indirectly on io.zipkin.zipkin2:zipkin. As Brave itself is indirectly used, this
         can be extremely confusing when people are troubleshooting library version assignments.  Do not add compile dependencies here. This can cause problems for libraries that depend on
         io.zipkin.zipkin2:zipkin difficult to unravel. junit${junit.version}org.junit.jupiterjunit-jupiter${junit-jupiter.version}org.junit.vintagejunit-vintage-engine Current versions of JUnit5 provide the above junit-jupiter artifact for convenience, but we
         may still have transitive dependencies on these older artifacts and have to make sure
         they're all using the same version. junit-jupiter-apijunit-jupiter-engineorg.assertjassertj-core${assertj.version}org.mockitomockito-core${mockito.version}org.hamcresthamcrest-core${hamcrest.version}pluginManagement mvn -N io.takari:maven:wrapper generates the ./mvnw script io.takarimaven0.7.73.6.3 mvn de.qaware.maven:go-offline-maven-plugin:resolve-dependencies de.qaware.mavengo-offline-maven-plugin${go-offline-maven-plugin.version} Add dependencies indirectly referenced by build plugins dynamicDependenciesDynamicDependencyorg.codehaus.mojo.signature${main.signature.artifact}1.0signaturerepositoryTypeMAINcom.mycilalicense-maven-plugin-git${license-maven-plugin.version}com.google.errorproneerror_prone_core${errorprone.version}org.apache.maven.surefiresurefire-junit-platform${maven-surefire-plugin.version}PLUGIN${maven-compiler-plugin.version}inheritedtrue${main.java.version}forkshowWarnings Uploads occur as a last step (which also adds checksums) maven-deploy-plugin${maven-deploy-plugin.version}maven-install-plugin${maven-install-plugin.version}maven-jar-plugin${maven-jar-plugin.version}archive prevents huge pom file from also being added to the jar under META-INF/maven addMavenDescriptormaven-release-plugin${maven-release-plugin.version}useReleaseProfilereleaseProfilesreleaseautoVersionSubmodulestagNameFormat@{project.version}org.sonatype.pluginsnexus-staging-maven-plugin${nexus-staging-maven-plugin.version}org.eclipse.m2elifecycle-mappinglifecycleMappingMetadatapluginExecutionspluginExecutionpluginExecutionFilterorg.apache.maven.pluginsversionRange[3.7,)testCompileactionconfiguratororg.eclipse.m2e.jdt.javaConfiguratormaven-eclipse-plugin2.10downloadSourcesdownloadJavadocs${maven-shade-plugin.version} The below plugins compile protobuf stubs in the indicated source tree ${maven-dependency-plugin.version} wire-maven-plugin cannot get proto definitions from dependencies: this will unpack-protogenerate-sourcesunpack-dependenciesincludeArtifactIdsincludes**/*.protooutputDirectory${unpack-proto.directory}protoSourceDirectoryincludezipkin.proto3.* Ensure common utility commands use coherent versions (avoid lazy downloads) maven-help-plugin${maven-help-plugin.version} Top-level to ensure our server can use JDK 1.8
             (by checking we don't accidentally use later apis) org.codehaus.mojoanimal-sniffer-maven-plugin${animal-sniffer-maven-plugin.version}checkTestClassescheckmaven-surefire-plugin Ensures root cause ends up in the console trimStackTracemaven-failsafe-pluginintegration-testverifysystemProperties Gives better context when there's an exception such as AbortedStreamException.
                 Set globally as we have failures sometimes in storage-elasticsearch and sometimes
                 in zipkin-server tests (same code used two places).
            com.linecorp.armeria.verboseExceptionsalways workaround to SUREFIRE-1831 useModulePathmaven-enforcer-plugin${maven-enforcer-plugin.version}enforce-javaenforcerulesrequireJavaVersion[1.8,16)license-maven-pluginskip${license.skip} session.executionRootDirectory resolves properly even with nested modules header${main.basedir}/src/etc/header.txtmapping Don't use javadoc style as this makes code formatters break it by adding tags! javaSLASHSTAR_STYLEktjsxtstsxbndSCRIPT_STYLEejsXML_STYLEcss build-bin/docker docker_block_on_healthconfigure_dockerconfigure_docker_pushdocker_archdocker_argsdocker_builddocker_pushdocker_test_image build-bin/git login_gitversion_from_trigger_tag build-bin/gpg configure_gpg build-bin/maven maven_buildmaven_build_or_unjarmaven_deploymaven_go_offlinemaven_optsmaven_releasemaven_unjar docker/**/start-* start-cassandrastart-elasticsearchstart-kafka-zookeeperstart-mysqlstart-nginxstart-zipkin docker/**/docker-healthcheck docker-healthcheckexcludesexclude**/simplelogger.properties**/continuous-build.yml**/*.dockerignore.editorconfig.gitattributes.gitignore.github/**.mvn/**mvnw*etc/header.txt**/nginx.conf**/.idea/****/node_modules/****/build/****/coverage/****/.babelrc**/.bowerrc**/.editorconfig**/.env.development**/.eslintignore**/.eslintrc**/.eslintrc.js**/.linguirc**/testdata/**/*.json**/test/data/**/*.json**/src/translations/**LICENSE**/*.md**/*.bnd**/src/main/resources/zipkin.txt**/src/main/resources/*.yml**/spring.factories Cassandra integration tests break when license headers are present **/src/main/resources/*.cqlkafka_*/****/nohup.outsrc/test/resources/****/generated/**.dockerignorebuild-bin/*strictCheckprofilesprofileinclude-lensactivationproperty!skipLenszipkin-lens -DskipTests ensures benchmarks don't end up in javadocs or in Maven Central include-benchmarks!skipTestserror-prone-9+jdk[9,) only use errorprone on main source tree forceJavacCompilerUsearg-XDcompilePolicy=simple-Xplugin:ErrorProne ${errorprone.args}annotationProcessorPathsprocessorPath auto-value is placed here eventhough not needed for all projects as
                         configuring along with errorprone is tricky in subprojects com.google.auto.valueauto-value${auto-value.version}extensionsserverIdnexusUrlhttps://oss.sonatype.org/ Zipkin release is about ~100M mostly from the two server distributions. Default
                   will timeout after 5 minutes, which can trigger fairly easily with this size. stagingProgressPauseDurationSeconds20stagingProgressTimeoutMinutesautoReleaseAfterClosemaven-gpg-plugin1.6sign-artifactssigngpgArguments--pinentry-modeloopback Creates source jar maven-source-plugin${maven-source-plugin.version}attach-sourcesjar Creates javadoc jar, skipping internal classes maven-javadoc-plugin${maven-javadoc-plugin.version}sourceFileExcludes**/internal/*.java**/Internal*.javaexcludePackageNames*.internal.*failOnError hush pedantic warnings: we don't put param and return on everything! doclintnone While we publish modules, our source is pre-Java9 so tell javadoc that. 8attach-javadocsnetbeansactiveByDefault NetBeans org-netbeans-modules-editor-indent.CodeStyle.usedProfileorg-netbeans-modules-editor-indent.CodeStyle.project.indent-shift-width2org-netbeans-modules-editor-indent.CodeStyle.project.spaces-per-taborg-netbeans-modules-editor-indent.CodeStyle.project.tab-sizeorg-netbeans-modules-editor-indent.CodeStyle.project.text-limit-width110org-netbeans-modules-editor-indent.CodeStyle.project.expand-tabsmodule-info Build profiles can only consider static properties, such as files or ENV variables.
           To conditionally add module information, we use existence of bnd.bnd. This allows
           irrelevant packages such as tests and benchmarks to quietly opt-out.
           http://maven.apache.org/guides/introduction/introduction-to-profiles.html fileexistsbnd.bnd OSGi and Java Modules configuration org.apache.felixmaven-bundle-plugin${maven-bundle-plugin.version}obrRepositoryNONEinstructions_include-bnd.bndprocess-classesmanifestdefault-jar Include the MANIFEST.MF maven-bundle-plugin generates from bnd.bnd manifestFile${project.build.outputDirectory}/META-INF/MANIFEST.MFmanifestEntriesAutomatic-Module-Name${module.name}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkinio.zipkin.zipkin2Zipkin Core Library Matches Export-Package in bnd.bnd module.namezipkin2
      MutablePublicArray: We share an array of hex chars in internal code
      JdkObsolete: SortedMap was replaced by NavigableMap, but the focus is Sorted not Navigable
    -Xep:MutablePublicArray:OFF -Xep:JdkObsolete:OFF CI should run the "release" profile during tests to ensure no 1.7 features are in use 1.7java17org.jvnetanimal-sniffer-annotation annotations are not runtime retention, so don't need a runtime dep  Internal classes used in SpanBytesDecoder.JSON_V[12]  this dependency is shaded out optional Use of gson is internal only minimizeJarfiltersfilterartifactcom.google.code.gson:gsoncom/google/gson/stream/JsonReader*.classcom/google/gson/stream/JsonToken.classcom/google/gson/stream/MalformedJsonException.classcom/google/gson/internal/JsonReaderInternalAccess.classrelocationsrelocationpatterncom.google.gsonshadedPatternzipkin2.internal.gsonresources This adds the LICENSE and NOTICE file to the jar and -sources jar of each module resourcefilteringdirectory${main.basedir}targetPathMETA-INF/NOTICE The core jar needs to be Java 1.6 bytecode java16 JDK 12+ can no longer generate Java 1.6 bytecode, so we require JDK 11.
                         https://www.oracle.com/java/technologies/javase/12-relnote-issues.html [1.8,12)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Annotation.javaAnnotationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/mainmainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/srcsrcwriteReplacewriteReplace()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Annotation.classclassfinallongvoidAnnotation(long,java.lang.String)valuetimestampserialVersionUIDprivatestaticjava.langComparable<Annotation>C:/modules/java.base/java/lang/Comparable.classComparableC:/modules/java.base/java/langlangC:/modules/java.base/javaC:/modules/java.basejava.baseC:/modulespublicabstract<clinit><clinit>()0L0boolean<nulltype>"value == null"value == nullintthatbyTimestamp1"Annotation{"
      + "timestamp="Annotation{timestamp=", "
      + "value=", value="}"}oh100000332readResolvereadResolve()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Annotation$SerializedForm.classAnnotation$SerializedFormC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classesclassesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/targetSerializedFormSerializedForm(zipkin2.Annotation)annotationeCopyright 2015-2019 The OpenZipkin AuthorsLicensed under the Apache License, Version 2.0 (the "License"); you may not use this file exceptin compliance with the License. You may obtain a copy of the License athttp://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, software distributed under the Licenseis distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either expressor implied. See the License for the specific language governing permissions and limitations underthe License.Associates an event that explains latency with a timestamp.<p>Unlike log statements, annotations are often codes: Ex. {@code cache.miss}.@Immutable for Spark jobsMicroseconds from epoch.<p>This value should be set directly by instrumentation, using the most precise value possible.For example, {@code gettimeofday} or multiplying {@link System#currentTimeMillis} by 1000.Usually a short tag indicating an event, like {@code cache.miss} or {@code error}Compares by {@link #timestamp}, then {@link #value}. clutter below mainly due to difficulty working with Kryo which cannot handle AutoValue subclass See https://github.com/openzipkin/zipkin/issues/1879 As this is an immutable object (no default constructor), defer to a serialization proxy.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call.javaCallCall<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call.classCall<V>vConstant<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$Constant.classCall$ConstantBase<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$Base.classCall$BaseConstant<V>(java.lang.Object)cloneclone()isCanceledisCanceled()cancelcancel()Callback<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Callback.classCallbackenqueueenqueue(zipkin2.Callback)executeexecute()propagateIfFatalpropagateIfFatal(java.lang.Throwable)ErrorHandler<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$ErrorHandler.classCall$ErrorHandlerhandleErrorhandleError(zipkin2.Call.ErrorHandler)FlatMapper<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$FlatMapper.classCall$FlatMapperRCall<R>flatMapflatMap(zipkin2.Call.FlatMapper)FlatMapper<V,R>Mapper<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$Mapper.classCall$Mappermapmap(zipkin2.Call.Mapper)Mapper<V,R>Tjava.utilList<T>C:/modules/java.base/java/util/List.classListC:/modules/java.base/java/utilutilCollection<T>C:/modules/java.base/java/util/Collection.classCollectionIterable<T>C:/modules/java.base/java/lang/Iterable.classIterableCall<List<T>>emptyListemptyList()Vcreatecreate(java.lang.Object)Call()Call<V>()doIsCanceleddoIsCanceled()protecteddoCanceldoCancel()doEnqueuedoEnqueue(zipkin2.Callback)doExecutedoExecute()BaseBase()Base<V>()executedcanceledvolatilehashCodehashCode()equalsequals(java.lang.Object)toStringtoString()ConstantConstant(java.lang.Object)String[]length"unchecked"uncheckedCallback<>ErrorHandler<>Call<>()List<>Collection<>Iterable<>inputmapperMapping<R,V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$Mapping.classCall$MappingBase<R>Mapping<R,V>(zipkin2.Call.Mapper,zipkin2.Call)Callback<R>ErrorHandler<R>FlatMapper<R,R>Mapper<R,R>Call<R>()Base<R>()MappingMapping(zipkin2.Call.Mapper,zipkin2.Call)delegateCall<V2>flatMapperFlatMapping<R,V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$FlatMapping.classCall$FlatMappingFlatMapping<R,V>(zipkin2.Call.FlatMapper,zipkin2.Call)FlatMappingFlatMapping(zipkin2.Call.FlatMapper,zipkin2.Call)mappederrorcallbackerrorHandlerErrorHandling<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Call$ErrorHandling.classCall$ErrorHandlingErrorHandling<V>(zipkin2.Call.ErrorHandler,zipkin2.Call)handleError(java.lang.Throwable)ErrorHandlingErrorHandling(zipkin2.Call.ErrorHandler,zipkin2.Call)SENTINELtonSuccessonSuccess(java.lang.Object)onErroronError(java.lang.Throwable)"ConstantCall{value="ConstantCall{value=Constant<>Base<>map(java.lang.Object)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call$Mapping$1.classCall$Mapping$1()"Mapping{call="Mapping{call=", mapper=", mapper=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call$FlatMapping$1.classCall$FlatMapping$1"FlatMapping{call="FlatMapping{call=", flatMapper=", flatMapper=java.util.concurrent.atomicAtomicReference<>C:/modules/java.base/java/util/concurrent/atomic/AtomicReference.classAtomicReferenceC:/modules/java.base/java/util/concurrent/atomicatomicC:/modules/java.base/java/util/concurrentconcurrentrefAtomicReference<>(java.lang.Object)weakCompareAndSetReleaseweakCompareAndSetRelease(java.lang.Object,java.lang.Object)weakCompareAndSetAcquireweakCompareAndSetAcquire(java.lang.Object,java.lang.Object)weakCompareAndSetVolatileweakCompareAndSetVolatile(java.lang.Object,java.lang.Object)compareAndExchangeReleasecompareAndExchangeRelease(java.lang.Object,java.lang.Object)compareAndExchangeAcquirecompareAndExchangeAcquire(java.lang.Object,java.lang.Object)compareAndExchangecompareAndExchange(java.lang.Object,java.lang.Object)setReleasesetRelease(java.lang.Object)getAcquiregetAcquire()setOpaquesetOpaque(java.lang.Object)getOpaquegetOpaque()setPlainsetPlain(java.lang.Object)getPlaingetPlain()java.util.functionBinaryOperator<V>C:/modules/java.base/java/util/function/BinaryOperator.classBinaryOperatorC:/modules/java.base/java/util/functionfunctionBiFunction<V,V,V>C:/modules/java.base/java/util/function/BiFunction.classBiFunctionaccumulateAndGetaccumulateAndGet(java.lang.Object,java.util.function.BinaryOperator)BinaryOperator<>BiFunction<>getAndAccumulategetAndAccumulate(java.lang.Object,java.util.function.BinaryOperator)UnaryOperator<V>C:/modules/java.base/java/util/function/UnaryOperator.classUnaryOperatorFunction<V,V>C:/modules/java.base/java/util/function/Function.classFunctionupdateAndGetupdateAndGet(java.util.function.UnaryOperator)UnaryOperator<>Function<>getAndUpdategetAndUpdate(java.util.function.UnaryOperator)getAndSetgetAndSet(java.lang.Object)weakCompareAndSetPlainweakCompareAndSetPlain(java.lang.Object,java.lang.Object)weakCompareAndSetweakCompareAndSet(java.lang.Object,java.lang.Object)compareAndSetcompareAndSet(java.lang.Object,java.lang.Object)lazySetlazySet(java.lang.Object)setset(java.lang.Object)getget()AtomicReference()AtomicReference<>()AtomicReference(java.lang.Object)resultonErrorReturnonErrorReturn(java.lang.Throwable,zipkin2.Callback)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call$ErrorHandling$1.classCall$ErrorHandling$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Call$ErrorHandling$2.classCall$ErrorHandling$2"ErrorHandling{call="ErrorHandling{call=", errorHandler=", errorHandler="Already Executed"Already Executed"Canceled"CanceledCopyright 2015-2020 The OpenZipkin AuthorsThis captures a (usually remote) request and can be used once, either {@link #execute()synchronously} or {@link #enqueue(Callback) asynchronously}. At any time, from any thread, youcan call {@linkplain #cancel()}, which might stop an in-flight request or prevent one fromoccurring.<p>Implementations should prepare a call such that there's little or no likelihood of lateruntime exceptions. For example, if the call is to get a trace, the call to {@code listSpans}should propagate input errors vs delay them until a call to {@linkplain #execute()} or{@linkplain #enqueue(Callback)}.<p>Ex.<pre>{@code// Any translation of an input request to remote parameters should happen here, and any related// errors should propagate here.Call<List<List<Span>>> listTraces = spanStore.listTraces(request);// When this executes, it should simply run the remote request.List<Span> trace = getTraceCall.execute();}</pre><p>An instance of call cannot be invoked more than once, but you can {@linkplain #clone()} aninstance if you need to replay the call. There is no relationship between a call and a number ofremote requests. For example, an implementation that stores spans may make hundreds of remoterequests, possibly retrying on your behalf.<p>This type owes its design to {@code retrofit2.Call}, which is nearly the same, except limitedto HTTP transports.@param<V>the success type, typically not null except when {@code V} is {@linkplain Void}.Returns a completed call which has the supplied value. This is useful when input parametersimply there's no call needed. For example, an empty input might always result in an emptyoutput.Maps the result of this call into a different shape, as defined by the {@code mapper} function.This is used to convert values from one type to another. For example, you could use this toconvert between zipkin v1 and v2 span format.getTracesV1Call = getTracesV2Call.map(traces -> v2TracesConverter);<p>This method intends to be used for chaining. That means "this" instance should be discardedin favor of the result of this method.Maps the result of this call into another, as defined by the {@code flatMapper} function. Thisis used to chain two remote calls together. For example, you could use this to chain a list IDscall to a get by IDs call.getTracesCall = getIdsCall.flatMap(ids -> getTraces(ids));// this would now invoke the chaintraces = getTracesCall.enqueue(tracesCallback);Cancelation propagates to the mapped call.Attempts to resolve an error. The user must call the callback.Returns a call which can attempt to resolve an exception. This is useful when a remote callreturns an error when a resource is not found.<p>Here's an example of coercing 404 to empty:call.handleError((error, callback) -> {if (error instanceof HttpException && ((HttpException) error).code == 404) {callback.onSuccess(Collections.emptyList());} else {callback.onError(error);}); Taken from RxJava throwIfFatal, which was taken from scalaInvokes a request, returning a success value or propagating an error to the caller. Invokingthis more than once will result in an error. To repeat a call, make a copy with {@linkplain#clone()}.<p>Eventhough this is a blocking call, implementations may honor calls to {@linkplain#cancel()} from a different thread.@returna success value. Null is unexpected, except when {@code V} is {@linkplain Void}.Invokes a request asynchronously, signaling the {@code callback} when complete. Invoking thismore than once will result in an error. To repeat a call, make a copy with {@linkplainRequests to cancel this call, even if some implementations may not support it. For example, ablocking call is sometimes not cancelable. Boolean isn't returned because some implementations may cancel asynchronously. Implementing might throw an IOException on execute or callback.onError(IOException)Returns true if {@linkplain #cancel()} was called.<p>Calls can fail before being canceled, so true does always mean cancelation caused a call tofail. That said, successful cancellation does result in a failure. isCanceled exists while isExecuted does not because you do not need the latter to implement asynchronous bindings, such as rxjava2Returns a copy of this object, so you can make an identical follow-up request. not final for mock testing to differentiate from nullC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Callback.javaA callback of a single result or error.<p>This is a bridge to async libraries such as CompletableFuture complete, completeExceptionally.<p>Implementations will call either {@link #onSuccess} or {@link #onError}, but not both.Invoked when computation produces its potentially null value successfully.<p>When this is called, {@link #onError} won't be.Invoked when computation produces a possibly null value successfully.<p>When this is called, {@link #onSuccess} won't be.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/CheckResult.javaCheckResultCheckResult(boolean,java.lang.Throwable)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/CheckResult.classok"CheckResult{ok="CheckResult{ok=", " + "error=", error=Answers the question: Are operations on this component likely to succeed?<p>Implementations should initialize the component if necessary. It should test a remoteconnection, or consult a trusted source to derive the result. They should use least resourcespossible to establish a meaningful result, and be safe to call many times, even concurrently.@seeCheckResult#OK @ImmutablePresent when not okC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Component.javaComponentComponents are object graphs used to compose a zipkin service or client. For example, a storagecomponent might return a query api.<p>Components are lazy with regards to I/O. They can be injected directly to other components soas to avoid crashing the application graph if a network service is unavailable.Closes any network resources created implicitly by the component.<p>For example, if this created a connection, it would close it. If it was provided one, thiswould close any sessions, but leave the connection open.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/DependencyLink.javaDependencyLinkC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/DependencyLink.classDependencyLink(zipkin2.DependencyLink.Builder)errorCountcallCountchildUTF_8"UTF-8"BuilderBuilder(zipkin2.DependencyLink)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/DependencyLink$Builder.classDependencyLink$BuilderBuilder()"parent == null"parent == null"child == null"child == nullmissing""" parent" parent" child" child"Missing :"Missing :bytebyte[]zipkin2.codecBytesEncoder<DependencyLink>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/BytesEncoder.classBytesEncoderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codeccodecencodeencode(zipkin2.DependencyLink)encodeListencodeList(java.util.List)List<DependencyLink>Collection<DependencyLink>Iterable<DependencyLink>encode(java.lang.Object)sizeInBytessizeInBytes(java.lang.Object)sizeInBytes(zipkin2.DependencyLink)encodingencoding()builderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/DependencyLink$SerializedForm.classDependencyLink$SerializedFormSerializedForm(byte[])bytesBytesDecoder<DependencyLink>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/BytesDecoder.classBytesDecoderdecodeOnedecodeOne(byte[])decodeListdecodeList(byte[])decodeList(byte[],java.util.Collection)decodedecode(byte[],java.util.Collection)A dependency link is an edge between two services. for Spark and Flink jobs pre-Java 1.8The parent service name (caller), {@link Span#localServiceName()} if instrumented.The chold service name (callee), {@link Span#localServiceName()} if instrumented.Total traced calls made from {@link #parent} to {@link #child}{@linkplan #callCount Count of calls} known to be errors (having one {@linkplain Span#tags()tag} named "error").#parent()#child()#callCount()#errorCount() This is an immutable object, and our encoder is faster than java's: use a serialization proxy.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Endpoint.javaEndpointHEX_DIGITSgetIpv4BytesgetIpv4Bytes(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Endpoint.classEndpoint(zipkin2.Endpoint.SerializedForm)Endpoint(zipkin2.Endpoint.Builder)portipv6Bytesipv4Bytesipv6ipv4serviceNamecharisValidNumericCharisValidNumericChar(char)isValidIpV4WordisValidIpV4Word(java.lang.CharSequence,int,int)isValidIpV4AddressisValidIpV4Address(java.lang.String,int,int)shortparseHextetparseHextet(java.lang.String)textToNumericFormatV6textToNumericFormatV6(java.lang.String)IPV6_PART_COUNTwriteIpV6writeIpV6(byte[])notHexnotHex(char)detectFamilydetectFamily(java.lang.String)parseEmbeddedIPv4parseEmbeddedIPv4(byte[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Endpoint$Builder.classEndpoint$Builderchar[]writeBackwardswriteBackwards(int,int,char[])writeIpV4writeIpV4(byte[])mergemerge(zipkin2.Endpoint)Builder(zipkin2.Endpoint)addraddressBytesipBytes416bufpos0xff255'.'.3bi10010digitipStringformat':':0xffff65535"invalid port "invalid port flag11o112o213o314o415IpFamilyIpFamily()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Endpoint$IpFamily.classEndpoint$IpFamilyhasColonhasDotclastColonIndex6'f'f'F'F'0''9'9'a'a'A'AzeroCompressionIndexzeroCompressionLengthzeroIndexallZeroszeroLength"::"::highlowleadingZeroval0xfparts":"skipIndexpartsHipartsLopartsSkippedrawBytesexipParthextetipfromtoExcludedlen7wordtoExclusivec0c1c2'1''2''5'5serializedForm"Endpoint{"
      + "serviceName="Endpoint{serviceName=", "
      + "ipv4=", ipv4=", "
      + "ipv6=", ipv6=", "
      + "port=", port=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Endpoint$SerializedForm.classEndpoint$SerializedFormSerializedForm(zipkin2.Endpoint)endpointchoctetThe network context of a node in the service graph.Lower-case label of this node in the service graph, such as "favstar". Leave absent ifunknown.<p>This is a primary label for trace lookup and aggregation, so it should be intuitive andconsistent. Many use a name from service discovery.The text representation of the primary IPv4 address associated with this a connection. Ex.192.168.99.100 Absent if unknown.IPv4 endpoint address packed into 4 bytes or null if unknown.#ipv6()java.net.Inet4Address#getAddress()The text representation of the primary IPv6 address associated with this a connection. Ex.2001:db8::c001 Absent if unknown.#ipv4() for mapped addresses#ipv6Bytes()IPv6 endpoint address packed into 16 bytes or null if unknown.java.net.Inet6Address#getAddress()Port of the IP's socket or null, if not known.java.net.InetSocketAddress#getPort()Like {@link #port()} except returns a primitive where zero implies absent.<p>Using this method will avoid allocation, so is encouraged when copying data. zero means nullSets {@link Endpoint#serviceName}Chaining variant of {@link #parseIp(InetAddress)}Returns true if {@link Endpoint#ipv4()} or {@link Endpoint#ipv6()} could be parsed from theinput.<p>Returns boolean not this for conditional parsing. For example:if (!builder.parseIp(input.getHeader("X-Forwarded-For"))) {builder.parseIp(input.getRemoteAddr());#parseIp(String)Like {@link #parseIp(String)} except this accepts a byte array.byte array whose ownership is exclusively transferred to this endpoint. We write backwards from right to left.Chaining variant of {@link #parseIp(String)}#parseIp(InetAddress) ensures consistent formatUse this to set the port to an externally defined value.port associated with the endpoint. zero coerces to null (unknown)Endpoint#port()Sets {@link Endpoint#portAsInt()} Embedded IPv4 addresses start with unset 80 bits IPv4-Compatible or IPv4-Mapped ::1 is localhost, not an embedded compat addressAdapted from code in {@code com.google.common.net.InetAddresses.ipStringToBytes}. This versionseparates detection from parsing and checks more carefully about embedded addresses. Colons must not appear after dots. Everything else must be a decimal or hex digit. Now decide which address family to parse. compressed like ::1.2.3.4 Compress the longest string of zeros handle all zeros: 0:0:0:0:0:0:0:0 -> :: handle trailing zeros: 2001:0:0:4:0:0:0:0 -> 2001:0:0:4:: handle leading zeros: 2001:0:0:4:0000:0:0:8 -> 2001:0:0:4::8 Begin code from com.google.common.net.InetAddresses 23 An address can have [2..8] colons, and N colons make N+1 parts. Disregarding the endpoints, find "::" with nothing in between. This indicates that a run of zeroes has been skipped. Can't have more than one :: Number of parts to copy from above/before the "::" Number of parts to copy from below/after the "::" If we found a "::", then check if it also covers the endpoints. ^: requires ^:: :$ requires ::$ Otherwise, allocate the entire address to partsHi. The endpoints could still be empty, but parseHextet() will check for that. If we found a ::, then we must have skipped at least one part. Otherwise, we must have exactly the right number of parts. Now parse the hextets into a byte array. Note: we already verified that this string contains only hex digits. End code from com.google.common.net.InetAddresses 23 Begin code from io.netty.util.NetUtil 4.1 End code from io.netty.util.NetUtil 4.1 TODO: replace this with native proto3 encoding then we have a single digit octet push the decimal then we have a two digit octet otherwise, we have a three digit octet skip the dotC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Span.javaSpanFINESTC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/Span.classSpan(zipkin2.Span.Builder)flagsMap<String,String>C:/modules/java.base/java/util/Map.classMaptagsList<Annotation>Collection<Annotation>Iterable<Annotation>annotationsremoteEndpointlocalEndpointdurationkindparentIdtraceId? super TComparable<? super T>sortedListsortedList(java.util.List)validateHexAndReturnZeroPrefixvalidateHexAndReturnZeroPrefix(java.lang.String)writeHexBytewriteHexByte(char[],int,byte)writeHexLongwriteHexLong(char[],int,long)toLowerHextoLowerHex(long)padLeftpadLeft(java.lang.String,int)THIRTY_TWO_ZEROSFLAG_SHARED_SETFLAG_SHAREDFLAG_DEBUG_SETFLAG_DEBUGEMPTY_ENDPOINTzerosKindKind()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Span$Kind.classSpan$KindMap<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Span$Builder.classSpan$BuilderBuilder(zipkin2.Span)TreeMap<String,String>C:/modules/java.base/java/util/TreeMap.classTreeMapAbstractMap<String,String>C:/modules/java.base/java/util/AbstractMap.classAbstractMapNavigableMap<String,String>C:/modules/java.base/java/util/NavigableMap.classNavigableMapSortedMap<String,String>C:/modules/java.base/java/util/SortedMap.classSortedMapArrayList<Annotation>C:/modules/java.base/java/util/ArrayList.classArrayListAbstractList<Annotation>C:/modules/java.base/java/util/AbstractList.classAbstractListAbstractCollection<Annotation>C:/modules/java.base/java/util/AbstractCollection.classAbstractCollection<obinit><obinit>()clearclear()Spliterator<>C:/modules/java.base/java/util/Spliterator.classSpliteratorSpliterator<T>spliteratorspliterator()defaultSpliterator<Annotation>Consumer<? super T>C:/modules/java.base/java/util/function/Consumer.classConsumerforEachforEach(java.util.function.Consumer)? super AnnotationConsumer<? super Annotation>Iterator<>C:/modules/java.base/java/util/Iterator.classIteratorIterator<T>iteratoriterator()Iterator<Annotation>java.util.streamStream<>C:/modules/java.base/java/util/stream/Stream.classStreamC:/modules/java.base/java/util/streamstreamBaseStream<>C:/modules/java.base/java/util/stream/BaseStream.classBaseStreamStream<E>BaseStream<E,Stream<E>>parallelStreamparallelStream()Stream<Annotation>BaseStream<Annotation,Stream<Annotation>>stream()Spliterator<E>?Collection<?>Iterable<?>retainAllretainAll(java.util.Collection)? super EPredicate<? super E>C:/modules/java.base/java/util/function/Predicate.classPredicateremoveIfremoveIf(java.util.function.Predicate)Predicate<? super Annotation>removeAllremoveAll(java.util.Collection)? extends ECollection<? extends E>Iterable<? extends E>addAlladdAll(java.util.Collection)? extends AnnotationCollection<? extends Annotation>Iterable<? extends Annotation>containsAllcontainsAll(java.util.Collection)removeremove(java.lang.Object)addadd(java.lang.Object)add(zipkin2.Annotation)IntFunction<>C:/modules/java.base/java/util/function/IntFunction.classIntFunctionObject[]T[]toArraytoArray(java.util.function.IntFunction)IntFunction<T[]>toArray(java.lang.Object[])toArray()Iterator<E>containscontains(java.lang.Object)isEmptyisEmpty()sizesize()AbstractCollection()AbstractCollection<Annotation>()EList<E>Collection<E>Iterable<E>copyOfcopyOf(java.util.Collection)ofof(java.lang.Object[])E[]of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object)of(java.lang.Object)of()subListsubList(int,int)ListIterator<>C:/modules/java.base/java/util/ListIterator.classListIteratorListIterator<E>listIteratorlistIterator(int)ListIterator<Annotation>listIterator()lastIndexOflastIndexOf(java.lang.Object)indexOfindexOf(java.lang.Object)remove(int)add(int,java.lang.Object)add(int,zipkin2.Annotation)set(int,java.lang.Object)set(int,zipkin2.Annotation)get(int)Comparator<? super E>C:/modules/java.base/java/util/Comparator.classComparatorsortsort(java.util.Comparator)Comparator<? super Annotation>UnaryOperator<E>Function<E,E>replaceAllreplaceAll(java.util.function.UnaryOperator)UnaryOperator<Annotation>Function<Annotation,Annotation>addAll(int,java.util.Collection)removeRangeremoveRange(int,int)subListRangeChecksubListRangeCheck(int,int,int)AbstractList()AbstractList<Annotation>()modCounttransientcheckInvariantscheckInvariants()removeIf(java.util.function.Predicate,int,int)Consumer<? super E>batchRemovebatchRemove(java.util.Collection,boolean,int,int)hashCodeRangehashCodeRange(int,int)List<?>equalsRangeequalsRange(java.util.List,int,int)elementAtelementAt(java.lang.Object[],int)elementDataelementData(int)lastIndexOfRangelastIndexOfRange(java.lang.Object,int,int)indexOfRangeindexOfRange(java.lang.Object,int,int)ensureCapacityensureCapacity(int)trimToSizetrimToSize()ArrayList(java.util.Collection)ArrayList<Annotation>(java.util.Collection)ArrayList()ArrayList<Annotation>()ArrayList(int)ArrayList<Annotation>(int)KMap<K,V>copyOf(java.util.Map)? extends K? extends VMap<? extends K,? extends V>Entry<>C:/modules/java.base/java/util/Map$Entry.classMap$EntryEntry<K,V>entryentry(java.lang.Object,java.lang.Object)Entry[]Entry<>[]ofEntriesofEntries(java.util.Map.Entry[])Entry<? extends K,? extends V>Entry<? extends K,? extends V>[]of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)of(java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object,java.lang.Object)? super VBiFunction<? super V,? super V,? extends V>merge(java.lang.Object,java.lang.Object,java.util.function.BiFunction)? super String? extends StringBiFunction<? super String,? super String,? extends String>merge(java.lang.String,java.lang.String,java.util.function.BiFunction)? super KBiFunction<? super K,? super V,? extends V>computecompute(java.lang.Object,java.util.function.BiFunction)compute(java.lang.String,java.util.function.BiFunction)computeIfPresentcomputeIfPresent(java.lang.Object,java.util.function.BiFunction)computeIfPresent(java.lang.String,java.util.function.BiFunction)Function<? super K,? extends V>computeIfAbsentcomputeIfAbsent(java.lang.Object,java.util.function.Function)Function<? super String,? extends String>computeIfAbsent(java.lang.String,java.util.function.Function)replacereplace(java.lang.Object,java.lang.Object)replace(java.lang.String,java.lang.String)replace(java.lang.Object,java.lang.Object,java.lang.Object)replace(java.lang.String,java.lang.String,java.lang.String)remove(java.lang.Object,java.lang.Object)putIfAbsentputIfAbsent(java.lang.Object,java.lang.Object)putIfAbsent(java.lang.String,java.lang.String)replaceAll(java.util.function.BiFunction)BiConsumer<? super K,? super V>C:/modules/java.base/java/util/function/BiConsumer.classBiConsumerforEach(java.util.function.BiConsumer)BiConsumer<? super String,? super String>getOrDefaultgetOrDefault(java.lang.Object,java.lang.Object)getOrDefault(java.lang.Object,java.lang.String)Set<>C:/modules/java.base/java/util/Set.classSetSet<Entry<K,V>>Collection<Entry<K,V>>Iterable<Entry<K,V>>entrySetentrySet()Entry<String,String>Set<Entry<String,String>>Collection<Entry<String,String>>Iterable<Entry<String,String>>Collection<V>Iterable<V>valuesvalues()Collection<String>Iterable<String>Set<K>Collection<K>Iterable<K>keySetkeySet()Set<String>putAllputAll(java.util.Map)Map<? extends String,? extends String>putput(java.lang.Object,java.lang.Object)put(java.lang.String,java.lang.String)get(java.lang.Object)containsValuecontainsValue(java.lang.Object)containsKeycontainsKey(java.lang.Object)AbstractMap()AbstractMap<String,String>()lastKeylastKey()firstKeyfirstKey()SortedMap<>tailMaptailMap(java.lang.Object)tailMap(java.lang.String)headMapheadMap(java.lang.Object)headMap(java.lang.String)subMapsubMap(java.lang.Object,java.lang.Object)subMap(java.lang.String,java.lang.String)Comparator<>Comparator<? super K>comparatorcomparator()Comparator<? super String>SortedMap<K,V>NavigableMap<>tailMap(java.lang.Object,boolean)tailMap(java.lang.String,boolean)headMap(java.lang.Object,boolean)headMap(java.lang.String,boolean)subMap(java.lang.Object,boolean,java.lang.Object,boolean)subMap(java.lang.String,boolean,java.lang.String,boolean)NavigableSet<>C:/modules/java.base/java/util/NavigableSet.classNavigableSetSortedSet<>C:/modules/java.base/java/util/SortedSet.classSortedSetNavigableSet<K>SortedSet<K>descendingKeySetdescendingKeySet()NavigableSet<String>SortedSet<String>navigableKeySetnavigableKeySet()descendingMapdescendingMap()pollLastEntrypollLastEntry()pollFirstEntrypollFirstEntry()lastEntrylastEntry()firstEntryfirstEntry()higherKeyhigherKey(java.lang.Object)higherKey(java.lang.String)higherEntryhigherEntry(java.lang.Object)higherEntry(java.lang.String)ceilingKeyceilingKey(java.lang.Object)ceilingKey(java.lang.String)ceilingEntryceilingEntry(java.lang.Object)ceilingEntry(java.lang.String)floorKeyfloorKey(java.lang.Object)floorKey(java.lang.String)floorEntryfloorEntry(java.lang.Object)floorEntry(java.lang.String)lowerKeylowerKey(java.lang.Object)lowerKey(java.lang.String)lowerEntrylowerEntry(java.lang.Object)lowerEntry(java.lang.String)Spliterator<K>descendingKeySpliteratordescendingKeySpliterator()Spliterator<String>keySpliteratorkeySpliterator()keySpliteratorForkeySpliteratorFor(java.util.NavigableMap)NavigableMap<K,?>SortedMap<K,?>Map<K,?>SortedSet<? extends K>Set<? extends K>Collection<? extends K>Iterable<? extends K>addAllForTreeSetaddAllForTreeSet(java.util.SortedSet,java.lang.Object)SortedSet<? extends String>Set<? extends String>Collection<? extends String>Iterable<? extends String>addAllForTreeSet(java.util.SortedSet,java.lang.String)readTreeSetreadTreeSet(int,java.io.ObjectInputStream,java.lang.Object)readTreeSet(int,java.io.ObjectInputStream,java.lang.String)C:/modules/java.base/java/util/TreeMap$Entry.classTreeMap$EntryTreeMap<>AbstractMap<>predecessorpredecessor(java.util.TreeMap.Entry)successorsuccessor(java.util.TreeMap.Entry)getLastEntrygetLastEntry()getFirstEntrygetFirstEntry()keykey(java.util.TreeMap.Entry)Entry<K,?>keyOrNullkeyOrNull(java.util.TreeMap.Entry)exportEntryexportEntry(java.util.TreeMap.Entry)valEqualsvalEquals(java.lang.Object,java.lang.Object)comparecompare(java.lang.Object,java.lang.Object)Iterator<K>descendingKeyIteratordescendingKeyIterator()Iterator<String>keyIteratorkeyIterator()NavigableMap<K,V>getLowerEntrygetLowerEntry(java.lang.Object)getLowerEntry(java.lang.String)getHigherEntrygetHigherEntry(java.lang.Object)getHigherEntry(java.lang.String)getFloorEntrygetFloorEntry(java.lang.Object)getFloorEntry(java.lang.String)getCeilingEntrygetCeilingEntry(java.lang.Object)getCeilingEntry(java.lang.String)getEntryUsingComparatorgetEntryUsingComparator(java.lang.Object)getEntrygetEntry(java.lang.Object)SortedMap<K,? extends V>Map<K,? extends V>TreeMap(java.util.SortedMap)SortedMap<String,? extends String>Map<String,? extends String>TreeMap<String,String>(java.util.SortedMap)TreeMap(java.util.Map)TreeMap<String,String>(java.util.Map)TreeMap(java.util.Comparator)TreeMap<String,String>(java.util.Comparator)TreeMap()TreeMap<String,String>()ArrayList<>AbstractList<>AbstractCollection<>data"empty trace ID"empty trace ID"parentId is empty"parentId is empty"parentId.length > 16"parentId.length > 16"empty id"empty id"id == null"id == null"id is empty"id is empty"id.length > 16"id.length > 16"id is all zeros"id is all zeros"key == null"key == null"value of "value of " == null" == nulldebugshared" traceId" traceId" id" idloggerClass<Span>C:/modules/java.base/java/lang/Class.classClassClass<?>java.lang.invokeOfField<Class<?>>C:/modules/java.base/java/lang/invoke/TypeDescriptor$OfField.classTypeDescriptor$OfFieldC:/modules/java.base/java/lang/invokeinvokegetNamegetName()OfField<>arrayTypearrayType()Class<>componentTypecomponentType()isPrimitiveisPrimitive()isArrayisArray()isSealedisSealed()ClassDesc[]permittedSubclassespermittedSubclasses()isHiddenisHidden()nativeOptional<>C:/modules/java.base/java/util/Optional.classOptionalOptional<ClassDesc>describeConstabledescribeConstable()descriptorStringdescriptorString()Class[]Class<>[]Class<?>[]getNestMembersgetNestMembers()isNestmateOfisNestmateOf(java.lang.Class)getNestHostgetNestHost()AnnotatedType[]getAnnotatedInterfacesgetAnnotatedInterfaces()getAnnotatedSuperclassgetAnnotatedSuperclass()Class<? extends Annotation>Map<Class<? extends Annotation>,Annotation>getDeclaredAnnotationMapgetDeclaredAnnotationMap()getAnnotationTypegetAnnotationType()casAnnotationTypecasAnnotationType(sun.reflect.annotation.AnnotationType,sun.reflect.annotation.AnnotationType)Annotation[]getDeclaredAnnotationsgetDeclaredAnnotations()A[]getDeclaredAnnotationsByTypegetDeclaredAnnotationsByType(java.lang.Class)Class<A>getDeclaredAnnotationgetDeclaredAnnotation(java.lang.Class)getAnnotationsgetAnnotations()getAnnotationsByTypegetAnnotationsByType(java.lang.Class)isAnnotationPresentisAnnotationPresent(java.lang.Class)getAnnotationgetAnnotation(java.lang.Class)U? extends UClass<? extends U>asSubclassasSubclass(java.lang.Class)Class<U>castcast(java.lang.Object)Map<String,T>enumConstantDirectoryenumConstantDirectory()Map<String,Span>getEnumConstantsSharedgetEnumConstantsShared()Span[]getEnumConstantsgetEnumConstants()isRecordisRecord()isEnumisEnum()desiredAssertionStatusdesiredAssertionStatus()getConstantPoolgetConstantPool()getExecutableTypeAnnotationBytesgetExecutableTypeAnnotationBytes(java.lang.reflect.Executable)getRawTypeAnnotationsgetRawTypeAnnotations()getRawAnnotationsgetRawAnnotations()getPrimitiveClassgetPrimitiveClass(java.lang.String)protectionDomainprotectionDomain()getProtectionDomaingetProtectionDomain()getResourcegetResource(java.lang.String)getResourceAsStreamgetResourceAsStream(java.lang.String)java.lang.reflectConstructor<>C:/modules/java.base/java/lang/reflect/Constructor.classConstructorC:/modules/java.base/java/lang/reflectreflectConstructor<T>getDeclaredConstructorgetDeclaredConstructor(java.lang.Class[])Constructor<Span>List<Method>Collection<Method>Iterable<Method>getDeclaredPublicMethodsgetDeclaredPublicMethods(java.lang.String,java.lang.Class[])getDeclaredMethodgetDeclaredMethod(java.lang.String,java.lang.Class[])getDeclaredFieldgetDeclaredField(java.lang.String)Constructor[]Constructor<>[]Constructor<?>Constructor<?>[]getDeclaredConstructorsgetDeclaredConstructors()Method[]getDeclaredMethodsgetDeclaredMethods()RecordComponent[]getRecordComponentsgetRecordComponents()Field[]getDeclaredFieldsgetDeclaredFields()getDeclaredClassesgetDeclaredClasses()getConstructorgetConstructor(java.lang.Class[])getMethodgetMethod(java.lang.String,java.lang.Class[])getFieldgetField(java.lang.String)getConstructorsgetConstructors()getMethodsgetMethods()getFieldsgetFields()getClassesgetClasses()isMemberClassisMemberClass()isLocalClassisLocalClass()isAnonymousClassisAnonymousClass()getCanonicalNamegetCanonicalName()getTypeNamegetTypeName()getSimpleNamegetSimpleName()getEnclosingClassgetEnclosingClass()getDeclaringClassgetDeclaringClass()getEnclosingConstructorgetEnclosingConstructor()getEnclosingMethodgetEnclosingMethod()setSignerssetSigners(java.lang.Object[])getSignersgetSigners()getModifiersgetModifiers()getComponentTypegetComponentType()Type[]getGenericInterfacesgetGenericInterfaces()getInterfacesgetInterfaces()getPackageNamegetPackageName()getPackagegetPackage()getGenericSuperclassgetGenericSuperclass()Class<? super T>getSuperclassgetSuperclass()? super SpanClass<? super Span>TypeVariable[]TypeVariable<>C:/modules/java.base/java/lang/reflect/TypeVariable.classTypeVariableTypeVariable<>[]TypeVariable<Class>TypeVariable<Class>[]getTypeParametersgetTypeParameters()TypeVariable<Class<Span>>TypeVariable<Class<Span>>[]getClassDatagetClassData()getModulegetModule()getClassLoader0getClassLoader0()getClassLoadergetClassLoader()isSyntheticisSynthetic()isAnnotationisAnnotation()isInterfaceisInterface()isAssignableFromisAssignableFrom(java.lang.Class)isInstanceisInstance(java.lang.Object)newInstancenewInstance()forNameforName(java.lang.Module,java.lang.String)forName(java.lang.String,boolean,java.lang.ClassLoader)forName(java.lang.String)TypeVariable<?>typeVarBoundstypeVarBounds(java.lang.reflect.TypeVariable)toGenericStringtoGenericString()classValueMap"undoing circular dependency: traceId=%s, spanId=%s"undoing circular dependency: traceId=%s, spanId=%s"removing shared flag on client: traceId=%s, spanId=%s"removing shared flag on client: traceId=%s, spanId=%sBytesEncoder<Span>encode(zipkin2.Span)List<Span>Collection<Span>Iterable<Span>sizeInBytes(zipkin2.Span)"traceId == null"traceId == null"traceId is empty"traceId is empty"traceId.length > 32"traceId.length > 32"traceId is all zeros"traceId is all zeros"WTF"WTFdesiredLengthnumZeros56L5648L4840L4032L24L2416L8LinZeroPrefix" should be lower-hex encoded with no prefix" should be lower-hex encoded with no prefixinarrayStream<T>BaseStream<T,Stream<T>>Predicate<? super T>? extends TCollection<? extends T>Iterable<? extends T>add(java.lang.Comparable)ListIterator<T>Comparable<>add(int,java.lang.Comparable)set(int,java.lang.Comparable)Comparator<? super T>UnaryOperator<T>Function<T,T>jList<Object>Collection<Object>Iterable<Object>LinkedHashMap<String,String>C:/modules/java.base/java/util/LinkedHashMap.classLinkedHashMapHashMap<String,String>C:/modules/java.base/java/util/HashMap.classHashMapLinkedHashMap<String,String>(java.util.Map)internalWriteEntriesinternalWriteEntries(java.io.ObjectOutputStream)Node<K,V>C:/modules/java.base/java/util/HashMap$Node.classHashMap$NodeHashMap<>afterNodeRemovalafterNodeRemoval(java.util.HashMap.Node)Node<String,String>afterNodeInsertionafterNodeInsertion(boolean)afterNodeAccessafterNodeAccess(java.util.HashMap.Node)reinitializereinitialize()TreeNode<>C:/modules/java.base/java/util/HashMap$TreeNode.classHashMap$TreeNodeC:/modules/java.base/java/util/LinkedHashMap$Entry.classLinkedHashMap$EntryNode<>LinkedHashMap<>TreeNode<K,V>replacementTreeNodereplacementTreeNode(java.util.HashMap.Node,java.util.HashMap.Node)TreeNode<String,String>newTreeNodenewTreeNode(int,java.lang.Object,java.lang.Object,java.util.HashMap.Node)newTreeNode(int,java.lang.String,java.lang.String,java.util.HashMap.Node)replacementNodereplacementNode(java.util.HashMap.Node,java.util.HashMap.Node)newNodenewNode(int,java.lang.Object,java.lang.Object,java.util.HashMap.Node)newNode(int,java.lang.String,java.lang.String,java.util.HashMap.Node)capacitycapacity()floatloadFactorloadFactor()valuesToArrayvaluesToArray(java.lang.Object[])keysToArraykeysToArray(java.lang.Object[])prepareArrayprepareArray(java.lang.Object[])removeNoderemoveNode(int,java.lang.Object,java.lang.Object,boolean,boolean)Node[]Node<K,V>[]treeifyBintreeifyBin(java.util.HashMap.Node[],int)Node<String,String>[]Node<>[]resizeresize()putValputVal(int,java.lang.Object,java.lang.Object,boolean,boolean)putVal(int,java.lang.String,java.lang.String,boolean,boolean)getNodegetNode(java.lang.Object)putMapEntriesputMapEntries(java.util.Map,boolean)HashMap(java.util.Map)HashMap<String,String>(java.util.Map)HashMap()HashMap<String,String>()HashMap(int)HashMap<String,String>(int)HashMap(int,float)HashMap<String,String>(int,float)tableSizeFortableSizeFor(int)compareComparablescompareComparables(java.lang.Class,java.lang.Object,java.lang.Object)comparableClassForcomparableClassFor(java.lang.Object)hashhash(java.lang.Object)thresholdtableMIN_TREEIFY_CAPACITYUNTREEIFY_THRESHOLDTREEIFY_THRESHOLDDEFAULT_LOAD_FACTORMAXIMUM_CAPACITYDEFAULT_INITIAL_CAPACITYremoveEldestEntryremoveEldestEntry(java.util.Map.Entry)LinkedHashMap(int,float,boolean)LinkedHashMap<String,String>(int,float,boolean)LinkedHashMap(java.util.Map)LinkedHashMap()LinkedHashMap<String,String>()LinkedHashMap(int)LinkedHashMap<String,String>(int)LinkedHashMap(int,float)LinkedHashMap<String,String>(int,float)accessOrdertailheadEnum<Kind>C:/modules/java.base/java/lang/Enum.classEnumComparable<Kind>compareTocompareTo(java.lang.Object)compareTo(zipkin2.Span.Kind)finalizefinalize()Enum<>Enum<T>Comparable<T>valueOfvalueOf(java.lang.Class,java.lang.String)Class<T>EnumDesc<E>C:/modules/java.base/java/lang/Enum$EnumDesc.classEnum$EnumDescjava.lang.constantDynamicConstantDesc<E>C:/modules/java.base/java/lang/constant/DynamicConstantDesc.classDynamicConstantDescC:/modules/java.base/java/lang/constantconstantOptional<EnumDesc<E>>EnumDesc<Kind>DynamicConstantDesc<Kind>Optional<EnumDesc<Kind>>Class<E>Class<Kind>compareTo(java.lang.Enum)Enum(java.lang.String,int)Enum<Kind>(java.lang.String,int)ordinalordinal()name()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/Span$SerializedForm.classSpan$SerializedFormBytesDecoder<Span>A span is a single-host view of an operation. A trace is a series of spans (often RPC calls)which nest to form a latency tree. Spans are in the same trace when they share the same trace ID.The {@link #parentId} field establishes the position of one span in the tree.<p>The root span is where {@link #parentId} is null and usually has the longest {@link#duration} in the trace. However, nested asynchronous work can materialize as child spans whoseduration exceed the root span.<p>Spans usually represent remote activity such as RPC calls, or messaging producers andconsumers. However, they can also represent in-process activity in any position of the trace. Forexample, a root span could represent a server receiving an initial client request. A root spancould also represent a scheduled job that has no remote context.<p>While span identifiers are packed into longs, they should be treated opaquely. ID encoding is16 or 32 character lower-hex, to avoid signed interpretation.<h3>Relationship to {@code zipkin.Span}</h3><p>This type is intended to replace use of {@code zipkin.Span}. Particularly, tracers representa single-host view of an operation. By making one endpoint implicit for all data, this type doesnot need to repeat endpoints on each data like {@code zipkin.Span} does. This results in simplerand smaller data.Trace identifier, set on all spans within it.<p>Encoded as 16 or 32 lowercase hex characters corresponding to 64 or 128 bits. For example,a 128bit trace ID looks like {@code 4e441824ec2b6a44ffdc9bb9a6453df3}.<p>Some systems downgrade trace identifiers to 64bit by dropping the left-most 16 characters.For example, {@code 4e441824ec2b6a44ffdc9bb9a6453df3} becomes {@code ffdc9bb9a6453df3}.The parent's {@link #id} or null if this the root span in a trace.<p>This is the same encoding as {@link #id}. For example {@code ffdc9bb9a6453df3}Unique 64bit identifier for this operation within the trace.<p>Encoded as 16 lowercase hex characters. For example {@code ffdc9bb9a6453df3}<p>A span is uniquely identified in storage by ({@linkplain #traceId}, {@linkplain #id()}).Indicates the primary span type.When present, {@link #timestamp()} is the moment a producer sent a message to a destination.{@link #duration()} represents delay sending the message, such as batching, while {@link#remoteEndpoint()} indicates the destination, such as a broker.<p>Unlike {@link #CLIENT}, messaging spans never share a span ID. For example, the {@link#CONSUMER} of the same message has {@link #parentId()} set to this span's {@link #id()}.When present, {@link #timestamp()} is the moment a consumer received a message from anorigin. {@link #duration()} represents delay consuming the message, such as from backlog,while {@link #remoteEndpoint()} indicates the origin, such as a broker.<p>Unlike {@link #SERVER}, messaging spans never share a span ID. For example, the {@link#PRODUCER} of this message is the {@link #parentId()} of this span.When present, used to interpret {@link #remoteEndpoint}Span name in lowercase, rpc method for example.<p>Conventionally, when the span name isn't known, name = "unknown".Epoch microseconds of the start of this span, possibly absent if this an incomplete span.<p>This value should be set directly by instrumentation, using the most precise valuepossible. For example, {@code gettimeofday} or multiplying {@link System#currentTimeMillis} by1000.<p>There are three known edge-cases where this could be reported absent:<pre><ul><li>A span was allocated but never started (ex not yet received a timestamp)</li><li>The span's start event was lost</li><li>Data about a completed span (ex tags) were sent after the fact</li></pre><ul><p>Note: timestamps at or before epoch (0L == 1970) are invalid#duration()#timestampAsLong()Like {@link #timestamp()} except returns a primitive where zero implies absent.Measurement in microseconds of the critical path, if known. Durations of less than onemicrosecond must be rounded up to 1 microsecond.<p>This value should be set directly, as opposed to implicitly via annotation timestamps.Doing so encourages precision decoupled from problems of clocks, such as skew or NTP updatescausing time to move backwards.<p>If this field is persisted as unset, zipkin will continue to work, except duration querysupport will be implementation-specific. Similarly, setting this field non-atomically isimplementation-specific.<p>This field is i64 vs i32 to support spans longer than 35 minutes.#durationAsLong()Like {@link #duration()} except returns a primitive where zero implies absent.The host that recorded this span, primarily for query by service name.<p>Instrumentation should always record this and be consistent as possible with the servicename as it is used in search. This is nullable for legacy reasons. Nullable for data conversion especially late arriving data which might not have an annotationWhen an RPC (or messaging) span, indicates the other side of the connection.<p>By recording the remote endpoint, your trace will contain network context even if the peeris not tracing. For example, you can record the IP from the {@code X-Forwarded-For} header orthe service name and socket of a remote peer.Events that explain latency with a timestamp. Unlike log statements, annotations are oftenshort or contain codes: for example "brave.flush". Annotations are sorted ascending bytimestamp.Tags a span with context, usually to support query or aggregation.<p>For example, a tag key could be {@code "http.path"}.True is a request to store this span even if it overrides sampling policy.True if we are contributing to a span started by another tracer (ex on a different host).Defaults to null. When set, it is expected for {@link #kind()} to be {@link Kind#SERVER}.<p>When an RPC trace is client-originated, it will be sampled and the same span ID is used forthe server side. However, the server shouldn't set span.timestamp or duration since it didn'tstart the span. bit field for timestamp and durationUsed to merge multiple incomplete spans representing the same operation on the same host. Donot use this to merge spans that occur on different hosts.Sets {@link Span#id()} or throws {@link IllegalArgumentException} if not lower-hex format.Encodes 64 or 128 bits from the input into a hex trace ID.Upper 64bits of the trace ID. Zero means the trace ID is 64-bit.Lower 64bits of the trace ID.@throwsIllegalArgumentExceptionif both values are zeroHex encodes the input as the {@link Span#parentId()} or unsets if the input is zero.Sets {@link Span#parentId()} or throws {@link IllegalArgumentException} if not lower-hexformat.Hex encodes the input as the {@link Span#id()} or throws IllegalArgumentException if theinput is zero.Sets {@link Span#kind}Sets {@link Span#name}Sets {@link Span#timestampAsLong()}Sets {@link Span#timestamp()}Sets {@link Span#durationAsLong()}Sets {@link Span#duration()}Sets {@link Span#localEndpoint}Sets {@link Span#remoteEndpoint}Sets {@link Span#annotations}Sets {@link Span#tags}Sets {@link Span#debug}Sets {@link Span#shared} edge case, so don't require a logger field shared is for the server side, unset it if accidentally set on the client sideReturns a valid lower-hex trace ID, padded left as needed to 16 or 32 characters.if oversized or not lower-hexInspired by {@code okio.Buffer.writeLong} dedupe Custom impl to reduce GC churn and Kryo which cannot handle AutoValue subclass zero means null, saving 2 object references bit field for timestamp and duration, saving 2 object references prevent self-referencing spansC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/SpanBytesDecoderDetector.javaSpanBytesDecoderDetectorSpanBytesDecoderDetector()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/SpanBytesDecoderDetector.classprotobuf3protobuf3(java.nio.ByteBuffer)contains(java.nio.ByteBuffer,byte[])BytesDecoder<>detectDecoderdetectDecoder(java.nio.ByteBuffer)TAGS_FIELDENDPOINT_FIELD_SUFFIX'E''n'n'd'd'p'p'o''i''t''"'"'g'g's'sspandecoder'['["Expected json or thrift object, not list encoding"Expected json or thrift object, not list encoding"v2 formats should only be used with list messages"v2 formats should only be used with list messagesspansfirst"Expected json, proto3 or thrift list encoding"Expected json, proto3 or thrift list encoding'{'{"Could not detect the span format"Could not detect the span formatsubsequenceDetecting decoder used in transports which don't include means to identify the type of the data.<p>For example, we can identify the encoding and also the format in http via the request pathand content-type. However, in Kafka it could be that folks send mixed Zipkin data withoutidentifying its format. For example, Kafka historically has no content-type and users don'talways segregate different queues by instrumentation format. In TBinaryProtocol encoding, the first byte is the TType, in a range 0-16 .. If the first byte isn't in that range, it isn't a thrift. When byte(0) == '[' (91), assume it is a list of json-encoded spans When byte(0) == 10, assume it is a proto3-encoded span or trace ID field When byte(0) <= 16, assume it is a TBinaryProtocol-encoded thrift .. When serializing a Span (Struct), the first byte will be the type of a field .. When serializing a List[ThriftSpan], the first byte is the member type, TType.STRUCT(12) .. As ThriftSpan has no STRUCT fields: so, if the first byte is TType.STRUCT(12), it is a list.Zipkin v2 json will have "localEndpoint" or "remoteEndpoint" fields, and others won't.<p>Note: Technically, it is also possible that one can thwart this by creating an binaryannotation of type string with a name or value literally ending in Endpoint. This would bestrange, especially as the convention to identify a local endpoint is the key "lc". To preventa secondary check, this scenario is also ignored.Technically, it is possible to have a v2 span with no endpoints. This should catch the casewhere someone reported a tag without reporting the "localEndpoint".<p>Note: we don't check for annotations as that exists in both v1 and v2 formats.Throws {@link IllegalArgumentException} if the input isn't a v1 json or thrift single-spanmessageList[ThriftSpan]Throws {@link IllegalArgumentException} if the input isn't a json, proto3 or thrift listmessage.openzipkin/zipkin-reporter-java#133if the input isn't a json or thrift list or object. binary formatthe first byte is the TType, in a range 0-16span key or trace ID key varint follows and won't be zeroC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/BytesDecoder.javaserializedoutThis type accepts a collection that receives decoded elements.ArrayList<Span> out = new ArrayList<>();SpanBytesDecoder.JSON_V2.decodeList(spans, out)<T>type of the object to deserialize This receives a collection, not a function because it profiles 10% faster and all use cases are collections. This receives collection as opposed to list as zipkin-dependencies decodes into a set to dedupe redundant messages.This is used seldomly as the canonical message form is a {@link #decodeList(byte[], Collection)list}.<p>Note: multiple elements can be consumed from a single serialized object. For example, if theinput is Zipkin v1, the list might receive two elements if the serialized object was a sharedspan.a single message, for example a json objecttrue if an element was decoded{@linkplainIllegalArgumentException} if the type couldn't be decoded used by zipkin-dependencies which reads elements one-at-a-time from ES documentsVisible for testing. This returns the first element parsed from the serialized object or nullReturns {@code true} if an element was decoded or throws {@link IllegalArgumentException}.Convenience method for {@link #decodeList(byte[], Collection)}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/BytesEncoder.javaUtility for encoding one or more elements of a type into a byte array.type of the object to encodeSerializes an object into its binary form.Serializes a list of objects into their binary form.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesDecoder.javaDependencyLinkBytesDecoderzipkin2.internalJsonReaderAdapter<DependencyLink>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/JsonCodec$JsonReaderAdapter.classJsonCodec$JsonReaderAdapterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internalinternalREADERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesDecoder.classDependencyLinkBytesDecoder()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesDecoder$1.classDependencyLinkBytesDecoder$1linkJsonReaderAdapter<>linksArrayList<DependencyLink>AbstractList<DependencyLink>AbstractCollection<DependencyLink>ArrayList<DependencyLink>()Spliterator<DependencyLink>? super DependencyLinkConsumer<? super DependencyLink>Iterator<DependencyLink>Stream<DependencyLink>BaseStream<DependencyLink,Stream<DependencyLink>>Predicate<? super DependencyLink>? extends DependencyLinkCollection<? extends DependencyLink>Iterable<? extends DependencyLink>add(zipkin2.DependencyLink)AbstractCollection<DependencyLink>()ListIterator<DependencyLink>add(int,zipkin2.DependencyLink)set(int,zipkin2.DependencyLink)Comparator<? super DependencyLink>UnaryOperator<DependencyLink>Function<DependencyLink,DependencyLink>AbstractList<DependencyLink>()ArrayList<DependencyLink>(java.util.Collection)ArrayList<DependencyLink>(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesDecoder$2.classDependencyLinkBytesDecoder$2fromJsonfromJson(zipkin2.internal.JsonCodec.JsonReader)readernextName"parent""child""callCount""errorCount""DependencyLink"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesEncoder.javaDependencyLinkBytesEncoderjsonEscapejsonEscapedSizeInBytesasciiSizeInBytesWriter<DependencyLink>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/WriteBuffer$Writer.classWriteBuffer$WriterWRITERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesEncoder.classDependencyLinkBytesEncoder()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesEncoder$1.classDependencyLinkBytesEncoder$1writewrite(java.lang.Object,zipkin2.internal.WriteBuffer)write(zipkin2.DependencyLink,zipkin2.internal.WriteBuffer)Writer<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/DependencyLinkBytesEncoder$2.classDependencyLinkBytesEncoder$237"{\"parent\":\""{"parent":""\",\"child\":\""","child":""\",\"callCount\":"","callCount":",\"errorCount\":","errorCount":'}' {"parent":"","child":"","callCount":} ,"errorCount":C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/Encoding.javaEncodingEncoding()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/Encoding.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/Encoding$1.classEncoding$1List<byte[]>Collection<byte[]>Iterable<byte[]>listSizeInByteslistSizeInBytes(java.util.List)listSizeInBytes(int)encodedSizeInBytesSpliterator<byte[]>? super byte[]Consumer<? super byte[]>Iterator<byte[]>Stream<byte[]>BaseStream<byte[],Stream<byte[]>>Predicate<? super byte[]>? extends byte[]Collection<? extends byte[]>Iterable<? extends byte[]>add(byte[])ListIterator<byte[]>add(int,byte[])set(int,byte[])Comparator<? super byte[]>UnaryOperator<byte[]>Function<byte[],byte[]>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/Encoding$2.classEncoding$2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/Encoding$3.classEncoding$3 ZIPKIN3 make this not an enum as it prevents non-standard encoding, for example reporting to DataDog which has a message pack encoding.Encoding overhead of a single element is bracketsEncoding overhead is brackets and a comma for each span over 1 bracketsThe first format of Zipkin was TBinaryProtocol, big-endian thrift. It is no longer used, butdefined here to allow collectors to support reading old data.<p>The message's binary data includes a list header followed by N spans serialized inTBinaryProtocol@deprecatedthis format is deprecated in favor of json or proto3Encoding overhead is thrift type plus 32-bit length prefixRepeated (type 2) fields are length-prefixed. A list is a concatenation of fields with noadditional overhead.<p>See https://developers.google.com/protocol-buffers/docs/encoding#optionalReturns the input as it is assumed to be length-prefixed field from a protobuf messageReturns a concatenation of sizesLike {@link #listSizeInBytes(List)}, except for a single element.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder.javaSpanBytesDecoderdoDecodeListdoDecodeList(zipkin2.codec.SpanBytesDecoder,java.nio.ByteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder.classdoDecodeList(zipkin2.codec.SpanBytesDecoder,byte[])SpanBytesDecoder()"ImmutableEnumChecker"ImmutableEnumCheckerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder$1.classSpanBytesDecoder$1decodeList(java.nio.ByteBuffer)decodeOne(zipkin2.internal.ReadBuffer)decodeOne(java.nio.ByteBuffer)decodeList(java.nio.ByteBuffer,java.util.Collection)add(zipkin2.Span)Spliterator<Span>Consumer<? super Span>Iterator<Span>Stream<Span>BaseStream<Span,Stream<Span>>Predicate<? super Span>? extends SpanCollection<? extends Span>Iterable<? extends Span>bufferv1ArrayList<Span>AbstractList<Span>AbstractCollection<Span>ArrayList<Span>(int)AbstractCollection<Span>()ListIterator<Span>add(int,zipkin2.Span)set(int,zipkin2.Span)Comparator<? super Span>UnaryOperator<Span>Function<Span,Span>AbstractList<Span>()ArrayList<Span>(java.util.Collection)ArrayList<Span>()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder$2.classSpanBytesDecoder$2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder$3.classSpanBytesDecoder$3C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesDecoder$4.classSpanBytesDecoder$4This is separate from {@link SpanBytesEncoder}, as it isn't needed for instrumentation because span is immutableCorresponds to the Zipkin v1 json format ex DependencyLinker ex getTraceCorresponds to the Zipkin v1 thrift formatCorresponds to the Zipkin v2 json formatByteBuffer implementation of {@link #decodeList(byte[])}.<p>Note: only use this when it is ok to modify the underlying {@link ByteBuffer#array()}.ByteBuffer implementation of {@link #decodeOne(byte[])}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder.javaSpanBytesEncoderSpanBytesEncoder()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder$1.classSpanBytesEncoder$1encodeList(java.util.List,byte[],int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder$2.classSpanBytesEncoder$2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder$3.classSpanBytesEncoder$3writerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/codec/SpanBytesEncoder$4.classSpanBytesEncoder$4Limited interface needed by those writing span reportersCorresponds to the Zipkin v1 json format (with tags as binary annotations)Allows you to encode a list of spans onto a specific offset. For example, when nestingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/AggregateCall.javaAggregateCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internalCall<I>List<Call<I>>Collection<Call<I>>Iterable<Call<I>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/AggregateCall.classlogBase<O>Call<O>AggregateCall<>? extends AggregateCall<>Class<? extends AggregateCall<>>Map<String,? extends AggregateCall<>>AggregateCall[]AggregateCall<>[]? extends AggregateCall<>[]Constructor<? extends AggregateCall<>>? super ? extends AggregateCall<>Class<? super ? extends AggregateCall<>>TypeVariable<Class<? extends AggregateCall<>>>TypeVariable<Class<? extends AggregateCall<>>>[]Call<Void>List<Call<Void>>Collection<Call<Void>>Iterable<Call<Void>>callsSpliterator<Call<Void>>? super Call<Void>Consumer<? super Call<Void>>Iterator<Call<Void>>Stream<Call<Void>>BaseStream<Call<Void>,Stream<Call<Void>>>Predicate<? super Call<Void>>? extends Call<Void>Collection<? extends Call<Void>>Iterable<? extends Call<Void>>add(zipkin2.Call)ListIterator<Call<Void>>add(int,zipkin2.Call)set(int,zipkin2.Call)Comparator<? super Call<Void>>UnaryOperator<Call<Void>>Function<Call<Void>,Call<Void>>"calls were empty"calls were emptyemptyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/AggregateCall$AggregateVoidCall.classAggregateCall$AggregateVoidCallAggregateVoidCallAggregateVoidCall(java.util.List)AggregateCall<Void,Void>Base<Void>outputSpliterator<Call<I>>? super Call<I>Consumer<? super Call<I>>Iterator<Call<I>>Stream<Call<I>>BaseStream<Call<I>,Stream<Call<I>>>Predicate<? super Call<I>>? extends Call<I>Collection<? extends Call<I>>Iterable<? extends Call<I>>ListIterator<Call<I>>Comparator<? super Call<I>>UnaryOperator<Call<I>>Function<Call<I>,Call<I>>"do not create empty aggregate calls"do not create empty aggregate calls"do not create single-element aggregates"do not create single-element aggregatesfirstErrorcallCallback<I>ErrorHandler<I>FlatMapper<I,R>Mapper<I,R>Call<I>()"error from "error from Callback<O>remainingAtomicReference<Throwable>CountdownCallbackCountdownCallback(zipkin2.Call,java.util.concurrent.atomic.AtomicInteger,java.util.concurrent.atomic.AtomicReference,java.lang.Object,zipkin2.Callback)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/AggregateCall$CountdownCallback.classAggregateCall$CountdownCallbackweakCompareAndSetRelease(java.lang.Throwable,java.lang.Throwable)weakCompareAndSetAcquire(java.lang.Throwable,java.lang.Throwable)weakCompareAndSetVolatile(java.lang.Throwable,java.lang.Throwable)compareAndExchangeRelease(java.lang.Throwable,java.lang.Throwable)compareAndExchangeAcquire(java.lang.Throwable,java.lang.Throwable)compareAndExchange(java.lang.Throwable,java.lang.Throwable)setRelease(java.lang.Throwable)setOpaque(java.lang.Throwable)setPlain(java.lang.Throwable)BinaryOperator<Throwable>BiFunction<Throwable,Throwable,Throwable>accumulateAndGet(java.lang.Throwable,java.util.function.BinaryOperator)getAndAccumulate(java.lang.Throwable,java.util.function.BinaryOperator)UnaryOperator<Throwable>Function<Throwable,Throwable>getAndSet(java.lang.Throwable)weakCompareAndSetPlain(java.lang.Throwable,java.lang.Throwable)weakCompareAndSet(java.lang.Throwable,java.lang.Throwable)compareAndSet(java.lang.Throwable,java.lang.Throwable)lazySet(java.lang.Throwable)set(java.lang.Throwable)AtomicReference<Throwable>()AtomicReference<Throwable>(java.lang.Throwable)throwableArrayList<Call<I>>AbstractList<Call<I>>AbstractCollection<Call<I>>ArrayList<Call<I>>(int)AbstractCollection<Call<I>>()AbstractList<Call<I>>()ArrayList<Call<I>>(java.util.Collection)ArrayList<Call<I>>()"AggregateCall{"AggregateCall{A call that blocks on others to complete before invoking a callback or returning from {@link#execute()}. The first error will be returned upstream, later ones will be suppressed.<I>the type of returned from {@link Call#execute()}<O>the type representing the aggregate success valueCustomizes the aggregated result. For example, summarizing or making immutable.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DateUtil.javaDateUtilUTCC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DateUtil.class"UTC"epochMillisdayList<Long>Collection<Long>Iterable<Long>endTslookbacktostartMillisdaysArrayList<Long>AbstractList<Long>AbstractCollection<Long>ArrayList<Long>()Spliterator<Long>? super LongConsumer<? super Long>Iterator<Long>Stream<Long>BaseStream<Long,Stream<Long>>Predicate<? super Long>? extends LongCollection<? extends Long>Iterable<? extends Long>add(java.lang.Long)AbstractCollection<Long>()ListIterator<Long>add(int,java.lang.Long)set(int,java.lang.Long)Comparator<? super Long>UnaryOperator<Long>Function<Long,Long>AbstractList<Long>()ArrayList<Long>(java.util.Collection)ArrayList<Long>(int)timeFor bucketed data floored to the day. For example, dependency links. >= 1970C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DelayLimiter.javaDelayLimitercleanupExpiredSuppressionscleanupExpiredSuppressions()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DelayLimiter.classremoveOneSuppressionremoveOneSuppression()DelayLimiter(zipkin2.internal.DelayLimiter.SuppressionFactory,int)cardinalitySuppression<C>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/DelayLimiter$Suppression.classDelayLimiter$SuppressionDelayLimiter<>java.util.concurrentDelayQueue<Suppression<C>>C:/modules/java.base/java/util/concurrent/DelayQueue.classDelayQueueAbstractQueue<Suppression<C>>C:/modules/java.base/java/util/AbstractQueue.classAbstractQueueAbstractCollection<Suppression<C>>Collection<Suppression<C>>Iterable<Suppression<C>>Queue<Suppression<C>>C:/modules/java.base/java/util/Queue.classQueueBlockingQueue<Suppression<C>>C:/modules/java.base/java/util/concurrent/BlockingQueue.classBlockingQueuesuppressionsConcurrentHashMap<C,Suppression<C>>C:/modules/java.base/java/util/concurrent/ConcurrentHashMap.classConcurrentHashMapAbstractMap<C,Suppression<C>>Map<C,Suppression<C>>ConcurrentMap<C,Suppression<C>>C:/modules/java.base/java/util/concurrent/ConcurrentMap.classConcurrentMapcachesuppressionFactoryConcurrentHashMap<C,Suppression<C>>()? super Suppression<C>? extends Suppression<C>BiFunction<? super Suppression<C>,? super Suppression<C>,? extends Suppression<C>>Suppression<>merge(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression,java.util.function.BiFunction)? super CBiFunction<? super C,? super Suppression<C>,? extends Suppression<C>>Function<? super C,? extends Suppression<C>>replace(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression)replace(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression,zipkin2.internal.DelayLimiter.Suppression)putIfAbsent(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression)BiConsumer<? super C,? super Suppression<C>>getOrDefault(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression)Entry<C,Suppression<C>>Set<Entry<C,Suppression<C>>>Collection<Entry<C,Suppression<C>>>Iterable<Entry<C,Suppression<C>>>Set<C>Collection<C>Iterable<C>? extends CMap<? extends C,? extends Suppression<C>>put(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression)AbstractMap<C,Suppression<C>>()ToIntFunction<Entry<K,V>>C:/modules/java.base/java/util/function/ToIntFunction.classToIntFunctionreduceEntriesToIntreduceEntriesToInt(long,java.util.function.ToIntFunction,int,java.util.function.IntBinaryOperator)ToIntFunction<Entry<C,Suppression<C>>>ToLongFunction<Entry<K,V>>C:/modules/java.base/java/util/function/ToLongFunction.classToLongFunctionreduceEntriesToLongreduceEntriesToLong(long,java.util.function.ToLongFunction,long,java.util.function.LongBinaryOperator)ToLongFunction<Entry<C,Suppression<C>>>ToDoubleFunction<Entry<K,V>>C:/modules/java.base/java/util/function/ToDoubleFunction.classToDoubleFunctiondoublereduceEntriesToDoublereduceEntriesToDouble(long,java.util.function.ToDoubleFunction,double,java.util.function.DoubleBinaryOperator)ToDoubleFunction<Entry<C,Suppression<C>>>reduceEntriesreduceEntries(long,java.util.function.Function,java.util.function.BiFunction)Function<Entry<K,V>,? extends U>? super UBiFunction<? super U,? super U,? extends U>Function<Entry<C,Suppression<C>>,? extends U>? extends Entry<K,V>BiFunction<Entry<K,V>,Entry<K,V>,? extends Entry<K,V>>reduceEntries(long,java.util.function.BiFunction)? extends Entry<C,Suppression<C>>BiFunction<Entry<C,Suppression<C>>,Entry<C,Suppression<C>>,? extends Entry<C,Suppression<C>>>searchEntriessearchEntries(long,java.util.function.Function)Consumer<>forEachEntryforEachEntry(long,java.util.function.Function,java.util.function.Consumer)Consumer<? super U>? super Entry<K,V>Consumer<? super Entry<K,V>>forEachEntry(long,java.util.function.Consumer)? super Entry<C,Suppression<C>>Consumer<? super Entry<C,Suppression<C>>>ToIntFunction<? super V>reduceValuesToIntreduceValuesToInt(long,java.util.function.ToIntFunction,int,java.util.function.IntBinaryOperator)ToIntFunction<? super Suppression<C>>ToLongFunction<? super V>reduceValuesToLongreduceValuesToLong(long,java.util.function.ToLongFunction,long,java.util.function.LongBinaryOperator)ToLongFunction<? super Suppression<C>>ToDoubleFunction<? super V>reduceValuesToDoublereduceValuesToDouble(long,java.util.function.ToDoubleFunction,double,java.util.function.DoubleBinaryOperator)ToDoubleFunction<? super Suppression<C>>reduceValuesreduceValues(long,java.util.function.Function,java.util.function.BiFunction)Function<? super V,? extends U>Function<? super Suppression<C>,? extends U>reduceValues(long,java.util.function.BiFunction)searchValuessearchValues(long,java.util.function.Function)forEachValueforEachValue(long,java.util.function.Function,java.util.function.Consumer)Consumer<? super V>forEachValue(long,java.util.function.Consumer)Consumer<? super Suppression<C>>ToIntFunction<? super K>reduceKeysToIntreduceKeysToInt(long,java.util.function.ToIntFunction,int,java.util.function.IntBinaryOperator)ToIntFunction<? super C>ToLongFunction<? super K>reduceKeysToLongreduceKeysToLong(long,java.util.function.ToLongFunction,long,java.util.function.LongBinaryOperator)ToLongFunction<? super C>ToDoubleFunction<? super K>reduceKeysToDoublereduceKeysToDouble(long,java.util.function.ToDoubleFunction,double,java.util.function.DoubleBinaryOperator)ToDoubleFunction<? super C>reduceKeysreduceKeys(long,java.util.function.Function,java.util.function.BiFunction)Function<? super K,? extends U>Function<? super C,? extends U>BiFunction<? super K,? super K,? extends K>reduceKeys(long,java.util.function.BiFunction)BiFunction<? super C,? super C,? extends C>searchKeyssearchKeys(long,java.util.function.Function)forEachKeyforEachKey(long,java.util.function.Function,java.util.function.Consumer)Consumer<? super K>forEachKey(long,java.util.function.Consumer)Consumer<? super C>ToIntBiFunction<? super K,? super V>C:/modules/java.base/java/util/function/ToIntBiFunction.classToIntBiFunctionreduceToIntreduceToInt(long,java.util.function.ToIntBiFunction,int,java.util.function.IntBinaryOperator)ToIntBiFunction<? super C,? super Suppression<C>>ToLongBiFunction<? super K,? super V>C:/modules/java.base/java/util/function/ToLongBiFunction.classToLongBiFunctionreduceToLongreduceToLong(long,java.util.function.ToLongBiFunction,long,java.util.function.LongBinaryOperator)ToLongBiFunction<? super C,? super Suppression<C>>ToDoubleBiFunction<? super K,? super V>C:/modules/java.base/java/util/function/ToDoubleBiFunction.classToDoubleBiFunctionreduceToDoublereduceToDouble(long,java.util.function.ToDoubleBiFunction,double,java.util.function.DoubleBinaryOperator)ToDoubleBiFunction<? super C,? super Suppression<C>>reducereduce(long,java.util.function.BiFunction,java.util.function.BiFunction)BiFunction<? super K,? super V,? extends U>BiFunction<? super C,? super Suppression<C>,? extends U>searchsearch(long,java.util.function.BiFunction)forEach(long,java.util.function.BiFunction,java.util.function.Consumer)forEach(long,java.util.function.BiConsumer)batchForbatchFor(long)C:/modules/java.base/java/util/concurrent/ConcurrentHashMap$Node.classConcurrentHashMap$NodeConcurrentHashMap<>ConcurrentMap<>untreeifyuntreeify(java.util.concurrent.ConcurrentHashMap.Node)sumCountsumCount()helpTransferhelpTransfer(java.util.concurrent.ConcurrentHashMap.Node[],java.util.concurrent.ConcurrentHashMap.Node)Node<C,Suppression<C>>Node<C,Suppression<C>>[]resizeStampresizeStamp(int)KeySetView<>C:/modules/java.base/java/util/concurrent/ConcurrentHashMap$KeySetView.classConcurrentHashMap$KeySetViewCollectionView<>C:/modules/java.base/java/util/concurrent/ConcurrentHashMap$CollectionView.classConcurrentHashMap$CollectionViewKeySetView<K,V>CollectionView<K,V,K>keySet(java.lang.Object)KeySetView<C,Suppression<C>>CollectionView<C,Suppression<C>,C>keySet(zipkin2.internal.DelayLimiter.Suppression)KeySetView<K,Boolean>CollectionView<K,Boolean,K>newKeySetnewKeySet(int)newKeySet()mappingCountmappingCount()Enumeration<>C:/modules/java.base/java/util/Enumeration.classEnumerationEnumeration<V>elementselements()Enumeration<Suppression<C>>Enumeration<K>keyskeys()Enumeration<C>Predicate<? super V>removeValueIfremoveValueIf(java.util.function.Predicate)Predicate<? super Suppression<C>>Predicate<? super Entry<K,V>>removeEntryIfremoveEntryIf(java.util.function.Predicate)Predicate<? super Entry<C,Suppression<C>>>replaceNodereplaceNode(java.lang.Object,java.lang.Object,java.lang.Object)replaceNode(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression,java.lang.Object)putVal(java.lang.Object,java.lang.Object,boolean)putVal(java.lang.Object,zipkin2.internal.DelayLimiter.Suppression,boolean)ConcurrentHashMap(int,float,int)ConcurrentHashMap<C,Suppression<C>>(int,float,int)ConcurrentHashMap(int,float)ConcurrentHashMap<C,Suppression<C>>(int,float)ConcurrentHashMap(java.util.Map)ConcurrentHashMap<C,Suppression<C>>(java.util.Map)ConcurrentHashMap(int)ConcurrentHashMap<C,Suppression<C>>(int)ConcurrentHashMap()setTabAtsetTabAt(java.util.concurrent.ConcurrentHashMap.Node[],int,java.util.concurrent.ConcurrentHashMap.Node)casTabAtcasTabAt(java.util.concurrent.ConcurrentHashMap.Node[],int,java.util.concurrent.ConcurrentHashMap.Node,java.util.concurrent.ConcurrentHashMap.Node)tabAttabAt(java.util.concurrent.ConcurrentHashMap.Node[],int)spreadspread(int)NCPUHASH_BITSRESERVEDTREEBINMOVEDMAX_ARRAY_SIZEDelayQueue<Suppression<C>>()Spliterator<Suppression<C>>Iterator<Suppression<C>>Stream<Suppression<C>>BaseStream<Suppression<C>,Stream<Suppression<C>>>Collection<? extends Suppression<C>>Iterable<? extends Suppression<C>>add(zipkin2.internal.DelayLimiter.Suppression)AbstractCollection<Suppression<C>>()peekpeek()elementelement()pollpoll()remove()offeroffer(java.lang.Object)offer(zipkin2.internal.DelayLimiter.Suppression)AbstractQueue()AbstractQueue<Suppression<C>>()Collection<? super E>Iterable<? super E>drainTodrainTo(java.util.Collection,int)Collection<? super Suppression<C>>Iterable<? super Suppression<C>>drainTo(java.util.Collection)remainingCapacityremainingCapacity()poll(long,java.util.concurrent.TimeUnit)taketake()offer(java.lang.Object,long,java.util.concurrent.TimeUnit)offer(zipkin2.internal.DelayLimiter.Suppression,long,java.util.concurrent.TimeUnit)put(java.lang.Object)put(zipkin2.internal.DelayLimiter.Suppression)removeEQremoveEQ(java.lang.Object)offer(java.util.concurrent.Delayed,long,java.util.concurrent.TimeUnit)put(java.util.concurrent.Delayed)offer(java.util.concurrent.Delayed)add(java.util.concurrent.Delayed)DelayQueue(java.util.Collection)DelayQueue<Suppression<C>>(java.util.Collection)DelayQueue()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/DelayLimiter$Builder.classDelayLimiter$BuilderttlUnitttl"ttlUnit == null"ttlUnit == nullDelayLimiter<C>"ttl <= 0"ttl <= 0"cardinality <= 0"cardinality <= 0DelayLimiter<C>(zipkin2.internal.DelayLimiter.SuppressionFactory,int)invalidateinvalidate(java.lang.Object)shouldInvokeshouldInvoke(java.lang.Object)newBuildernewBuilder()contextsuppressioneldestexpiredSuppressionCC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/DelayLimiter$SuppressionFactory.classDelayLimiter$SuppressionFactorynanoTimenanoTime()SuppressionFactorySuppressionFactory(long)ttlNanosSuppression<C>(zipkin2.internal.DelayLimiter.SuppressionFactory,java.lang.Object,long)compareTo(java.util.concurrent.Delayed)getDelaygetDelay(java.util.concurrent.TimeUnit)SuppressionSuppression(zipkin2.internal.DelayLimiter.SuppressionFactory,java.lang.Object,long)expirationfactoryunitLimits invocations of a given context to at most once per period. this is a dependency-free variant formerly served by an expiring guava cacheWhen {@link #shouldInvoke(Object)} returns true, it will return false until this durationexpires.This bounds suppressions, useful because contexts can be accidentally unlimited cardinality.Returns true if a given context should be invoked. lost race If we added an entry, it could make us go over the max size. loop unless empty check for lost race to ensure we don't remove two! not final for testsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Dependencies.javaDependenciesTYPE_I64TYPE_LISTTYPE_STOPTYPE_STRINGutf8SizeInBytesDependencies(long,long,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Dependencies.classstartTswrite(zipkin2.internal.WriteBuffer)sizeInBytes()DEPENDENCY_LINK_ADAPTERLINKSEND_TSSTART_TSthriftField"links == null"links == nullreadread(zipkin2.internal.ReadBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Dependencies$DependencyLinkAdapter.classDependencies$DependencyLinkAdapterERROR_COUNTCALL_COUNTCHILDPARENTDependencyLinkAdapterDependencyLinkAdapter()Internal as only cassandra serializes the start and end timestamps along with link data, andthose serialized timestamps are never read.See https://github.com/openzipkin/zipkin/issues/1008Reads from buffer serialized in TBinaryProtocolWrites the current instance in TBinaryProtocol START_TS END_TS TYPE_STOPtimestamps are in epoch milliseconds CALL_COUNT ERROR_COUNTC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DependencyLinker.javaDependencyLinkerFINEMap<Pair,Long>link(java.util.Map,java.util.Map)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/DependencyLinker.classaddLinkaddLink(java.lang.String,java.lang.String,boolean)firstRemoteAncestorfirstRemoteAncestor(zipkin2.internal.SpanNode)DependencyLinker(java.util.logging.Logger)errorCountscallCountsLinkedHashMap<Pair,Long>HashMap<Pair,Long>AbstractMap<Pair,Long>LinkedHashMap<Pair,Long>()BiFunction<? super Long,? super Long,? extends Long>merge(zipkin2.internal.DependencyLinker.Pair,java.lang.Long,java.util.function.BiFunction)? super PairBiFunction<? super Pair,? super Long,? extends Long>compute(zipkin2.internal.DependencyLinker.Pair,java.util.function.BiFunction)computeIfPresent(zipkin2.internal.DependencyLinker.Pair,java.util.function.BiFunction)Function<? super Pair,? extends Long>computeIfAbsent(zipkin2.internal.DependencyLinker.Pair,java.util.function.Function)replace(zipkin2.internal.DependencyLinker.Pair,java.lang.Long)replace(zipkin2.internal.DependencyLinker.Pair,java.lang.Long,java.lang.Long)putIfAbsent(zipkin2.internal.DependencyLinker.Pair,java.lang.Long)BiConsumer<? super Pair,? super Long>getOrDefault(java.lang.Object,java.lang.Long)Entry<Pair,Long>Set<Entry<Pair,Long>>Collection<Entry<Pair,Long>>Iterable<Entry<Pair,Long>>Set<Pair>Collection<Pair>Iterable<Pair>? extends PairMap<? extends Pair,? extends Long>put(zipkin2.internal.DependencyLinker.Pair,java.lang.Long)AbstractMap<Pair,Long>()Node<Pair,Long>TreeNode<Pair,Long>newTreeNode(int,zipkin2.internal.DependencyLinker.Pair,java.lang.Long,java.util.HashMap.Node)newNode(int,zipkin2.internal.DependencyLinker.Pair,java.lang.Long,java.util.HashMap.Node)Node<Pair,Long>[]putVal(int,zipkin2.internal.DependencyLinker.Pair,java.lang.Long,boolean,boolean)HashMap<Pair,Long>(java.util.Map)HashMap<Pair,Long>()HashMap<Pair,Long>(int)HashMap<Pair,Long>(int,float)LinkedHashMap<Pair,Long>(int,float,boolean)LinkedHashMap<Pair,Long>(java.util.Map)LinkedHashMap<Pair,Long>(int)LinkedHashMap<Pair,Long>(int,float)Class<DependencyLinker>Map<String,DependencyLinker>DependencyLinker[]Constructor<DependencyLinker>? super DependencyLinkerClass<? super DependencyLinker>TypeVariable<Class<DependencyLinker>>TypeVariable<Class<DependencyLinker>>[]traceTree"traversing trace tree, breadth-first"traversing trace tree, breadth-firstIterator<SpanNode>hasNexthasNext()forEachRemainingforEachRemaining(java.util.function.Consumer)? super SpanNodeConsumer<? super SpanNode>nextnext()currentcurrentSpanremoteServiceNameisError"error"remoteAncestorremoteAncestorName"processing "processing List<SpanNode>Collection<SpanNode>Iterable<SpanNode>Spliterator<SpanNode>Stream<SpanNode>BaseStream<SpanNode,Stream<SpanNode>>Predicate<? super SpanNode>? extends SpanNodeCollection<? extends SpanNode>Iterable<? extends SpanNode>add(zipkin2.internal.SpanNode)ListIterator<SpanNode>add(int,zipkin2.internal.SpanNode)set(int,zipkin2.internal.SpanNode)Comparator<? super SpanNode>UnaryOperator<SpanNode>Function<SpanNode,SpanNode>"non remote span; skipping"non remote span; skipping"root's client is unknown; skipping"root's client is unknown; skipping"unknown kind; skipping"unknown kind; skipping"cannot link messaging span to its broker; skipping"cannot link messaging span to its broker; skipping"detected missing link to client span"detected missing link to client span"cannot find remote ancestor; skipping"cannot find remote ancestor; skippingancestormaybeRemote"found remote ancestor "found remote ancestor "incrementing "incrementing "error "error "link "link " -> " -> 1LparentChildgetKeygetKey()Comparator<Entry<K,V>>comparingByValuecomparingByValue(java.util.Comparator)Comparator<? super V>comparingByKeycomparingByKey(java.util.Comparator)Comparable<? super V>comparingByValue()Comparable<? super K>comparingByKey()setValuesetValue(java.lang.Object)setValue(java.lang.Long)getValuegetValue()PairPair(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/DependencyLinker$Pair.classDependencyLinker$Pairrightlefth$This parses a span tree into dependency links used by Web UI. Ex. http://zipkin/dependency<p>This implementation traverses the tree, and only creates links between {@link Kind#SERVERserver} spans. One exception is at the bottom of the trace tree. {@link Kind#CLIENT client} spansthat record their {@link Span#remoteEndpoint()} are included, as this accounts for uninstrumentedservices. Spans with {@link Span#kind()} unset, but {@link Span#remoteEndpoint()} set are treatedthe same as client spans.All {@code spans} must have the same trace id. When processing links to a client span, we prefer the server's name. If we have no child spans, we proceed to use the name the client chose. Treat unknown type of span as a client span if we know both sides we are the root-most span. Local spans may be between the current node and its remote parent Some users accidentally put the remote service name on client annotations. Check for this and backfill a link from the nearest remote to that service as necessary. we don't know if there's an error here When an RPC is split between spans, we skip the child (server side). If our parent is a client, we need to check it for errors.links are merged by mapping to parent/child and summing corresponding linksC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/FilterTraces.javaFilterTracesFilterTraces(zipkin2.storage.QueryRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/FilterTraces.classrequestList<List<Span>>Collection<List<Span>>Iterable<List<Span>>Mapper<List<List<Span>>,List<List<Span>>>Spliterator<List<Span>>? super List<Span>Consumer<? super List<Span>>Iterator<List<Span>>Stream<List<Span>>BaseStream<List<Span>,Stream<List<Span>>>Predicate<? super List<Span>>? extends List<Span>Collection<? extends List<Span>>Iterable<? extends List<Span>>add(java.util.List)ListIterator<List<Span>>add(int,java.util.List)set(int,java.util.List)Comparator<? super List<Span>>UnaryOperator<List<Span>>Function<List<Span>,List<Span>>ArrayList<List<Span>>AbstractList<List<Span>>AbstractCollection<List<Span>>ArrayList<List<Span>>(int)AbstractCollection<List<Span>>()AbstractList<List<Span>>()ArrayList<List<Span>>(java.util.Collection)ArrayList<List<Span>>()"FilterTraces{request="FilterTraces{request=Filters the mutable input based on the queryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/HexCodec.javaHexCodecHexCodec()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/HexCodec.classisntLowerHexLongisntLowerHexLong(java.lang.String)'3''4''6''7''8''b''c''e'lowerHexbeginIndexindexendIndex" should be a 1 to 32 character lower-hex string with no prefix" should be a 1 to 32 character lower-hex string with no prefix code originally imported from zipkin.UtilParses a 1 to 32 character lower-hex string with no prefix into an unsigned long, tossing anybits higher than 64. trim off any high bitsParses a 16 character lower-hex string with no prefix into an unsigned long, starting at thespecified index.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/JsonCodec.javaJsonCodecBOOLEANNULLSTRINGexceptionReadingexceptionReading(java.lang.String,java.lang.Exception)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/JsonCodec.classsizeInBytes(zipkin2.internal.WriteBuffer.Writer,java.util.List)Writer<T>JsonReaderJsonReader(zipkin2.internal.ReadBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/JsonCodec$JsonReader.classJsonCodec$JsonReaderJsonReaderAdapter<T>adapterArrayList<T>AbstractList<T>AbstractCollection<T>ArrayList<T>(int)AbstractCollection<T>()AbstractList<T>()ArrayList<T>(java.util.Collection)ArrayList<T>()"List<"List<">">lengthWritten"Bug found using %s to write %s as json. Wrote %s/%s bytes: %s"Bug found using %s to write %s as json. Wrote %s/%s bytes: %s? extends Writer<>Class<? extends Writer<>>Map<String,? extends Writer<>>Writer[]Writer<>[]? extends Writer<>[]Constructor<? extends Writer<>>? super ? extends Writer<>Class<? super ? extends Writer<>>TypeVariable<Class<? extends Writer<>>>TypeVariable<Class<? extends Writer<>>>[]? extends ObjectClass<? extends Object>Map<String,? extends Object>? extends Object[]Constructor<? extends Object>? super ? extends ObjectClass<? super ? extends Object>TypeVariable<Class<? extends Object>>TypeVariable<Class<? extends Object>>[]']']initialPos',',cause"Error"Error"%s reading %s from json"%s reading %s from json"Expected BEGIN_OBJECT"Expected BEGIN_OBJECT"malformed"malformed"Malformed"MalformedThis explicitly constructs instances of model classes via manual parsing for a number ofreasons.<ul><li>Eliminates the need to keep separate model classes for proto3 vs json<li>Avoids magic field initialization which, can miss constructor guards<li>Allows us to safely re-use the json form in toString methods<li>Encourages logic to be based on the json shape of objects<li>Ensures the order and naming of the fields in json is stable</ul><p>There is the up-front cost of creating this, and maintenance of this to consider. However,this should be easy to justify as these objects don't change much at all. Hides gson types for internal use in other submodules TODO: could make single-element list w/o array [] comma to join elementsInability to encode is a programming bug. Don't use value directly in the message, as its toString might be implemented using this method. If that's the case, we'd stack overflow. Instead, emit what we've written so far.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/JsonEscaper.javaJsonEscaperU2029C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/JsonEscaper.classU2028REPLACEMENT_CHARS1280x1f31"\\u%04x"\u%04x"\\\""\"'\\'\"\\\\"\\'\t'	"\\t"\t'\b'"\\b"\b'\n'
"\\n"\n'\r'"\\r"\r'\f'"\\f"\f"\\u2028"\u2028"\\u2029"\u2029afterReplacementreplacement0x80'\u2028''\u2029'asciiescapingOverheadmaybeReplacementExposed for ElasticSearch HttpBulkIndexer write characters between the last replacement and now then we didn't escape anythingEscaping logic adapted from Moshi, which we couldn't use due to language levelFrom RFC 7159, "All Unicode characters may be placed within thequotation marks except for the characters that must be escaped:quotation mark, reverse solidus, and the control characters(U+0000 through U+001F)."We also escape '\u2028' and '\u2029', which JavaScript interprets asnewline characters. This prevents eval() from failing with a syntaxerror. http://code.google.com/p/google-gson/issues/detail?id=341C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Nullable.javaNullableLibraries such as Guice and AutoValue will process any annotation named {@code Nullable}. Thisavoids a dependency on one of the many jsr305 jars, causes problems in OSGi and Java 9 projects(where a project is also using jax-ws).C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3Codec.javaProto3CodecSPANC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3Codec.class"Span""List<Span>""%s reading %s from proto3"%s reading %s from proto3C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3Fields.javaProto3FieldsvarintSizeInBytessizeOfLengthDelimitedFieldsizeOfLengthDelimitedField(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3Fields.classWIRETYPE_FIXED32WIRETYPE_LENGTH_DELIMITEDWIRETYPE_FIXED64WIRETYPE_VARINTProto3Fields()skipValueskipValue(zipkin2.internal.ReadBuffer,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$Field.classProto3Fields$FieldwireTypewireType(int,int)fieldNumberfieldNumber(int,int)FieldField(int,int,int)Field(int)byteL"Malformed: fieldNumber was zero at byte "Malformed: fieldNumber was zero at byte "Malformed: invalid wireType "Malformed: invalid wireType " at byte " at byte readValuereadValue(zipkin2.internal.ReadBuffer,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$LengthDelimitedField.classProto3Fields$LengthDelimitedFieldwriteValuewriteValue(zipkin2.internal.WriteBuffer,java.lang.Object)sizeOfValuesizeOfValue(java.lang.Object)readLengthPrefixAndValuereadLengthPrefixAndValue(zipkin2.internal.ReadBuffer)write(zipkin2.internal.WriteBuffer,java.lang.Object)LengthDelimitedFieldLengthDelimitedField(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$BytesField.classProto3Fields$BytesFieldwriteValue(zipkin2.internal.WriteBuffer,byte[])sizeOfValue(byte[])BytesFieldBytesField(int)LengthDelimitedField<byte[]>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$HexField.classProto3Fields$HexFielddecodeLowerHexdecodeLowerHex(char)writeValue(zipkin2.internal.WriteBuffer,java.lang.String)sizeOfValue(java.lang.String)HexFieldHexField(int)LengthDelimitedField<String>hexd1d2"not lowerHex "not lowerHex C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$Utf8Field.classProto3Fields$Utf8FieldUtf8FieldUtf8Field(int)utf8readValue(zipkin2.internal.ReadBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$Fixed64Field.classProto3Fields$Fixed64FieldsizeInBytes(long)write(zipkin2.internal.WriteBuffer,long)Fixed64FieldFixed64Field(int)numberC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$VarintField.classProto3Fields$VarintFieldwrite(zipkin2.internal.WriteBuffer,int)sizeInBytes(int)VarintFieldVarintField(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$BooleanField.classProto3Fields$BooleanFieldwrite(zipkin2.internal.WriteBuffer,boolean)sizeInBytes(boolean)BooleanFieldBooleanField(int)bool"Malformed: invalid boolean value at byte "Malformed: invalid boolean value at byte C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3Fields$Fixed32Field.classProto3Fields$Fixed32FieldFixed32FieldFixed32Field(int)Everything here assumes the field numbers are less than 16, implying a 1 byte tag.Define the wire types, except the deprecated ones (groups)<p>See https://developers.google.com/protocol-buffers/docs/encoding#structure"Each key in the streamed message is a varint with the value {@code (field_number << 3) |wire_type}"Leniently skips out null, but not on empty string, allowing tag "error" -> "" to serializeproperly.<p>This won't result in empty {@link zipkin2.Span#name()} or {@link Endpoint#serviceName()}because in both cases constructors coerce empty values to null. length prefixCalling this after consuming the field key to ensures there's enough space for the data. Nullis returned when the length prefix is zero.is greater than zero similar logic to okio.ByteString.decodeHex bug tag + 8 byte number tag + varint added for completion as later we will skip fields we don't use tag + 4 byte number tag + len + bytesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3SpanWriter.javaProto3SpanWriterwriteListwriteList(java.util.List,byte[],int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3SpanWriter.classwriteSpanwriteSpan(zipkin2.Span,int,zipkin2.internal.WriteBuffer)write(zipkin2.Span)EMPTY_ARRAYProto3SpanWriter()Writer<Span>LengthDelimitedField<Span>writeValue(zipkin2.internal.WriteBuffer,zipkin2.Span)sizeOfValue(zipkin2.Span)write(zipkin2.internal.WriteBuffer,zipkin2.Span)LengthDelimitedField<Span>(int)lengthOfSpansint[]sizeOfValueswriteBufferonlySpansizeOfSpanEncodes per ListOfSpans data wireType, where field one is repeated spans prevents resizing twiceC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3ZipkinFields.javaProto3ZipkinFieldslogAndSkiplogAndSkip(zipkin2.internal.ReadBuffer,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Proto3ZipkinFields.classLOGProto3ZipkinFields()Class<Proto3ZipkinFields>Map<String,Proto3ZipkinFields>Proto3ZipkinFields[]Constructor<Proto3ZipkinFields>? super Proto3ZipkinFieldsClass<? super Proto3ZipkinFields>TypeVariable<Class<Proto3ZipkinFields>>TypeVariable<Class<Proto3ZipkinFields>>[]C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3ZipkinFields$EndpointField.classProto3ZipkinFields$EndpointFieldwriteValue(zipkin2.internal.WriteBuffer,zipkin2.Endpoint)sizeOfValue(zipkin2.Endpoint)EndpointFieldEndpointField(int)PORTIPV6IPV4SERVICE_NAMEPORT_KEYIPV6_KEYIPV4_KEYSERVICE_NAME_KEYLengthDelimitedField<Endpoint>sizeInBytes(java.lang.String)write(zipkin2.internal.WriteBuffer,java.lang.String)LengthDelimitedField<String>(int)sizeInBytes(byte[])write(zipkin2.internal.WriteBuffer,byte[])LengthDelimitedField<byte[]>(int)endPosnextKeyreadLengthPrefixAndValue(zipkin2.internal.ReadBuffer,zipkin2.Span.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3ZipkinFields$SpanBuilderField.classProto3ZipkinFields$SpanBuilderFieldSpanBuilderFieldSpanBuilderField(int)LengthDelimitedField<T>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3ZipkinFields$AnnotationField.classProto3ZipkinFields$AnnotationFieldwriteValue(zipkin2.internal.WriteBuffer,zipkin2.Annotation)sizeOfValue(zipkin2.Annotation)AnnotationFieldAnnotationField(int)VALUETIMESTAMPVALUE_KEYTIMESTAMP_KEYSpanBuilderField<Annotation>LengthDelimitedField<Annotation>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3ZipkinFields$TagField.classProto3ZipkinFields$TagFieldwriteValue(zipkin2.internal.WriteBuffer,java.util.Map.Entry)sizeOfValue(java.util.Map.Entry)TagFieldTagField(int)KEYKEY_KEYSpanBuilderField<Entry<String,String>>LengthDelimitedField<Entry<String,String>>setValue(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Proto3ZipkinFields$SpanField.classProto3ZipkinFields$SpanFieldtoBytetoByte(zipkin2.Span.Kind)SpanFieldSpanField()SHAREDDEBUGTAGANNOTATIONREMOTE_ENDPOINTLOCAL_ENDPOINTDURATIONNAMEKINDIDPARENT_IDTRACE_IDSHARED_KEYDEBUG_KEYTAG_KEYANNOTATION_KEYREMOTE_ENDPOINT_KEYLOCAL_ENDPOINT_KEYDURATION_KEYNAME_KEYKIND_KEYID_KEYPARENT_ID_KEYTRACE_ID_KEYannotationCounttagCountsizeInBytes(zipkin2.Endpoint)write(zipkin2.internal.WriteBuffer,zipkin2.Endpoint)LengthDelimitedField<Endpoint>(int)sizeInBytes(zipkin2.Annotation)write(zipkin2.internal.WriteBuffer,zipkin2.Annotation)LengthDelimitedField<Annotation>(int)sizeInBytes(java.util.Map.Entry)write(zipkin2.internal.WriteBuffer,java.util.Map.Entry)LengthDelimitedField<Entry<String,String>>(int)annotationLengthKind[]nextWireTypenextFieldNumber"Skipping field: byte=%s, fieldNumber=%s, wireType=%s"Skipping field: byte=%s, fieldNumber=%s, wireType=%sKeys are used in this class because while verbose, it allows us to use switch statementsThis is the only field in the ListOfSpans type now, we are in the endpoint fieldsContributes to a builder as opposed to reading values directly. Avoids allocation. now, we are in the annotation fields map<string,string> in proto is a special field with key, value now, we are in the tag fields empty tags allowed avoid allocating an iterator when empty in java, there's no zero index for unknown toss the key more convenient to check up-front vs partially read now, we are in the span fieldsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ReadBuffer.javaReadBuffercheckReadArgumentscheckReadArguments(byte[],int,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ReadBuffer.classrequirerequire(int)readVarint64readVarint64()readVarint32readVarint32()readBytesAsHexreadBytesAsHex(int)readLongLereadLongLe()readLongreadLong()readIntreadInt()readShortreadShort()pos()doReadUtf8doReadUtf8(int)tryReadAsciitryReadAscii(char[],int)readUtf8readUtf8(int)readBytesreadBytes(int)readBytereadByte()readByteUnsafereadByteUnsafe()offsetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/ReadBuffer$BigEndianByteBuffer.classReadBuffer$BigEndianByteBufferBigEndianByteBufferBigEndianByteBuffer(java.nio.ByteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/ReadBuffer$LittleEndianByteBuffer.classReadBuffer$LittleEndianByteBufferLittleEndianByteBufferLittleEndianByteBuffer(java.nio.ByteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/ReadBuffer$Buff.classReadBuffer$BuffBuffBuff(java.nio.ByteBuffer)copydestinationdsttoReadmaxCountskippedC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/ReadBuffer$Array.classReadBuffer$ArrayArrayArray(byte[],int,int)arrayOffset0xffLtoSkipreadlimithexLength"hex field greater than 32 chars long: "hex field greater than 32 chars long: 0x7f127210xf0240"Greater than 32-bit varint at position "Greater than 32-bit varint at position 28"Greater than 64-bit varint at position "Greater than 64-bit varint at position byteCount"Truncated: length "Truncated: length " > bytes available " > bytes available Read operations do bounds checks, as typically more errors occur reading than writing.Do not use the buffer passed here after, as it may be manipulated directly. visible for testing Not 7-bit ASCII characterCode is optimized for little endian as proto is the encouraged format.only use when you've already ensured the length you need is available ex error tag with no value Speculatively assume all 7-bit ASCII characters.. common in normal tags and names All our hex fields are at most 32 characters.the value read. Use {@link WriteBuffer#varintSizeInBytes(long)} to tell how many bytes.if more than 64 bits were encoded included in the main api as this is used commonly, for example reading proto tags negative number implies MSB setC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/RecyclableBuffers.javaRecyclableBuffersThreadLocal<char[]>C:/modules/java.base/java/lang/ThreadLocal.classThreadLocalSHORT_STRING_BUFFERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/RecyclableBuffers.classRecyclableBuffers()ThreadLocal<char[]>()childValuechildValue(java.lang.Object)childValue(char[])createInheritedMapcreateInheritedMap(java.lang.ThreadLocal.ThreadLocalMap)createMapcreateMap(java.lang.Thread,java.lang.Object)createMap(java.lang.Thread,char[])getMapgetMap(java.lang.Thread)set(char[])isPresentisPresent()ThreadLocal()Supplier<>C:/modules/java.base/java/util/function/Supplier.classSupplierThreadLocal<>SThreadLocal<S>withInitialwithInitial(java.util.function.Supplier)? extends SSupplier<? extends S>initialValueinitialValue()256shortStringBufferMaximum character length constraint of most names, IP literals and IDs.Returns a {@link ThreadLocal} reused {@code char[]} for use when decoding bytes into hex, IPliterals, or {@link #SHORT_STRING_LENGTH short strings}. The buffer must never be leakedoutside the method. Most will {@link String#String(char[], int, int) copy it into a string}.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/SpanNode.javaSpanNodecreateKeycreateKey(java.lang.String,boolean,zipkin2.Endpoint)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/SpanNode.classaddChildaddChild(zipkin2.internal.SpanNode)SpanNode(zipkin2.Span)childrenComparator<SpanNode>NODE_COMPARATORC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/SpanNode$1.classSpanNode$1ToDoubleFunction<>Comparator<T>comparingDoublecomparingDouble(java.util.function.ToDoubleFunction)ToDoubleFunction<? super T>ToLongFunction<>comparingLongcomparingLong(java.util.function.ToLongFunction)ToLongFunction<? super T>ToIntFunction<>comparingIntcomparingInt(java.util.function.ToIntFunction)ToIntFunction<? super T>Comparable<? super U>comparingcomparing(java.util.function.Function)Function<? super T,? extends U>comparing(java.util.function.Function,java.util.Comparator)Comparator<? super U>nullsLastnullsLast(java.util.Comparator)nullsFirstnullsFirst(java.util.Comparator)naturalOrdernaturalOrder()reverseOrderreverseOrder()thenComparingDoublethenComparingDouble(java.util.function.ToDoubleFunction)ToDoubleFunction<? super SpanNode>thenComparingLongthenComparingLong(java.util.function.ToLongFunction)ToLongFunction<? super SpanNode>thenComparingIntthenComparingInt(java.util.function.ToIntFunction)ToIntFunction<? super SpanNode>thenComparingthenComparing(java.util.function.Function)Function<? super SpanNode,? extends U>thenComparing(java.util.function.Function,java.util.Comparator)thenComparing(java.util.Comparator)reversedreversed()compare(zipkin2.internal.SpanNode,zipkin2.internal.SpanNode)xyBreadthFirstIteratorBreadthFirstIterator(zipkin2.internal.SpanNode)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/SpanNode$BreadthFirstIterator.classSpanNode$BreadthFirstIteratorArrayDeque<SpanNode>C:/modules/java.base/java/util/ArrayDeque.classArrayDequeAbstractCollection<SpanNode>Deque<SpanNode>C:/modules/java.base/java/util/Deque.classDequeQueue<SpanNode>queueArrayDeque<SpanNode>()AbstractCollection<SpanNode>()offer(zipkin2.internal.SpanNode)descendingIteratordescendingIterator()poppop()pushpush(java.lang.Object)push(zipkin2.internal.SpanNode)removeLastOccurrenceremoveLastOccurrence(java.lang.Object)removeFirstOccurrenceremoveFirstOccurrence(java.lang.Object)peekLastpeekLast()peekFirstpeekFirst()getLastgetLast()getFirstgetFirst()pollLastpollLast()pollFirstpollFirst()removeLastremoveLast()removeFirstremoveFirst()offerLastofferLast(java.lang.Object)offerLast(zipkin2.internal.SpanNode)offerFirstofferFirst(java.lang.Object)offerFirst(zipkin2.internal.SpanNode)addLastaddLast(java.lang.Object)addLast(zipkin2.internal.SpanNode)addFirstaddFirst(java.lang.Object)addFirst(zipkin2.internal.SpanNode)ArrayDeque<>Deque<>Queue<>deletedelete(int)nonNullElementAtnonNullElementAt(java.lang.Object[],int)subsub(int,int,int)incinc(int,int,int)decdec(int,int)inc(int,int)ArrayDeque(java.util.Collection)ArrayDeque<SpanNode>(java.util.Collection)ArrayDeque(int)ArrayDeque<SpanNode>(int)ArrayDeque()root"remove""circular dependency on "circular dependency on ArrayList<SpanNode>AbstractList<SpanNode>ArrayList<SpanNode>()AbstractList<SpanNode>()ArrayList<SpanNode>(java.util.Collection)ArrayList<SpanNode>(int)processprocess(zipkin2.Span)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/SpanNode$Builder.classSpanNode$Builderindex(zipkin2.Span)sortTreeByTimestampsortTreeByTimestamp(zipkin2.internal.SpanNode)Map<Object,Object>spanToParentMap<Object,SpanNode>keyToNoderootSpanBuilder(java.util.logging.Logger)LinkedHashMap<Object,SpanNode>HashMap<Object,SpanNode>AbstractMap<Object,SpanNode>LinkedHashMap<Object,SpanNode>()BiFunction<? super SpanNode,? super SpanNode,? extends SpanNode>merge(java.lang.Object,zipkin2.internal.SpanNode,java.util.function.BiFunction)? super ObjectBiFunction<? super Object,? super SpanNode,? extends SpanNode>Function<? super Object,? extends SpanNode>replace(java.lang.Object,zipkin2.internal.SpanNode)replace(java.lang.Object,zipkin2.internal.SpanNode,zipkin2.internal.SpanNode)putIfAbsent(java.lang.Object,zipkin2.internal.SpanNode)BiConsumer<? super Object,? super SpanNode>getOrDefault(java.lang.Object,zipkin2.internal.SpanNode)Entry<Object,SpanNode>Set<Entry<Object,SpanNode>>Collection<Entry<Object,SpanNode>>Iterable<Entry<Object,SpanNode>>Set<Object>Map<? extends Object,? extends SpanNode>put(java.lang.Object,zipkin2.internal.SpanNode)AbstractMap<Object,SpanNode>()Node<Object,SpanNode>TreeNode<Object,SpanNode>newTreeNode(int,java.lang.Object,zipkin2.internal.SpanNode,java.util.HashMap.Node)newNode(int,java.lang.Object,zipkin2.internal.SpanNode,java.util.HashMap.Node)Node<Object,SpanNode>[]putVal(int,java.lang.Object,zipkin2.internal.SpanNode,boolean,boolean)HashMap<Object,SpanNode>(java.util.Map)HashMap<Object,SpanNode>()HashMap<Object,SpanNode>(int)HashMap<Object,SpanNode>(int,float)LinkedHashMap<Object,SpanNode>(int,float,boolean)LinkedHashMap<Object,SpanNode>(java.util.Map)LinkedHashMap<Object,SpanNode>(int)LinkedHashMap<Object,SpanNode>(int,float)LinkedHashMap<Object,Object>HashMap<Object,Object>AbstractMap<Object,Object>LinkedHashMap<Object,Object>()BiFunction<? super Object,? super Object,? extends Object>Function<? super Object,? extends Object>BiConsumer<? super Object,? super Object>Entry<Object,Object>Set<Entry<Object,Object>>Collection<Entry<Object,Object>>Iterable<Entry<Object,Object>>Map<? extends Object,? extends Object>AbstractMap<Object,Object>()Node<Object,Object>TreeNode<Object,Object>Node<Object,Object>[]HashMap<Object,Object>(java.util.Map)HashMap<Object,Object>()HashMap<Object,Object>(int)HashMap<Object,Object>(int,float)LinkedHashMap<Object,Object>(int,float,boolean)LinkedHashMap<Object,Object>(java.util.Map)LinkedHashMap<Object,Object>(int)LinkedHashMap<Object,Object>(int,float)cleaned"spans were empty"spans were empty"building trace tree: traceId="building trace tree: traceId="substituting dummy node for missing root span: traceId="substituting dummy node for missing root span: traceId=idKeyparentKeynoEndpointKeynode"attributing span missing parent to root: traceId=%s, rootSpanId=%s, spanId=%s"attributing span missing parent to root: traceId=%s, rootSpanId=%s, spanId=%sequalequal(java.lang.Object,java.lang.Object)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/SpanNode$SharedKey.classSpanNode$SharedKeySharedKeySharedKey(java.lang.String,zipkin2.Endpoint)"SharedKey{id="SharedKey{id=", endpoint=", endpoint=childrenSpans"SpanNode{parent="SpanNode{parent=", span=", span=", children=", children=Convenience type representing a trace tree. Multiple Zipkin features require a trace tree. Forexample, looking at network boundaries to correct clock skew and aggregating requests paths implyvisiting the tree. Long.compareTo is JRE 7+Set via {@link #addChild(SpanNode)}Null when a synthetic root nodemutable to avoid allocating lists for childless nodesReturns the parent, or null if rootReturns the span, or null if a synthetic root nodeReturns the children of this node.Traverses the tree, breadth-first. since the input data could be headless, we first push onto the queue the root-most spans synthetic rootAdds the child IFF it isn't already a child.Builds a trace tree by merging and processing the input or returns an empty tree.<p>While the input can be incomplete or redundant, they must all be a part of the same trace(e.g. all share the same {@link Span#traceId()}). In order to make a tree, we need clean data. This will merge any duplicates so that we don't have redundant leaves on the tree. Next, index all the spans so that we can understand any relationships. Now that we've index references to all spans, we can revise any parent-child relationships. Notably, by now, we can tell which is the root-most. If we haven't found any root span, we can still make a tree using a synthetic node. At this point, we have the most reliable parent-child relationships and can allocate spans corresponding the the best place in the trace tree. Handle headless by attaching spans missing parents to rootSorts children at the same level by {@link Span#timestampAsLong()} ascendingWe index spans by (id, shared, localEndpoint) before processing them. This latter fields(shared, endpoint) are important because in zipkin (specifically B3), a server can share(re-use) the same ID as its client. This impacts processing quite a bit when multiple serversshare one span ID.<p>In a Zipkin trace, a parent (client) and child (server) can share the same ID if in anRPC. If two different servers respond to the same client, the only way for us to tell whichis which is by endpoint. Our goal is to retain full paths across multiple endpoints. Eventhough instrumentation should be configured in such a way that a client never sends the samespan ID to multiple servers, it can happen. Accordingly, we index defensively including anyendpoint data that might be available. we need to classify a shared span by its endpoint in case multiple servers respond to the same ID sent by the client. the parent of a server span is a client, which is not ambiguous for a given span ID.Processing is taking a span and placing it at the most appropriate place in the trace tree.For example, if this is a {@link Span.Kind#SERVER} span, it would be a different node, and achild of its {@link Span.Kind#CLIENT} even if they share the same span ID.<p>Processing is defensive of typical problems in span reporting, such as depth-first. Forexample, depth-first reporting implies you can see spans missing their parent. Hence, theresult of processing all spans can be a virtual root node. Shared is a server span. It will very likely be on a different endpoint than the client. Clients are not ambiguous by ID, so we don't need to qualify by endpoint. We are not a root span, and not a shared server span. Proceed in most specific to least. We could be the child of a shared server span (ex a local (intermediate) span on the same endpoint). This is the most specific case, so we try this first. If there's no shared parent, fall back to normal case which is unqualified beyond ID. we are root or don't know our parent special-case root, and attribute missing parents to it. In other words, assume that the first root is the "real" root. In the case of shared server span, we need to address it both ways, in case intermediate spans are lacking endpoint information.A span in the tree is not always unique on ID. Sharing is allowed once per ID (Ex: in RPC).However, it is possible in a retry scenario for accidental duplicate ID sharing to occurC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftCodec.javaThriftCodecTYPE_BOOLTYPE_BYTETYPE_DOUBLETYPE_I16TYPE_I32TYPE_MAPTYPE_SETTYPE_STRUCTwriteLongwriteLong(zipkin2.internal.WriteBuffer,long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftCodec.classwriteIntwriteInt(zipkin2.internal.WriteBuffer,int)writeLengthPrefixedwriteLengthPrefixed(zipkin2.internal.WriteBuffer,java.lang.String)writeListBeginwriteListBegin(zipkin2.internal.WriteBuffer,int)skip(zipkin2.internal.ReadBuffer,byte,int)skip(zipkin2.internal.ReadBuffer,byte)writeList(zipkin2.internal.WriteBuffer.Writer,java.util.List,zipkin2.internal.WriteBuffer)readListLengthreadListLength(zipkin2.internal.ReadBuffer)listSizeInBytes(zipkin2.internal.WriteBuffer.Writer,java.util.List)MAX_SKIP_DEPTH2147483647v1SpanlistLengthconverter"%s reading %s from TBinary"%s reading %s from TBinary"EOF"EOFmaxDepth"Maximum skip depth exceeded"Maximum skip depth exceededkeyTypevalueTypeelemType break vs recursing infinitely when skipping data we ignore the type types that don't need explicit skippingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftEndpointCodec.javaThriftEndpointCodecwrite(zipkin2.Endpoint,zipkin2.internal.WriteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftEndpointCodec.classINT_ZEROThriftEndpointCodec()0xFFFF allocation is ok here as Endpoint.ipv4Bytes would anyway IPV4 PORT write short!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftField.javaThriftFieldisEqualToisEqualTo(zipkin2.internal.ThriftField)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/ThriftField.classThriftField(byte,int) taken from org.apache.thrift.protocol.TType Write ID as a short!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Trace.javaTraceTrace()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Trace.classnullSafeCompareTonullSafeCompareTo(java.lang.Comparable,java.lang.Comparable,boolean)compareEndpointcompareEndpoint(zipkin2.Endpoint,zipkin2.Endpoint)compareSharedcompareShared(zipkin2.Span,zipkin2.Span)Comparator<Span>CLEANUP_COMPARATORC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/Trace$1.classTrace$1ToDoubleFunction<? super Span>ToLongFunction<? super Span>ToIntFunction<? super Span>Function<? super Span,? extends U>compare(zipkin2.Span,zipkin2.Span)bySpanIdbySharedlastnextTraceIdspanSharednextIdnextSharedleftSharedrightSharedleftClientrightClientbyServicebyIpV4nullFirstcompareTo(java.lang.Comparable)tryMergetryMerge(zipkin2.Endpoint)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/Trace$EndpointTracker.classTrace$EndpointTrackerEndpointTrackerEndpointTracker()Spans can be sent in multiple parts. Also client and server spans can share the same ID. Thismerges both scenarios. Let's cleanup any spans and pick the longest ID Now start any fixes or mergingString previousId = last.id(); Choose the longest trace ID This cautiously merges with the next span, if we think it was sent in multiple pieces. remove the merged element Zipkin and B3 originally used the same span ID between client and server. Some instrumentation are inconsistent about adding the shared flag on the server side. Since we have the entire trace, and it is ordered client-first, we can correct a missing shared flag. Backfill missing shared flag as some instrumentation doesn't add it handle a shared RPC server span that wasn't propagated its parent span ID false or null first (client first) If either are shared put it last both are shared, so skip out neither are shared, put the client spans first neither are client spansPut spans with null endpoints first, so that their data can be attached to the first span withthe same ID and endpoint. It is possible that a server can get the same request on a differentport. Not addressing this. nulls firstSometimes endpoints can be sent in pieces. This tracks the whether we should merge withsomething, or if it has a different identity.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/TracesAdapter.javaTracesAdapterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/TracesAdapter.classspanStoreCall<List<Span>>Call<List<List<Span>>>traceIdsList<Call<List<Span>>>Collection<Call<List<Span>>>Iterable<Call<List<Span>>>ArrayList<Call<List<Span>>>AbstractList<Call<List<Span>>>AbstractCollection<Call<List<Span>>>ArrayList<Call<List<Span>>>()Spliterator<Call<List<Span>>>? super Call<List<Span>>Consumer<? super Call<List<Span>>>Iterator<Call<List<Span>>>Stream<Call<List<Span>>>BaseStream<Call<List<Span>>,Stream<Call<List<Span>>>>Predicate<? super Call<List<Span>>>? extends Call<List<Span>>Collection<? extends Call<List<Span>>>Iterable<? extends Call<List<Span>>>AbstractCollection<Call<List<Span>>>()ListIterator<Call<List<Span>>>Comparator<? super Call<List<Span>>>UnaryOperator<Call<List<Span>>>Function<Call<List<Span>>,Call<List<Span>>>AbstractList<Call<List<Span>>>()ArrayList<Call<List<Span>>>(java.util.Collection)ArrayList<Call<List<Span>>>(int)"traceIds == null"traceIds == nullMapper<List<Span>,R>Callback<List<Span>>ErrorHandler<List<Span>>FlatMapper<List<Span>,R>Call<List<Span>>()ToListOfTracesToListOfTraces()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/TracesAdapter$ToListOfTraces.classTracesAdapter$ToListOfTracesMapper<List<Span>,List<List<Span>>>"ToListOfTraces()"ScatterGatherScatterGather(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/TracesAdapter$ScatterGather.classTracesAdapter$ScatterGatherAggregateCall<List<Span>,List<List<Span>>>Base<List<List<Span>>>"TracesAdapter{"TracesAdapter{C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1JsonSpanReader.javaV1JsonSpanReaderENDPOINT_READERreadBinaryAnnotationreadBinaryAnnotation(zipkin2.internal.JsonCodec.JsonReader)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1JsonSpanReader.classreadAnnotationreadAnnotation(zipkin2.internal.JsonCodec.JsonReader)JsonReaderAdapter<V1Span>"traceId""id""name""parentId""timestamp""duration""annotations""binaryAnnotations"binaryAnnotations"debug""value""endpoint"JsonReaderAdapter<Endpoint>"Incomplete annotation at "Incomplete annotation at booleanValuestringValue"key""No key at "No key at "sa"sa"ca"ca"ma"ma read any optional fieldsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1JsonSpanWriter.javaV1JsonSpanWriterv1SpanWriterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1JsonSpanWriter.classThis type isn't thread-safe: it re-uses state to avoid re-allocations in conversion loops.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1SpanWriter.javaV1SpanWriterendpointSizeInByteswriteAnnotationwriteBinaryAnnotationwriteBinaryAnnotation(java.lang.String,java.lang.String,byte[],zipkin2.internal.WriteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1SpanWriter.classbinaryAnnotationSizeInBytesbinaryAnnotationSizeInBytes(java.lang.String,java.lang.String,int)legacyEndpointByteslegacyEndpointBytes(zipkin2.Endpoint)Writer<V1Span>29List<V1Annotation>Collection<V1Annotation>Iterable<V1Annotation>Spliterator<V1Annotation>? super V1AnnotationConsumer<? super V1Annotation>Iterator<V1Annotation>Stream<V1Annotation>BaseStream<V1Annotation,Stream<V1Annotation>>Predicate<? super V1Annotation>? extends V1AnnotationCollection<? extends V1Annotation>Iterable<? extends V1Annotation>add(zipkin2.v1.V1Annotation)ListIterator<V1Annotation>add(int,zipkin2.v1.V1Annotation)set(int,zipkin2.v1.V1Annotation)Comparator<? super V1Annotation>UnaryOperator<V1Annotation>Function<V1Annotation,V1Annotation>lastEndpointlastEndpointSizebinaryAnnotationCountList<V1BinaryAnnotation>Collection<V1BinaryAnnotation>Iterable<V1BinaryAnnotation>Spliterator<V1BinaryAnnotation>? super V1BinaryAnnotationConsumer<? super V1BinaryAnnotation>Iterator<V1BinaryAnnotation>Stream<V1BinaryAnnotation>BaseStream<V1BinaryAnnotation,Stream<V1BinaryAnnotation>>Predicate<? super V1BinaryAnnotation>? extends V1BinaryAnnotationCollection<? extends V1BinaryAnnotation>Iterable<? extends V1BinaryAnnotation>add(zipkin2.v1.V1BinaryAnnotation)ListIterator<V1BinaryAnnotation>add(int,zipkin2.v1.V1BinaryAnnotation)set(int,zipkin2.v1.V1BinaryAnnotation)Comparator<? super V1BinaryAnnotation>UnaryOperator<V1BinaryAnnotation>Function<V1BinaryAnnotation,V1BinaryAnnotation>3017endpointSize23lastEndpointBytes"{\"traceId\":\""{"traceId":"",\"parentId\":\"","parentId":"",\"id\":\"","id":"",\"name\":\"","name":"",\"timestamp\":","timestamp":",\"duration\":","duration":",\"annotations\":[","annotations":[endpointBytes",\"binaryAnnotations\":[","binaryAnnotations":["{\"key\":\""{"key":""\",\"value\":true,\"endpoint\":"","value":true,"endpoint":",\"debug\":true","debug":true"\",\"value\":\""","value":"",\"endpoint\":","endpoint":This type is only used to backport the v1 read api as it returns v1 json. {"traceId":"xxxxxxxxxxxxxxxx" ,"parentId":"0123456789abcdef" ,"id":"0123456789abcdef" ,"name":"" ,"timestamp": ,"duration": ,"annotations":[] ,"binaryAnnotations":[] commas {"key":"NN","value":true,"endpoint":} ,"debug":true } {"key":"","value":""} ,"endpoint":C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1ThriftSpanReader.javaV1ThriftSpanReaderANNOTATIONSBINARY_ANNOTATIONSTRACE_ID_HIGHV1ThriftSpanReader()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1ThriftSpanReader.classONEread(zipkin2.internal.ReadBuffer,zipkin2.v1.V1Span.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/V1ThriftSpanReader$AnnotationReader.classV1ThriftSpanReader$AnnotationReaderENDPOINTAnnotationReaderAnnotationReader()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/V1ThriftSpanReader$BinaryAnnotationReader.classV1ThriftSpanReader$BinaryAnnotationReaderTYPEBinaryAnnotationReaderBinaryAnnotationReader()isBooleanisStringC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1ThriftSpanWriter.javaV1ThriftSpanWriterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V1ThriftSpanWriter.classwriteBinaryAnnotationswriteBinaryAnnotations(zipkin2.internal.WriteBuffer,zipkin2.v1.V1Span,byte[])writeAnnotationswriteAnnotations(zipkin2.internal.WriteBuffer,zipkin2.v1.V1Span,byte[])valueSizekeySizeremoteEndpointSizeepwrite(long,java.lang.String,byte[],zipkin2.internal.WriteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/V1ThriftSpanWriter$ThriftAnnotationWriter.classV1ThriftSpanWriter$ThriftAnnotationWritersizeInBytes(int,int)ThriftAnnotationWriterThriftAnnotationWriter()valueSizeInByteswrite(java.lang.String,java.lang.String,byte[],zipkin2.internal.WriteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/internal/V1ThriftSpanWriter$ThriftBinaryAnnotationWriter.classV1ThriftSpanWriter$ThriftBinaryAnnotationWritersizeInBytes(int,int,int)ThriftBinaryAnnotationWriterThriftBinaryAnnotationWriter() TRACE_ID TRACE_ID_HIGH PARENT_ID ID NAME we write list thriftFields even when empty to match finagle serialization ANNOTATION field + list overhead BINARY_ANNOTATION field + list overhead DEBUG TIMESTAMP DURATION TYPEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V2SpanReader.javaV2SpanReaderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V2SpanReader.classJsonReaderAdapter<Span>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V2SpanReader$1.classV2SpanReader$1readField"serviceName""ipv4""ipv6""port""Endpoint""kind""localEndpoint""remoteEndpoint""tags""No value at "No value at "shared"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V2SpanWriter.javaV2SpanWriterwriteAnnotation(long,java.lang.String,byte[],zipkin2.internal.WriteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/V2SpanWriter.classannotationSizeInBytesannotationSizeInBytes(long,java.lang.String,int)writeEndpointwriteEndpoint(zipkin2.Endpoint,zipkin2.internal.WriteBuffer,boolean)endpointSizeInBytes(zipkin2.Endpoint,boolean)18",\"kind\":\"","kind":"",\"localEndpoint\":","localEndpoint":",\"remoteEndpoint\":","remoteEndpoint":",\"annotations\":","annotations":Iterator<Entry<String,String>>Spliterator<Entry<String,String>>? super Entry<String,String>Consumer<? super Entry<String,String>>Stream<Entry<String,String>>BaseStream<Entry<String,String>,Stream<Entry<String,String>>>Predicate<? super Entry<String,String>>? extends Entry<String,String>Collection<? extends Entry<String,String>>Iterable<? extends Entry<String,String>>add(java.util.Map.Entry)Set<E>",\"tags\":{","tags":{"\":\""",\"shared\":true","shared":truewriteEmptyServiceNamewroteField"\"serviceName\":\"""serviceName":""\"ipv4\":\"""ipv4":""\"ipv6\":\"""ipv6":""\"port\":""port":25"{\"timestamp\":"{"timestamp":",\"value\":\"","value":" {"traceId":"" ,"kind":"" ,"localEndpoint": ,"remoteEndpoint": ,"tags":{} "":"" ,"shared":true { "serviceName":"" , "ipv4":"" "ipv6":"" "port": {"timestamp":,"value":""}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/WriteBuffer.javaWriteBufferwriteLongLewriteLongLe(long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/internal/WriteBuffer.classwriteVarintwriteVarint(long)writeVarint(int)writeHexByte(byte[],int,byte)writeBackwards(long)WriteBuffer(byte[],int)lastPosstring0x80020480xc01920x3f630xd800552960xdfff573430xe0224codePoint'?'"-9223372036854775808"-9223372036854775808'-'-0x7fL0xdbff563190xdc0056320negativewidth100000000L10000000010000L10000100L10L1000L10001000000L1000000100000L10000010000000L100000001000000000000L100000000000010000000000L100000000001000000000L1000000000100000000000L1000000000001000000000000000L100000000000000010000000000000L10000000000000100000000000000L100000000000000100000000000000000L10000000000000000010000000000000000L100000000000000001000000000000000000L1000000000000000000190xffffffff-10xffffffffffffffffL354249Writes are unsafe as they do no bounds checks. This means you should take care to allocate orwrap an array at least as big as you need prior to writing. As it is possible to calculate sizeprior to writing, overrunning a buffer is a programming error.This transcodes a UTF-16 Java String to UTF-8 bytes.<p>This looks most similar to {@code io.netty.buffer.ByteBufUtil.writeUtf8(AbstractByteBuf,int, CharSequence, int)} v4.1, modified including features to address ASCII runs of text. 7-bit ASCII character This could be an ASCII run, or possibly entirely ASCII another 7-bit ASCII character 11-bit character 16-bit character Possibly a 21-bit character Malformed or not UTF-8 Truncated or not UTF-8 Write the 21-bit character using 4 bytes See http://www.unicode.org/versions/Unicode7.0.0/ch03.pdf#G2630 Adapted from okio.Buffer.writeDecimalLong needs to be positive so we can use this for an array index com.squareup.wire.ProtoWriter.writeVarint v2.3.0This returns the bytes needed to transcode a UTF-16 Java String to UTF-8 bytes.<p>Originally based onhttp://stackoverflow.com/questions/8511490/calculating-length-in-utf-8-of-java-string-without-actually-encoding-it<p>Later, ASCII run and malformed surrogate logic borrowed from okio.Utf8 TODO: benchmark vs https://github.com/protocolbuffers/protobuf/blob/master/java/core/src/main/java/com/google/protobuf/Utf8.java#L240 there seem to be less branches for for strings without surrogates A malformed surrogate, which yields '?'. A 21-bit characterBinary search for character width which favors matching lower numbers.<p>Adapted from okio.Buffer making this positive allows us to compare using less-than conditionally add room for negative signA base 128 varint encodes 7 bits at a time, this checks how many bytes are needed to representthe value.<p>See https://developers.google.com/protocol-buffers/docs/encoding#varints<p>This logic is the same as {@code com.squareup.wire.ProtoWriter.varint32Size} v2.3.0 whichbenchmarked faster than loop variants of the frequently copy/pasted VarInt.varIntSizeLike {@link #varintSizeInBytes(int)}, except for uint64. TODO: benchmark vs https://github.com/protocolbuffers/protobuf/blob/master/java/core/src/main/java/com/google/protobuf/CodedOutputStream.java#L770 Since trace IDs are random, I guess they cover the entire spectrum of varint sizes and probably would especially benefit from this.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/AutocompleteTags.javaAutocompleteTagsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storagestoragezipkin2.storageList<String>Call<List<String>>Provides autocomplete functionality by providing values for a given tag key, usually derived from{@link SpanConsumer}.Retrieves the list of tag getKeys whose values may be returned by {@link #getValues(String)}.StorageComponent.Builder#autocompleteKeys(List)Retrieves the list of values, if the input is configured for autocompletion. If a key is notconfigured, or there are no values available, an empty result will be returned.if the input is empty.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/ForwardingStorageComponent.javaForwardingStorageComponentWe provide a forwarding variant of the storage component for use cases such as trace decoration,or throttling.<p>Extending this is better than extending {@link StorageComponent} directly because it reducesrisk of accidentally masking new methods. For example, if you extended storage component andlater a new feature for cache control was added, that feature would be blocked until the wrapperwas re-compiled. Such would be worse in most cases than not having decoration on new methods.@since2.16Constructor for use by subclasses.The delegate is a method as opposed to a field, to allow for flexibility. For example, thisallows you to choose to make a final or lazy field, or no field at all.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/GroupByTraceId.javaGroupByTraceIdlowerTraceIdGroupByTraceId(boolean)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/GroupByTraceId.classstrictTraceId"MixedMutabilityReturnType"MixedMutabilityReturnTypeMap<String,List<Span>>groupedByTraceIdLinkedHashMap<String,List<Span>>HashMap<String,List<Span>>AbstractMap<String,List<Span>>LinkedHashMap<String,List<Span>>()BiFunction<? super List<Span>,? super List<Span>,? extends List<Span>>merge(java.lang.String,java.util.List,java.util.function.BiFunction)BiFunction<? super String,? super List<Span>,? extends List<Span>>Function<? super String,? extends List<Span>>replace(java.lang.String,java.util.List)replace(java.lang.String,java.util.List,java.util.List)putIfAbsent(java.lang.String,java.util.List)BiConsumer<? super String,? super List<Span>>getOrDefault(java.lang.Object,java.util.List)Entry<String,List<Span>>Set<Entry<String,List<Span>>>Collection<Entry<String,List<Span>>>Iterable<Entry<String,List<Span>>>Map<? extends String,? extends List<Span>>put(java.lang.String,java.util.List)AbstractMap<String,List<Span>>()Node<String,List<Span>>TreeNode<String,List<Span>>newTreeNode(int,java.lang.String,java.util.List,java.util.HashMap.Node)newNode(int,java.lang.String,java.util.List,java.util.HashMap.Node)Node<String,List<Span>>[]putVal(int,java.lang.String,java.util.List,boolean,boolean)HashMap<String,List<Span>>(java.util.Map)HashMap<String,List<Span>>()HashMap<String,List<Span>>(int)HashMap<String,List<Span>>(int,float)LinkedHashMap<String,List<Span>>(int,float,boolean)LinkedHashMap<String,List<Span>>(java.util.Map)LinkedHashMap<String,List<Span>>(int)LinkedHashMap<String,List<Span>>(int,float)"GroupByTraceId{strictTraceId="GroupByTraceId{strictTraceId=A mapper that groups unorganized input spans by trace ID. Useful when preparing a result for{@link SpanStore#getTraces(QueryRequest)}. Modifiable so that StrictTraceId can filter without allocating a new listC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage.javaInMemoryStoragelowTraceIdlowTraceId(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage.classCollection<TraceIdTimestamp>Iterable<TraceIdTimestamp>traceIdTimestampsByServiceNametraceIdTimestampsByServiceName(java.lang.String)spansByTraceIdspansByTraceId(java.lang.String)Comparator<TraceIdTimestamp>TIMESTAMP_DESCENDINGComparator<String>STRING_COMPARATORgetDependencyLinksgetDependencyLinks(java.util.Set)lowTraceIdsInRangelowTraceIdsInRange(java.util.Collection,long,long)traceIdsDescendingByTimestamptraceIdsDescendingByTimestamp(zipkin2.storage.QueryRequest)strictByTraceIdstrictByTraceId(java.util.List)getTracesgetTraces(zipkin2.storage.QueryRequest,boolean)synchronizeddeleteOldestTracedeleteOldestTrace()evictToRecoverSpansevictToRecoverSpans(int)doAcceptdoAccept(java.util.List)InMemoryStorage(zipkin2.storage.InMemoryStorage.Builder)acceptedSpanCountautocompleteKeysautocompleteKeysCallmaxSpanCountsearchEnabledSortedMultimap<String,String>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/InMemoryStorage$SortedMultimap.classInMemoryStorage$SortedMultimapC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storageautocompleteTagsserviceToRemoteServiceNamesserviceToSpanNamesserviceToTraceIdsSortedMultimap<String,TraceIdTimestamp>traceIdToTraceIdTimestampsSortedMultimap<TraceIdTimestamp,Span>spansByTraceIdTimestampC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$1.classInMemoryStorage$1get(zipkin2.storage.InMemoryStorage.TraceIdTimestamp)remove(zipkin2.storage.InMemoryStorage.TraceIdTimestamp)put(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,zipkin2.Span)Set<TraceIdTimestamp>valueContainervalueContainer()Comparator<K>SortedMultimapSortedMultimap(java.util.Comparator)SortedMultimap<TraceIdTimestamp,Span>(java.util.Comparator)SortedMap<K,Collection<V>>Map<K,Collection<V>>(java.util.Comparator)LinkedHashSet<Span>C:/modules/java.base/java/util/LinkedHashSet.classLinkedHashSetHashSet<Span>C:/modules/java.base/java/util/HashSet.classHashSetAbstractSet<Span>C:/modules/java.base/java/util/AbstractSet.classAbstractSetSet<Span>LinkedHashSet<Span>()AbstractSet()AbstractSet<Span>()HashSet(int,float,boolean)HashSet<Span>(int,float,boolean)HashSet(int)HashSet<Span>(int)HashSet(int,float)HashSet<Span>(int,float)HashSet(java.util.Collection)HashSet<Span>(java.util.Collection)HashSet()HashSet<Span>()LinkedHashSet(java.util.Collection)LinkedHashSet<Span>(java.util.Collection)LinkedHashSet()LinkedHashSet(int)LinkedHashSet<Span>(int)LinkedHashSet(int,float)LinkedHashSet<Span>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$2.classInMemoryStorage$2get(java.lang.String)remove(java.lang.String)put(java.lang.String,zipkin2.storage.InMemoryStorage.TraceIdTimestamp)SortedMultimap<String,TraceIdTimestamp>(java.util.Comparator)LinkedHashSet<TraceIdTimestamp>HashSet<TraceIdTimestamp>AbstractSet<TraceIdTimestamp>AbstractCollection<TraceIdTimestamp>LinkedHashSet<TraceIdTimestamp>()Spliterator<TraceIdTimestamp>? super TraceIdTimestampConsumer<? super TraceIdTimestamp>Iterator<TraceIdTimestamp>Stream<TraceIdTimestamp>BaseStream<TraceIdTimestamp,Stream<TraceIdTimestamp>>Predicate<? super TraceIdTimestamp>? extends TraceIdTimestampCollection<? extends TraceIdTimestamp>Iterable<? extends TraceIdTimestamp>add(zipkin2.storage.InMemoryStorage.TraceIdTimestamp)AbstractCollection<TraceIdTimestamp>()AbstractSet<TraceIdTimestamp>()HashSet<TraceIdTimestamp>(int,float,boolean)HashSet<TraceIdTimestamp>(int)HashSet<TraceIdTimestamp>(int,float)HashSet<TraceIdTimestamp>(java.util.Collection)HashSet<TraceIdTimestamp>()LinkedHashSet<TraceIdTimestamp>(java.util.Collection)LinkedHashSet<TraceIdTimestamp>(int)LinkedHashSet<TraceIdTimestamp>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$3.classInMemoryStorage$3SortedMultimap<String,String>(java.util.Comparator)LinkedHashSet<String>HashSet<String>AbstractSet<String>AbstractCollection<String>LinkedHashSet<String>()Consumer<? super String>Stream<String>BaseStream<String,Stream<String>>Predicate<? super String>add(java.lang.String)AbstractCollection<String>()AbstractSet<String>()HashSet<String>(int,float,boolean)HashSet<String>(int)HashSet<String>(int,float)HashSet<String>(java.util.Collection)HashSet<String>()LinkedHashSet<String>(java.util.Collection)LinkedHashSet<String>(int)LinkedHashSet<String>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$4.classInMemoryStorage$4C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$5.classInMemoryStorage$5C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$6.classInMemoryStorage$6ToDoubleFunction<? super String>ToLongFunction<? super String>ToIntFunction<? super String>Function<? super String,? extends U>compare(java.lang.String,java.lang.String)"String::compareTo"String::compareToC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage$7.classInMemoryStorage$7ToDoubleFunction<? super TraceIdTimestamp>ToLongFunction<? super TraceIdTimestamp>ToIntFunction<? super TraceIdTimestamp>Function<? super TraceIdTimestamp,? extends U>Comparator<? super TraceIdTimestamp>compare(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,zipkin2.storage.InMemoryStorage.TraceIdTimestamp)"TimestampDescending{}"TimestampDescending{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/InMemoryStorage$Builder.classInMemoryStorage$Builder500000"autocompleteKeys == null"autocompleteKeys == null"maxSpanCount <= 0"maxSpanCount <= 0deltaspansToRecovertraceIdTimeStampspanNameStoreSpansCallStoreSpansCall(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/InMemoryStorage$StoreSpansCall.classInMemoryStorage$StoreSpansCallCallback<Void>onSuccess(java.lang.Void)"StoreSpansCall{"StoreSpansCall{spansEvictedspansInOldestTraceSortedMap<TraceIdTimestamp,Collection<Span>>Map<TraceIdTimestamp,Collection<Span>>? super Collection<Span>? extends Collection<Span>BiFunction<? super Collection<Span>,? super Collection<Span>,? extends Collection<Span>>merge(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.Collection,java.util.function.BiFunction)BiFunction<? super TraceIdTimestamp,? super Collection<Span>,? extends Collection<Span>>compute(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.function.BiFunction)computeIfPresent(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.function.BiFunction)Function<? super TraceIdTimestamp,? extends Collection<Span>>computeIfAbsent(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.function.Function)replace(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.Collection)replace(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.Collection,java.util.Collection)putIfAbsent(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.Collection)BiConsumer<? super TraceIdTimestamp,? super Collection<Span>>getOrDefault(java.lang.Object,java.util.Collection)Entry<TraceIdTimestamp,Collection<Span>>Set<Entry<TraceIdTimestamp,Collection<Span>>>Collection<Entry<TraceIdTimestamp,Collection<Span>>>Iterable<Entry<TraceIdTimestamp,Collection<Span>>>Collection<Collection<Span>>Iterable<Collection<Span>>Map<? extends TraceIdTimestamp,? extends Collection<Span>>put(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,java.util.Collection)tailMap(zipkin2.storage.InMemoryStorage.TraceIdTimestamp)headMap(zipkin2.storage.InMemoryStorage.TraceIdTimestamp)subMap(zipkin2.storage.InMemoryStorage.TraceIdTimestamp,zipkin2.storage.InMemoryStorage.TraceIdTimestamp)traceIdTimeStampstraceIdTimeStampIterorphanedServicestrictTracesameTraceIdtraceIdTimestampsdescendingByTimestampbeginTstraceIdTimestampfilterednormalizedlower64BittraceArrayList<String>AbstractList<String>ArrayList<String>(java.util.Collection)ListIterator<String>add(int,java.lang.String)set(int,java.lang.String)UnaryOperator<String>Function<String,String>AbstractList<String>()ArrayList<String>()ArrayList<String>(int)serviceCall<List<DependencyLink>>"endTs <= 0"endTs <= 0"lookback <= 0"lookback <= 0linksBuilderCallback<List<String>>ErrorHandler<List<String>>FlatMapper<List<String>,R>Mapper<List<String>,R>Call<List<String>>()"key was empty"key was emptyremoveServiceIfTraceIdremoveServiceIfTraceId(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/InMemoryStorage$ServiceNameToTraceIds.classInMemoryStorage$ServiceNameToTraceIdsServiceNameToTraceIdsServiceNameToTraceIds()Entry<String,Collection<String>>Set<Entry<String,Collection<String>>>Collection<Entry<String,Collection<String>>>Iterable<Entry<String,Collection<String>>>SortedMap<String,Collection<String>>Map<String,Collection<String>>? super Collection<String>? extends Collection<String>BiFunction<? super Collection<String>,? super Collection<String>,? extends Collection<String>>merge(java.lang.String,java.util.Collection,java.util.function.BiFunction)BiFunction<? super String,? super Collection<String>,? extends Collection<String>>Function<? super String,? extends Collection<String>>replace(java.lang.String,java.util.Collection)replace(java.lang.String,java.util.Collection,java.util.Collection)putIfAbsent(java.lang.String,java.util.Collection)BiConsumer<? super String,? super Collection<String>>Collection<Collection<String>>Iterable<Collection<String>>Map<? extends String,? extends Collection<String>>put(java.lang.String,java.util.Collection)lowTraceIdssetValue(java.util.Collection)TreeMap<K,Collection<V>>AbstractMap<K,Collection<V>>NavigableMap<K,Collection<V>>TreeMap<K,Collection<V>>(java.util.Comparator)? super Collection<V>? extends Collection<V>BiFunction<? super Collection<V>,? super Collection<V>,? extends Collection<V>>merge(java.lang.Object,java.util.Collection,java.util.function.BiFunction)BiFunction<? super K,? super Collection<V>,? extends Collection<V>>Function<? super K,? extends Collection<V>>replace(java.lang.Object,java.util.Collection)replace(java.lang.Object,java.util.Collection,java.util.Collection)putIfAbsent(java.lang.Object,java.util.Collection)BiConsumer<? super K,? super Collection<V>>Entry<K,Collection<V>>Set<Entry<K,Collection<V>>>Collection<Entry<K,Collection<V>>>Iterable<Entry<K,Collection<V>>>Collection<Collection<V>>Iterable<Collection<V>>Map<? extends K,? extends Collection<V>>put(java.lang.Object,java.util.Collection)AbstractMap<K,Collection<V>>()addAllForTreeSet(java.util.SortedSet,java.util.Collection)readTreeSet(int,java.io.ObjectInputStream,java.util.Collection)SortedMap<K,? extends Collection<V>>Map<K,? extends Collection<V>>TreeMap<K,Collection<V>>(java.util.SortedMap)TreeMap<K,Collection<V>>(java.util.Map)TreeMap<K,Collection<V>>()Spliterator<V>Iterator<V>Stream<V>BaseStream<V,Stream<V>>Collection<? extends V>Iterable<? extends V>Set<V>List<TraceIdTimestamp>ArrayList<TraceIdTimestamp>AbstractList<TraceIdTimestamp>ArrayList<TraceIdTimestamp>()ListIterator<TraceIdTimestamp>add(int,zipkin2.storage.InMemoryStorage.TraceIdTimestamp)set(int,zipkin2.storage.InMemoryStorage.TraceIdTimestamp)UnaryOperator<TraceIdTimestamp>Function<TraceIdTimestamp,TraceIdTimestamp>AbstractList<TraceIdTimestamp>()ArrayList<TraceIdTimestamp>(java.util.Collection)ArrayList<TraceIdTimestamp>(int)TraceIdTimestampTraceIdTimestamp(java.lang.String,long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/InMemoryStorage$TraceIdTimestamp.classInMemoryStorage$TraceIdTimestamp"InMemoryStorage{}"InMemoryStorage{}Test storage component that keeps all spans in memory, accepting them on the calling thread.<p>Internally, spans are indexed on 64-bit trace ID<p>Here's an example of some traces in memory:spansByTraceIdTimeStamp:<aaaa,July 4> --> ( spanA(time:July 4, traceId:aaaa, service:foo, name:GET),spanB(time:July 4, traceId:aaaa, service:bar, name:GET) )<cccc,July 4> --> ( spanC(time:July 4, traceId:aaaa, service:foo, name:GET) )<bbbb,July 5> --> ( spanD(time:July 5, traceId:bbbb, service:biz, name:GET) )<bbbb,July 6> --> ( spanE(time:July 6, traceId:bbbb) service:foo, name:POST )traceIdToTraceIdTimeStamps:aaaa --> [ <aaaa,July 4> ]bbbb --> [ <bbbb,July 5>, <bbbb,July 6> ]cccc --> [ <cccc,July 4> ]serviceToTraceIds:foo --> [ <aaaa>, <cccc>, <bbbb> ]bar --> [ <aaaa> ]biz --> [ <bbbb> ]serviceToSpanNames:bar --> ( GET )biz --> ( GET )foo --> ( GET, POST )Eldest traces are removed to ensure spans in memory don't exceed this valuePrimary source of data is this map, which includes spans ordered descending by timestamp. Allother maps are derived from the span values here. This uses a list for the spans, so that it isvisible (via /api/v2/trace/{traceId}) when instrumentation report the same spans multipletimes.This supports span lookup by {@link Span#traceId() lower 64-bits of the trace ID}This is an index of {@link Span#traceId()} by {@link Endpoint#serviceName() service name}This is an index of {@link Span#name()} by {@link Endpoint#serviceName() service name}This is an index of {@link Span#remoteServiceName()} by {@link Endpoint#serviceName() servicename}Returns the count of spans evicted. re-run the query as now spans are strictly groupedUsed for testing. Returns all traces unconditionally.Used for testing. Returns all dependency links unconditionally. Our index is by lower-64 bit trace ID, so let's build trace IDs to fetch service names are always lowercase! We don't have a query parameter for strictTraceId when fetching dependency links, so we ignore traceIdHigh. Otherwise, a single trace can appear as two, doubling callCount. use negative as we are descendingReturns service names orphaned by removing the trace ID Not synchronized as every exposed method on the enclosing type isC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/QueryRequest.javaQueryRequestQueryRequest(java.lang.String,java.lang.String,java.lang.String,java.util.Map,java.lang.Long,java.lang.Long,long,long,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/QueryRequest.classlimitmaxDurationminDurationannotationQuery'='=" and " and C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/QueryRequest$Builder.classQueryRequest$BuilderBuilder(zipkin2.storage.QueryRequest)annidxkeyValue"=""annotationQuery == null"annotationQuery == null"all"all"limit <= 0"limit <= 0"minDuration <= 0"minDuration <= 0"maxDuration < minDuration"maxDuration < minDuration"maxDuration is only valid with minDuration"maxDuration is only valid with minDurationtestedDurationserviceNameToMatchremoteServiceNameToMatchspanNameToMatchannotationQueryRemaininglocalServiceName"QueryRequest{"QueryRequest{"endTs="endTs=", ", "lookback="lookback="serviceName="serviceName="remoteServiceName="remoteServiceName="spanName="spanName="annotationQuery="annotationQuery="minDuration="minDuration="maxDuration="maxDuration="limit="limit=Invoking this request retrieves traces matching the below filters.<p>Results should be filtered against {@link #endTs}, subject to {@link #limit} and {@link#lookback}. For example, if endTs is 10:20 today, limit is 10, and lookback is 7 days, tracesreturned should be those nearest to 10:20 today, not 10:20 a week ago.<p>Time units of {@link #endTs} and {@link #lookback} are milliseconds as opposed tomicroseconds, the grain of {@link Span#timestamp()}. Milliseconds is a more familiar andsupported granularity for query, index and windowing functions.When present, corresponds to the {@link Span#localServiceName() local service name} andconstrains all other parameters.ServiceAndSpanNames#getServiceNames()When present, only include traces with this {@link Span#remoteServiceName() remote servicename}.ServiceAndSpanNames#getRemoteServiceNames(String)When present, only include traces with this {@link Span#name()}ServiceAndSpanNames#getSpanNames(String)When an input value is the empty string, include traces whose {@link Span#annotations()}include a value in this set, or where {@link Span#tags()} include a key is in this set. Whennot, include traces whose {@link Span#tags()} an entry in this map.<p>Multiple entries are combined with AND, and AND against other conditions.Only return traces whose {@link Span#duration()} is greater than or equal to minDurationmicroseconds.Only return traces whose {@link Span#duration()} is less than or equal to maxDurationmicroseconds. Only valid with {@link #minDuration}.Only return traces where all {@link Span#timestamp()} are at or before this time in epochmilliseconds. Defaults to current time.Only return traces where all {@link Span#timestamp()} are at or after (endTs - lookback) inmilliseconds. Defaults to endTs.Maximum number of traces to return. Defaults to 10Corresponds to query parameter "annotationQuery". Ex. "http.method=GET and error"QueryRequest.Builder#parseAnnotationQuery(String)Sets {@link QueryRequest#serviceName()}Sets {@link QueryRequest#remoteServiceName()}This ignores the reserved span name "all".QueryRequest#spanName()Corresponds to query parameter "annotationQuery". Ex. "http.method=GET and error". Parameterkeys and values are trimmed.QueryRequest#annotationQueryString() put the annotation only if there is no key present already, prevents overriding more specific tags tag tags are put regardless, i.e. last tag winsSets {@link QueryRequest#annotationQuery()}Sets {@link QueryRequest#minDuration()}Sets {@link QueryRequest#maxDuration()}Sets {@link QueryRequest#endTs()}Sets {@link QueryRequest#lookback()}Sets {@link QueryRequest#limit()} coerce service and span names to lowercase remove any accidental empty stringsTests the supplied trace against the current request.<p>This is used when the backend cannot fully refine a trace query. v2 returns raw spans in any order, get the root's timestamp or the first timestamp service name, when present, constrains other queries.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/ServiceAndSpanNames.javaServiceAndSpanNamesProvides autocomplete functionality by providing values for service and span names, usuallyderived from {@link SpanConsumer}.Retrieves all {@link Span#localEndpoint() local} {@link Endpoint#serviceName() service names},sorted lexicographically.Retrieves all {@link Span#remoteEndpoint() remote} {@link Endpoint#serviceName() service names}recorded by a {@link Span#localEndpoint() service}, sorted lexicographically.Retrieves all {@link Span#name() span names} recorded by a {@link Span#localEndpoint()service}, sorted lexicographically.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/SpanConsumer.javaSpanConsumer @FunctionalInterfaceC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/SpanStore.javaSpanStoreQueries data derived from {@link SpanConsumer}.<p>Note: This is not considered a user-level Api, rather an Spi that can be used to binduser-level abstractions such as futures or observables.Retrieves spans grouped by trace ID from the storage system with no ordering expectation.<p>When strict trace ID is disabled, spans are grouped by the right-most 16 characters of thetrace ID.Retrieves spans that share a 128-bit trace id with no ordering expectation or empty if none arefound.<p>When strict trace ID is disabled, spans with the same right-most 16 characters are returnedeven if the characters to the left are not.<p>Implementations should use {@link Span#normalizeTraceId(String)} to ensure consistency.the {@link Span#traceId() trace ID}use {@link Traces#getTrace(String)}Retrieves all {@link Span#localEndpoint() local} and {@link Span#remoteEndpoint() remote}{@link Endpoint#serviceName() service names}, sorted lexicographically.use {@link ServiceAndSpanNames#getServiceNames()}use {@link ServiceAndSpanNames#getSpanNames(String)}Returns dependency links derived from spans in an interval contained by (endTs - lookback) orempty if none are found.<p>Implementations may bucket aggregated data, for example daily. When this is the case, endTsmay be floored to align with that bucket, for example midnight if daily. lookback applies tothe original endTs, even when bucketed. Using the daily example, if endTs was 11pm and lookbackwas 25 hours, the implementation would query against 2 buckets.<p>Some implementations parse spans from storage and call {@linkDependencyLinker} to aggregate links. The reason is certain graph logic, such as skipping upthe tree is difficult to implement as a storage query.<p>Spans are grouped by the right-most 16 characters of the trace ID. This ensures call countsare not incremented twice due to one hop downgrading from 128 to 64-bit trace IDs.only return links from spans where {@link Span#timestamp()} are at or before thistime in epoch milliseconds.only return links from spans where {@link Span#timestamp()} are at or after(endTs - lookback) in milliseconds.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StorageComponent.javaStorageComponentC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StorageComponent$1.classStorageComponent$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StorageComponent.classgetValuesgetValues(java.lang.String)getKeysgetKeys()"EmptyAutocompleteTags{}"EmptyAutocompleteTags{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StorageComponent$2.classStorageComponent$2getSpanNamesgetSpanNames(java.lang.String)getRemoteServiceNamesgetRemoteServiceNames(java.lang.String)getServiceNamesgetServiceNames()"ServiceAndSpanNames{"ServiceAndSpanNames{? extends BuilderClass<? extends Builder>Map<String,? extends Builder>Builder[]? extends Builder[]Constructor<? extends Builder>? super ? extends BuilderClass<? super ? extends Builder>TypeVariable<Class<? extends Builder>>TypeVariable<Class<? extends Builder>>[]"autocompleteKeys not yet supported"autocompleteKeys not yet supportedautocompleteTtl"autocompleteTtl not yet supported"autocompleteTtl not yet supportedautocompleteCardinality"autocompleteCardinality not yet supported"autocompleteCardinality not yet supportedA component that provides storage interfaces used for spans and aggregations. Implementations arefree to provide other interfaces, but the ones declared here must be supported. delegates to deprecated methods. returns default to not break compat incorrect for not yet ported 3rd party storage components.A storage request failed and was dropped due to a limit, resource unavailability, or a timeout.Implementations of throttling can use this signal to differentiate between failures, forexample to reduce traffic.<p>Callers of this method will submit an exception raised by {@link Call#execute()} or on theerror callback of {@link Call#enqueue(Callback)}.<p>By default, this returns true if the input is a {@link RejectedExecutionException}. Whenoriginating exceptions, use this type to indicate a load related failure.<p>It is generally preferred to specialize this method to handle relevant exceptions for theparticular storage rather than wrapping them in {@link RejectedExecutionException} at callsites. Extra wrapping can make errors harder to read, for example, by making it harder to"google" a solution for a well known error message for the storage client, instead thinking theerror is in Zipkin code itself.<h3>See also</h3><p>While implementation is flexible, one known use is <a href="https://github.com/Netflix/concurrency-limits">Netflixconcurrency limits</a>Zipkin supports 64 and 128-bit trace identifiers, typically serialized as 16 or 32 characterhex strings. When false, this setting only considers the low 64-bits (right-most 16characters) of a trace ID when grouping or retrieving traces. This should be set to falsewhile some applications issue 128-bit trace IDs and while other truncate them to 64-bit. If128-bit trace IDs are not in use, this setting is not required.<h3>Details</h3><p>Zipkin historically had 64-bit {@link Span#traceId() trace IDs}, but it now supports 128-bit trace IDs via 32-character hex representation. While instrumentation update to propagate128-bit IDs, it can be ambiguous whether a 64-bit trace ID was sent intentionally, or as anaccident of truncation. This setting allows Zipkin to be usable until applicationinstrumentation are upgraded to support 128-bit trace IDs.<p>Here are a few trace IDs the help explain this setting.<li>Trace ID A: 463ac35c9f6413ad48485a3953bb6124</li><li>Trace ID B: 48485a3953bb6124</li><li>Trace ID C: 463ac35c9f6413adf1a48a8cff464e0e</li><li>Trace ID D: 463ac35c9f6413ad</li></ul></pre><p>In the above example, Trace ID A and Trace ID B might mean they are in the same trace,since the lower-64 bits of the IDs are the same. This could happen if a server A created thetrace and propagated it to server B which ran an older tracing library. Server B could havetruncated the trace ID to lower-64 bits. When {@code strictTraceId == false}, spans matchingeither trace ID A or B would be returned in the same trace when searching by ID A or B. Spanswith trace ID C or D wouldn't be when searching by ID A or B because trace IDs C and D don'tshare lower 64-bits (right-most 16 characters) with trace IDs A or B.<p>It is also possible that all servers are capable of handling 128-bit trace identifiers,but are configured to only send 64-bit ones. In this case, if {@code strictTraceId == false}trace ID A and B would clash and be put into the same trace, causing confusion. Moreover,there is overhead associated with indexing spans both by 64 and 128-bit trace IDs. When asite has finished upgrading to 128-bit trace IDs, they should enable this setting.<p>See https://github.com/openzipkin/b3-propagation/issues/6 for the status ofknown open source libraries on 128-bit trace identifiers.False is an attempt to disable indexing, leaving only {@link StorageComponent#traces()}supported. For example, query requests will be disabled.The use case is typically to support 100% sampled data, or when traces are searched usingalternative means such as a logging index.<p>Refer to implementation docs for the impact of this parameter. Operations that useindexes should return empty as opposed to throwing an exception.Autocomplete is used by the UI to suggest getValues for site-specific tags, such asenvironment names. The getKeys here would appear in {@link Span#tags() span tags}. Goodchoices for autocomplete are limited in cardinality for the same reasons as service and spannames.For example, "http.url" would be a bad choice for autocomplete, not just because it isn'tsite-specific (such as environment would be), but also as there are unlimited getValues dueto factors such as unique ids in the path.controls the span values stored for auto-complete. not abstract as added laterHow long in milliseconds to suppress calls to write the same autocomplete key/value pair.How many autocomplete key/value pairs to suppress at a time.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StrictTraceId.javaStrictTraceIdStrictTraceId()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/StrictTraceId.classlowerTraceId(java.lang.String)hasClashOnLowerTraceIdhasClashOnLowerTraceId(java.util.List)Mapper<List<Span>,List<Span>>FilterTracesIfClashOnLowerTraceIdFilterTracesIfClashOnLowerTraceId(zipkin2.storage.QueryRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/StrictTraceId$FilterTracesIfClashOnLowerTraceId.classStrictTraceId$FilterTracesIfClashOnLowerTraceIdmap(java.util.List)"FilterTracesIfClashOnLowerTraceId{request="FilterTracesIfClashOnLowerTraceId{request=traceCounttraceIdLowsclashFilterSpansFilterSpans(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/StrictTraceId$FilterSpans.classStrictTraceId$FilterSpans"FilterSpans{traceId="FilterSpans{traceId=FilterTracesByIdsFilterTracesByIds(java.lang.Iterable)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/storage/StrictTraceId$FilterTracesByIds.classStrictTraceId$FilterTracesByIdssanitizedIds"FilterTracesByIds{traceIds="FilterTracesByIds{traceIds=Storage implementation often need to re-check query results when {@linkStorageComponent.Builder#strictTraceId(boolean) strict trace ID} is disabled.Filters the mutable input client-side when there's a clash on lower 64-bits of a trace ID.Returns true if any trace clashes on the right-most 16 characters of the trace ID Concretely, Netflix have a special index template for a multi-tag, "fit.sessionId". If we blindly filtered without seeing if we had to, a match that works on the server side would fail client side. Normally, we wouldn't special case like this, but not filtering unless necessary is also more efficient. NOTE: It is probably more efficient to do clever sorting and peeking here, but the call site is query side, which is not in the critical path of user code. A set is much easier to grok. Not using removeIf as that's java 8+Returns a function that filters its mutable input when it contains a trace not matching thespecified trace IDs.<p>Make sure the input IDs are unique and {@link Span#normalizeTraceId(String) normalized}.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/Traces.javaTracesAllows readback of traces by ID, as written by a {@link SpanConsumer}.<p>Specifically, this provides apis present when {@link StorageComponent.Builder#searchEnabled(boolean)search is disabled}.2.17Retrieves any traces with the specified IDs. Results return in any order, and can be empty.<p>Implementations should use {@link Span#normalizeTraceId(String)} on each input trace ID toensure consistency.a list of unique {@link Span#traceId() trace IDs}.traces matching the supplied trace IDs, in any orderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1Annotation.javaV1AnnotationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1zipkin2.v1V1Annotation(long,java.lang.String,zipkin2.Endpoint)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1Annotation.classComparable<V1Annotation>Like {@link zipkin2.Annotation}, except in v1 format the {@link Span#localEndpoint()} wasrepeated for each annotation.new code should use {@link Annotation}. exposed for conversionSets {@link Annotation#timestamp()}Sets {@link Annotation#value()}The host that reported this annotation or null if unknown.<p>In v2 format, this is analogous to {@link Span#localEndpoint()}. hashCode and equals implemented as legacy cassandra uses it in a naming conventionCompares by {@link #timestamp()}, then {@link #value()}.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1BinaryAnnotation.javaV1BinaryAnnotationV1BinaryAnnotation(java.lang.String,java.lang.String,zipkin2.Endpoint)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1BinaryAnnotation.classComparable<V1BinaryAnnotation>address"endpoint == null"endpoint == nullThis only supports binary annotations that map to {@link Span v2 span} data. Namely, thissupports {@link Span#tags()}, {@link Span#localEndpoint()} and {@link Span#remoteEndpoint()}.<p>Specifically, this maps String and Boolean binary annotations, ignoring others.new code should use {@link Span#tags()}.The defined in zipkin's thrift definitionThe type defined in zipkin's thrift definitionCreates an address annotation, which is the same as {@link Span#remoteEndpoint()}Creates a tag annotation, which is the same as {@link Span#tags()} except duplicating theendpoint.<p>A special case is when the key is "lc" and value is empty: This substitutes for the {@linkSpan#localEndpoint()}.The same as the key of a {@link Span#tags()} v2 span tag}The thrift type for the value defined in Zipkin's thrift definition. Note this is not theTBinaryProtocol field type!The same as the value of a {@link Span#tags()} v2 span tag} or null if this is an addressWhen {@link #stringValue()} is present, this is the same as the {@link Span#localEndpoint()}Otherwise, it is the same as the {@link Span#remoteEndpoint()}.Provides consistent iteration by {@link #key}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1Span.javaV1SpanunmodifiableListlowerHexToUnsignedLongC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1Span.classV1Span(zipkin2.v1.V1Span.Builder)traceIdHigh"traceId == 0"traceId == 0"id == 0"id == 0ArrayList<V1Annotation>AbstractList<V1Annotation>AbstractCollection<V1Annotation>ArrayList<V1BinaryAnnotation>AbstractList<V1BinaryAnnotation>AbstractCollection<V1BinaryAnnotation>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/v1/V1Span$Builder.classV1Span$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/v1AbstractCollection<V1Annotation>()AbstractList<V1Annotation>()ArrayList<V1Annotation>(java.util.Collection)ArrayList<V1Annotation>()ArrayList<V1Annotation>(int)AbstractCollection<V1BinaryAnnotation>()AbstractList<V1BinaryAnnotation>()ArrayList<V1BinaryAnnotation>(java.util.Collection)ArrayList<V1BinaryAnnotation>()ArrayList<V1BinaryAnnotation>(int)V1 spans are different than v2 especially as annotations repeat. Support is available to helpmigrate old code or allow for parsing older data formats.new code should use {@link Span}.When non-zero, the trace containing this span uses 128-bit trace identifiers.lower 64-bits of the {@link Span#traceId()}Same as {@link zipkin2.Span#id()} except packed into a long. Zero means root span.Same as {@link zipkin2.Span#name()}The parent's {@link #id()} or zero if this the root span in a trace.Same as {@link Span#timestampAsLong()}Same as {@link Span#durationAsLong()}Same as {@link Span#annotations()}, except each may be associated with {@linkSpan#localEndpoint()}{@link Span#tags()} are allocated to binary annotations with a {@linkV1BinaryAnnotation#stringValue()}. {@link Span#remoteEndpoint()} to those without.Same as {@link Span#debug()}Returns the distinct {@link Endpoint#serviceName() service names} that logged to this span. ID accessors are here to help organize builders by their identifiersSets {@link V1Span#traceIdHigh()}Sets {@link V1Span#traceId()}Sets {@link V1Span#id()}Same as {@link Span.Builder#traceId(String)}Same as {@link Span.Builder#id(String)}Same as {@link Span.Builder#parentId(String)}Sets {@link V1Span#parentId()}Sets {@link V1Span#name()}Sets {@link V1Span#timestamp()}Sets {@link V1Span#duration()}Sets {@link V1Span#annotations()} Ignore empty endpoints rather than crashing v1 parsers on bad address data<p>A key of "lc" and empty value substitutes for {@link Span#localEndpoint()}.Sets {@link V1Span#debug()}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1SpanConverter.javaV1SpanConverterV1SpanConverter()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V1SpanConverter.classnewBuilder(zipkin2.Span.Builder,zipkin2.v1.V1Span)hasSameServiceNamehasSameServiceName(zipkin2.Endpoint,zipkin2.Endpoint)finishfinish(java.util.Collection)newSpanBuildernewSpanBuilder(zipkin2.v1.V1Span,zipkin2.Endpoint)closeEnoughEndpointcloseEnoughEndpoint(zipkin2.Span.Builder,zipkin2.Endpoint)forEndpointforEndpoint(zipkin2.v1.V1Span,zipkin2.Endpoint)processBinaryAnnotationsprocessBinaryAnnotations(zipkin2.v1.V1Span)maybeTimestampDurationmaybeTimestampDuration(zipkin2.v1.V1Span,zipkin2.v1.V1Annotation,zipkin2.v1.V1Annotation)endTimestampReflectsSpanDurationendTimestampReflectsSpanDuration(zipkin2.v1.V1Annotation,zipkin2.v1.V1Span)handleIncompleteRpchandleIncompleteRpc(zipkin2.Span.Builder)handleIncompleteRpc(zipkin2.v1.V1Span)processAnnotationsprocessAnnotations(zipkin2.v1.V1Span)startstart(zipkin2.v1.V1Span)wrwsmrmscrsssrcsList<Builder>Collection<Builder>Iterable<Builder>ArrayList<Builder>AbstractList<Builder>AbstractCollection<Builder>ArrayList<Builder>()Spliterator<Builder>? super BuilderConsumer<? super Builder>Iterator<Builder>Stream<Builder>BaseStream<Builder,Stream<Builder>>Predicate<? super Builder>Collection<? extends Builder>Iterable<? extends Builder>add(zipkin2.Span.Builder)AbstractCollection<Builder>()ListIterator<Builder>add(int,zipkin2.Span.Builder)set(int,zipkin2.Span.Builder)Comparator<? super Builder>UnaryOperator<Builder>Function<Builder,Builder>AbstractList<Builder>()ArrayList<Builder>(java.util.Collection)ArrayList<Builder>(int)sink"cs""sr""ss""cr""ms""mr""ws""wr"clientserverproducerconsumerendbeginspan2noCoreAnnotations"lc"lcAllows you to split a v1 span when necessary. This can be the case when reading mergedclient+server spans from storage or parsing old data formats.<p>This type isn't thread-safe: it re-uses state to avoid re-allocations in conversion loops. add annotations unless they are "core" convert binary annotations to tags and addresses core annotations require an endpoint. Don't give special treatment when that's missing When bridging between event and span model, you can end up missing a start annotation in a shared span, the client side owns span duration by annotations or explicit timestamp special-case loopback: We need to make sure on loopback there are two span2s fork a new span for the server side the server side is smaller than that, we have to read annotations to find out one-way has no duration otherwise, the span is incomplete. revert special-casing Span v1 format did not have a shared flag. By convention, span.timestamp being absent implied shared. When we only see the server-side, carry this signal over. We use a signal of either the authoritative timestamp being unset, or the duration is unset eventhough we have the server send result. The latter clarifies an edge case in MySQL where a span row is shared between client and server. The presence of timestamp in this case could be due to the client-side of that RPC. ms and mr are not supposed to be in the same span, but in case they are.. fork a new span for the consumer side Peek to see if this is an address annotation. Strictly speaking, address annotations should have a value of true (not "true" or "1"). However, there are versions of zipkin-ruby in the wild that create "1" and misinterpreting confuses the question of what is the local endpoint. Hence, we leniently parse. don't add marker "lc" tags special-case when we are missing core annotations, but we have both address annotations "sa" is a default for a remote address, don't make it a client span ca != null: treat it like a server Finagle adds a "ca" annotation on server spans for the client-port on the socket, but with the same service name as "sa". Removing the service name prevents creating loopback links. client span messaging span Intentionally process messaging endpoints separately in case someone accidentally shared a messaging span. This will ensure both sides have the address of the broker. allocate missing endpoint data to first spanC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V2SpanConverter.javaV2SpanConverterV2SpanConverter()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/src/main/java/zipkin2/v1/V2SpanConverter.classmdbeginAnnotationendAnnotationwriteLocalComponenthasRemoteEndpointparseparse(zipkin2.Span)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/classes/zipkin2/v1/V2SpanConverter$V1SpanMetadata.classV2SpanConverter$V1SpanMetadatamrTswrTswsTsmsTsV1SpanMetadataV1SpanMetadata()"update kind mapping"update kind mappingAllows you convert a v2 span into a v1 span. This is helpful for legacy storage which still useannotations. This shouldn't be used by new code. Don't report timestamp and duration on shared spans (should be server, but not necessarily) write an empty "lc" annotation to avoid missing the localEndpoint in an in-process span scan annotations in case there are better timestamps, or inferred kind default value If we didn't find a span kind, directly or indirectly, unset the addrC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemqactivemqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collectorzipkin-collector-parentzipkin-collector-activemqCollector: ActiveMQZipkin span collector for ActiveMQ transport${project.basedir}/../..activemq.version5.16.0org.apache.activemqactivemq-client${activemq.version}activemq-brokerorg.apache.activemq.toolingactivemq-junitC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/ActiveMQCollector.javaActiveMQCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collectorcollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/srczipkin2.collector.activemqmessage(java.lang.Exception)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/ActiveMQCollector.classuncheckedExceptionuncheckedException(java.lang.String,javax.jms.JMSException)ActiveMQCollector(zipkin2.collector.activemq.ActiveMQCollector.Builder)lazyInitconcurrencyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/target/classes/zipkin2/collector/activemq/ActiveMQCollector$Builder.classActiveMQCollector$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/target/classes/zipkin2/collector/activemqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/target/classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/targetconnectionFactorymetricsClass<ActiveMQCollector>"zipkin"sampler"metrics == null"metrics == null"activemq""connectionFactory == null"connectionFactory == null"queue == null"queue == null"concurrency < 1"concurrency < 1"Collector not yet started"Collector not yet started"ActiveMQCollector{"
      + "brokerURL="ActiveMQCollector{brokerURL=", queue=", queue=prefix? extends ExceptionClass<? extends Exception>Map<String,? extends Exception>Exception[]? extends Exception[]Constructor<? extends Exception>? super ? extends ExceptionClass<? super ? extends Exception>TypeVariable<Class<? extends Exception>>TypeVariable<Class<? extends Exception>>[]This collector consumes encoded binary messages from a ActiveMQ queue.Configuration including defaults needed to consume spans from a ActiveMQ queue.Queue zipkin spans will be consumed from. Defaults to "zipkin".Count of concurrent message listeners on the queue. Defaults to 1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/ActiveMQSpanConsumer.javaActiveMQSpanConsumerregisterInNewSessionregisterInNewSession(org.apache.activemq.ActiveMQConnection,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/ActiveMQSpanConsumer.classActiveMQSpanConsumer(zipkin2.collector.Collector,zipkin2.collector.CollectorMetrics,org.apache.activemq.ActiveMQConnection)checkResultMap<QueueSession,QueueReceiver>sessionToReceiverINTERRUPTIONCLOSEDC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jarzipkin-2.23.3-SNAPSHOTC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Callback.classNOOPLinkedHashMap<QueueSession,QueueReceiver>HashMap<QueueSession,QueueReceiver>AbstractMap<QueueSession,QueueReceiver>LinkedHashMap<QueueSession,QueueReceiver>()? super QueueReceiver? extends QueueReceiverBiFunction<? super QueueReceiver,? super QueueReceiver,? extends QueueReceiver>merge(javax.jms.QueueSession,javax.jms.QueueReceiver,java.util.function.BiFunction)? super QueueSessionBiFunction<? super QueueSession,? super QueueReceiver,? extends QueueReceiver>compute(javax.jms.QueueSession,java.util.function.BiFunction)computeIfPresent(javax.jms.QueueSession,java.util.function.BiFunction)Function<? super QueueSession,? extends QueueReceiver>computeIfAbsent(javax.jms.QueueSession,java.util.function.Function)replace(javax.jms.QueueSession,javax.jms.QueueReceiver)replace(javax.jms.QueueSession,javax.jms.QueueReceiver,javax.jms.QueueReceiver)putIfAbsent(javax.jms.QueueSession,javax.jms.QueueReceiver)BiConsumer<? super QueueSession,? super QueueReceiver>getOrDefault(java.lang.Object,javax.jms.QueueReceiver)Entry<QueueSession,QueueReceiver>Set<Entry<QueueSession,QueueReceiver>>Collection<Entry<QueueSession,QueueReceiver>>Iterable<Entry<QueueSession,QueueReceiver>>Collection<QueueReceiver>Iterable<QueueReceiver>Set<QueueSession>Collection<QueueSession>Iterable<QueueSession>? extends QueueSessionMap<? extends QueueSession,? extends QueueReceiver>put(javax.jms.QueueSession,javax.jms.QueueReceiver)AbstractMap<QueueSession,QueueReceiver>()Node<QueueSession,QueueReceiver>TreeNode<QueueSession,QueueReceiver>newTreeNode(int,javax.jms.QueueSession,javax.jms.QueueReceiver,java.util.HashMap.Node)newNode(int,javax.jms.QueueSession,javax.jms.QueueReceiver,java.util.HashMap.Node)Node<QueueSession,QueueReceiver>[]putVal(int,javax.jms.QueueSession,javax.jms.QueueReceiver,boolean,boolean)HashMap<QueueSession,QueueReceiver>(java.util.Map)HashMap<QueueSession,QueueReceiver>()HashMap<QueueSession,QueueReceiver>(int)HashMap<QueueSession,QueueReceiver>(int,float)LinkedHashMap<QueueSession,QueueReceiver>(int,float,boolean)LinkedHashMap<QueueSession,QueueReceiver>(java.util.Map)LinkedHashMap<QueueSession,QueueReceiver>(int)LinkedHashMap<QueueSession,QueueReceiver>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/ActiveMQSpanConsumer$1.classActiveMQSpanConsumer$1"Collector intentionally closed"Collector intentionally closed"Recoverable error on ActiveMQ connection"Recoverable error on ActiveMQ connectionconnsessionreceiverbytesMessagetextsessionReceiversetValue(javax.jms.QueueReceiver)ignoredConsumes spans from messages on a ActiveMQ queue. Malformed messages will be discarded. Errors inthe storage component will similarly be ignored, with no retry of the message.JMS contract is one session per thread: we need a new session up to our concurrency level. Pass redundant info as we can't use default method in activeMQ No need to do anything on ActiveMQ side as physical queues are created on demand TODO: consider how to reuse buffers here lenient on empty messages deregister this EmptyCatch ignoredC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/LazyInit.javaLazyInitdoInitdoInit()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/main/java/zipkin2/collector/activemq/LazyInit.classcloseclose()initinit()LazyInit(zipkin2.collector.activemq.ActiveMQCollector.Builder)maybe"Unable to establish connection to ActiveMQ broker: "Unable to establish connection to ActiveMQ broker: "Unable to create queueReceiver("Unable to create queueReceiver("): "): Lazy creates a connection and registers a message listener up to the specified concurrency level.This listener will also receive health notifications.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collector/activemq/ITActiveMQCollector.javaITActiveMQCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collector/activemqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/testassertThatLOTS_OF_SPANSPROTO3THRIFTbuildStoragebuildStorage(zipkin2.storage.SpanConsumer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collector/activemq/ITActiveMQCollector.classbuilder()messageWithMultipleSpansmessageWithMultipleSpans(zipkin2.codec.SpanBytesEncoder)LinkedBlockingQueue<List<Span>>C:/modules/java.base/java/util/concurrent/LinkedBlockingQueue.classLinkedBlockingQueueAbstractQueue<List<Span>>Queue<List<Span>>BlockingQueue<List<Span>>receivedSpansCopyOnWriteArraySet<Thread>C:/modules/java.base/java/util/concurrent/CopyOnWriteArraySet.classCopyOnWriteArraySetAbstractSet<Thread>AbstractCollection<Thread>Collection<Thread>Iterable<Thread>Set<Thread>threadsProvidingSpansactivemqMetricsCopyOnWriteArraySet<Thread>()Spliterator<Thread>? super ThreadConsumer<? super Thread>Iterator<Thread>Stream<Thread>BaseStream<Thread,Stream<Thread>>Predicate<? super Thread>? extends ThreadCollection<? extends Thread>Iterable<? extends Thread>add(java.lang.Thread)AbstractCollection<Thread>()AbstractSet<Thread>()CopyOnWriteArraySet(java.util.Collection)CopyOnWriteArraySet<Thread>(java.util.Collection)CopyOnWriteArraySet()LinkedBlockingQueue<List<Span>>()offer(java.util.List)AbstractQueue<List<Span>>()Collection<? super List<Span>>Iterable<? super List<Span>>offer(java.util.List,long,java.util.concurrent.TimeUnit)put(java.util.List)Node<E>C:/modules/java.base/java/util/concurrent/LinkedBlockingQueue$Node.classLinkedBlockingQueue$NodeLinkedBlockingQueue<>AbstractQueue<>BlockingQueue<>findPredfindPred(java.util.concurrent.LinkedBlockingQueue.Node,java.util.concurrent.LinkedBlockingQueue.Node)Node<List<Span>>forEachFromforEachFrom(java.util.function.Consumer,java.util.concurrent.LinkedBlockingQueue.Node)succsucc(java.util.concurrent.LinkedBlockingQueue.Node)unlinkunlink(java.util.concurrent.LinkedBlockingQueue.Node,java.util.concurrent.LinkedBlockingQueue.Node)LinkedBlockingQueue(java.util.Collection)LinkedBlockingQueue<List<Span>>(java.util.Collection)LinkedBlockingQueue(int)LinkedBlockingQueue<List<Span>>(int)LinkedBlockingQueue()fullyUnlockfullyUnlock()fullyLockfullyLock()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Call.classacceptaccept(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Call$ErrorHandler.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Call$FlatMapper.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Call$Mapper.classorg.assertj.core.apiAbstractBooleanAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jarassertj-core-3.18.1C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1C:/Users/Semiu/.m2/repository/org/assertj/assertj-coreC:/Users/Semiu/.m2/repository/org/assertjassertjC:/Users/Semiu/.m2/repository/orgorgC:/Users/Semiu/.m2/repositoryC:/Users/Semiu/.m2.m2C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/orgC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertjC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/corecoreC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/apiapiC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractBooleanAssert.classAbstractBooleanAssertAbstractAssert<?,Boolean>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractAssert.classAbstractAssertAssert<?,Boolean>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/Assert.classAssertDescriptable<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/Descriptable.classDescriptableExtensionPoints<?,Boolean>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ExtensionPoints.classExtensionPointsAbstractBooleanAssert<>AbstractAssert<>Assert<>Descriptable<>ExtensionPoints<>isTrueisTrue()describedAsdescribedAs(org.assertj.core.description.Description)describedAs(java.lang.String,java.lang.Object[])asas(org.assertj.core.description.Description)as(java.lang.String,java.lang.Object[])? super ACTUALCondition<? super ACTUAL>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/Condition.classConditionDescriptable<Condition<? super ACTUAL>>satisfiessatisfies(org.assertj.core.api.Condition)? super BooleanCondition<? super Boolean>Descriptable<Condition<? super Boolean>>doesNotHavedoesNotHave(org.assertj.core.api.Condition)hashas(org.assertj.core.api.Condition)isNotisNot(org.assertj.core.api.Condition)isis(org.assertj.core.api.Condition)hasSameHashCodeAshasSameHashCodeAs(java.lang.Object)withRepresentationwithRepresentation(org.assertj.core.presentation.Representation)withThreadDumpOnErrorwithThreadDumpOnError()AbstractCharSequenceAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractCharSequenceAssert.classAbstractCharSequenceAssertEnumerableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/EnumerableAssert.classEnumerableAssertAbstractCharSequenceAssert<?,String>AbstractAssert<?,String>Assert<?,String>ExtensionPoints<?,String>EnumerableAssert<?,Character>asStringasString()AbstractListAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractListAssert.classAbstractListAssertAbstractIterableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractIterableAssert.classAbstractIterableAssertObjectEnumerableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ObjectEnumerableAssert.classObjectEnumerableAssertIndexedObjectEnumerableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/IndexedObjectEnumerableAssert.classIndexedObjectEnumerableAssertObjectAssert<Object>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ObjectAssert.classObjectAssertAbstractObjectAssert<ObjectAssert<Object>,Object>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractObjectAssert.classAbstractObjectAssertAbstractAssert<ObjectAssert<Object>,Object>Assert<ObjectAssert<Object>,Object>Descriptable<ObjectAssert<Object>>ExtensionPoints<ObjectAssert<Object>,Object>AbstractListAssert<?,List<?>,Object,ObjectAssert<Object>>AbstractIterableAssert<?,List<?>,Object,ObjectAssert<Object>>AbstractAssert<?,List<?>>Assert<?,List<?>>ExtensionPoints<?,List<?>>ObjectEnumerableAssert<?,Object>EnumerableAssert<?,Object>IndexedObjectEnumerableAssert<?,Object>asListasList()isNotOfAnyClassInisNotOfAnyClassIn(java.lang.Class[])isOfAnyClassInisOfAnyClassIn(java.lang.Class[])isNotExactlyInstanceOfisNotExactlyInstanceOf(java.lang.Class)isExactlyInstanceOfisExactlyInstanceOf(java.lang.Class)doesNotHaveSameClassAsdoesNotHaveSameClassAs(java.lang.Object)hasToStringhasToString(java.lang.String)hasSameClassAshasSameClassAs(java.lang.Object)isNotInstanceOfAnyisNotInstanceOfAny(java.lang.Class[])isNotInstanceOfisNotInstanceOf(java.lang.Class)isInstanceOfAnyisInstanceOfAny(java.lang.Class[])isInstanceOfSatisfyingisInstanceOfSatisfying(java.lang.Class,java.util.function.Consumer)Consumer<T>isInstanceOfisInstanceOf(java.lang.Class)InstanceOfAssertFactory<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/InstanceOfAssertFactory.classInstanceOfAssertFactoryAssertFactory<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AssertFactory.classAssertFactoryASSERTAbstractAssert<?,?>Assert<?,?>ExtensionPoints<?,?>asInstanceOfasInstanceOf(org.assertj.core.api.InstanceOfAssertFactory)InstanceOfAssertFactory<?,ASSERT>AssertFactory<Object,ASSERT>usingDefaultComparatorusingDefaultComparator()Comparator<? super ACTUAL>usingComparatorusingComparator(java.util.Comparator,java.lang.String)Comparator<? super Boolean>usingComparator(java.util.Comparator)isNotInisNotIn(java.lang.Iterable)isInisIn(java.lang.Iterable)isNotIn(java.lang.Object[])isIn(java.lang.Object[])isNotSameAsisNotSameAs(java.lang.Object)isSameAsisSameAs(java.lang.Object)isNotNullisNotNull()isNullisNull()isNotEqualToisNotEqualTo(java.lang.Object)isEqualTo(java.lang.Object)extractingextracting(java.util.function.Function,org.assertj.core.api.AssertFactory)Function<? super ACTUAL,? extends T>AssertFactory<T,ASSERT>Function<? super Boolean,? extends T>extracting(java.lang.String,org.assertj.core.api.AssertFactory)RecursiveComparisonAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/RecursiveComparisonAssert.classRecursiveComparisonAssertRecursiveComparisonAssert<?>AbstractAssert<?,Object>Assert<?,Object>ExtensionPoints<?,Object>usingRecursiveComparisonusingRecursiveComparison()usingRecursiveComparison(org.assertj.core.api.recursive.comparison.RecursiveComparisonConfiguration)withAssertionStatewithAssertionState(org.assertj.core.api.AbstractAssert)List<? extends E>ObjectAssert<E>AbstractObjectAssert<ObjectAssert<E>,E>AbstractAssert<ObjectAssert<E>,E>Assert<ObjectAssert<E>,E>Descriptable<ObjectAssert<E>>ExtensionPoints<ObjectAssert<E>,E>AbstractListAssert<?,List<? extends E>,E,ObjectAssert<E>>AbstractIterableAssert<?,List<? extends E>,E,ObjectAssert<E>>AbstractAssert<?,List<? extends E>>Assert<?,List<? extends E>>ExtensionPoints<?,List<? extends E>>ObjectEnumerableAssert<?,E>EnumerableAssert<?,E>IndexedObjectEnumerableAssert<?,E>newListAssertInstancenewListAssertInstance(java.util.List)Consumer<Description>setDescriptionConsumersetDescriptionConsumer(java.util.function.Consumer)setPrintAssertionsDescriptionsetPrintAssertionsDescription(boolean)setCustomRepresentationsetCustomRepresentation(org.assertj.core.presentation.Representation)Consumer<ACTUAL>satisfiesAnyOfsatisfiesAnyOf(java.util.function.Consumer,java.util.function.Consumer,java.util.function.Consumer,java.util.function.Consumer)Consumer<Boolean>satisfiesAnyOf(java.util.function.Consumer,java.util.function.Consumer,java.util.function.Consumer)satisfiesAnyOf(java.util.function.Consumer,java.util.function.Consumer)satisfies(java.util.function.Consumer)Predicate<? super ACTUAL>matchesmatches(java.util.function.Predicate,java.lang.String)Predicate<? super Boolean>matches(java.util.function.Predicate)Supplier<String>withFailMessagewithFailMessage(java.util.function.Supplier)withFailMessage(java.lang.String,java.lang.Object[])overridingErrorMessageoverridingErrorMessage(java.util.function.Supplier)overridingErrorMessage(java.lang.String,java.lang.Object[])descriptionTextdescriptionText()AbstractStringAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractStringAssert.classAbstractStringAssertAbstractStringAssert<?>inBinaryinBinary()inHexadecimalinHexadecimal()isElementOfCustomAssertisElementOfCustomAssert(java.lang.StackTraceElement)assertionErrorassertionError(org.assertj.core.error.ErrorMessageFactory)throwAssertionErrorthrowAssertionError(org.assertj.core.error.ErrorMessageFactory)failureWithActualExpectedfailureWithActualExpected(java.lang.Object,java.lang.Object,java.lang.String,java.lang.Object[])failWithActualExpectedAndMessagefailWithActualExpectedAndMessage(java.lang.Object,java.lang.Object,java.lang.String,java.lang.Object[])failurefailure(java.lang.String,java.lang.Object[])failWithMessagefailWithMessage(java.lang.String,java.lang.Object[])getWritableAssertionInfogetWritableAssertionInfo()AbstractAssert(java.lang.Object,java.lang.Class)AbstractAssert<?,Boolean>(java.lang.Boolean,java.lang.Class)assertionErrorCreatormyselfactualinfoconditionsobjectsthrowUnsupportedExceptionOnEqualsisNotEqualTo(boolean)isEqualTo(boolean)isFalseisFalse()AbstractBooleanAssert(java.lang.Boolean,java.lang.Class)AbstractBooleanAssert<?>(java.lang.Boolean,java.lang.Class)booleans"tcp://localhost:80"tcp://localhost:80? extends ThrowableClass<? extends Throwable>Class<UncheckedIOException>"Unable to establish connection to ActiveMQ broker: Connection refused"Unable to establish connection to ActiveMQ broker: Connection refusedObjectAssert<ActiveMQCollector>AbstractObjectAssert<ObjectAssert<ActiveMQCollector>,ActiveMQCollector>AbstractAssert<ObjectAssert<ActiveMQCollector>,ActiveMQCollector>Assert<ObjectAssert<ActiveMQCollector>,ActiveMQCollector>Descriptable<ObjectAssert<ActiveMQCollector>>ExtensionPoints<ObjectAssert<ActiveMQCollector>,ActiveMQCollector>ObjectAssert<>AbstractObjectAssert<>? super ActiveMQCollectorCondition<? super ActiveMQCollector>Descriptable<Condition<? super ActiveMQCollector>>Comparator<? super ActiveMQCollector>Function<? super ActiveMQCollector,? extends T>Consumer<ActiveMQCollector>Predicate<? super ActiveMQCollector>AbstractAssert<ObjectAssert<ActiveMQCollector>,ActiveMQCollector>(zipkin2.collector.activemq.ActiveMQCollector,java.lang.Class)"ActiveMQCollector{brokerURL=%s, queue=%s}"ActiveMQCollector{brokerURL=%s, queue=%s}encoderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/codecC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/codec/BytesEncoder.classListAssert<Span>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ListAssert.classListAssertList<? extends Span>ObjectAssert<Span>AbstractObjectAssert<ObjectAssert<Span>,Span>AbstractAssert<ObjectAssert<Span>,Span>Assert<ObjectAssert<Span>,Span>Descriptable<ObjectAssert<Span>>ExtensionPoints<ObjectAssert<Span>,Span>FactoryBasedNavigableListAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/FactoryBasedNavigableListAssert.classFactoryBasedNavigableListAssertAbstractListAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>AbstractIterableAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>AbstractAssert<ListAssert<Span>,List<? extends Span>>Assert<ListAssert<Span>,List<? extends Span>>Descriptable<ListAssert<Span>>ExtensionPoints<ListAssert<Span>,List<? extends Span>>ObjectEnumerableAssert<ListAssert<Span>,Span>EnumerableAssert<ListAssert<Span>,Span>IndexedObjectEnumerableAssert<ListAssert<Span>,Span>ListAssert<>FactoryBasedNavigableListAssert<>? super List<? extends Span>Condition<? super List<? extends Span>>Descriptable<Condition<? super List<? extends Span>>>Comparator<? super List<? extends Span>>Function<? super List<? extends Span>,? extends T>Consumer<List<? extends Span>>Predicate<? super List<? extends Span>>AbstractAssert<ListAssert<Span>,List<? extends Span>>(java.util.List,java.lang.Class)usingDefaultElementComparatorusingDefaultElementComparator()? super ELEMENTComparator<? super ELEMENT>usingElementComparatorusingElementComparator(java.util.Comparator)hasSameSizeAshasSameSizeAs(java.lang.Object)hasSameSizeAs(java.lang.Iterable)hasSizeBetweenhasSizeBetween(int,int)hasSizeLessThanOrEqualTohasSizeLessThanOrEqualTo(int)hasSizeLessThanhasSizeLessThan(int)hasSizeGreaterThanOrEqualTohasSizeGreaterThanOrEqualTo(int)hasSizeGreaterThanhasSizeGreaterThan(int)hasSizehasSize(int)isNotEmptyisNotEmpty()isNullOrEmptyisNullOrEmpty()Predicate<? super ELEMENT>noneMatchnoneMatch(java.util.function.Predicate)? extends ELEMENTIterable<? extends ELEMENT>containsAnyElementsOfcontainsAnyElementsOf(java.lang.Iterable)ELEMENT[]containsAnyOfcontainsAnyOf(java.lang.Object[])containsAnyOf(zipkin2.Span[])Consumer<? super ELEMENT>noneSatisfynoneSatisfy(java.util.function.Consumer)anySatisfyanySatisfy(java.util.function.Consumer)anyMatchanyMatch(java.util.function.Predicate)allSatisfyallSatisfy(java.util.function.Consumer)allMatchallMatch(java.util.function.Predicate,java.lang.String)allMatch(java.util.function.Predicate)isSubsetOfisSubsetOf(java.lang.Object[])isSubsetOf(zipkin2.Span[])isSubsetOf(java.lang.Iterable)doesNotContainAnyElementsOfdoesNotContainAnyElementsOf(java.lang.Iterable)hasSameElementsAshasSameElementsAs(java.lang.Iterable)containsOnlyOnceElementsOfcontainsOnlyOnceElementsOf(java.lang.Iterable)containsOnlyElementsOfcontainsOnlyElementsOf(java.lang.Iterable)containsExactlyElementsOfcontainsExactlyElementsOf(java.lang.Iterable)doesNotHaveAnyElementsOfTypesdoesNotHaveAnyElementsOfTypes(java.lang.Class[])hasOnlyElementsOfTypehasOnlyElementsOfType(java.lang.Class)hasAtLeastOneElementOfTypehasAtLeastOneElementOfType(java.lang.Class)hasOnlyElementsOfTypeshasOnlyElementsOfTypes(java.lang.Class[])hasOnlyOneElementSatisfyinghasOnlyOneElementSatisfying(java.util.function.Consumer)containsAll(java.lang.Iterable)Condition<? super ELEMENT>Descriptable<Condition<? super ELEMENT>>haveExactlyhaveExactly(int,org.assertj.core.api.Condition)Condition<? super Span>Descriptable<Condition<? super Span>>haveAtMosthaveAtMost(int,org.assertj.core.api.Condition)haveAtLeasthaveAtLeast(int,org.assertj.core.api.Condition)haveAtLeastOnehaveAtLeastOne(org.assertj.core.api.Condition)areExactlyareExactly(int,org.assertj.core.api.Condition)areAtMostareAtMost(int,org.assertj.core.api.Condition)areAtLeastOneareAtLeastOne(org.assertj.core.api.Condition)areAtLeastareAtLeast(int,org.assertj.core.api.Condition)doNotHavedoNotHave(org.assertj.core.api.Condition)havehave(org.assertj.core.api.Condition)areNotareNot(org.assertj.core.api.Condition)areare(org.assertj.core.api.Condition)doesNotContainNulldoesNotContainNull()containsNullcontainsNull()endsWithendsWith(java.lang.Object[])endsWith(zipkin2.Span[])endsWith(java.lang.Object,java.lang.Object[])endsWith(zipkin2.Span,zipkin2.Span[])startsWithstartsWith(java.lang.Object[])startsWith(zipkin2.Span[])doesNotHaveDuplicatesdoesNotHaveDuplicates()doesNotContaindoesNotContain(java.lang.Object[])doesNotContain(zipkin2.Span[])doesNotContainSubsequencedoesNotContainSubsequence(java.lang.Iterable)doesNotContainSubsequence(java.lang.Object[])doesNotContainSubsequence(zipkin2.Span[])containsSubsequencecontainsSubsequence(java.lang.Iterable)containsSubsequence(java.lang.Object[])containsSubsequence(zipkin2.Span[])doesNotContainSequencedoesNotContainSequence(java.lang.Iterable)doesNotContainSequence(java.lang.Object[])doesNotContainSequence(zipkin2.Span[])containsSequencecontainsSequence(java.lang.Iterable)containsSequence(java.lang.Object[])containsSequence(zipkin2.Span[])containsExactlyInAnyOrderElementsOfcontainsExactlyInAnyOrderElementsOf(java.lang.Iterable)containsExactlyInAnyOrdercontainsExactlyInAnyOrder(java.lang.Object[])containsExactlyInAnyOrder(zipkin2.Span[])containsExactlycontainsExactly(java.lang.Object[])containsExactly(zipkin2.Span[])containsOnlyOncecontainsOnlyOnce(java.lang.Object[])containsOnlyOnce(zipkin2.Span[])containsOnlyNullscontainsOnlyNulls()containsOnlycontainsOnly(java.lang.Object[])containsOnly(zipkin2.Span[])contains(java.lang.Object[])contains(zipkin2.Span[])withComparatorsForElementPropertyOrFieldTypeswithComparatorsForElementPropertyOrFieldTypes(org.assertj.core.internal.TypeComparators)Comparator<?>Map<String,Comparator<?>>withComparatorsForElementPropertyOrFieldNameswithComparatorsForElementPropertyOrFieldNames(java.util.Map)withTypeComparatorswithTypeComparators(org.assertj.core.internal.TypeComparators)withIterableswithIterables(org.assertj.core.internal.Iterables)newAbstractIterableAssertnewAbstractIterableAssert(java.lang.Iterable)getComparatorsForElementPropertyOrFieldTypesgetComparatorsForElementPropertyOrFieldTypes()getComparatorsByTypegetComparatorsByType()AbstractIterableSizeAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractIterableSizeAssert.classAbstractIterableSizeAssertAbstractIntegerAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractIntegerAssert.classAbstractIntegerAssertAbstractComparableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractComparableAssert.classAbstractComparableAssertComparableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ComparableAssert.classComparableAssertNumberAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/NumberAssert.classNumberAssertAbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>AbstractIntegerAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>>AbstractComparableAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>AbstractAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>Assert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>Descriptable<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>>ExtensionPoints<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>ComparableAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>NumberAssert<AbstractIterableSizeAssert<SELF,ACTUAL,ELEMENT,ELEMENT_ASSERT>,Integer>AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>,Integer>BiConsumer<>OTHER_ELEMENTzipSatisfyzipSatisfy(java.lang.Iterable,java.util.function.BiConsumer)Iterable<OTHER_ELEMENT>BiConsumer<? super ELEMENT,OTHER_ELEMENT>BiConsumer<? super Span,OTHER_ELEMENT>filteredOnfilteredOn(java.util.function.Predicate)navigationDescriptionnavigationDescription(java.lang.String)toAsserttoAssert(java.lang.Object,java.lang.String)toAssert(zipkin2.Span,java.lang.String)singleElementsingleElement(org.assertj.core.api.InstanceOfAssertFactory)singleElement()element(int,org.assertj.core.api.InstanceOfAssertFactory)element(int)last(org.assertj.core.api.InstanceOfAssertFactory)last()first(org.assertj.core.api.InstanceOfAssertFactory)first()filteredOnAssertionsfilteredOnAssertions(java.util.function.Consumer)filteredOn(java.util.function.Function,java.lang.Object)Function<? super ELEMENT,T>Function<? super Span,T>filteredOn(org.assertj.core.api.Condition)org.assertj.core.api.filterFilterOperator<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/filterC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/filter/FilterOperator.classFilterOperatorfilteredOn(java.lang.String,org.assertj.core.api.filter.FilterOperator)filteredOnNullfilteredOnNull(java.lang.String)filteredOn(java.lang.String,java.lang.Object)usingElementComparatorIgnoringFieldsusingElementComparatorIgnoringFields(java.lang.String[])usingComparisonStrategyusingComparisonStrategy(org.assertj.core.internal.ComparisonStrategy)usingElementComparatorOnFieldsusingElementComparatorOnFields(java.lang.String[])usingRecursiveFieldByFieldElementComparatorusingRecursiveFieldByFieldElementComparator(org.assertj.core.api.recursive.comparison.RecursiveComparisonConfiguration)usingRecursiveFieldByFieldElementComparator()usingFieldByFieldElementComparatorusingFieldByFieldElementComparator()usingComparatorForTypeusingComparatorForType(java.util.Comparator,java.lang.Class)usingComparatorForElementFieldsWithTypeusingComparatorForElementFieldsWithType(java.util.Comparator,java.lang.Class)usingComparatorForElementFieldsWithNamesusingComparatorForElementFieldsWithNames(java.util.Comparator,java.lang.String[])List<? extends Object>Collection<? extends Object>Iterable<? extends Object>AbstractListAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>AbstractIterableAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>AbstractAssert<?,List<? extends Object>>Assert<?,List<? extends Object>>ExtensionPoints<?,List<? extends Object>>flatExtractingflatExtracting(java.lang.String[])Function[]Function<? super ELEMENT,?>Function<? super ELEMENT,?>[]? extends TupleList<? extends Tuple>Collection<? extends Tuple>Iterable<? extends Tuple>ObjectAssert<Tuple>AbstractObjectAssert<ObjectAssert<Tuple>,Tuple>AbstractAssert<ObjectAssert<Tuple>,Tuple>Assert<ObjectAssert<Tuple>,Tuple>Descriptable<ObjectAssert<Tuple>>ExtensionPoints<ObjectAssert<Tuple>,Tuple>AbstractListAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>AbstractIterableAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>AbstractAssert<?,List<? extends Tuple>>Assert<?,List<? extends Tuple>>ExtensionPoints<?,List<? extends Tuple>>ObjectEnumerableAssert<?,Tuple>EnumerableAssert<?,Tuple>IndexedObjectEnumerableAssert<?,Tuple>map(java.util.function.Function[])Function<? super Span,?>Function<? super Span,?>[]extracting(java.util.function.Function[])flatExtracting(java.lang.String)ThrowingExtractor[]org.assertj.core.api.iterableThrowingExtractor<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/iterableiterableC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/iterable/ThrowingExtractor.classThrowingExtractorThrowingExtractor<>[]EXCEPTIONflatMap(org.assertj.core.api.iterable.ThrowingExtractor[])ThrowingExtractor<? super ELEMENT,?,EXCEPTION>ThrowingExtractor<? super ELEMENT,?,EXCEPTION>[]ThrowingExtractor<? super Span,?,EXCEPTION>ThrowingExtractor<? super Span,?,EXCEPTION>[]flatExtracting(org.assertj.core.api.iterable.ThrowingExtractor[])flatMap(java.util.function.Function[])flatExtracting(java.util.function.Function[])List<? extends V>ObjectAssert<V>AbstractObjectAssert<ObjectAssert<V>,V>AbstractAssert<ObjectAssert<V>,V>Assert<ObjectAssert<V>,V>Descriptable<ObjectAssert<V>>ExtensionPoints<ObjectAssert<V>,V>AbstractListAssert<?,List<? extends V>,V,ObjectAssert<V>>AbstractIterableAssert<?,List<? extends V>,V,ObjectAssert<V>>AbstractAssert<?,List<? extends V>>Assert<?,List<? extends V>>ExtensionPoints<?,List<? extends V>>ObjectEnumerableAssert<?,V>EnumerableAssert<?,V>IndexedObjectEnumerableAssert<?,V>flatMap(org.assertj.core.api.iterable.ThrowingExtractor)ThrowingExtractor<? super ELEMENT,? extends Collection<V>,EXCEPTION>Function<? super ELEMENT,? extends Collection<V>>ThrowingExtractor<? super Span,? extends Collection<V>,EXCEPTION>Function<? super Span,? extends Collection<V>>flatExtracting(org.assertj.core.api.iterable.ThrowingExtractor)flatMap(java.util.function.Function)flatExtracting(java.util.function.Function)map(org.assertj.core.api.iterable.ThrowingExtractor)ThrowingExtractor<? super ELEMENT,V,EXCEPTION>Function<? super ELEMENT,V>ThrowingExtractor<? super Span,V,EXCEPTION>Function<? super Span,V>extracting(org.assertj.core.api.iterable.ThrowingExtractor)map(java.util.function.Function)extracting(java.util.function.Function)extracting(java.lang.String[])P? extends PList<? extends P>Collection<? extends P>Iterable<? extends P>ObjectAssert<P>AbstractObjectAssert<ObjectAssert<P>,P>AbstractAssert<ObjectAssert<P>,P>Assert<ObjectAssert<P>,P>Descriptable<ObjectAssert<P>>ExtensionPoints<ObjectAssert<P>,P>AbstractListAssert<?,List<? extends P>,P,ObjectAssert<P>>AbstractIterableAssert<?,List<? extends P>,P,ObjectAssert<P>>AbstractAssert<?,List<? extends P>>Assert<?,List<? extends P>>ExtensionPoints<?,List<? extends P>>ObjectEnumerableAssert<?,P>EnumerableAssert<?,P>IndexedObjectEnumerableAssert<?,P>extracting(java.lang.String,java.lang.Class)Class<P>extractingResultOfextractingResultOf(java.lang.String,java.lang.Class)extractingResultOf(java.lang.String)extracting(java.lang.String)AbstractIterableAssert(java.lang.Iterable,java.lang.Class)AbstractIterableAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>(java.util.List,java.lang.Class)iterablesdoesNotContain(java.lang.Object,org.assertj.core.data.Index)doesNotContain(zipkin2.Span,org.assertj.core.data.Index)contains(java.lang.Object,org.assertj.core.data.Index)contains(zipkin2.Span,org.assertj.core.data.Index)satisfies(java.util.function.Consumer,org.assertj.core.data.Index)isSortedAccordingToisSortedAccordingTo(java.util.Comparator)isSortedisSorted()is(org.assertj.core.api.Condition,org.assertj.core.data.Index)has(org.assertj.core.api.Condition,org.assertj.core.data.Index)AbstractListAssert(java.util.List,java.lang.Class)AbstractListAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>(java.util.List,java.lang.Class)listsAssertFactory<ELEMENT,ELEMENT_ASSERT>FactoryBasedNavigableListAssert(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)AssertFactory<Span,ObjectAssert<Span>>FactoryBasedNavigableListAssert<ListAssert<Span>,List<? extends Span>,Span,ObjectAssert<Span>>(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)ListAssert(java.util.stream.DoubleStream)ListAssert<Span>(java.util.stream.DoubleStream)ListAssert(java.util.stream.LongStream)ListAssert<Span>(java.util.stream.LongStream)ListAssert(java.util.stream.IntStream)ListAssert<Span>(java.util.stream.IntStream)Stream<? extends ELEMENT>BaseStream<? extends ELEMENT,Stream<? extends ELEMENT>>ListAssert(java.util.stream.Stream)Stream<? extends Span>BaseStream<? extends Span,Stream<? extends Span>>ListAssert<Span>(java.util.stream.Stream)List<? extends ELEMENT>Collection<? extends ELEMENT>ListAssert(java.util.List)ListAssert<Span>(java.util.List)AbstractIntegerAssert<?>AbstractComparableAssert<?,Integer>AbstractObjectAssert<?,Integer>AbstractAssert<?,Integer>Assert<?,Integer>ExtensionPoints<?,Integer>ComparableAssert<?,Integer>NumberAssert<?,Integer>isEqualTo(int)? super IntegerCondition<? super Integer>Descriptable<Condition<? super Integer>>Comparator<? super Integer>Function<? super Integer,? extends T>Consumer<Integer>Predicate<? super Integer>AbstractAssert<?,Integer>(java.lang.Integer,java.lang.Class)withComparatorByPropertyOrFieldwithComparatorByPropertyOrField(java.util.Map)withTypeComparatorwithTypeComparator(org.assertj.core.internal.TypeComparators)AbstractObjectAssert<?,T>AbstractAssert<?,T>Assert<?,T>ExtensionPoints<?,T>newObjectAssertnewObjectAssert(java.lang.Object)returnsreturns(java.lang.Object,java.util.function.Function)Function<ACTUAL,T>Function<Integer,T>isEqualToComparingFieldByFieldRecursivelyisEqualToComparingFieldByFieldRecursively(java.lang.Object)extracting(java.util.function.Function,org.assertj.core.api.InstanceOfAssertFactory)Function<? super ACTUAL,T>Function<? super Integer,T>Function<? super ACTUAL,?>Function<? super ACTUAL,?>[]Function<? super Integer,?>Function<? super Integer,?>[]extracting(java.lang.String,org.assertj.core.api.InstanceOfAssertFactory)AbstractObjectAssert<?,?>hasFieldOrPropertyWithValuehasFieldOrPropertyWithValue(java.lang.String,java.lang.Object)hasFieldOrPropertyhasFieldOrProperty(java.lang.String)usingComparatorForFieldsusingComparatorForFields(java.util.Comparator,java.lang.String[])isEqualToComparingFieldByFieldisEqualToComparingFieldByField(java.lang.Object)hasAllNullFieldsOrPropertiesExcepthasAllNullFieldsOrPropertiesExcept(java.lang.String[])hasNoNullFieldsOrPropertiesExcepthasNoNullFieldsOrPropertiesExcept(java.lang.String[])hasAllNullFieldsOrPropertieshasAllNullFieldsOrProperties()hasNoNullFieldsOrPropertieshasNoNullFieldsOrProperties()isEqualToIgnoringGivenFieldsisEqualToIgnoringGivenFields(java.lang.Object,java.lang.String[])isEqualToComparingOnlyGivenFieldsisEqualToComparingOnlyGivenFields(java.lang.Object,java.lang.String[])isEqualToIgnoringNullFieldsisEqualToIgnoringNullFields(java.lang.Object)AbstractObjectAssert(java.lang.Object,java.lang.Class)AbstractObjectAssert<?,Integer>(java.lang.Integer,java.lang.Class)isStrictlyBetweenisStrictlyBetween(java.lang.Comparable,java.lang.Comparable)isStrictlyBetween(java.lang.Integer,java.lang.Integer)isBetweenisBetween(java.lang.Comparable,java.lang.Comparable)isBetween(java.lang.Integer,java.lang.Integer)isGreaterThanOrEqualToisGreaterThanOrEqualTo(java.lang.Comparable)isGreaterThanOrEqualTo(java.lang.Integer)isGreaterThanisGreaterThan(java.lang.Comparable)isGreaterThan(java.lang.Integer)isLessThanOrEqualToisLessThanOrEqualTo(java.lang.Comparable)isLessThanOrEqualTo(java.lang.Integer)isLessThanisLessThan(java.lang.Comparable)isLessThan(java.lang.Integer)isNotEqualByComparingToisNotEqualByComparingTo(java.lang.Comparable)isNotEqualByComparingTo(java.lang.Integer)isEqualByComparingToisEqualByComparingTo(java.lang.Comparable)isEqualByComparingTo(java.lang.Integer)AbstractComparableAssert(java.lang.Comparable,java.lang.Class)AbstractComparableAssert<?,Integer>(java.lang.Integer,java.lang.Class)comparablesisNotCloseToisNotCloseTo(java.lang.Number,org.assertj.core.data.Percentage)isNotCloseTo(java.lang.Integer,org.assertj.core.data.Percentage)isCloseToisCloseTo(java.lang.Number,org.assertj.core.data.Percentage)isCloseTo(java.lang.Integer,org.assertj.core.data.Percentage)org.assertj.core.dataOffset<ACTUAL>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/dataC:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/data/Offset.classOffsetisNotCloseTo(java.lang.Number,org.assertj.core.data.Offset)Offset<Integer>isNotCloseTo(java.lang.Integer,org.assertj.core.data.Offset)isCloseTo(java.lang.Number,org.assertj.core.data.Offset)isCloseTo(java.lang.Integer,org.assertj.core.data.Offset)isStrictlyBetween(java.lang.Number,java.lang.Number)isBetween(java.lang.Number,java.lang.Number)isNotPositiveisNotPositive()isNotNegativeisNotNegative()isNegativeisNegative()isPositiveisPositive()isOneisOne()isNotZeroisNotZero()isZeroisZero()isNotCloseTo(int,org.assertj.core.data.Percentage)isCloseTo(int,org.assertj.core.data.Percentage)isNotCloseTo(int,org.assertj.core.data.Offset)isCloseTo(int,org.assertj.core.data.Offset)isGreaterThanOrEqualTo(int)isGreaterThan(int)isLessThanOrEqualTo(int)isLessThan(int)isOddisOdd()isEvenisEven()isNotEqualTo(int)isEqualTo(long)AbstractIntegerAssert(java.lang.Integer,java.lang.Class)AbstractIntegerAssert<?>(java.lang.Integer,java.lang.Class)integersmalformed1"[\"='"["='malformed2counterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collector/activemq/ITActiveMQCollector$1.classITActiveMQCollector$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/Call$Base.classErrorHandler<Void>FlatMapper<Void,R>Mapper<Void,R>Call<Void>()Base<Void>()"storage fell over"storage fell overlatchspanConsumerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/activemq/src/test/java/zipkin2/collector/activemq/ITActiveMQCollector$2.classITActiveMQCollector$2spanConsumer()delegate() we can be pretty certain ActiveMQ isn't running on localhost port 80The {@code toString()} of {@link Component} implementations appear in health check endpoints.Since these are likely to be exposed in logs and other monitoring tools, care should be takento ensure {@code toString()} output is a reasonable length and does not contain sensitiveinformation.Ensures list encoding works: a json encoded list of spansEnsures list encoding works: a version 2 json list of spansEnsures list encoding works: proto3 ListOfSpansEnsures malformed spans don't hang the collector screwed up json only malformed, not emptyGuards against errors that leak from storage, such as InvalidQueryException tossed on error the only way we could read this, is if the malformed span was skipped. storage failure not message failure only one dropped await the other one as this proves 2 threads are in use empty bodies don't go to storage 2 + empty body for warmup prevent test flakes by having each run in an individual queueC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/coreCollector: Core Libraryorg.slf4jslf4j-api${slf4j.version} TODO: abandoned dependency uk.org.lidaliaslf4j-test1.2.0C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/Collector.javaCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/srczipkin2.collectorappendSpanIdsappendSpanIds(java.util.List,java.lang.StringBuilder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/Collector.classhandleError(java.lang.Throwable,java.util.function.Supplier,zipkin2.Callback)handleStorageErrorhandleStorageError(java.util.List,java.lang.Throwable,zipkin2.Callback)handleDecodeErrorhandleDecodeError(java.lang.Throwable,zipkin2.Callback)samplesample(java.util.List)idStringidString(zipkin2.Span)storestore(java.util.List,zipkin2.Callback)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/codec/BytesDecoder.classdecodeList(zipkin2.codec.BytesDecoder,byte[])Collector(zipkin2.collector.Collector.Builder)NOOP_CALLBACKC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/Collector$1.classCollector$1loggingClass"loggingClass == null"loggingClass == nullMap<String,?>?[]? super ?Class<? super ?>TypeVariable<Class<?>>TypeVariable<Class<?>>[]Builder(org.slf4j.Logger)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target/classes/zipkin2/collector/Collector$Builder.classCollector$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target/classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target"storage == null"storage == null"sampler == null"sampler == null"logger == null"logger == nullexecute(java.lang.Runnable)executorsampledSpansunexpectedencodedserializedSpans"/"/sampleddroppedStoreSpansStoreSpans(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/target/classes/zipkin2/collector/Collector$StoreSpans.classCollector$StoreSpans"StoreSpans("StoreSpans(")")"Cannot decode spans"Cannot decode spans"Cannot store spans "Cannot store spans defaultLogMessage"Truncated"Truncated"%s due to %s(%s)"%s due to %s(%s)Map<String,? extends Throwable>Throwable[]? extends Throwable[]Constructor<? extends Throwable>? super ? extends ThrowableClass<? super ? extends Throwable>TypeVariable<Class<? extends Throwable>>TypeVariable<Class<? extends Throwable>>[]"[""..."..."]"This component takes action on spans received from a transport. This includes deserializing,sampling and scheduling for storage.<p>Callbacks passed do not propagate to the storage layer. They only return success or failuresbefore storage is attempted. This ensures that calling threads are disconnected from storagethreads. not final for mockNeeded to scope this to the correct logging categorySets {@link {@link CollectorComponent.Builder#storage(StorageComponent)}}Sets {@link {@link CollectorComponent.Builder#metrics(CollectorMetrics)}}Sets {@link {@link CollectorComponent.Builder#sampler(CollectorSampler)}}Calls to get the storage component could be blocking. This ensures requests that blockcallers (such as http or gRPC) do not add additional load during such events.the executor used to enqueue the storage request. In order to ensure callers are not blocked, we swap callbacks when we get to the storage phase of this process. Here, we create a callback whose sole purpose is classifying later errors on this bundle of spans in the same log category. This allows people to only turn on debug logging in one place. ensure if a future is supplied we always set value or errorLike {@link #acceptSpans(byte[], BytesDecoder, Callback)}, except using a byte buffer.Before calling this, call {@link CollectorMetrics#incrementMessages()}, and {@linkCollectorMetrics#incrementBytes(int)}. Do not call any other metrics callbacks as those arehandled internal to this method.not empty message While unexpected, invoking the storage command could raise an error synchronously. When that's the case, we wouldn't have invoked callback.onSuccess, so we need to handle the error here.When storing spans, an exception can be raised before or after the fact. This adds context ofspan ids to give logs more relevance. The exception could be related to a span being huge. Instead of filling logs, print trace id, span id pairs We have specific code that customizes log messages. Use this when the case. otherwise, beautify the message TODO: this logic needs to be redone as service names are more important than span IDs. Also, span IDs repeat between client and server!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorComponent.javaCollectorComponentThe collector represents the server-side of a transport. Its job is to take spans from atransport and store ones it has sampled.<p>Call {@link #start()} to start collecting spans.Starts the server-side of the transport, typically listening or looking up a queue.<p>Many implementations block the calling thread until services are available.Once spans are sampled, they are {@link SpanConsumer#accept(List)} queued for storage} usingthis component.Aggregates and reports collection metrics to a monitoring system. Should be {@linkCollectorMetrics#forTransport(String) scoped to this transport}. Defaults to no-op.{@link CollectorSampler#isSampled(String, boolean) samples spans} to reduce load on thestorage system. Defaults to always sample.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorMetrics.javaCollectorMetricsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorMetrics$1.classCollectorMetrics$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorMetrics.classincrementSpansDroppedincrementSpansDropped(int)incrementBytesincrementBytes(int)incrementSpansincrementSpans(int)incrementMessagesDroppedincrementMessagesDropped()incrementMessagesincrementMessages()forTransportforTransport(java.lang.String)transportTypequantity"NoOpCollectorMetrics"NoOpCollectorMetricsInstrumented applications report spans over a transport such as Kafka. Zipkin collectors receivethese messages, {@link SpanBytesDecoder#decode(byte[], Collection) decoding them into spans},{@link CollectorSampler#isSampled(String, boolean) apply sampling}, and {@linkSpanConsumer#accept(List) queues them for storage}.<p>Callbacks on this type are invoked by zipkin collectors to improve the visibility of thesystem. A typical implementation will report metrics to a telemetry system for analysis andreporting.<h3>Spans Collected vs Queryable Spans</h3><p>A span queried may be comprised of multiple spans collected. While instrumentation shouldreport complete spans, Instrumentation often patch the same span twice, ex adding annotations.Also, RPC spans include at least 2 messages due to the client and the server reportingseparately. Finally, some storage components merge patches at ingest. For these reasons, youshould be cautious to alert on queryable spans vs stored spans, unless you control theinstrumentation in such a way that queryable spans/message is reliable.<h3>Key Relationships</h3><p>The following relationships can be used to consider health of the tracing system.<pre><li>Successful Messages = {@link #incrementMessages() Accepted messages} -{@link #incrementMessagesDropped() Dropped messages}. Alert when this is less than amount ofmessages sent from instrumentation.</li><li>Stored spans &lt;= {@link #incrementSpans(int) Accepted spans} - {@link#incrementSpansDropped(int) Dropped spans}. Alert when this drops below the{@link CollectorSampler#isSampled(long, boolean) collection-tier sample rate}.</li></pre>Those who wish to partition metrics by transport can call this method to include the transporttype in the backend metric key.<p>For example, an implementation may by default report {@link #incrementSpans(int) incrementedspans} to the key "zipkin.collector.span.accepted". When {@code metrics.forTransport("kafka"}is called, the counter would report to "zipkin.collector.kafka.span.accepted"ex "http", "rabbitmq", "kafka"Increments count of messages received, which contain 0 or more spans. Ex POST requests or Kafkamessages consumed.Increments count of messages that could not be read. Ex malformed content, or peer disconnect.Increments the count of spans read from a successful message. When bundling is used, acceptedspans will be a larger number than successful messages.Increments the number of bytes containing serialized spans in a message.<p>Note: this count should relate to the raw data structures, like json or thrift, and discountcompression, enveloping, etc.Increments the count of spans dropped for any reason. For example, failure queueing to storageor sampling decisions.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorSampler.javaCollectorSampler1.0frateboundary"rate should be between 0 and 1: was "rate should be between 0 and 1: was C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorSampler$1.classCollectorSampler$1boundary()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/CollectorSampler.classhexTraceId"CollectorSampler("CollectorSampler(CollectorSampler decides if a particular trace should be "sampled", i.e. recorded in permanentstorage. This involves a consistent decision based on the span's trace ID with one notableexception: {@link Span#debug() Debug} spans are always stored.<h3>Implementation</h3><p>Accepts a percentage of trace ids by comparing their absolute value against a potentiallydynamic boundary. eg {@code isSampled == abs(traceId) <= boundary}<p>While idempotent, this implementation's sample rate won't exactly match the input rate becausetrace ids are not perfectly distributed across 64bits. For example, tests have shown an errorrate of 3% when 100K trace ids are {@link java.util.Random#nextLong random}.Returns a trace ID sampler with the indicated rate.minimum sample rate is 0.0001, or 0.01% of traces safe cast as less <= 1Returns true if spans with this trace ID should be recorded to storage.<p>Zipkin v1 allows storage-layer sampling, which can help prevent spikes in traffic fromoverloading the system. Debug spans are always stored.<p>This uses only the lower 64 bits of the trace ID as instrumentation still send mixed traceID width.the lower 64 bits of the span's trace ID are checked against the boundarywhen true, always passes sampling The absolute value of Long.MIN_VALUE is larger than a long, so Math.abs returns identity. This converts to MAX_VALUE to avoid always dropping when traceId == Long.MIN_VALUEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/InMemoryCollectorMetrics.javaInMemoryCollectorMetricsscope(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/main/java/zipkin2/collector/InMemoryCollectorMetrics.classincrementincrement(java.lang.String,int)ConcurrentHashMap<String,AtomicInteger>AbstractMap<String,AtomicInteger>Map<String,AtomicInteger>ConcurrentMap<String,AtomicInteger>InMemoryCollectorMetrics(java.util.concurrent.ConcurrentHashMap,java.lang.String)spansDroppedmessagesDroppedmessagesConcurrentHashMap<String,AtomicInteger>()? super AtomicInteger? extends AtomicIntegerBiFunction<? super AtomicInteger,? super AtomicInteger,? extends AtomicInteger>merge(java.lang.String,java.util.concurrent.atomic.AtomicInteger,java.util.function.BiFunction)BiFunction<? super String,? super AtomicInteger,? extends AtomicInteger>Function<? super String,? extends AtomicInteger>replace(java.lang.String,java.util.concurrent.atomic.AtomicInteger)replace(java.lang.String,java.util.concurrent.atomic.AtomicInteger,java.util.concurrent.atomic.AtomicInteger)putIfAbsent(java.lang.String,java.util.concurrent.atomic.AtomicInteger)BiConsumer<? super String,? super AtomicInteger>getOrDefault(java.lang.Object,java.util.concurrent.atomic.AtomicInteger)Entry<String,AtomicInteger>Set<Entry<String,AtomicInteger>>Collection<Entry<String,AtomicInteger>>Iterable<Entry<String,AtomicInteger>>Collection<AtomicInteger>Iterable<AtomicInteger>Map<? extends String,? extends AtomicInteger>put(java.lang.String,java.util.concurrent.atomic.AtomicInteger)AbstractMap<String,AtomicInteger>()ToIntFunction<Entry<String,AtomicInteger>>ToLongFunction<Entry<String,AtomicInteger>>ToDoubleFunction<Entry<String,AtomicInteger>>Function<Entry<String,AtomicInteger>,? extends U>? extends Entry<String,AtomicInteger>BiFunction<Entry<String,AtomicInteger>,Entry<String,AtomicInteger>,? extends Entry<String,AtomicInteger>>? super Entry<String,AtomicInteger>Consumer<? super Entry<String,AtomicInteger>>ToIntFunction<? super AtomicInteger>ToLongFunction<? super AtomicInteger>ToDoubleFunction<? super AtomicInteger>Function<? super AtomicInteger,? extends U>Consumer<? super AtomicInteger>ToIntBiFunction<? super String,? super AtomicInteger>ToLongBiFunction<? super String,? super AtomicInteger>ToDoubleBiFunction<? super String,? super AtomicInteger>BiFunction<? super String,? super AtomicInteger,? extends U>Node<String,AtomicInteger>Node<String,AtomicInteger>[]KeySetView<String,AtomicInteger>CollectionView<String,AtomicInteger,String>keySet(java.util.concurrent.atomic.AtomicInteger)Enumeration<AtomicInteger>Enumeration<String>Predicate<? super AtomicInteger>Predicate<? super Entry<String,AtomicInteger>>replaceNode(java.lang.Object,java.util.concurrent.atomic.AtomicInteger,java.lang.Object)putVal(java.lang.String,java.util.concurrent.atomic.AtomicInteger,boolean)ConcurrentHashMap<String,AtomicInteger>(int,float,int)ConcurrentHashMap<String,AtomicInteger>(int,float)ConcurrentHashMap<String,AtomicInteger>(java.util.Map)ConcurrentHashMap<String,AtomicInteger>(int)transport"messages""messagesDropped""bytes""spans""spansDropped""transportType == null"transportType == nullmetricoldValueupdate"." won race creating the entry won race updatingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorSamplerTest.javaCollectorSamplerTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/testwithPercentagelotsOfSpanslotsOfSpans()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorSamplerTest.class0.1f0.1"8000000000000000"8000000000000000"7fffffffffffffff"7fffffffffffffff0.0f0.0sampleRateAbstractLongAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractLongAssert.classAbstractLongAssertAbstractComparableAssert<?,Long>AbstractObjectAssert<?,Long>AbstractAssert<?,Long>Assert<?,Long>ExtensionPoints<?,Long>ComparableAssert<?,Long>NumberAssert<?,Long>AbstractLongAssert<>isCloseTo(long,org.assertj.core.data.Percentage)Condition<? super Long>Descriptable<Condition<? super Long>>Function<? super Long,? extends T>Consumer<Long>AbstractAssert<?,Long>(java.lang.Long,java.lang.Class)Function<Long,T>Function<? super Long,T>Function<? super Long,?>Function<? super Long,?>[]AbstractObjectAssert<?,Long>(java.lang.Long,java.lang.Class)isStrictlyBetween(java.lang.Long,java.lang.Long)isBetween(java.lang.Long,java.lang.Long)isGreaterThanOrEqualTo(java.lang.Long)isGreaterThan(java.lang.Long)isLessThanOrEqualTo(java.lang.Long)isLessThan(java.lang.Long)isNotEqualByComparingTo(java.lang.Long)isEqualByComparingTo(java.lang.Long)AbstractComparableAssert<?,Long>(java.lang.Long,java.lang.Class)isNotCloseTo(java.lang.Long,org.assertj.core.data.Percentage)isCloseTo(java.lang.Long,org.assertj.core.data.Percentage)Offset<Long>isNotCloseTo(java.lang.Long,org.assertj.core.data.Offset)isCloseTo(java.lang.Long,org.assertj.core.data.Offset)isNotCloseTo(long,org.assertj.core.data.Percentage)isNotCloseTo(long,org.assertj.core.data.Offset)isCloseTo(long,org.assertj.core.data.Offset)isGreaterThanOrEqualTo(long)isGreaterThan(long)isLessThanOrEqualTo(long)isLessThan(long)isNotEqualTo(long)AbstractLongAssert(java.lang.Long,java.lang.Class)AbstractLongAssert<?>(java.lang.Long,java.lang.Class)longscountcount()onCloseonClose(java.lang.Runnable)unorderedunordered()parallelparallel()sequentialsequential()isParallelisParallel()concatconcat(java.util.stream.Stream,java.util.stream.Stream)Stream<? extends T>BaseStream<? extends T,Stream<? extends T>>generategenerate(java.util.function.Supplier)Supplier<? extends T>Predicate<>iterateiterate(java.lang.Object,java.util.function.Predicate,java.util.function.UnaryOperator)iterate(java.lang.Object,java.util.function.UnaryOperator)ofNullableofNullable(java.lang.Object)empty()Builder<>C:/modules/java.base/java/util/stream/Stream$Builder.classStream$BuilderBuilder<T>Optional<T>findAnyfindAny()Optional<Span>findFirstfindFirst()maxmax(java.util.Comparator)minmin(java.util.Comparator)Collector<>C:/modules/java.base/java/util/stream/Collector.classcollectcollect(java.util.stream.Collector)Collector<? super T,A,R>Collector<? super Span,A,R>collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)Supplier<R>BiConsumer<R,? super T>BiConsumer<R,R>BiConsumer<R,? super Span>reduce(java.lang.Object,java.util.function.BiFunction,java.util.function.BinaryOperator)BiFunction<U,? super T,U>BinaryOperator<U>BiFunction<U,U,U>BiFunction<U,? super Span,U>BinaryOperator<T>BiFunction<T,T,T>reduce(java.util.function.BinaryOperator)BinaryOperator<Span>BiFunction<Span,Span,Span>reduce(java.lang.Object,java.util.function.BinaryOperator)reduce(zipkin2.Span,java.util.function.BinaryOperator)IntFunction<A[]>forEachOrderedforEachOrdered(java.util.function.Consumer)dropWhiledropWhile(java.util.function.Predicate)takeWhiletakeWhile(java.util.function.Predicate)skip(long)limit(long)peek(java.util.function.Consumer)sortedsorted(java.util.Comparator)sorted()distinctdistinct()? extends DoubleStreamFunction<? super T,? extends DoubleStream>flatMapToDoubleflatMapToDouble(java.util.function.Function)Function<? super Span,? extends DoubleStream>? extends LongStreamFunction<? super T,? extends LongStream>flatMapToLongflatMapToLong(java.util.function.Function)Function<? super Span,? extends LongStream>? extends IntStreamFunction<? super T,? extends IntStream>flatMapToIntflatMapToInt(java.util.function.Function)Function<? super Span,? extends IntStream>Stream<R>BaseStream<R,Stream<R>>? extends RStream<? extends R>BaseStream<? extends R,Stream<? extends R>>? extends Stream<? extends R>Function<? super T,? extends Stream<? extends R>>Function<? super Span,? extends Stream<? extends R>>mapToDoublemapToDouble(java.util.function.ToDoubleFunction)mapToLongmapToLong(java.util.function.ToLongFunction)mapToIntmapToInt(java.util.function.ToIntFunction)Function<? super T,? extends R>Function<? super Span,? extends R>filter(java.util.function.Predicate)Predicate<Span>Predicate<T>notnot(java.util.function.Predicate)isEqualisEqual(java.lang.Object)oror(java.util.function.Predicate)negatenegate()andand(java.util.function.Predicate)test(java.lang.Object)test(zipkin2.Span)sampler1sampler2ObjectArrayAssert<Object>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ObjectArrayAssert.classObjectArrayAssertAbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractObjectArrayAssert.classAbstractObjectArrayAssertAbstractAssert<ObjectArrayAssert<Object>,Object[]>Assert<ObjectArrayAssert<Object>,Object[]>Descriptable<ObjectArrayAssert<Object>>ExtensionPoints<ObjectArrayAssert<Object>,Object[]>IndexedObjectEnumerableAssert<AbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>,Object>ObjectEnumerableAssert<AbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>,Object>EnumerableAssert<AbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>,Object>ArraySortedAssert<AbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>,Object>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/ArraySortedAssert.classArraySortedAssertObjectArrayAssert<>AbstractObjectArrayAssert<>ArraySortedAssert<>? super Object[]Condition<? super Object[]>Descriptable<Condition<? super Object[]>>Comparator<? super Object[]>Function<? super Object[],? extends T>Consumer<Object[]>Predicate<? super Object[]>AbstractAssert<ObjectArrayAssert<Object>,Object[]>(java.lang.Object[],java.lang.Class)Comparator<? super Object>Predicate<? super Object>Consumer<? super Object>Condition<? super Object>Descriptable<Condition<? super Object>>newObjectArrayAssertnewObjectArrayAssert(java.lang.Object[])withObjectArrayswithObjectArrays(org.assertj.core.internal.ObjectArrays)zipSatisfy(java.lang.Object[],java.util.function.BiConsumer)OTHER_ELEMENT[]BiConsumer<? super Object,OTHER_ELEMENT>Function<? super Object,T>ThrowingExtractor<? super ELEMENT,C,EXCEPTION>Function<? super ELEMENT,C>ThrowingExtractor<? super Object,C,EXCEPTION>Function<? super Object,C>Function<? super Object,?>Function<? super Object,?>[]ThrowingExtractor<? super Object,V,EXCEPTION>Function<? super Object,V>List<? extends U>Collection<? extends U>Iterable<? extends U>ObjectAssert<U>AbstractObjectAssert<ObjectAssert<U>,U>AbstractAssert<ObjectAssert<U>,U>Assert<ObjectAssert<U>,U>Descriptable<ObjectAssert<U>>ExtensionPoints<ObjectAssert<U>,U>AbstractListAssert<?,List<? extends U>,U,ObjectAssert<U>>AbstractIterableAssert<?,List<? extends U>,U,ObjectAssert<U>>AbstractAssert<?,List<? extends U>>Assert<?,List<? extends U>>ExtensionPoints<?,List<? extends U>>ObjectEnumerableAssert<?,U>EnumerableAssert<?,U>IndexedObjectEnumerableAssert<?,U>Function<? super ELEMENT,U>Function<? super Object,U>Comparator<C>Class<C>AbstractObjectArrayAssert(java.lang.Object[],java.lang.Class)AbstractObjectArrayAssert<ObjectArrayAssert<Object>,Object>(java.lang.Object[],java.lang.Class)comparatorsForElementPropertyOrFieldTypescomparatorsForElementPropertyOrFieldNamescomparatorsByTypearraysAtomicReferenceArray<ELEMENT>C:/modules/java.base/java/util/concurrent/atomic/AtomicReferenceArray.classAtomicReferenceArrayObjectArrayAssert(java.util.concurrent.atomic.AtomicReferenceArray)AtomicReferenceArray<Object>ObjectArrayAssert<Object>(java.util.concurrent.atomic.AtomicReferenceArray)ObjectArrayAssert(java.lang.Object[])ObjectArrayAssert<Object>(java.lang.Object[])Class<IllegalArgumentException>"rate should be between 0 and 1: was -1.0"rate should be between 0 and 1: was -1.0"rate should be between 0 and 1: was 1.1"rate should be between 0 and 1: was 1.11.1f1.1Math.abs("8000000000000000") returns a negative, we coerse to "7fffffffffffffff" to avoidalways dropping when trace_id == "8000000000000000"The collector needs to apply the same decision to incremental updates in a trace.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorTest.javaCollectorTestanymockspyverifyNoMoreInteractionswhenCLIENT_SPANTRACEassertDebugLogIsassertDebugLogIs(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorTest.classunprefixIdStringunprefixIdString(java.lang.String)testLoggerClass<Callback<>>Class<CollectorMetrics>org.mockito.stubbingOngoingStubbing<String>C:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jarmockito-core-3.6.28C:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28C:/Users/Semiu/.m2/repository/org/mockito/mockito-coreC:/Users/Semiu/.m2/repository/org/mockitomockitoC:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar/orgC:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar/org/mockitoC:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar/org/mockito/stubbingstubbingC:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar/org/mockito/stubbing/OngoingStubbing.classOngoingStubbingOngoingStubbing<>thenReturnthenReturn(java.lang.String)MgetMockgetMock()Answer<?>C:/Users/Semiu/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar/org/mockito/stubbing/Answer.classAnswerthenthen(org.mockito.stubbing.Answer)thenAnswerthenAnswer(org.mockito.stubbing.Answer)thenCallRealMethodthenCallRealMethod()Class<? extends Throwable>[]thenThrowthenThrow(java.lang.Class,java.lang.Class[])thenThrow(java.lang.Class)thenThrow(java.lang.Throwable[])thenReturn(java.lang.Object,java.lang.Object[])thenReturn(java.lang.String,java.lang.String[])thenReturn(java.lang.Object)"1"ListAssert<LoggingEvent>? extends LoggingEventList<? extends LoggingEvent>Collection<? extends LoggingEvent>Iterable<? extends LoggingEvent>ObjectAssert<LoggingEvent>AbstractObjectAssert<ObjectAssert<LoggingEvent>,LoggingEvent>AbstractAssert<ObjectAssert<LoggingEvent>,LoggingEvent>Assert<ObjectAssert<LoggingEvent>,LoggingEvent>Descriptable<ObjectAssert<LoggingEvent>>ExtensionPoints<ObjectAssert<LoggingEvent>,LoggingEvent>FactoryBasedNavigableListAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>AbstractListAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>AbstractIterableAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>AbstractAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>>Assert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>>Descriptable<ListAssert<LoggingEvent>>ExtensionPoints<ListAssert<LoggingEvent>,List<? extends LoggingEvent>>ObjectEnumerableAssert<ListAssert<LoggingEvent>,LoggingEvent>EnumerableAssert<ListAssert<LoggingEvent>,LoggingEvent>IndexedObjectEnumerableAssert<ListAssert<LoggingEvent>,LoggingEvent>? super List<? extends LoggingEvent>Condition<? super List<? extends LoggingEvent>>Descriptable<Condition<? super List<? extends LoggingEvent>>>Comparator<? super List<? extends LoggingEvent>>Function<? super List<? extends LoggingEvent>,? extends T>Consumer<List<? extends LoggingEvent>>Predicate<? super List<? extends LoggingEvent>>AbstractAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>>(java.util.List,java.lang.Class)? super LoggingEventComparator<? super LoggingEvent>Predicate<? super LoggingEvent>LoggingEvent[]containsAnyOf(uk.org.lidalia.slf4jtest.LoggingEvent[])Consumer<? super LoggingEvent>isSubsetOf(uk.org.lidalia.slf4jtest.LoggingEvent[])Condition<? super LoggingEvent>Descriptable<Condition<? super LoggingEvent>>endsWith(uk.org.lidalia.slf4jtest.LoggingEvent[])endsWith(uk.org.lidalia.slf4jtest.LoggingEvent,uk.org.lidalia.slf4jtest.LoggingEvent[])startsWith(uk.org.lidalia.slf4jtest.LoggingEvent[])doesNotContain(uk.org.lidalia.slf4jtest.LoggingEvent[])doesNotContainSubsequence(uk.org.lidalia.slf4jtest.LoggingEvent[])containsSubsequence(uk.org.lidalia.slf4jtest.LoggingEvent[])doesNotContainSequence(uk.org.lidalia.slf4jtest.LoggingEvent[])containsSequence(uk.org.lidalia.slf4jtest.LoggingEvent[])containsExactlyInAnyOrder(uk.org.lidalia.slf4jtest.LoggingEvent[])containsExactly(uk.org.lidalia.slf4jtest.LoggingEvent[])containsOnlyOnce(uk.org.lidalia.slf4jtest.LoggingEvent[])containsOnly(uk.org.lidalia.slf4jtest.LoggingEvent[])contains(uk.org.lidalia.slf4jtest.LoggingEvent[])AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>,Integer>BiConsumer<? super LoggingEvent,OTHER_ELEMENT>toAssert(uk.org.lidalia.slf4jtest.LoggingEvent,java.lang.String)Function<? super LoggingEvent,T>Function<? super LoggingEvent,?>Function<? super LoggingEvent,?>[]ThrowingExtractor<? super LoggingEvent,?,EXCEPTION>ThrowingExtractor<? super LoggingEvent,?,EXCEPTION>[]ThrowingExtractor<? super LoggingEvent,? extends Collection<V>,EXCEPTION>Function<? super LoggingEvent,? extends Collection<V>>ThrowingExtractor<? super LoggingEvent,V,EXCEPTION>Function<? super LoggingEvent,V>AbstractIterableAssert<ListAssert<LoggingEvent>,List<? extends LoggingEvent>,LoggingEvent,ObjectAssert<LoggingEvent>>(java.util.List,java.lang.Class)com.google.common.collectImmutableList<LoggingEvent>C:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jarguava-14.0.1C:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.114.0.1C:/Users/Semiu/.m2/repository/com/google/guava/guavaguavaC:/Users/Semiu/.m2/repository/com/google/guavaC:/Users/Semiu/.m2/repository/com/googlegoogleC:/Users/Semiu/.m2/repository/comcomC:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/comC:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/com/googleC:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/com/google/commoncommonC:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/com/google/common/collectC:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/com/google/common/collect/ImmutableList.classImmutableListImmutableCollection<LoggingEvent>C:/Users/Semiu/.m2/repository/com/google/guava/guava/14.0.1/guava-14.0.1.jar/com/google/common/collect/ImmutableCollection.classImmutableCollectionCollection<LoggingEvent>Iterable<LoggingEvent>List<LoggingEvent>ImmutableList<>ImmutableCollection<>ListAssert<List<Span>>List<? extends List<Span>>ObjectAssert<List<Span>>AbstractObjectAssert<ObjectAssert<List<Span>>,List<Span>>AbstractAssert<ObjectAssert<List<Span>>,List<Span>>Assert<ObjectAssert<List<Span>>,List<Span>>Descriptable<ObjectAssert<List<Span>>>ExtensionPoints<ObjectAssert<List<Span>>,List<Span>>FactoryBasedNavigableListAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>AbstractListAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>AbstractIterableAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>AbstractAssert<ListAssert<List<Span>>,List<? extends List<Span>>>Assert<ListAssert<List<Span>>,List<? extends List<Span>>>Descriptable<ListAssert<List<Span>>>ExtensionPoints<ListAssert<List<Span>>,List<? extends List<Span>>>ObjectEnumerableAssert<ListAssert<List<Span>>,List<Span>>EnumerableAssert<ListAssert<List<Span>>,List<Span>>IndexedObjectEnumerableAssert<ListAssert<List<Span>>,List<Span>>? super List<? extends List<Span>>Condition<? super List<? extends List<Span>>>Descriptable<Condition<? super List<? extends List<Span>>>>Comparator<? super List<? extends List<Span>>>Function<? super List<? extends List<Span>>,? extends T>Consumer<List<? extends List<Span>>>Predicate<? super List<? extends List<Span>>>AbstractAssert<ListAssert<List<Span>>,List<? extends List<Span>>>(java.util.List,java.lang.Class)List[]List<Span>[]containsAnyOf(java.util.List[])isSubsetOf(java.util.List[])Condition<? super List<Span>>Descriptable<Condition<? super List<Span>>>endsWith(java.util.List[])endsWith(java.util.List,java.util.List[])startsWith(java.util.List[])doesNotContain(java.util.List[])doesNotContainSubsequence(java.util.List[])containsSubsequence(java.util.List[])doesNotContainSequence(java.util.List[])containsSequence(java.util.List[])containsExactlyInAnyOrder(java.util.List[])containsExactly(java.util.List[])containsOnlyOnce(java.util.List[])containsOnly(java.util.List[])contains(java.util.List[])AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>,Integer>BiConsumer<? super List<Span>,OTHER_ELEMENT>toAssert(java.util.List,java.lang.String)Function<? super List<Span>,T>Function<? super List<Span>,?>Function<? super List<Span>,?>[]ThrowingExtractor<? super List<Span>,?,EXCEPTION>ThrowingExtractor<? super List<Span>,?,EXCEPTION>[]ThrowingExtractor<? super List<Span>,? extends Collection<V>,EXCEPTION>Function<? super List<Span>,? extends Collection<V>>ThrowingExtractor<? super List<Span>,V,EXCEPTION>Function<? super List<Span>,V>AbstractIterableAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>(java.util.List,java.lang.Class)Class<RuntimeException>doesNotContain(java.util.List,org.assertj.core.data.Index)contains(java.util.List,org.assertj.core.data.Index)AbstractListAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>(java.util.List,java.lang.Class)AssertFactory<List<Span>,ObjectAssert<List<Span>>>FactoryBasedNavigableListAssert<ListAssert<List<Span>>,List<? extends List<Span>>,List<Span>,ObjectAssert<List<Span>>>(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)ListAssert<List<Span>>(java.util.stream.DoubleStream)ListAssert<List<Span>>(java.util.stream.LongStream)ListAssert<List<Span>>(java.util.stream.IntStream)Stream<? extends List<Span>>BaseStream<? extends List<Span>,Stream<? extends List<Span>>>ListAssert<List<Span>>(java.util.stream.Stream)ListAssert<List<Span>>(java.util.List)"Malformed reading List<Span> from json"Malformed reading List<Span> from jsonClass<StorageComponent>"storage disabled"storage disabledOngoingStubbing<SpanConsumer>SpanConsumer[]thenReturn(zipkin2.storage.SpanConsumer,zipkin2.storage.SpanConsumer[])thenReturn(zipkin2.storage.SpanConsumer)"Cannot store spans [1, 2, 2, ...] due to RuntimeException(storage disabled)"Cannot store spans [1, 2, 2, ...] due to RuntimeException(storage disabled)"3"ObjectAssert<StoreSpans>AbstractObjectAssert<ObjectAssert<StoreSpans>,StoreSpans>AbstractAssert<ObjectAssert<StoreSpans>,StoreSpans>Assert<ObjectAssert<StoreSpans>,StoreSpans>Descriptable<ObjectAssert<StoreSpans>>ExtensionPoints<ObjectAssert<StoreSpans>,StoreSpans>? super StoreSpansCondition<? super StoreSpans>Descriptable<Condition<? super StoreSpans>>Comparator<? super StoreSpans>Function<? super StoreSpans,? extends T>Consumer<StoreSpans>Predicate<? super StoreSpans>AbstractAssert<ObjectAssert<StoreSpans>,StoreSpans>(zipkin2.collector.Collector.StoreSpans,java.lang.Class)"StoreSpans([1, 3])"StoreSpans([1, 3])Condition<? super String>Descriptable<Condition<? super String>>Function<? super String,? extends T>Consumer<String>AbstractAssert<?,String>(java.lang.String,java.lang.Class)"StoreSpans([1, 1, 2, ...])"StoreSpans([1, 1, 2, ...])"Cannot store spans [1, 1, 2, ...] due to RuntimeException()"Cannot store spans [1, 1, 2, ...] due to RuntimeException()"no beer"no beer"Cannot store spans [1, 1, 2, ...] due to IllegalArgumentException(no beer)"Cannot store spans [1, 1, 2, ...] due to IllegalArgumentException(no beer)"slow down"slow down"Cannot store spans [1, 1, 2, ...] due to RejectedExecutionException(slow down)"Cannot store spans [1, 1, 2, ...] due to RejectedExecutionException(slow down)"Cannot decode spans due to RuntimeException()"Cannot decode spans due to RuntimeException()"Cannot decode spans due to IllegalArgumentException(no beer)"Cannot decode spans due to IllegalArgumentException(no beer)"Malformed reading spans"Malformed reading spans"Truncated reading spans"Truncated reading spansmsg"7180c278b62e8f6a216a2aea45d08fc9/000000000000000"7180c278b62e8f6a216a2aea45d08fc9/000000000000000List<? extends String>ObjectAssert<String>AbstractObjectAssert<ObjectAssert<String>,String>AbstractAssert<ObjectAssert<String>,String>Assert<ObjectAssert<String>,String>Descriptable<ObjectAssert<String>>ExtensionPoints<ObjectAssert<String>,String>AbstractListAssert<?,List<? extends String>,String,ObjectAssert<String>>AbstractIterableAssert<?,List<? extends String>,String,ObjectAssert<String>>AbstractAssert<?,List<? extends String>>Assert<?,List<? extends String>>ExtensionPoints<?,List<? extends String>>ObjectEnumerableAssert<?,String>EnumerableAssert<?,String>IndexedObjectEnumerableAssert<?,String>containsOnly(java.lang.String[])? super List<? extends String>Condition<? super List<? extends String>>Descriptable<Condition<? super List<? extends String>>>Comparator<? super List<? extends String>>Function<? super List<? extends String>,? extends T>Consumer<List<? extends String>>Predicate<? super List<? extends String>>AbstractAssert<?,List<? extends String>>(java.util.List,java.lang.Class)containsAnyOf(java.lang.String[])isSubsetOf(java.lang.String[])endsWith(java.lang.String[])endsWith(java.lang.String,java.lang.String[])startsWith(java.lang.String[])doesNotContain(java.lang.String[])doesNotContainSubsequence(java.lang.String[])containsSubsequence(java.lang.String[])doesNotContainSequence(java.lang.String[])containsSequence(java.lang.String[])containsExactlyInAnyOrder(java.lang.String[])containsExactly(java.lang.String[])containsOnlyOnce(java.lang.String[])contains(java.lang.String[])AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>AbstractIntegerAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>>AbstractComparableAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>AbstractAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>Assert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>Descriptable<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>>ExtensionPoints<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>ComparableAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>NumberAssert<AbstractIterableSizeAssert<?,List<? extends String>,String,ObjectAssert<String>>,Integer>BiConsumer<? super String,OTHER_ELEMENT>toAssert(java.lang.String,java.lang.String)Function<? super String,T>Function<? super String,?>Function<? super String,?>[]ThrowingExtractor<? super String,?,EXCEPTION>ThrowingExtractor<? super String,?,EXCEPTION>[]ThrowingExtractor<? super String,? extends Collection<V>,EXCEPTION>Function<? super String,? extends Collection<V>>ThrowingExtractor<? super String,V,EXCEPTION>Function<? super String,V>AbstractIterableAssert<?,List<? extends String>,String,ObjectAssert<String>>(java.util.List,java.lang.Class)ThrowingExtractor<LoggingEvent,String,RuntimeException>Function<LoggingEvent,String>Predicate<LoggingEvent>test(uk.org.lidalia.slf4jtest.LoggingEvent)eventEnum<Level>Comparable<Level>compareTo(uk.org.lidalia.slf4jext.Level)EnumDesc<Level>DynamicConstantDesc<Level>Optional<EnumDesc<Level>>Class<Level>Enum<Level>(java.lang.String,int)identityidentity()Function<T,V>andThenandThen(java.util.function.Function)? super RFunction<? super R,? extends V>Function<LoggingEvent,V>Function<? super String,? extends V>Function<V,R>composecompose(java.util.function.Function)Function<? super V,? extends T>Function<V,String>Function<? super V,? extends LoggingEvent>applyapply(java.lang.Object)apply(uk.org.lidalia.slf4jtest.LoggingEvent)extractThrowsextractThrows(java.lang.Object)extractThrows(uk.org.lidalia.slf4jtest.LoggingEvent) to make expectations easier to read error is asyncC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafkakafkazipkin-collector-kafkaCollector: Kafka 0.10+kafka.version2.7.0org.apache.kafkakafka-clients${kafka.version} For AdminClient com.fasterxml.jackson.corejackson-databindC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollector.javaKafkaCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafkaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/srczipkin2.collector.kafkaAUTO_OFFSET_RESET_CONFIGBOOTSTRAP_SERVERS_CONFIGGROUP_ID_CONFIGKEY_DESERIALIZER_CLASS_CONFIGVALUE_DESERIALIZER_CLASS_CONFIGgetAdminClientgetAdminClient()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollector.classKafkaCollector(zipkin2.collector.kafka.KafkaCollector.Builder)adminClientkafkaWorkersClass<KafkaCollector>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classes/zipkin2/collector/kafka/KafkaCollector$Builder.classKafkaCollector$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classes/zipkin2/collector/kafkaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/targetstreamstopic"kafka""topic == null"topic == nullbootstrapServers"bootstrapServers == null"bootstrapServers == null"groupId == null"groupId == nulloverrides"overrides == null"overrides == nullMap<?,?>"earliest"earliestClass<ByteArrayDeserializer>Map<String,ByteArrayDeserializer>ByteArrayDeserializer[]Constructor<ByteArrayDeserializer>? super ByteArrayDeserializerClass<? super ByteArrayDeserializer>TypeVariable<Class<ByteArrayDeserializer>>TypeVariable<Class<ByteArrayDeserializer>>[]AtomicReference<CheckResult>weakCompareAndSetRelease(zipkin2.CheckResult,zipkin2.CheckResult)weakCompareAndSetAcquire(zipkin2.CheckResult,zipkin2.CheckResult)weakCompareAndSetVolatile(zipkin2.CheckResult,zipkin2.CheckResult)compareAndExchangeRelease(zipkin2.CheckResult,zipkin2.CheckResult)compareAndExchangeAcquire(zipkin2.CheckResult,zipkin2.CheckResult)compareAndExchange(zipkin2.CheckResult,zipkin2.CheckResult)setRelease(zipkin2.CheckResult)setOpaque(zipkin2.CheckResult)setPlain(zipkin2.CheckResult)BinaryOperator<CheckResult>BiFunction<CheckResult,CheckResult,CheckResult>accumulateAndGet(zipkin2.CheckResult,java.util.function.BinaryOperator)getAndAccumulate(zipkin2.CheckResult,java.util.function.BinaryOperator)UnaryOperator<CheckResult>Function<CheckResult,CheckResult>getAndSet(zipkin2.CheckResult)weakCompareAndSetPlain(zipkin2.CheckResult,zipkin2.CheckResult)weakCompareAndSet(zipkin2.CheckResult,zipkin2.CheckResult)compareAndSet(zipkin2.CheckResult,zipkin2.CheckResult)lazySet(zipkin2.CheckResult)set(zipkin2.CheckResult)AtomicReference<CheckResult>()AtomicReference<CheckResult>(zipkin2.CheckResult)org.apache.kafka.commonKafkaFuture<String>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jarkafka-clients-2.7.0C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clientsC:/Users/Semiu/.m2/repository/org/apache/kafkaC:/Users/Semiu/.m2/repository/org/apacheapacheC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/orgC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apacheC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafkaC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/commonC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/KafkaFuture.classKafkaFutureFuture<String>C:/modules/java.base/java/util/concurrent/Future.classFuturemaybeClusterIdKafkaFuture<>Future<>get(long,java.util.concurrent.TimeUnit)isDoneisDone()isCancelledisCancelled()cancel(boolean)isCompletedExceptionallyisCompletedExceptionally()getNowgetNow(java.lang.Object)getNow(java.lang.String)completeExceptionallycompleteExceptionally(java.lang.Throwable)completecomplete(java.lang.Object)complete(java.lang.String)? super ThrowableBiConsumer<? super T,? super Throwable>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/KafkaFuture$BiConsumer.classKafkaFuture$BiConsumeraddWaiteraddWaiter(org.apache.kafka.common.KafkaFuture.BiConsumer)BiConsumer<? super String,? super Throwable>whenCompletewhenComplete(org.apache.kafka.common.KafkaFuture.BiConsumer)C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/KafkaFuture$Function.classKafkaFuture$FunctionBaseFunction<>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/KafkaFuture$BaseFunction.classKafkaFuture$BaseFunctionKafkaFuture<R>Future<R>thenApplythenApply(org.apache.kafka.common.KafkaFuture.Function)Function<T,R>BaseFunction<T,R>Function<String,R>BaseFunction<String,R>thenApply(org.apache.kafka.common.KafkaFuture.BaseFunction)KafkaFuture[]KafkaFuture<?>Future<?>KafkaFuture<?>[]KafkaFuture<Void>Future<Void>allOfallOf(org.apache.kafka.common.KafkaFuture[])KafkaFuture<U>Future<U>completedFuturecompletedFuture(java.lang.Object)KafkaFuture()KafkaFuture<String>()"KafkaCollector{"
      + "bootstrapServers="KafkaCollector{bootstrapServers=", topic=", topic=guardFailuresguardFailures(java.lang.Runnable)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/classes/zipkin2/collector/kafka/KafkaCollector$LazyKafkaWorkers.classKafkaCollector$LazyKafkaWorkerscompute()start()LazyKafkaWorkersLazyKafkaWorkers(zipkin2.collector.kafka.KafkaCollector.Builder)poolCopyOnWriteArrayList<KafkaCollectorWorker>C:/modules/java.base/java/util/concurrent/CopyOnWriteArrayList.classCopyOnWriteArrayListList<KafkaCollectorWorker>Collection<KafkaCollectorWorker>Iterable<KafkaCollectorWorker>workersCopyOnWriteArrayList<KafkaCollectorWorker>()Spliterator<KafkaCollectorWorker>? super KafkaCollectorWorkerConsumer<? super KafkaCollectorWorker>Iterator<KafkaCollectorWorker>Stream<KafkaCollectorWorker>BaseStream<KafkaCollectorWorker,Stream<KafkaCollectorWorker>>Predicate<? super KafkaCollectorWorker>? extends KafkaCollectorWorkerCollection<? extends KafkaCollectorWorker>Iterable<? extends KafkaCollectorWorker>add(zipkin2.collector.kafka.KafkaCollectorWorker)ListIterator<KafkaCollectorWorker>add(int,zipkin2.collector.kafka.KafkaCollectorWorker)set(int,zipkin2.collector.kafka.KafkaCollectorWorker)Comparator<? super KafkaCollectorWorker>UnaryOperator<KafkaCollectorWorker>Function<KafkaCollectorWorker,KafkaCollectorWorker>sortRangesortRange(java.util.Comparator,int,int)replaceAllRangereplaceAllRange(java.util.function.UnaryOperator,int,int)bulkRemovebulkRemove(java.util.function.Predicate,int,int)addAllAbsentaddAllAbsent(java.util.Collection)addIfAbsentaddIfAbsent(java.lang.Object)addIfAbsent(zipkin2.collector.kafka.KafkaCollectorWorker)outOfBoundsoutOfBounds(int,int)lastIndexOf(java.lang.Object,int)lastIndexOf(zipkin2.collector.kafka.KafkaCollectorWorker,int)indexOf(java.lang.Object,int)indexOf(zipkin2.collector.kafka.KafkaCollectorWorker,int)CopyOnWriteArrayList(java.lang.Object[])KafkaCollectorWorker[]CopyOnWriteArrayList<KafkaCollectorWorker>(zipkin2.collector.kafka.KafkaCollectorWorker[])CopyOnWriteArrayList(java.util.Collection)CopyOnWriteArrayList<KafkaCollectorWorker>(java.util.Collection)CopyOnWriteArrayList()setArraysetArray(java.lang.Object[])getArraygetArray()lockmaybePoolworkerList<Runnable>Collection<Runnable>Iterable<Runnable>runrun()"Kafka worker exited with exception"Kafka worker exited with exception"Kafka worker exited with error"Kafka worker exited with errorThis collector polls a Kafka topic for messages that contain TBinaryProtocol big-endian encodedlists of spans. These spans are pushed to a {@link SpanConsumer#accept span consumer}.<p>This collector uses a Kafka 0.10+ consumer.Configuration including defaults needed to consume spans from a Kafka topic.Topic zipkin spans will be consumed from. Defaults to "zipkin". Multiple topics may bespecified if comma delimited.The bootstrapServers connect string, ex. 127.0.0.1:9092. No default.The consumer group this process is consuming on behalf of. Defaults to "zipkin"Count of threads consuming the topic. Defaults to 1By default, a consumer will be built from properties derived from builder defaults, as wellas "auto.offset.reset" -> "earliest". Any properties set here will override the consumerconfig.<p>For example: Only consume spans since you connected by setting the below.Map<String, String> overrides = new LinkedHashMap<>();overrides.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, "latest");builder.overrides(overrides);org.apache.kafka.clients.consumer.ConsumerConfig Settings below correspond to "New Consumer Configs" https://kafka.apache.org/documentation/#newconsumerconfigs check the kafka workers didn't quit Timeout exceeded: force shutdown at least we tried TODO: bad idea to lazy reference properties from a mutable builder copy them here and then pass this to the KafkaCollectorWorker constructor instead Interrupts are normal on shutdown, intentionally swallowC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollectorWorker.javaKafkaCollectorWorkerprotobuf3(byte[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollectorWorker.classKafkaCollectorWorker(zipkin2.collector.kafka.KafkaCollector.Builder)runningList<TopicPartition>Collection<TopicPartition>Iterable<TopicPartition>AtomicReference<List<TopicPartition>>assignedPartitionstopicsAtomicReference<List<TopicPartition>>(java.util.List)weakCompareAndSetRelease(java.util.List,java.util.List)weakCompareAndSetAcquire(java.util.List,java.util.List)weakCompareAndSetVolatile(java.util.List,java.util.List)compareAndExchangeRelease(java.util.List,java.util.List)compareAndExchangeAcquire(java.util.List,java.util.List)compareAndExchange(java.util.List,java.util.List)setRelease(java.util.List)setOpaque(java.util.List)setPlain(java.util.List)BinaryOperator<List<TopicPartition>>BiFunction<List<TopicPartition>,List<TopicPartition>,List<TopicPartition>>accumulateAndGet(java.util.List,java.util.function.BinaryOperator)getAndAccumulate(java.util.List,java.util.function.BinaryOperator)UnaryOperator<List<TopicPartition>>Function<List<TopicPartition>,List<TopicPartition>>getAndSet(java.util.List)weakCompareAndSetPlain(java.util.List,java.util.List)weakCompareAndSet(java.util.List,java.util.List)compareAndSet(java.util.List,java.util.List)lazySet(java.util.List)set(java.util.List)AtomicReference<List<TopicPartition>>()Class<KafkaCollectorWorker>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollectorWorker$1.classKafkaCollectorWorker$1","org.apache.kafka.clients.consumerKafkaConsumer<byte[],byte[]>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clientsclientsC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumerC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/KafkaConsumer.classKafkaConsumerConsumer<byte[],byte[]>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/Consumer.classkafkaConsumerKafkaConsumer<byte[],byte[]>(java.util.Properties)wakeupwakeup()close(java.time.Duration)close(long,java.util.concurrent.TimeUnit)enforceRebalanceenforceRebalance()groupMetadatagroupMetadata()Map<TopicPartition,Long>endOffsetsendOffsets(java.util.Collection,java.time.Duration)endOffsets(java.util.Collection)beginningOffsetsbeginningOffsets(java.util.Collection,java.time.Duration)beginningOffsets(java.util.Collection)Map<TopicPartition,OffsetAndTimestamp>offsetsForTimesoffsetsForTimes(java.util.Map,java.time.Duration)offsetsForTimes(java.util.Map)resumeresume(java.util.Collection)pausepause(java.util.Collection)Set<TopicPartition>pausedpaused()List<PartitionInfo>Collection<PartitionInfo>Iterable<PartitionInfo>Map<String,List<PartitionInfo>>listTopicslistTopics(java.time.Duration)listTopics()partitionsForpartitionsFor(java.lang.String,java.time.Duration)partitionsFor(java.lang.String)? extends MetricMap<MetricName,? extends Metric>metrics()Map<TopicPartition,OffsetAndMetadata>committedcommitted(java.util.Set,java.time.Duration)committed(java.util.Set)committed(org.apache.kafka.common.TopicPartition,java.time.Duration)committed(org.apache.kafka.common.TopicPartition)positionposition(org.apache.kafka.common.TopicPartition,java.time.Duration)position(org.apache.kafka.common.TopicPartition)seekToEndseekToEnd(java.util.Collection)seekToBeginningseekToBeginning(java.util.Collection)seekseek(org.apache.kafka.common.TopicPartition,org.apache.kafka.clients.consumer.OffsetAndMetadata)seek(org.apache.kafka.common.TopicPartition,long)commitAsynccommitAsync(java.util.Map,org.apache.kafka.clients.consumer.OffsetCommitCallback)commitAsync(org.apache.kafka.clients.consumer.OffsetCommitCallback)commitAsync()commitSynccommitSync(java.util.Map,java.time.Duration)commitSync(java.util.Map)commitSync(java.time.Duration)commitSync()ConsumerRecords<>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/ConsumerRecords.classConsumerRecordsConsumerRecords<K,V>ConsumerRecord<K,V>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/ConsumerRecord.classConsumerRecordIterable<ConsumerRecord<K,V>>poll(java.time.Duration)ConsumerRecords<byte[],byte[]>ConsumerRecord<byte[],byte[]>Iterable<ConsumerRecord<byte[],byte[]>>poll(long)unsubscribeunsubscribe()subscribesubscribe(java.util.regex.Pattern)subscribe(java.util.regex.Pattern,org.apache.kafka.clients.consumer.ConsumerRebalanceListener)assignassign(java.util.Collection)subscribe(java.util.Collection,org.apache.kafka.clients.consumer.ConsumerRebalanceListener)subscribe(java.util.Collection)subscriptionsubscription()assignmentassignment()updateAssignmentMetadataIfNeededupdateAssignmentMetadataIfNeeded(org.apache.kafka.common.utils.Timer)getClientIdgetClientId()updateAssignmentMetadataIfNeeded(org.apache.kafka.common.utils.Timer,boolean)org.apache.kafka.common.serializationDeserializer<K>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/serializationserializationC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/serialization/Deserializer.classDeserializerDeserializer<V>org.apache.kafka.clients.consumer.internalsFetcher<K,V>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/internalsinternalsC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/internals/Fetcher.classFetcherConsumerInterceptors<K,V>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/consumer/internals/ConsumerInterceptors.classConsumerInterceptorsList<ConsumerPartitionAssignor>Collection<ConsumerPartitionAssignor>Iterable<ConsumerPartitionAssignor>KafkaConsumer(org.apache.kafka.common.utils.LogContext,java.lang.String,org.apache.kafka.clients.consumer.internals.ConsumerCoordinator,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.clients.consumer.internals.Fetcher,org.apache.kafka.clients.consumer.internals.ConsumerInterceptors,org.apache.kafka.common.utils.Time,org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient,org.apache.kafka.common.metrics.Metrics,org.apache.kafka.clients.consumer.internals.SubscriptionState,org.apache.kafka.clients.consumer.internals.ConsumerMetadata,long,long,int,java.util.List,java.lang.String)Deserializer<byte[]>Fetcher<byte[],byte[]>ConsumerInterceptors<byte[],byte[]>KafkaConsumer<byte[],byte[]>(org.apache.kafka.common.utils.LogContext,java.lang.String,org.apache.kafka.clients.consumer.internals.ConsumerCoordinator,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.clients.consumer.internals.Fetcher,org.apache.kafka.clients.consumer.internals.ConsumerInterceptors,org.apache.kafka.common.utils.Time,org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient,org.apache.kafka.common.metrics.Metrics,org.apache.kafka.clients.consumer.internals.SubscriptionState,org.apache.kafka.clients.consumer.internals.ConsumerMetadata,long,long,int,java.util.List,java.lang.String)Map<String,Object>KafkaConsumer(java.util.Map,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer)KafkaConsumer<byte[],byte[]>(java.util.Map,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer)KafkaConsumer(java.util.Properties,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer)KafkaConsumer<byte[],byte[]>(java.util.Properties,org.apache.kafka.common.serialization.Deserializer,org.apache.kafka.common.serialization.Deserializer)KafkaConsumer(java.util.Properties)KafkaConsumer(java.util.Map)KafkaConsumer<byte[],byte[]>(java.util.Map)kafkaConsumerMetricsDEFAULT_CLOSE_TIMEOUT_MSC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/main/java/zipkin2/collector/kafka/KafkaCollectorWorker$2.classKafkaCollectorWorker$2onPartitionsAssignedonPartitionsAssigned(java.util.Collection)onPartitionsRevokedonPartitionsRevoked(java.util.Collection)partitionsArrayList<TopicPartition>AbstractList<TopicPartition>AbstractCollection<TopicPartition>ArrayList<E>AbstractList<E>AbstractCollection<E>ArrayList<E>(java.util.Collection)AbstractCollection<E>()AbstractList<E>()ArrayList<E>()ArrayList<E>(int)"Kafka consumer starting polling loop."Kafka consumer starting polling loop.consumerRecords"Kafka polling returned batch of {} messages."Kafka polling returned batch of {} messages.Spliterator<ConsumerRecord<byte[],byte[]>>? super ConsumerRecord<byte[],byte[]>Consumer<? super ConsumerRecord<byte[],byte[]>>Iterator<ConsumerRecord<byte[],byte[]>>Iterator<ConsumerRecord<K,V>>partitions()recordsrecords(java.lang.String)List<ConsumerRecord<K,V>>Collection<ConsumerRecord<K,V>>records(org.apache.kafka.common.TopicPartition)List<ConsumerRecord<byte[],byte[]>>Collection<ConsumerRecord<byte[],byte[]>>Map<TopicPartition,List<ConsumerRecord<K,V>>>ConsumerRecords(java.util.Map)Map<TopicPartition,List<ConsumerRecord<byte[],byte[]>>>ConsumerRecords<byte[],byte[]>(java.util.Map)ConsumerRecords<Object,Object>ConsumerRecord<Object,Object>Iterable<ConsumerRecord<Object,Object>>EMPTYrecordvalue()Optional<Integer>leaderEpochleaderEpoch()serializedValueSizeserializedValueSize()serializedKeySizeserializedKeySize()checksumchecksum()timestampTypetimestampType()timestamp()offset()key()headersheaders()partitionpartition()topic()ConsumerRecord(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,java.lang.Long,int,int,java.lang.Object,java.lang.Object,org.apache.kafka.common.header.Headers,java.util.Optional)ConsumerRecord<byte[],byte[]>(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,java.lang.Long,int,int,byte[],byte[],org.apache.kafka.common.header.Headers,java.util.Optional)ConsumerRecord(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,java.lang.Long,int,int,java.lang.Object,java.lang.Object,org.apache.kafka.common.header.Headers)ConsumerRecord<byte[],byte[]>(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,java.lang.Long,int,int,byte[],byte[],org.apache.kafka.common.header.Headers)ConsumerRecord(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,long,int,int,java.lang.Object,java.lang.Object)ConsumerRecord<byte[],byte[]>(java.lang.String,int,long,long,org.apache.kafka.common.record.TimestampType,long,int,int,byte[],byte[])ConsumerRecord(java.lang.String,int,long,java.lang.Object,java.lang.Object)ConsumerRecord<byte[],byte[]>(java.lang.String,int,long,byte[],byte[])NULL_CHECKSUMNULL_SIZENO_TIMESTAMP"Unexpected error in polling loop spans"Unexpected error in polling loop spans"Kafka consumer polling loop stopped. Kafka consumer closed."Kafka consumer polling loop stopped. Kafka consumer closed.Consumes spans from Kafka messages, ignoring malformed input added for integration tests only, see ITKafkaCollector technically we should remove only the revoked partitions but for test purposes it does not matter need two bytes to check if protobuf If we received legacy single-span encoding, decode it into a singleton listthrift, but not listStop the polling loopC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/ITKafkaCollector.javaITKafkaCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafkaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/testJSON_V2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/ITKafkaCollector.classbuilder(java.lang.String,int)builder(java.lang.String)produceSpansproduceSpans(byte[],java.lang.String,java.lang.Integer)produceSpans(byte[],java.lang.String)waitForPartitionAssignmentswaitForPartitionAssignments(zipkin2.collector.kafka.KafkaCollector)warmUpTopicwarmUpTopic(java.lang.String)toStringContainsOnlySummaryInformationtoStringContainsOnlySummaryInformation()multipleTopicsCommaDelimitedmultipleTopicsCommaDelimited()messagesDistributedAcrossMultipleThreadsSuccessfullymessagesDistributedAcrossMultipleThreadsSuccessfully()skipsOnSpanStorageExceptionskipsOnSpanStorageException()skipsMalformedDataskipsMalformedData()messageWithMultipleSpans(zipkin2.collector.kafka.KafkaCollector.Builder,zipkin2.codec.SpanBytesEncoder)messageWithMultipleSpans_proto3messageWithMultipleSpans_proto3()messageWithMultipleSpans_json2messageWithMultipleSpans_json2()messageWithMultipleSpans_jsonmessageWithMultipleSpans_json()messageWithMultipleSpans_thriftmessageWithMultipleSpans_thrift()messageWithSingleThriftSpanmessageWithSingleThriftSpan()reconnectsIndefinitelyAndReportsUnhealthyWhenKafkaUnavailablereconnectsIndefinitelyAndReportsUnhealthyWhenKafkaUnavailable()check_failsOnInvalidBootstrapServerscheck_failsOnInvalidBootstrapServers()checkPassescheckPasses()tearDowntearDown()setupsetup()org.apache.kafka.clients.producerKafkaProducer<byte[],byte[]>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producerC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producer/KafkaProducer.classKafkaProducerProducer<byte[],byte[]>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producer/Producer.classProducerkafkaMetricsITKafkaCollector()60configSerializer<byte[]>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/common/serialization/Serializer.classSerializerSerializer<K>Serializer<V>KafkaProducer<byte[],byte[]>(java.util.Properties,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer)flushflush()ProducerRecord<K,V>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producer/ProducerRecord.classProducerRecordFuture<RecordMetadata>sendsend(org.apache.kafka.clients.producer.ProducerRecord,org.apache.kafka.clients.producer.Callback)ProducerRecord<byte[],byte[]>send(org.apache.kafka.clients.producer.ProducerRecord)abortTransactionabortTransaction()commitTransactioncommitTransaction()sendOffsetsToTransactionsendOffsetsToTransaction(java.util.Map,org.apache.kafka.clients.consumer.ConsumerGroupMetadata)sendOffsetsToTransaction(java.util.Map,java.lang.String)beginTransactionbeginTransaction()initTransactionsinitTransactions()newSendernewSender(org.apache.kafka.common.utils.LogContext,org.apache.kafka.clients.KafkaClient,org.apache.kafka.clients.producer.internals.ProducerMetadata)org.apache.kafka.clients.producer.internalsProducerInterceptors<K,V>C:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producer/internalsC:/Users/Semiu/.m2/repository/org/apache/kafka/kafka-clients/2.7.0/kafka-clients-2.7.0.jar/org/apache/kafka/clients/producer/internals/ProducerInterceptors.classProducerInterceptorsKafkaProducer(java.util.Map,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.clients.producer.internals.ProducerMetadata,org.apache.kafka.clients.KafkaClient,org.apache.kafka.clients.producer.internals.ProducerInterceptors,org.apache.kafka.common.utils.Time)ProducerInterceptors<byte[],byte[]>KafkaProducer<byte[],byte[]>(java.util.Map,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.clients.producer.internals.ProducerMetadata,org.apache.kafka.clients.KafkaClient,org.apache.kafka.clients.producer.internals.ProducerInterceptors,org.apache.kafka.common.utils.Time)KafkaProducer(java.util.Properties,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer)KafkaProducer(java.util.Properties)KafkaProducer<byte[],byte[]>(java.util.Properties)KafkaProducer(java.util.Map,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer)KafkaProducer<byte[],byte[]>(java.util.Map,org.apache.kafka.common.serialization.Serializer,org.apache.kafka.common.serialization.Serializer)KafkaProducer(java.util.Map)KafkaProducer<byte[],byte[]>(java.util.Map)PRODUCER_METRIC_GROUP_NAMENETWORK_THREAD_PREFIX"check_passes"check_passes"fail_invalid_bootstrap_servers"fail_invalid_bootstrap_servers"1.1.1.1"1.1.1.1AbstractThrowableAssert<?,? extends Throwable>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractThrowableAssert.classAbstractThrowableAssertAbstractObjectAssert<?,? extends Throwable>AbstractAssert<?,? extends Throwable>Assert<?,? extends Throwable>ExtensionPoints<?,? extends Throwable>AbstractThrowableAssert<>hasMessagehasMessage(java.lang.String)Condition<? super ? extends Throwable>Descriptable<Condition<? super ? extends Throwable>>Comparator<? super ? extends Throwable>Function<? super ? extends Throwable,? extends T>Consumer<? extends Throwable>Predicate<? super ? extends Throwable>AbstractAssert<?,? extends Throwable>(java.lang.Throwable,java.lang.Class)Function<? extends Throwable,T>Function<? super ? extends Throwable,T>Function<? super ? extends Throwable,?>Function<? super ? extends Throwable,?>[]AbstractObjectAssert<?,? extends Throwable>(java.lang.Throwable,java.lang.Class)doesNotThrowAnyExceptiondoesNotThrowAnyException()hasSuppressedExceptionhasSuppressedException(java.lang.Throwable)hasNoSuppressedExceptionshasNoSuppressedExceptions()hasRootCauseMessagehasRootCauseMessage(java.lang.String,java.lang.Object[])hasRootCauseMessage(java.lang.String)hasRootCauseExactlyInstanceOfhasRootCauseExactlyInstanceOf(java.lang.Class)hasRootCauseInstanceOfhasRootCauseInstanceOf(java.lang.Class)hasRootCausehasRootCause(java.lang.Throwable)hasCauseExactlyInstanceOfhasCauseExactlyInstanceOf(java.lang.Class)hasCauseInstanceOfhasCauseInstanceOf(java.lang.Class)hasMessageEndingWithhasMessageEndingWith(java.lang.String,java.lang.Object[])hasMessageEndingWith(java.lang.String)hasMessageFindingMatchhasMessageFindingMatch(java.lang.String)hasMessageMatchinghasMessageMatching(java.lang.String)hasStackTraceContaininghasStackTraceContaining(java.lang.String,java.lang.Object[])hasStackTraceContaining(java.lang.String)CharSequence[]hasMessageNotContainingAnyhasMessageNotContainingAny(java.lang.CharSequence[])hasMessageNotContaininghasMessageNotContaining(java.lang.String)hasMessageContainingAllhasMessageContainingAll(java.lang.CharSequence[])hasMessageContaininghasMessageContaining(java.lang.String,java.lang.Object[])hasMessageContaining(java.lang.String)hasMessageStartingWithhasMessageStartingWith(java.lang.String,java.lang.Object[])hasMessageStartingWith(java.lang.String)AbstractThrowableAssert<?,?>getRootCausegetRootCause()getCausegetCause()hasNoCausehasNoCause()hasCauseReferencehasCauseReference(java.lang.Throwable)hasCausehasCause(java.lang.Throwable)hasMessage(java.lang.String,java.lang.Object[])hasBeenThrownhasBeenThrown()AbstractThrowableAssert(java.lang.Throwable,java.lang.Class)AbstractThrowableAssert<?,? extends Throwable>(java.lang.Throwable,java.lang.Class)throwablesClass<KafkaException>"Invalid url in bootstrap.servers: 1.1.1.1"Invalid url in bootstrap.servers: 1.1.1.1"localhost:"localhost:9092Class<TimeoutException>"single_span"single_span"multiple_spans_thrift"multiple_spans_thrift"multiple_spans_json"multiple_spans_json"multiple_spans_json2"multiple_spans_json2"multiple_spans_proto3"multiple_spans_proto3"decoder_exception"decoder_exception"storage_exception"storage_exceptionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/ITKafkaCollector$1.classITKafkaCollector$1"multi_thread"multi_threadtraceBytes"topic1,topic2"topic1,topic2ListAssert<String>FactoryBasedNavigableListAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>AbstractListAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>AbstractIterableAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>AbstractAssert<ListAssert<String>,List<? extends String>>Assert<ListAssert<String>,List<? extends String>>Descriptable<ListAssert<String>>ExtensionPoints<ListAssert<String>,List<? extends String>>ObjectEnumerableAssert<ListAssert<String>,String>EnumerableAssert<ListAssert<String>,String>IndexedObjectEnumerableAssert<ListAssert<String>,String>AbstractAssert<ListAssert<String>,List<? extends String>>(java.util.List,java.lang.Class)AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>,Integer>AbstractIterableAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>(java.util.List,java.lang.Class)doesNotContain(java.lang.String,org.assertj.core.data.Index)contains(java.lang.String,org.assertj.core.data.Index)AbstractListAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>(java.util.List,java.lang.Class)AssertFactory<String,ObjectAssert<String>>FactoryBasedNavigableListAssert<ListAssert<String>,List<? extends String>,String,ObjectAssert<String>>(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)ListAssert<String>(java.util.stream.DoubleStream)ListAssert<String>(java.util.stream.LongStream)ListAssert<String>(java.util.stream.IntStream)Stream<? extends String>BaseStream<? extends String,Stream<? extends String>>ListAssert<String>(java.util.stream.Stream)ListAssert<String>(java.util.List)"topic1"topic1"topic2"topic2"muah"muahObjectAssert<KafkaCollector>AbstractObjectAssert<ObjectAssert<KafkaCollector>,KafkaCollector>AbstractAssert<ObjectAssert<KafkaCollector>,KafkaCollector>Assert<ObjectAssert<KafkaCollector>,KafkaCollector>Descriptable<ObjectAssert<KafkaCollector>>ExtensionPoints<ObjectAssert<KafkaCollector>,KafkaCollector>? super KafkaCollectorCondition<? super KafkaCollector>Descriptable<Condition<? super KafkaCollector>>Comparator<? super KafkaCollector>Function<? super KafkaCollector,? extends T>Consumer<KafkaCollector>Predicate<? super KafkaCollector>AbstractAssert<ObjectAssert<KafkaCollector>,KafkaCollector>(zipkin2.collector.kafka.KafkaCollector,java.lang.Class)"KafkaCollector{bootstrapServers=%s, topic=%s}"KafkaCollector{bootstrapServers=%s, topic=%s}consumersWithAssignmentsOptional<KafkaCollectorWorker>Collector<? super KafkaCollectorWorker,A,R>BiConsumer<R,? super KafkaCollectorWorker>BiFunction<U,? super KafkaCollectorWorker,U>BinaryOperator<KafkaCollectorWorker>BiFunction<KafkaCollectorWorker,KafkaCollectorWorker,KafkaCollectorWorker>reduce(zipkin2.collector.kafka.KafkaCollectorWorker,java.util.function.BinaryOperator)Function<? super KafkaCollectorWorker,? extends DoubleStream>Function<? super KafkaCollectorWorker,? extends LongStream>Function<? super KafkaCollectorWorker,? extends IntStream>Function<? super KafkaCollectorWorker,? extends Stream<? extends R>>ToDoubleFunction<? super KafkaCollectorWorker>ToLongFunction<? super KafkaCollectorWorker>ToIntFunction<? super KafkaCollectorWorker>Function<? super KafkaCollectorWorker,? extends R>Predicate<KafkaCollectorWorker>test(zipkin2.collector.kafka.KafkaCollectorWorker)wSpliterator<TopicPartition>? super TopicPartitionConsumer<? super TopicPartition>Iterator<TopicPartition>Stream<TopicPartition>BaseStream<TopicPartition,Stream<TopicPartition>>Predicate<? super TopicPartition>? extends TopicPartitionCollection<? extends TopicPartition>Iterable<? extends TopicPartition>add(org.apache.kafka.common.TopicPartition)ListIterator<TopicPartition>add(int,org.apache.kafka.common.TopicPartition)set(int,org.apache.kafka.common.TopicPartition)Comparator<? super TopicPartition>UnaryOperator<TopicPartition>Function<TopicPartition,TopicPartition>ProducerRecord<byte[],byte[]>(java.lang.String,java.lang.Integer,byte[],byte[])ProducerRecord(java.lang.String,java.lang.Object)ProducerRecord<byte[],byte[]>(java.lang.String,byte[])ProducerRecord(java.lang.String,java.lang.Object,java.lang.Object)ProducerRecord<byte[],byte[]>(java.lang.String,byte[],byte[])ProducerRecord(java.lang.String,java.lang.Integer,java.lang.Object,java.lang.Object)Iterable<Header>ProducerRecord(java.lang.String,java.lang.Integer,java.lang.Object,java.lang.Object,java.lang.Iterable)ProducerRecord<byte[],byte[]>(java.lang.String,java.lang.Integer,byte[],byte[],java.lang.Iterable)ProducerRecord(java.lang.String,java.lang.Integer,java.lang.Long,java.lang.Object,java.lang.Object)ProducerRecord<byte[],byte[]>(java.lang.String,java.lang.Integer,java.lang.Long,byte[],byte[])ProducerRecord(java.lang.String,java.lang.Integer,java.lang.Long,java.lang.Object,java.lang.Object,java.lang.Iterable)ProducerRecord<byte[],byte[]>(java.lang.String,java.lang.Integer,java.lang.Long,byte[],byte[],java.lang.Iterable)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/ITKafkaCollector$2.classITKafkaCollector$2Don't raise exception (crash process), rather fail status check! This allows the health checkto report the cause. wait for crashIf the Kafka broker(s) specified in the connection string are not available, the Kafka consumerlibrary will attempt to reconnect indefinitely. The Kafka consumer will not throw an exceptionand does not expose the status of its connection to the Kafka broker(s) in its API.<p>An AdminClient API instance has been added to the connector to validate that connection withKafka is available in every health check. This AdminClient reuses Consumer's properties toConnect to the cluster, and request a Cluster description to validate communication withKafka.Ensures legacy encoding works: a single TBinaryProtocol encoded spanEnsures list encoding works: a TBinaryProtocol encoded list of spans the only way we could read this, is if the malformed spans were skipped. storage failure isn't a message failureProducing this empty message triggers auto-creation of the topic and gets things "warmed up" onthe broker before the consumers subscribe. Without this, the topic is auto-created when thefirst consumer subscribes but there appears to be a race condition where the existence of thetopic is not known to the partition assignor when the consumer group goes through its initialre-balance. As a result, no partitions are assigned, there are no further changes to groupmembership to trigger another re-balance, and no messages are consumed. This initial message isnot necessary if the test broker is re-created for each test, but that increases execution timefor the suite by a factor of 10x (2-3s to ~25s on my local machine).Wait until all kafka consumers created by the collector have at least one partition assigned.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/KafkaExtension.javaKafkaExtensionnewCollectorBuildernewCollectorBuilder(java.lang.String,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/src/test/java/zipkin2/collector/kafka/KafkaExtension.classbootstrapServerbootstrapServer()prepareTopicsprepareTopics(java.lang.String,int)containerKAFKA_PORTLOGGERKafkaExtension()Class<KafkaExtension>19092org.testcontainers.containersGenericContainer<KafkaContainer>C:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jartestcontainers-1.15.1C:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1C:/Users/Semiu/.m2/repository/org/testcontainers/testcontainersC:/Users/Semiu/.m2/repository/org/testcontainersC:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jar/orgC:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jar/org/testcontainersC:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jar/org/testcontainers/containerscontainersC:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jar/org/testcontainers/containers/GenericContainer.classGenericContainerContainer<KafkaContainer>C:/Users/Semiu/.m2/repository/org/testcontainers/testcontainers/1.15.1/testcontainers-1.15.1.jar/org/testcontainers/containers/Container.classContainersetWaitStrategysetWaitStrategy(org.testcontainers.containers.wait.strategy.WaitStrategy)Map<String,LinkableContainer>setLinkedContainerssetLinkedContainers(java.util.Map)List<Bind>Collection<Bind>Iterable<Bind>setBindssetBinds(java.util.List)setCommandPartssetCommandParts(java.lang.String[])setEnvsetEnv(java.util.List)setImagesetImage(java.util.concurrent.Future)setExtraHostssetExtraHosts(java.util.List)setPortBindingssetPortBindings(java.util.List)List<Integer>Collection<Integer>Iterable<Integer>setExposedPortssetExposedPorts(java.util.List)getDockerClientgetDockerClient()getLinkedContainersgetLinkedContainers()getBindsgetBinds()getCommandPartsgetCommandParts()getEnvMapgetEnvMap()getEnvgetEnv()getImagegetImage()getExtraHostsgetExtraHosts()getPortBindingsgetPortBindings()Consumer<OutputFrame>Container<>withLogConsumerwithLogConsumer(java.util.function.Consumer)OutputType[]followOutputfollowOutput(java.util.function.Consumer,org.testcontainers.containers.output.OutputFrame.OutputType[])followOutput(java.util.function.Consumer)getTestHostIpAddressgetTestHostIpAddress()getDockerImageNamegetDockerImageName()setDockerImageNamesetDockerImageName(java.lang.String)withWorkingDirectorywithWorkingDirectory(java.lang.String)withStartupCheckStrategywithStartupCheckStrategy(org.testcontainers.containers.startupcheck.StartupCheckStrategy)withMinimumRunningDurationwithMinimumRunningDuration(java.time.Duration)withPrivilegedModewithPrivilegedMode(boolean)withStartupTimeoutwithStartupTimeout(java.time.Duration)withClasspathResourceMappingwithClasspathResourceMapping(java.lang.String,java.lang.String,org.testcontainers.containers.BindMode,org.testcontainers.containers.SelinuxContext)withClasspathResourceMapping(java.lang.String,java.lang.String,org.testcontainers.containers.BindMode)withImagePullPolicywithImagePullPolicy(org.testcontainers.images.ImagePullPolicy)withNetworkAliaseswithNetworkAliases(java.lang.String[])withNetworkwithNetwork(org.testcontainers.containers.Network)withNetworkModewithNetworkMode(java.lang.String)withExtraHostwithExtraHost(java.lang.String,java.lang.String)withCommandwithCommand(java.lang.String[])withCommand(java.lang.String)withLabelswithLabels(java.util.Map)withLabelwithLabel(java.lang.String,java.lang.String)withEnvwithEnv(java.util.Map)Optional<String>Function<Optional<String>,String>withEnv(java.lang.String,java.util.function.Function)withEnv(java.lang.String,java.lang.String)withCopyFileToContainerwithCopyFileToContainer(org.testcontainers.utility.MountableFile,java.lang.String)Integer[]withExposedPortswithExposedPorts(java.lang.Integer[])withVolumesFromwithVolumesFrom(org.testcontainers.containers.Container,org.testcontainers.containers.BindMode)withFileSystemBindwithFileSystemBind(java.lang.String,java.lang.String,org.testcontainers.containers.BindMode)withFileSystemBind(java.lang.String,java.lang.String)waitingForwaitingFor(org.testcontainers.containers.wait.strategy.WaitStrategy)addExposedPortsaddExposedPorts(int[])addExposedPortaddExposedPort(java.lang.Integer)addLink(org.testcontainers.containers.traits.LinkableContainer,java.lang.String)addFileSystemBindaddFileSystemBind(java.lang.String,java.lang.String,org.testcontainers.containers.BindMode,org.testcontainers.containers.SelinuxContext)addFileSystemBind(java.lang.String,java.lang.String,org.testcontainers.containers.BindMode)addEnvaddEnv(java.lang.String,java.lang.String)setCommandsetCommand(java.lang.String[])setCommand(java.lang.String)selfself()setTmpFsMappingsetTmpFsMapping(java.util.Map)List<Consumer<OutputFrame>>Collection<Consumer<OutputFrame>>Iterable<Consumer<OutputFrame>>setLogConsumerssetLogConsumers(java.util.List)Map<MountableFile,String>setCopyToFileContainerPathMapsetCopyToFileContainerPathMap(java.util.Map)setShmSizesetShmSize(java.lang.Long)setWorkingDirectorysetWorkingDirectory(java.lang.String)setStartupAttemptssetStartupAttempts(int)setStartupCheckStrategysetStartupCheckStrategy(org.testcontainers.containers.startupcheck.StartupCheckStrategy)List<VolumesFrom>Collection<VolumesFrom>Iterable<VolumesFrom>setVolumesFromssetVolumesFroms(java.util.List)setPrivilegedModesetPrivilegedMode(boolean)setLabelssetLabels(java.util.Map)setNetworkAliasessetNetworkAliases(java.util.List)setNetworksetNetwork(org.testcontainers.containers.Network)setNetworkModesetNetworkMode(java.lang.String)isShouldBeReusedisShouldBeReused()getTmpFsMappinggetTmpFsMapping()Consumer<CreateContainerCmd>Set<Consumer<CreateContainerCmd>>Collection<Consumer<CreateContainerCmd>>Iterable<Consumer<CreateContainerCmd>>getCreateContainerCmdModifiersgetCreateContainerCmdModifiers()getLogConsumersgetLogConsumers()getContainerInfogetContainerInfo()Set<Startable>Collection<Startable>Iterable<Startable>getDependenciesgetDependencies()getCopyToFileContainerPathMapgetCopyToFileContainerPathMap()getShmSizegetShmSize()getWorkingDirectorygetWorkingDirectory()getStartupAttemptsgetStartupAttempts()getStartupCheckStrategygetStartupCheckStrategy()getVolumesFromsgetVolumesFroms()isPrivilegedModeisPrivilegedMode()getLabelsgetLabels()getNetworkAliasesgetNetworkAliases()getNetworkgetNetwork()getNetworkModegetNetworkMode()getContainerNamegetContainerName()GenericContainer<>withReusewithReuse(boolean)withTmpFswithTmpFs(java.util.Map)withSharedMemorySizewithSharedMemorySize(java.lang.Long)withCreateContainerCmdModifierwithCreateContainerCmdModifier(java.util.function.Consumer)withStartupAttemptswithStartupAttempts(int)copyFileFromContainercopyFileFromContainer(java.lang.String,java.lang.String)getIpAddressgetIpAddress()addFixedExposedPortaddFixedExposedPort(int,int,org.testcontainers.containers.InternetProtocol)addFixedExposedPort(int,int)finishedfinished(org.junit.runner.Description)failedfailed(java.lang.Throwable,org.junit.runner.Description)succeededsucceeded(org.junit.runner.Description)startingstarting(org.junit.runner.Description)apply(org.junit.runners.model.Statement,org.junit.runner.Description)waitUntilContainerStartedwaitUntilContainerStarted()getWaitStrategygetWaitStrategy()Set<Integer>getLivenessCheckPortNumbersgetLivenessCheckPortNumbers()getLivenessCheckPortsgetLivenessCheckPorts()getLivenessCheckPortgetLivenessCheckPort()containerIsStoppedcontainerIsStopped(com.github.dockerjava.api.command.InspectContainerResponse)containerIsStoppingcontainerIsStopping(com.github.dockerjava.api.command.InspectContainerResponse)containerIsStartedcontainerIsStarted(com.github.dockerjava.api.command.InspectContainerResponse,boolean)containerIsStarted(com.github.dockerjava.api.command.InspectContainerResponse)containerIsStartingcontainerIsStarting(com.github.dockerjava.api.command.InspectContainerResponse,boolean)containerIsStarting(com.github.dockerjava.api.command.InspectContainerResponse)containerIsCreatedcontainerIsCreated(java.lang.String)configureconfigure()createVolumeDirectorycreateVolumeDirectory(boolean)logger()stopstop()findContainerForReusefindContainerForReuse(java.lang.String)hash(com.github.dockerjava.api.command.CreateContainerCmd)checksumFilechecksumFile(java.io.File,java.util.zip.Checksum)hashCopiedFileshashCopiedFiles()canBeReusedcanBeReused()doStartdoStart()getContainerIdgetContainerId()? extends StartableIterable<? extends Startable>dependsOndependsOn(java.lang.Iterable)List<? extends Startable>Collection<? extends Startable>dependsOn(java.util.List)Startable[]dependsOn(org.testcontainers.lifecycle.Startable[])getExposedPortsgetExposedPorts()GenericContainer(java.util.concurrent.Future)GenericContainer<KafkaContainer>(java.util.concurrent.Future)GenericContainer(java.lang.String)GenericContainer<KafkaContainer>(java.lang.String)GenericContainer()GenericContainer<KafkaContainer>()GenericContainer(org.testcontainers.images.RemoteDockerImage)GenericContainer<KafkaContainer>(org.testcontainers.images.RemoteDockerImage)GenericContainer(org.testcontainers.utility.DockerImageName)GenericContainer<KafkaContainer>(org.testcontainers.utility.DockerImageName)waitStrategycontainerIddockerClientCOPIED_FILES_HASH_LABELHASH_LABELINTERNAL_HOST_HOSTNAMECONTAINER_RUNNING_TIMEOUT_SEC"Using bootstrapServer "Using bootstrapServer List<NewTopic>Collection<NewTopic>Iterable<NewTopic>newTopicsArrayList<NewTopic>AbstractList<NewTopic>AbstractCollection<NewTopic>ArrayList<NewTopic>()Spliterator<NewTopic>? super NewTopicConsumer<? super NewTopic>Iterator<NewTopic>Stream<NewTopic>BaseStream<NewTopic,Stream<NewTopic>>Predicate<? super NewTopic>? extends NewTopicCollection<? extends NewTopic>Iterable<? extends NewTopic>add(org.apache.kafka.clients.admin.NewTopic)AbstractCollection<NewTopic>()ListIterator<NewTopic>add(int,org.apache.kafka.clients.admin.NewTopic)set(int,org.apache.kafka.clients.admin.NewTopic)Comparator<? super NewTopic>UnaryOperator<NewTopic>Function<NewTopic,NewTopic>AbstractList<NewTopic>()ArrayList<NewTopic>(java.util.Collection)ArrayList<NewTopic>(int)getNow(java.lang.Void)complete(java.lang.Void)? super VoidBiConsumer<? super Void,? super Throwable>Function<Void,R>BaseFunction<Void,R>KafkaFuture<Void>()"Topics could not be created "Topics could not be created ": ": "_group"_groupKafkaContainerKafkaContainer()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/test-classes/zipkin2/collector/kafka/KafkaExtension$KafkaContainer.classKafkaExtension$KafkaContainerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/test-classes/zipkin2/collector/kafkaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/test-classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/test-classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/kafka/target/test-classestest-classes"ghcr.io/openzipkin/zipkin-kafka:2.23.2"ghcr.io/openzipkin/zipkin-kafka:2.23.2"true""docker.skip"docker.skip"${docker.skip} == true"${docker.skip} == true Only run once in outermost scope. mostly waiting for https://github.com/testcontainers/testcontainers-java/issues/3537 19092 is for connections from the Docker host and needs to be used as a fixed port. TODO: someone who knows Kafka well, make ^^ comment better!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/pom.xmlrabbitmqscribe Our json codec is shaded, but Intellij doesn't understand that when running tests. slf4j-simpleC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmqzipkin-collector-rabbitmqCollector: RabbitMQZipkin span collector for RabbitMQ transportamqp-client.version4.12.0com.rabbitmqamqp-client${amqp-client.version}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collector/rabbitmq/RabbitMQCollector.javaRabbitMQCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collector/rabbitmqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/srczipkin2.collector.rabbitmqAddress[]convertAddressesconvertAddresses(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collector/rabbitmq/RabbitMQCollector.classRabbitMQCollector(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collector/rabbitmq/RabbitMQCollector$1.classRabbitMQCollector$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2/collector/rabbitmq/RabbitMQCollector$Builder.classRabbitMQCollector$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2/collector/rabbitmqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/targetaddressesClass<RabbitMQCollector>"rabbitmq""RabbitMQCollector{addresses="RabbitMQCollector{addresses=declareQueueIfMissingdeclareQueueIfMissing(com.rabbitmq.client.Connection)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2/collector/rabbitmq/RabbitMQCollector$LazyInit.classRabbitMQCollector$LazyInitLazyInit(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder)maybeConnection"Unable to establish connection to RabbitMQ server: "Unable to establish connection to RabbitMQ server: "Timeout establishing connection to RabbitMQ server: "Timeout establishing connection to RabbitMQ server: consumerTag"zipkin-rabbitmq."zipkin-rabbitmq.channel"Failed to start RabbitMQ consumer "Failed to start RabbitMQ consumer maybeQueueDoesNotExist"NOT_FOUND"NOT_FOUNDRabbitMQSpanConsumerRabbitMQSpanConsumer(com.rabbitmq.client.Channel,zipkin2.collector.Collector,zipkin2.collector.CollectorMetrics)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/classes/zipkin2/collector/rabbitmq/RabbitMQCollector$RabbitMQSpanConsumer.classRabbitMQCollector$RabbitMQSpanConsumerenvelopepropsbodyaddressArraysplitAddresshostignoreThis collector consumes encoded binary messages from a RabbitMQ queue.Configuration including defaults needed to consume spans from a RabbitMQ queue.Queue zipkin spans will be consumed from. Defaults to "zipkin-spans".Lazy creates a connection and a queue before starting consumers copy them here and then pass this to the KafkaCollectorWorker ctor instead this sets up a channel for each consumer thread. We don't track channels, as the connection will close its channels implicitly check if queue already existsConsumes spans from messages on a RabbitMQ queue. Malformed messages will be discarded. Errorsin the storage component will similarly be ignored, with no retry of the message.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/ITRabbitMQCollector.javaITRabbitMQCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/testC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/ITRabbitMQCollector.classstartsWhenConfiguredQueueDoesntExiststartsWhenConfiguredQueueDoesntExist()messageWithMultipleSpans(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder,zipkin2.codec.SpanBytesEncoder)rabbitmqMetricsrabbitITRabbitMQCollector()"ignored""zipkin-test2"zipkin-test2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/ITRabbitMQCollector$1.classITRabbitMQCollector$1"bugs bunny"bugs bunnyObjectAssert<RabbitMQCollector>AbstractObjectAssert<ObjectAssert<RabbitMQCollector>,RabbitMQCollector>AbstractAssert<ObjectAssert<RabbitMQCollector>,RabbitMQCollector>Assert<ObjectAssert<RabbitMQCollector>,RabbitMQCollector>Descriptable<ObjectAssert<RabbitMQCollector>>ExtensionPoints<ObjectAssert<RabbitMQCollector>,RabbitMQCollector>? super RabbitMQCollectorCondition<? super RabbitMQCollector>Descriptable<Condition<? super RabbitMQCollector>>Comparator<? super RabbitMQCollector>Function<? super RabbitMQCollector,? extends T>Consumer<RabbitMQCollector>Predicate<? super RabbitMQCollector>AbstractAssert<ObjectAssert<RabbitMQCollector>,RabbitMQCollector>(zipkin2.collector.rabbitmq.RabbitMQCollector,java.lang.Class)"RabbitMQCollector{addresses=[%s:%s], queue=%s}"RabbitMQCollector{addresses=[%s:%s], queue=%s}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/ITRabbitMQCollector$2.classITRabbitMQCollector$2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/RabbitMQCollectorTest.javaRabbitMQCollectorTestassertThatThrownByC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/RabbitMQCollectorTest.class"localhost:80"localhost:80call()"Unable to establish connection to RabbitMQ server"Unable to establish connection to RabbitMQ server"RabbitMQCollector{addresses=[localhost:80], queue=zipkin}"RabbitMQCollector{addresses=[localhost:80], queue=zipkin} We can be pretty certain RabbitMQ isn't running on localhost port 80 NOTE.. This is probably not good as it can crash on transient failure..C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/RabbitMQExtension.javaRabbitMQExtensionport()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/src/test/java/zipkin2/collector/rabbitmq/RabbitMQExtension.classhost()declareQueuedeclareQueue(java.lang.String)newCollectorBuilder(java.lang.String)RABBIT_PORTRabbitMQExtension()Class<RabbitMQExtension>5672GenericContainer<RabbitMQContainer>Container<RabbitMQContainer>GenericContainer<RabbitMQContainer>(java.util.concurrent.Future)GenericContainer<RabbitMQContainer>(java.lang.String)GenericContainer<RabbitMQContainer>()GenericContainer<RabbitMQContainer>(org.testcontainers.images.RemoteDockerImage)GenericContainer<RabbitMQContainer>(org.testcontainers.utility.DockerImageName)"Using hostPort "Using hostPort "rabbitmqadmin"rabbitmqadmin"declare"declare"queue""name="name="Couldn't declare queue "Couldn't declare queue RabbitMQContainerRabbitMQContainer()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/test-classes/zipkin2/collector/rabbitmq/RabbitMQExtension$RabbitMQContainer.classRabbitMQExtension$RabbitMQContainerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/test-classes/zipkin2/collector/rabbitmqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/test-classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/test-classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/rabbitmq/target/test-classes"ghcr.io/openzipkin/rabbitmq-management-alpine:latest"ghcr.io/openzipkin/rabbitmq-management-alpine:latest".*Server startup complete.*".*Server startup complete.* rabbit's image doesn't expose any portC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribezipkin-collector-scribeCollector: Scribe (Legacy) error-prone doesn't like generated code -XepDisableWarningsInGeneratedCode${armeria.groupId}armeria-thrift0.13${armeria.version} for Generated annotations on Scribe types javax.annotationjavax.annotation-api${javax-annotation-api.version}armeria-junit4org.awaitilityawaitility${awaitility.version}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/NettyScribeServer.javaNettyScribeServerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/srczipkin2.collector.scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/NettyScribeServer.classisRunningisRunning()"FutureReturnValueIgnored"FutureReturnValueIgnoredNettyScribeServer(int,zipkin2.collector.scribe.ScribeSpanConsumer)bossGroupworkerGroupio.netty.bootstrapAbstractBootstrap<ServerBootstrap,ServerChannel>C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jarnetty-transport-4.1.54.FinalC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.FinalC:/Users/Semiu/.m2/repository/io/netty/netty-transportnetty-transportC:/Users/Semiu/.m2/repository/io/nettynettyC:/Users/Semiu/.m2/repository/ioioC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/ioC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/nettyC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/bootstrapbootstrapC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/bootstrap/AbstractBootstrap.classAbstractBootstrapbindbind(int)io.netty.channelChannelOption<?>C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/channelC:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/channel/ChannelOption.classChannelOptionio.netty.utilAbstractConstant<ChannelOption<?>>C:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jarnetty-common-4.1.54.FinalC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.FinalC:/Users/Semiu/.m2/repository/io/netty/netty-commonnetty-commonC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/ioC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/nettyC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/utilC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/AbstractConstant.classAbstractConstantConstant<ChannelOption<?>>C:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/Constant.classComparable<ChannelOption<?>>Entry<ChannelOption<?>,Object>Entry<ChannelOption<?>,Object>[]setChannelOptionssetChannelOptions(io.netty.channel.Channel,java.util.Map.Entry[],io.netty.util.internal.logging.InternalLogger)AttributeKey<?>C:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/AttributeKey.classAttributeKeyAbstractConstant<AttributeKey<?>>Constant<AttributeKey<?>>Comparable<AttributeKey<?>>Entry<AttributeKey<?>,Object>Entry<AttributeKey<?>,Object>[]setAttributessetAttributes(io.netty.channel.Channel,java.util.Map.Entry[])copiedMapcopiedMap(java.util.Map)Map<AttributeKey<?>,Object>attrsattrs()Map<ChannelOption<?>,Object>optionsoptions()handlerhandler()ChannelFactory<>C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/bootstrap/ChannelFactory.classChannelFactoryChannelFactory<? extends C>channelFactorychannelFactory()? extends ServerChannelChannelFactory<? extends ServerChannel>localAddresslocalAddress()attrs0attrs0()options0options0()newOptionsArraynewOptionsArray()AbstractBootstrapConfig<>C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/bootstrap/AbstractBootstrapConfig.classAbstractBootstrapConfigAbstractBootstrapConfig<B,C>config()AbstractBootstrapConfig<ServerBootstrap,ServerChannel>groupgroup()AbstractBootstrap<>handler(io.netty.channel.ChannelHandler)init(io.netty.channel.Channel)initAndRegisterinitAndRegister()bind(java.net.SocketAddress)bind(java.net.InetAddress,int)bind(java.lang.String,int)bind()registerregister()validatevalidate()AttributeKey<>AbstractConstant<>attrattr(io.netty.util.AttributeKey,java.lang.Object)AttributeKey<T>AbstractConstant<AttributeKey<T>>Constant<AttributeKey<T>>Comparable<AttributeKey<T>>ChannelOption<>optionoption(io.netty.channel.ChannelOption,java.lang.Object)ChannelOption<T>AbstractConstant<ChannelOption<T>>Constant<ChannelOption<T>>Comparable<ChannelOption<T>>localAddress(java.net.InetAddress,int)localAddress(java.lang.String,int)localAddress(int)localAddress(java.net.SocketAddress)C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/channel/ChannelFactory.classchannelFactory(io.netty.channel.ChannelFactory)channelFactory(io.netty.bootstrap.ChannelFactory)Class<? extends C>channel(java.lang.Class)Class<? extends ServerChannel>group(io.netty.channel.EventLoopGroup)AbstractBootstrap(io.netty.bootstrap.AbstractBootstrap)AbstractBootstrap<ServerBootstrap,ServerChannel>(io.netty.bootstrap.AbstractBootstrap)AbstractBootstrap()AbstractBootstrap<ServerBootstrap,ServerChannel>()EMPTY_ATTRIBUTE_ARRAYEMPTY_OPTION_ARRAYC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/NettyScribeServer$1.classNettyScribeServer$1ChannelInitializer<SocketChannel>C:/Users/Semiu/.m2/repository/io/netty/netty-transport/4.1.54.Final/netty-transport-4.1.54.Final.jar/io/netty/channel/ChannelInitializer.classChannelInitializerhandlerRemovedhandlerRemoved(io.netty.channel.ChannelHandlerContext)handlerAddedhandlerAdded(io.netty.channel.ChannelHandlerContext)exceptionCaughtexceptionCaught(io.netty.channel.ChannelHandlerContext,java.lang.Throwable)channelRegisteredchannelRegistered(io.netty.channel.ChannelHandlerContext)initChannelinitChannel(io.netty.channel.Channel)initChannel(io.netty.channel.socket.SocketChannel)ChannelInitializer()ChannelInitializer<SocketChannel>()ChannelHandler[]"Could not start scribe server."Could not start scribe server.io.netty.util.concurrentC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/concurrentC:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/concurrent/Future.class TODO: chain these futures, and probably block a bit https://line-armeria.slack.com/archives/C1NGPBUH2/p1591167918430500C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeCollector.javaScribeCollectorScribeCollector(zipkin2.collector.scribe.ScribeCollector.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeCollector.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/ScribeCollector$Builder.classScribeCollector$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/targetcategoryClass<ScribeCollector>9410"scribe""category == null"category == null"server not running"server not running"ScribeCollector{port="ScribeCollector{port=", category=", category=This collector accepts Scribe logs in a specified category. Each log entry is expected to containa single span, which is TBinaryProtocol big-endian, then base64 encoded. These spans are chainedto an {@link SpanConsumer#accept asynchronous span consumer}.Configuration including defaults needed to receive spans from a Scribe category.Category zipkin spans will be consumed from. Defaults to "zipkin"The port to listen on. Defaults to 9410Will throw an exception if the {@link Builder#port(int) port} is already in use.Returns zero until {@link #start()} was called.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeInboundHandler.javaScribeInboundHandlercloseOnFlushcloseOnFlush(io.netty.channel.Channel)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeInboundHandler.classrelease()flushResponsesflushResponses(io.netty.channel.ChannelHandlerContext)previouslySentResponseIndexnextResponseIndexMap<Integer,ByteBuf>pendingResponsesScribeInboundHandler(zipkin2.collector.scribe.ScribeSpanConsumer)scribeServiceTHRIFT_HEADERSHashMap<Integer,ByteBuf>AbstractMap<Integer,ByteBuf>HashMap<Integer,ByteBuf>()? super ByteBuf? extends ByteBufBiFunction<? super ByteBuf,? super ByteBuf,? extends ByteBuf>merge(java.lang.Integer,io.netty.buffer.ByteBuf,java.util.function.BiFunction)BiFunction<? super Integer,? super ByteBuf,? extends ByteBuf>compute(java.lang.Integer,java.util.function.BiFunction)computeIfPresent(java.lang.Integer,java.util.function.BiFunction)Function<? super Integer,? extends ByteBuf>computeIfAbsent(java.lang.Integer,java.util.function.Function)replace(java.lang.Integer,io.netty.buffer.ByteBuf)replace(java.lang.Integer,io.netty.buffer.ByteBuf,io.netty.buffer.ByteBuf)putIfAbsent(java.lang.Integer,io.netty.buffer.ByteBuf)BiConsumer<? super Integer,? super ByteBuf>getOrDefault(java.lang.Object,io.netty.buffer.ByteBuf)Entry<Integer,ByteBuf>Set<Entry<Integer,ByteBuf>>Collection<Entry<Integer,ByteBuf>>Iterable<Entry<Integer,ByteBuf>>Collection<ByteBuf>Iterable<ByteBuf>? extends IntegerMap<? extends Integer,? extends ByteBuf>put(java.lang.Integer,io.netty.buffer.ByteBuf)AbstractMap<Integer,ByteBuf>()Node<Integer,ByteBuf>TreeNode<Integer,ByteBuf>newTreeNode(int,java.lang.Integer,io.netty.buffer.ByteBuf,java.util.HashMap.Node)newNode(int,java.lang.Integer,io.netty.buffer.ByteBuf,java.util.HashMap.Node)Node<Integer,ByteBuf>[]putVal(int,java.lang.Integer,io.netty.buffer.ByteBuf,boolean,boolean)HashMap<Integer,ByteBuf>(java.util.Map)HashMap<Integer,ByteBuf>(int)HashMap<Integer,ByteBuf>(int,float)Class<ScribeInboundHandler>"/internal/zipkin-thriftrpc"/internal/zipkin-thriftrpc"application/x-thrift"application/x-thrift"Zipkin/ScribeInboundHandler"Zipkin/ScribeInboundHandlerctxpayloadrequestContextBuilderrequestContextresponseresponseIndexunused? extends HttpObjectorg.reactivestreamsPublisher<? extends HttpObject>C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jarreactive-streams-1.0.3C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.31.0.3C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streamsreactive-streamsC:/Users/Semiu/.m2/repository/org/reactivestreamsreactivestreamsC:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar/orgC:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar/org/reactivestreamsC:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar/org/reactivestreams/Publisher.classPublisherCompletableFuture<Object>C:/modules/java.base/java/util/concurrent/CompletableFuture.classCompletableFutureFuture<Object>CompletionStage<Object>C:/modules/java.base/java/util/concurrent/CompletionStage.classCompletionStageCompletableFuture<AggregatedHttpResponse>Future<AggregatedHttpResponse>CompletionStage<AggregatedHttpResponse>CompletableFuture<>CompletionStage<>CompletableFuture<U>CompletionStage<U>handlehandle(java.util.function.BiFunction)? super AggregatedHttpResponseBiFunction<? super AggregatedHttpResponse,Throwable,? extends U>CompletableFuture<T>Future<T>toCompletableFuturetoCompletableFuture()? extends CompletionStageFunction<Throwable,? extends CompletionStage>exceptionallyComposeAsyncexceptionallyComposeAsync(java.util.function.Function,java.util.concurrent.Executor)? extends CompletionStage<AggregatedHttpResponse>Function<Throwable,? extends CompletionStage<AggregatedHttpResponse>>exceptionallyComposeAsync(java.util.function.Function)exceptionallyComposeexceptionallyCompose(java.util.function.Function)Function<Throwable,? extends T>exceptionallyAsyncexceptionallyAsync(java.util.function.Function,java.util.concurrent.Executor)? extends AggregatedHttpResponseFunction<Throwable,? extends AggregatedHttpResponse>exceptionallyAsync(java.util.function.Function)exceptionallyexceptionally(java.util.function.Function)whenCompleteAsyncwhenCompleteAsync(java.util.function.BiConsumer,java.util.concurrent.Executor)BiConsumer<? super AggregatedHttpResponse,? super Throwable>whenCompleteAsync(java.util.function.BiConsumer)whenComplete(java.util.function.BiConsumer)handleAsynchandleAsync(java.util.function.BiFunction,java.util.concurrent.Executor)BiFunction<? super T,Throwable,? extends U>handleAsync(java.util.function.BiFunction)thenComposeAsyncthenComposeAsync(java.util.function.Function,java.util.concurrent.Executor)? extends CompletionStage<U>Function<? super T,? extends CompletionStage<U>>Function<? super AggregatedHttpResponse,? extends CompletionStage<U>>thenComposeAsync(java.util.function.Function)thenComposethenCompose(java.util.function.Function)CompletionStage<?>CompletionStage<Void>runAfterEitherAsyncrunAfterEitherAsync(java.util.concurrent.CompletionStage,java.lang.Runnable,java.util.concurrent.Executor)runAfterEitherAsync(java.util.concurrent.CompletionStage,java.lang.Runnable)runAfterEitherrunAfterEither(java.util.concurrent.CompletionStage,java.lang.Runnable)CompletionStage<? extends T>acceptEitherAsyncacceptEitherAsync(java.util.concurrent.CompletionStage,java.util.function.Consumer,java.util.concurrent.Executor)CompletionStage<? extends AggregatedHttpResponse>Consumer<? super AggregatedHttpResponse>acceptEitherAsync(java.util.concurrent.CompletionStage,java.util.function.Consumer)acceptEitheracceptEither(java.util.concurrent.CompletionStage,java.util.function.Consumer)applyToEitherAsyncapplyToEitherAsync(java.util.concurrent.CompletionStage,java.util.function.Function,java.util.concurrent.Executor)Function<? super T,U>Function<? super AggregatedHttpResponse,U>applyToEitherAsync(java.util.concurrent.CompletionStage,java.util.function.Function)applyToEitherapplyToEither(java.util.concurrent.CompletionStage,java.util.function.Function)runAfterBothAsyncrunAfterBothAsync(java.util.concurrent.CompletionStage,java.lang.Runnable,java.util.concurrent.Executor)runAfterBothAsync(java.util.concurrent.CompletionStage,java.lang.Runnable)runAfterBothrunAfterBoth(java.util.concurrent.CompletionStage,java.lang.Runnable)thenAcceptBothAsyncthenAcceptBothAsync(java.util.concurrent.CompletionStage,java.util.function.BiConsumer,java.util.concurrent.Executor)CompletionStage<? extends U>BiConsumer<? super T,? super U>BiConsumer<? super AggregatedHttpResponse,? super U>thenAcceptBothAsync(java.util.concurrent.CompletionStage,java.util.function.BiConsumer)thenAcceptBoththenAcceptBoth(java.util.concurrent.CompletionStage,java.util.function.BiConsumer)CompletionStage<V>thenCombineAsyncthenCombineAsync(java.util.concurrent.CompletionStage,java.util.function.BiFunction,java.util.concurrent.Executor)BiFunction<? super T,? super U,? extends V>BiFunction<? super AggregatedHttpResponse,? super U,? extends V>thenCombineAsync(java.util.concurrent.CompletionStage,java.util.function.BiFunction)thenCombinethenCombine(java.util.concurrent.CompletionStage,java.util.function.BiFunction)thenRunAsyncthenRunAsync(java.lang.Runnable,java.util.concurrent.Executor)thenRunAsync(java.lang.Runnable)thenRunthenRun(java.lang.Runnable)thenAcceptAsyncthenAcceptAsync(java.util.function.Consumer,java.util.concurrent.Executor)thenAcceptAsync(java.util.function.Consumer)thenAcceptthenAccept(java.util.function.Consumer)thenApplyAsyncthenApplyAsync(java.util.function.Function,java.util.concurrent.Executor)Function<? super AggregatedHttpResponse,? extends U>thenApplyAsync(java.util.function.Function)thenApply(java.util.function.Function)failedStagefailedStage(java.lang.Throwable)failedFuturefailedFuture(java.lang.Throwable)completedStagecompletedStage(java.lang.Object)delayedExecutordelayedExecutor(long,java.util.concurrent.TimeUnit)delayedExecutor(long,java.util.concurrent.TimeUnit,java.util.concurrent.Executor)completeOnTimeoutcompleteOnTimeout(java.lang.Object,long,java.util.concurrent.TimeUnit)completeOnTimeout(com.linecorp.armeria.common.AggregatedHttpResponse,long,java.util.concurrent.TimeUnit)orTimeoutorTimeout(long,java.util.concurrent.TimeUnit)completeAsynccompleteAsync(java.util.function.Supplier)Supplier<? extends AggregatedHttpResponse>completeAsync(java.util.function.Supplier,java.util.concurrent.Executor)CompletionStage<T>minimalCompletionStageminimalCompletionStage()copy()defaultExecutordefaultExecutor()newIncompleteFuturenewIncompleteFuture()getNumberOfDependentsgetNumberOfDependents()obtrudeExceptionobtrudeException(java.lang.Throwable)obtrudeValueobtrudeValue(java.lang.Object)obtrudeValue(com.linecorp.armeria.common.AggregatedHttpResponse)CompletableFuture[]CompletableFuture<?>CompletableFuture<?>[]anyOfanyOf(java.util.concurrent.CompletableFuture[])CompletableFuture<Void>allOf(java.util.concurrent.CompletableFuture[])? extends CompletionStage<T>Function<Throwable,? extends CompletionStage<T>>CompletableFuture<V>Future<V>complete(com.linecorp.armeria.common.AggregatedHttpResponse)getNow(com.linecorp.armeria.common.AggregatedHttpResponse)joinjoin()runAsyncrunAsync(java.lang.Runnable,java.util.concurrent.Executor)runAsync(java.lang.Runnable)supplyAsyncsupplyAsync(java.util.function.Supplier,java.util.concurrent.Executor)Supplier<U>supplyAsync(java.util.function.Supplier)CompletableFuture(java.lang.Object)CompletableFuture<AggregatedHttpResponse>(java.lang.Object)CompletableFuture()CompletableFuture<AggregatedHttpResponse>()asyncRunStageasyncRunStage(java.util.concurrent.Executor,java.lang.Runnable)asyncSupplyStageasyncSupplyStage(java.util.concurrent.Executor,java.util.function.Supplier)BiCompletion<?,?,?>C:/modules/java.base/java/util/concurrent/CompletableFuture$BiCompletion.classCompletableFuture$BiCompletionUniCompletion<?,?>C:/modules/java.base/java/util/concurrent/CompletableFuture$UniCompletion.classCompletableFuture$UniCompletionorpushorpush(java.util.concurrent.CompletableFuture,java.util.concurrent.CompletableFuture.BiCompletion)andTreeandTree(java.util.concurrent.CompletableFuture[],int,int)BiRun<?,?>C:/modules/java.base/java/util/concurrent/CompletableFuture$BiRun.classCompletableFuture$BiRunBiCompletion<?,?,Void>UniCompletion<?,Void>biRunbiRun(java.lang.Object,java.lang.Object,java.lang.Runnable,java.util.concurrent.CompletableFuture.BiRun)BiAccept<>C:/modules/java.base/java/util/concurrent/CompletableFuture$BiAccept.classCompletableFuture$BiAcceptBiCompletion<>UniCompletion<>biAcceptbiAccept(java.lang.Object,java.lang.Object,java.util.function.BiConsumer,java.util.concurrent.CompletableFuture.BiAccept)? super SBiConsumer<? super R,? super S>BiAccept<R,S>BiCompletion<R,S,Void>UniCompletion<R,Void>BiApply<>C:/modules/java.base/java/util/concurrent/CompletableFuture$BiApply.classCompletableFuture$BiApplybiApplybiApply(java.lang.Object,java.lang.Object,java.util.function.BiFunction,java.util.concurrent.CompletableFuture.BiApply)BiFunction<? super R,? super S,? extends T>BiApply<R,S,T>BiCompletion<R,S,T>UniCompletion<R,T>BiFunction<? super R,? super S,? extends AggregatedHttpResponse>BiApply<R,S,AggregatedHttpResponse>BiCompletion<R,S,AggregatedHttpResponse>UniCompletion<R,AggregatedHttpResponse>postFirepostFire(java.util.concurrent.CompletableFuture,java.util.concurrent.CompletableFuture,int)bipushbipush(java.util.concurrent.CompletableFuture,java.util.concurrent.CompletableFuture.BiCompletion)Function<? super Throwable,? extends T>UniExceptionally<T>C:/modules/java.base/java/util/concurrent/CompletableFuture$UniExceptionally.classCompletableFuture$UniExceptionallyUniCompletion<T,T>uniExceptionallyuniExceptionally(java.lang.Object,java.util.function.Function,java.util.concurrent.CompletableFuture.UniExceptionally)Function<? super Throwable,? extends AggregatedHttpResponse>UniExceptionally<AggregatedHttpResponse>UniCompletion<AggregatedHttpResponse,AggregatedHttpResponse>UniHandle<>C:/modules/java.base/java/util/concurrent/CompletableFuture$UniHandle.classCompletableFuture$UniHandleuniHandleuniHandle(java.lang.Object,java.util.function.BiFunction,java.util.concurrent.CompletableFuture.UniHandle)BiFunction<? super S,Throwable,? extends T>UniHandle<S,T>UniCompletion<S,T>BiFunction<? super S,Throwable,? extends AggregatedHttpResponse>UniHandle<S,AggregatedHttpResponse>UniCompletion<S,AggregatedHttpResponse>UniWhenComplete<T>C:/modules/java.base/java/util/concurrent/CompletableFuture$UniWhenComplete.classCompletableFuture$UniWhenCompleteuniWhenCompleteuniWhenComplete(java.lang.Object,java.util.function.BiConsumer,java.util.concurrent.CompletableFuture.UniWhenComplete)UniWhenComplete<AggregatedHttpResponse>postFire(java.util.concurrent.CompletableFuture,int)unipushunipush(java.util.concurrent.CompletableFuture.Completion)cleanStackcleanStack()postCompletepostComplete()screenExecutorscreenExecutor(java.util.concurrent.Executor)completeRelaycompleteRelay(java.lang.Object)encodeRelayencodeRelay(java.lang.Object)encodeOutcomeencodeOutcome(java.lang.Object,java.lang.Throwable)encodeOutcome(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.Throwable)completeThrowablecompleteThrowable(java.lang.Throwable,java.lang.Object)encodeThrowableencodeThrowable(java.lang.Throwable,java.lang.Object)completeThrowable(java.lang.Throwable)encodeThrowable(java.lang.Throwable)completeValuecompleteValue(java.lang.Object)completeValue(com.linecorp.armeria.common.AggregatedHttpResponse)encodeValueencodeValue(java.lang.Object)encodeValue(com.linecorp.armeria.common.AggregatedHttpResponse)completeNullcompleteNull()pushStackpushStack(java.util.concurrent.CompletableFuture.Completion)tryPushStacktryPushStack(java.util.concurrent.CompletableFuture.Completion)internalCompleteinternalComplete(java.lang.Object)NESTEDASYNCSYNCNILstackBiFunction<AggregatedHttpResponse,Throwable,Object>BiFunction<T,U,V>BiFunction<AggregatedHttpResponse,Throwable,V>Function<? super Object,? extends V>apply(java.lang.Object,java.lang.Object)apply(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.Throwable)contentreturnedConsumer<? super ByteBuf>Spliterator<ByteBuf>Iterator<ByteBuf>Consumer<ByteBuf>andThen(java.util.function.Consumer)accept(java.lang.Object)accept(io.netty.buffer.ByteBuf)Future<? super Void>? extends Future<? super Void>GenericFutureListener<? extends Future<? super Void>>C:/Users/Semiu/.m2/repository/io/netty/netty-common/4.1.54.Final/netty-common-4.1.54.Final.jar/io/netty/util/concurrent/GenericFutureListener.classGenericFutureListener TODO: errorprone wants us to check futures before returning, but what would be a sensible check? Say it is somehow canceled, would we take action? Would callback.onError() be redundant? Headers mostly copied from https://github.com/apache/thrift/blob/master/lib/javame/src/org/apache/thrift/transport/THttpClient.java#L130Closes the specified channel after all queued write requests are flushed.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeSpanConsumer.javaScribeSpanConsumerScribeSpanConsumer(zipkin2.collector.Collector,zipkin2.collector.CollectorMetrics,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeSpanConsumer.classList<LogEntry>Collection<LogEntry>Iterable<LogEntry>org.apache.thrift.asyncAsyncMethodCallback<ResultCode>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jarlibthrift-0.13.0C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.00.13.0C:/Users/Semiu/.m2/repository/org/apache/thrift/libthriftlibthriftC:/Users/Semiu/.m2/repository/org/apache/thriftthriftC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/orgC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apacheC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thriftC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/asyncasyncC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/async/AsyncMethodCallback.classAsyncMethodCallbackresultHandlerlogEntryonError(java.lang.Exception)onCompleteonComplete(java.lang.Object)onComplete(zipkin2.collector.scribe.generated.ResultCode)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/ScribeSpanConsumer$1.classScribeSpanConsumer$1 finagle-zipkin uses mime encoding Collectors may not be asynchronous so switch to blocking executor here.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/LogEntry.javaLogEntryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generatedgeneratedzipkin2.collector.scribe.generatedorg.apache.thrift.schemeIScheme<>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/schemeschemeC:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/scheme/IScheme.classISchemeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/LogEntry.classscheme(org.apache.thrift.protocol.TProtocol)readObjectreadObject(java.io.ObjectInputStream)writeObjectwriteObject(java.io.ObjectOutputStream)TUPLE_SCHEME_FACTORYSTANDARD_SCHEME_FACTORYMESSAGE_FIELD_DESCCATEGORY_FIELD_DESCSTRUCT_DESCorg.apache.thriftTBase<LogEntry,_Fields>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/TBase.classTBaseComparable<LogEntry>"cast""rawtypes"rawtypes"serial"serial"unused""Autogenerated by Thrift Compiler (0.12.0)"Autogenerated by Thrift Compiler (0.12.0)"2019-05-07"2019-05-07"LogEntry""category""message"Map<_Fields,FieldMetaData>tmpMapEnumMap<_Fields,FieldMetaData>C:/modules/java.base/java/util/EnumMap.classEnumMapAbstractMap<_Fields,FieldMetaData>Class<_Fields>Class<K>EnumMap<_Fields,FieldMetaData>(java.lang.Class)? super FieldMetaData? extends FieldMetaDataBiFunction<? super FieldMetaData,? super FieldMetaData,? extends FieldMetaData>merge(zipkin2.collector.scribe.generated.LogEntry._Fields,org.apache.thrift.meta_data.FieldMetaData,java.util.function.BiFunction)? super _FieldsBiFunction<? super _Fields,? super FieldMetaData,? extends FieldMetaData>compute(zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.function.BiFunction)computeIfPresent(zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.function.BiFunction)Function<? super _Fields,? extends FieldMetaData>computeIfAbsent(zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.function.Function)replace(zipkin2.collector.scribe.generated.LogEntry._Fields,org.apache.thrift.meta_data.FieldMetaData)replace(zipkin2.collector.scribe.generated.LogEntry._Fields,org.apache.thrift.meta_data.FieldMetaData,org.apache.thrift.meta_data.FieldMetaData)putIfAbsent(zipkin2.collector.scribe.generated.LogEntry._Fields,org.apache.thrift.meta_data.FieldMetaData)BiConsumer<? super _Fields,? super FieldMetaData>getOrDefault(java.lang.Object,org.apache.thrift.meta_data.FieldMetaData)Entry<_Fields,FieldMetaData>Set<Entry<_Fields,FieldMetaData>>Collection<Entry<_Fields,FieldMetaData>>Iterable<Entry<_Fields,FieldMetaData>>Collection<FieldMetaData>Iterable<FieldMetaData>Set<_Fields>Collection<_Fields>Iterable<_Fields>? extends _FieldsMap<? extends _Fields,? extends FieldMetaData>put(zipkin2.collector.scribe.generated.LogEntry._Fields,org.apache.thrift.meta_data.FieldMetaData)AbstractMap<_Fields,FieldMetaData>()EnumMap<>put(java.lang.Enum,java.lang.Object)EnumMap(java.util.Map)Map<_Fields,? extends FieldMetaData>EnumMap<_Fields,FieldMetaData>(java.util.Map)EnumMap<K,? extends V>AbstractMap<K,? extends V>EnumMap(java.util.EnumMap)EnumMap<_Fields,? extends FieldMetaData>AbstractMap<_Fields,? extends FieldMetaData>EnumMap<_Fields,FieldMetaData>(java.util.EnumMap)EnumMap(java.lang.Class)TBase<>? extends TBase<>Class<? extends TBase<>>? extends TFieldIdEnumMap<? extends TFieldIdEnum,FieldMetaData>Class<LogEntry>_Fields_Fields(short,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/LogEntry$_Fields.classLogEntry$_FieldsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated_fieldName_thriftIdMap<String,_Fields>byNameHashMap<String,_Fields>AbstractMap<String,_Fields>HashMap<String,_Fields>()BiFunction<? super _Fields,? super _Fields,? extends _Fields>merge(java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.function.BiFunction)BiFunction<? super String,? super _Fields,? extends _Fields>Function<? super String,? extends _Fields>replace(java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields)replace(java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields,zipkin2.collector.scribe.generated.LogEntry._Fields)putIfAbsent(java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields)BiConsumer<? super String,? super _Fields>getOrDefault(java.lang.Object,zipkin2.collector.scribe.generated.LogEntry._Fields)Entry<String,_Fields>Set<Entry<String,_Fields>>Collection<Entry<String,_Fields>>Iterable<Entry<String,_Fields>>Map<? extends String,? extends _Fields>put(java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields)AbstractMap<String,_Fields>()Node<String,_Fields>TreeNode<String,_Fields>newTreeNode(int,java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.HashMap.Node)newNode(int,java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields,java.util.HashMap.Node)Node<String,_Fields>[]putVal(int,java.lang.String,zipkin2.collector.scribe.generated.LogEntry._Fields,boolean,boolean)HashMap<String,_Fields>(java.util.Map)HashMap<String,_Fields>(int)HashMap<String,_Fields>(int,float)fieldEnumSet<_Fields>C:/modules/java.base/java/util/EnumSet.classEnumSetAbstractSet<_Fields>AbstractCollection<_Fields>EnumSet<>AbstractSet<>EnumSet<E>AbstractSet<E>allOf(java.lang.Class)AbstractCollection<>()AbstractSet<>()typeChecktypeCheck(java.lang.Enum)complementcomplement()addRangeaddRange(java.lang.Enum,java.lang.Enum)Enum<E>Comparable<E>rangerange(java.lang.Enum,java.lang.Enum)Enum[]Enum<>[]of(java.lang.Enum,java.lang.Enum[])Enum<E>[]of(java.lang.Enum,java.lang.Enum,java.lang.Enum,java.lang.Enum,java.lang.Enum)of(java.lang.Enum,java.lang.Enum,java.lang.Enum,java.lang.Enum)of(java.lang.Enum,java.lang.Enum,java.lang.Enum)of(java.lang.Enum,java.lang.Enum)of(java.lang.Enum)complementOfcomplementOf(java.util.EnumSet)copyOf(java.util.EnumSet)addAll()noneOfnoneOf(java.lang.Class)Enum<?>Comparable<?>Enum<?>[]EnumSet(java.lang.Class,java.lang.Enum[])EnumSet<>(java.lang.Class,java.lang.Enum[])universeelementTypefieldIdfields"Field "Field " doesn't exist!" doesn't exist!thriftIdfieldNameotherthis_present_categorythat_present_categorythis_present_messagethat_present_message8191131071524287lastComparison? extends LogEntryClass<? extends LogEntry>Map<String,? extends LogEntry>LogEntry[]? extends LogEntry[]Constructor<? extends LogEntry>? super ? extends LogEntryClass<? super ? extends LogEntry>TypeVariable<Class<? extends LogEntry>>TypeVariable<Class<? extends LogEntry>>[]iprotread(org.apache.thrift.protocol.TProtocol,org.apache.thrift.TBase)write(org.apache.thrift.protocol.TProtocol,org.apache.thrift.TBase)oprotsb"LogEntry("LogEntry("category:"category:"null"null"message:"message:teLogEntryStandardSchemeFactoryLogEntryStandardSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/LogEntry$LogEntryStandardSchemeFactory.classLogEntry$LogEntryStandardSchemeFactoryLogEntryStandardSchemeLogEntryStandardScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/LogEntry$LogEntryStandardScheme.classLogEntry$LogEntryStandardSchemeStandardScheme<LogEntry>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/scheme/StandardScheme.classStandardSchemeIScheme<LogEntry>structschemeFieldLogEntryTupleSchemeFactoryLogEntryTupleSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/LogEntry$LogEntryTupleSchemeFactory.classLogEntry$LogEntryTupleSchemeFactoryLogEntryTupleSchemeLogEntryTupleScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/LogEntry$LogEntryTupleScheme.classLogEntry$LogEntryTupleSchemeTupleScheme<LogEntry>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/scheme/TupleScheme.classTupleSchemeprotoptionalsincomingprotoStandardScheme<>Class<StandardScheme<>>? extends IScheme<>Class<? extends IScheme<>>DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING@generated requiredThe set of fields this struct contains, along with convenience methods for finding and manipulating them.Find the _Fields constant that matches fieldId, or null if its not found. CATEGORY MESSAGEFind the _Fields constant that matches fieldId, throwing an exceptionif it is not found.Find the _Fields constant that matches name, or null if its not found. isset id assignmentsPerforms a deep copy on <i>other</i>.Returns true if field category is set (has been assigned a value) and false otherwiseReturns true if field message is set (has been assigned a value) and false otherwiseReturns true if field corresponding to fieldID is set (has been assigned a value) and false otherwise check for required fields check for sub-struct validity check for required fields of primitive type, which can't be checked in the validate methodC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/ResultCode.javaResultCodeResultCode(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/ResultCode.classGet the integer value of this enum value, as defined in the Thrift IDL.Find a the enum type by its integer value, as defined in the Thrift IDL.null if the value is not found.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/Scribe.javaScribeTServiceClientFactory<Client>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/TServiceClientFactory.classTServiceClientFactoryargsTBase<?,?>"Log"Log"Log failed: unknown result"Log failed: unknown resultprotocolFactoryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$AsyncClient$Factory.classScribe$AsyncClient$FactoryclientManagerTAsyncClientFactory<AsyncClient>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/async/TAsyncClientFactory.classTAsyncClientFactorymethod_callTAsyncMethodCall<>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/async/TAsyncMethodCall.classTAsyncMethodCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$AsyncClient$Log_call.classScribe$AsyncClient$Log_callTAsyncMethodCall<ResultCode>AsyncMethodCallback<T>memoryTransport"Method call not finished!"Method call not finished!IC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Processor.classScribe$ProcessorProcessFunction<I,? extends TBase<>>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/ProcessFunction.classProcessFunctionMap<String,ProcessFunction<I,? extends TBase<>>>getProcessMapgetProcessMap(java.util.Map)_LOGGERTBaseProcessor<I>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/TBaseProcessor.classTBaseProcessorProcessor<>TBaseProcessor<>Class<Processor<>>Map<String,Processor<>>Processor[]Processor<>[]Constructor<Processor<>>? super Processor<>Class<? super Processor<>>TypeVariable<Class<Processor<>>>TypeVariable<Class<Processor<>>>[]ifaceHashMap<String,ProcessFunction<I,? extends TBase<>>>AbstractMap<String,ProcessFunction<I,? extends TBase<>>>HashMap<String,ProcessFunction<I,? extends TBase<>>>()? super ProcessFunction<I,? extends TBase<>>? extends ProcessFunction<I,? extends TBase<>>BiFunction<? super ProcessFunction<I,? extends TBase<>>,? super ProcessFunction<I,? extends TBase<>>,? extends ProcessFunction<I,? extends TBase<>>>ProcessFunction<>merge(java.lang.String,org.apache.thrift.ProcessFunction,java.util.function.BiFunction)BiFunction<? super String,? super ProcessFunction<I,? extends TBase<>>,? extends ProcessFunction<I,? extends TBase<>>>Function<? super String,? extends ProcessFunction<I,? extends TBase<>>>replace(java.lang.String,org.apache.thrift.ProcessFunction)replace(java.lang.String,org.apache.thrift.ProcessFunction,org.apache.thrift.ProcessFunction)putIfAbsent(java.lang.String,org.apache.thrift.ProcessFunction)BiConsumer<? super String,? super ProcessFunction<I,? extends TBase<>>>getOrDefault(java.lang.Object,org.apache.thrift.ProcessFunction)Entry<String,ProcessFunction<I,? extends TBase<>>>Set<Entry<String,ProcessFunction<I,? extends TBase<>>>>Collection<Entry<String,ProcessFunction<I,? extends TBase<>>>>Iterable<Entry<String,ProcessFunction<I,? extends TBase<>>>>Collection<ProcessFunction<I,? extends TBase<>>>Iterable<ProcessFunction<I,? extends TBase<>>>Map<? extends String,? extends ProcessFunction<I,? extends TBase<>>>put(java.lang.String,org.apache.thrift.ProcessFunction)AbstractMap<String,ProcessFunction<I,? extends TBase<>>>()Node<String,ProcessFunction<I,? extends TBase<>>>TreeNode<String,ProcessFunction<I,? extends TBase<>>>newTreeNode(int,java.lang.String,org.apache.thrift.ProcessFunction,java.util.HashMap.Node)newNode(int,java.lang.String,org.apache.thrift.ProcessFunction,java.util.HashMap.Node)Node<String,ProcessFunction<I,? extends TBase<>>>[]putVal(int,java.lang.String,org.apache.thrift.ProcessFunction,boolean,boolean)HashMap<String,ProcessFunction<I,? extends TBase<>>>(java.util.Map)HashMap<String,ProcessFunction<I,? extends TBase<>>>(int)HashMap<String,ProcessFunction<I,? extends TBase<>>>(int,float)processMapLog<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Processor$Log.classScribe$Processor$LogLog<>()getMethodNamegetMethodName()getEmptyArgsInstancegetEmptyArgsInstance()getResultgetResult(java.lang.Object,org.apache.thrift.TBase)isOnewayisOneway()rethrowUnhandledExceptionsrethrowUnhandledExceptions()process(int,org.apache.thrift.protocol.TProtocol,org.apache.thrift.protocol.TProtocol,java.lang.Object)ProcessFunction(java.lang.String)ProcessFunction<>(java.lang.String)getResult(zipkin2.collector.scribe.generated.Scribe.Iface,zipkin2.collector.scribe.generated.Scribe.Log_args)Log()ProcessFunction<I,Log_args>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$AsyncProcessor.classScribe$AsyncProcessorAsyncProcessFunction<I,? extends TBase<>,?>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/AsyncProcessFunction.classAsyncProcessFunctionMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>TBaseAsyncProcessor<I>C:/Users/Semiu/.m2/repository/org/apache/thrift/libthrift/0.13.0/libthrift-0.13.0.jar/org/apache/thrift/TBaseAsyncProcessor.classTBaseAsyncProcessorAsyncProcessor<>TBaseAsyncProcessor<>Class<AsyncProcessor<>>Map<String,AsyncProcessor<>>AsyncProcessor[]AsyncProcessor<>[]Constructor<AsyncProcessor<>>? super AsyncProcessor<>Class<? super AsyncProcessor<>>TypeVariable<Class<AsyncProcessor<>>>TypeVariable<Class<AsyncProcessor<>>>[]HashMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>AbstractMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>HashMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>()? super AsyncProcessFunction<I,? extends TBase<>,?>? extends AsyncProcessFunction<I,? extends TBase<>,?>BiFunction<? super AsyncProcessFunction<I,? extends TBase<>,?>,? super AsyncProcessFunction<I,? extends TBase<>,?>,? extends AsyncProcessFunction<I,? extends TBase<>,?>>AsyncProcessFunction<>merge(java.lang.String,org.apache.thrift.AsyncProcessFunction,java.util.function.BiFunction)BiFunction<? super String,? super AsyncProcessFunction<I,? extends TBase<>,?>,? extends AsyncProcessFunction<I,? extends TBase<>,?>>Function<? super String,? extends AsyncProcessFunction<I,? extends TBase<>,?>>replace(java.lang.String,org.apache.thrift.AsyncProcessFunction)replace(java.lang.String,org.apache.thrift.AsyncProcessFunction,org.apache.thrift.AsyncProcessFunction)putIfAbsent(java.lang.String,org.apache.thrift.AsyncProcessFunction)BiConsumer<? super String,? super AsyncProcessFunction<I,? extends TBase<>,?>>getOrDefault(java.lang.Object,org.apache.thrift.AsyncProcessFunction)Entry<String,AsyncProcessFunction<I,? extends TBase<>,?>>Set<Entry<String,AsyncProcessFunction<I,? extends TBase<>,?>>>Collection<Entry<String,AsyncProcessFunction<I,? extends TBase<>,?>>>Iterable<Entry<String,AsyncProcessFunction<I,? extends TBase<>,?>>>Collection<AsyncProcessFunction<I,? extends TBase<>,?>>Iterable<AsyncProcessFunction<I,? extends TBase<>,?>>Map<? extends String,? extends AsyncProcessFunction<I,? extends TBase<>,?>>put(java.lang.String,org.apache.thrift.AsyncProcessFunction)AbstractMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>()Node<String,AsyncProcessFunction<I,? extends TBase<>,?>>TreeNode<String,AsyncProcessFunction<I,? extends TBase<>,?>>newTreeNode(int,java.lang.String,org.apache.thrift.AsyncProcessFunction,java.util.HashMap.Node)newNode(int,java.lang.String,org.apache.thrift.AsyncProcessFunction,java.util.HashMap.Node)Node<String,AsyncProcessFunction<I,? extends TBase<>,?>>[]putVal(int,java.lang.String,org.apache.thrift.AsyncProcessFunction,boolean,boolean)HashMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>(java.util.Map)HashMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>(int)HashMap<String,AsyncProcessFunction<I,? extends TBase<>,?>>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$AsyncProcessor$Log.classScribe$AsyncProcessor$LogsendResponsesendResponse(org.apache.thrift.server.AbstractNonblockingServer.AsyncFrameBuffer,org.apache.thrift.TSerializable,byte,int)AsyncMethodCallback<>AsyncMethodCallback<R>getResultHandlergetResultHandler(org.apache.thrift.server.AbstractNonblockingServer.AsyncFrameBuffer,int)start(java.lang.Object,org.apache.thrift.TBase,org.apache.thrift.async.AsyncMethodCallback)AsyncProcessFunction(java.lang.String)AsyncProcessFunction<>(java.lang.String)methodNamestart(zipkin2.collector.scribe.generated.Scribe.AsyncIface,zipkin2.collector.scribe.generated.Scribe.Log_args,org.apache.thrift.async.AsyncMethodCallback)AsyncProcessFunction<I,Log_args,ResultCode>fbseqidfcallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/Scribe$AsyncProcessor$Log$1.classScribe$AsyncProcessor$Log$1"TTransportException writing to internal frame buffer"TTransportException writing to internal frame buffer"Exception writing to internal frame buffer"Exception writing to internal frame buffermsgType"TTransportException inside handler"TTransportException inside handler"TApplicationException inside handler"TApplicationException inside handler"Exception inside handler"Exception inside handlerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args.classScribe$Log_argsMESSAGES_FIELD_DESCTBase<Log_args,_Fields>Comparable<Log_args>"Log_args"Log_argsmerge(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,org.apache.thrift.meta_data.FieldMetaData,java.util.function.BiFunction)compute(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.function.BiFunction)computeIfPresent(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.function.BiFunction)computeIfAbsent(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.function.Function)replace(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,org.apache.thrift.meta_data.FieldMetaData)replace(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,org.apache.thrift.meta_data.FieldMetaData,org.apache.thrift.meta_data.FieldMetaData)putIfAbsent(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,org.apache.thrift.meta_data.FieldMetaData)put(zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,org.apache.thrift.meta_data.FieldMetaData)Class<Log_args>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args$_Fields.classScribe$Log_args$_Fieldsmerge(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.function.BiFunction)replace(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields)replace(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields)putIfAbsent(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields)getOrDefault(java.lang.Object,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields)put(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields)newTreeNode(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.HashMap.Node)newNode(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,java.util.HashMap.Node)putVal(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_args._Fields,boolean,boolean)__this__messagesArrayList<LogEntry>AbstractList<LogEntry>AbstractCollection<LogEntry>ArrayList<LogEntry>(int)Spliterator<LogEntry>? super LogEntryConsumer<? super LogEntry>Iterator<LogEntry>Stream<LogEntry>BaseStream<LogEntry,Stream<LogEntry>>Predicate<? super LogEntry>Collection<? extends LogEntry>Iterable<? extends LogEntry>add(zipkin2.collector.scribe.generated.LogEntry)AbstractCollection<LogEntry>()ListIterator<LogEntry>add(int,zipkin2.collector.scribe.generated.LogEntry)set(int,zipkin2.collector.scribe.generated.LogEntry)Comparator<? super LogEntry>UnaryOperator<LogEntry>Function<LogEntry,LogEntry>AbstractList<LogEntry>()ArrayList<LogEntry>(java.util.Collection)ArrayList<LogEntry>()other_elementelemthis_present_messagesthat_present_messages? extends Log_argsClass<? extends Log_args>Map<String,? extends Log_args>Log_args[]? extends Log_args[]Constructor<? extends Log_args>? super ? extends Log_argsClass<? super ? extends Log_args>TypeVariable<Class<? extends Log_args>>TypeVariable<Class<? extends Log_args>>[]"Log_args("Log_args("messages:"messages:Log_argsStandardSchemeFactoryLog_argsStandardSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args$Log_argsStandardSchemeFactory.classScribe$Log_args$Log_argsStandardSchemeFactoryLog_argsStandardSchemeLog_argsStandardScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args$Log_argsStandardScheme.classScribe$Log_args$Log_argsStandardSchemeStandardScheme<Log_args>IScheme<Log_args>_list0_elem1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/main/java/zipkin2/collector/scribe/generated/Scribe.class_i2_iter3Log_argsTupleSchemeFactoryLog_argsTupleSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args$Log_argsTupleSchemeFactory.classScribe$Log_args$Log_argsTupleSchemeFactoryLog_argsTupleSchemeLog_argsTupleScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_args$Log_argsTupleScheme.classScribe$Log_args$Log_argsTupleSchemeTupleScheme<Log_args>_iter4_list5_elem6_i7C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result.classScribe$Log_resultSUCCESS_FIELD_DESCTBase<Log_result,_Fields>Comparable<Log_result>"Log_result"Log_result"success"successmerge(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,org.apache.thrift.meta_data.FieldMetaData,java.util.function.BiFunction)compute(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.function.BiFunction)computeIfPresent(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.function.BiFunction)computeIfAbsent(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.function.Function)replace(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,org.apache.thrift.meta_data.FieldMetaData)replace(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,org.apache.thrift.meta_data.FieldMetaData,org.apache.thrift.meta_data.FieldMetaData)putIfAbsent(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,org.apache.thrift.meta_data.FieldMetaData)put(zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,org.apache.thrift.meta_data.FieldMetaData)Class<ResultCode>? extends TEnumClass<? extends TEnum>Class<Log_result>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result$_Fields.classScribe$Log_result$_Fieldsmerge(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.function.BiFunction)replace(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields)replace(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields)putIfAbsent(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields)getOrDefault(java.lang.Object,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields)put(java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields)newTreeNode(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.HashMap.Node)newNode(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,java.util.HashMap.Node)putVal(int,java.lang.String,zipkin2.collector.scribe.generated.Scribe.Log_result._Fields,boolean,boolean)this_present_successthat_present_successEnum<ResultCode>Comparable<ResultCode>compareTo(zipkin2.collector.scribe.generated.ResultCode)EnumDesc<ResultCode>DynamicConstantDesc<ResultCode>Optional<EnumDesc<ResultCode>>Enum<ResultCode>(java.lang.String,int)? extends Log_resultClass<? extends Log_result>Map<String,? extends Log_result>Log_result[]? extends Log_result[]Constructor<? extends Log_result>? super ? extends Log_resultClass<? super ? extends Log_result>TypeVariable<Class<? extends Log_result>>TypeVariable<Class<? extends Log_result>>[]"Log_result("Log_result("success:"success:Log_resultStandardSchemeFactoryLog_resultStandardSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result$Log_resultStandardSchemeFactory.classScribe$Log_result$Log_resultStandardSchemeFactoryLog_resultStandardSchemeLog_resultStandardScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result$Log_resultStandardScheme.classScribe$Log_result$Log_resultStandardSchemeStandardScheme<Log_result>IScheme<Log_result>Log_resultTupleSchemeFactoryLog_resultTupleSchemeFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result$Log_resultTupleSchemeFactory.classScribe$Log_result$Log_resultTupleSchemeFactoryLog_resultTupleSchemeLog_resultTupleScheme()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/classes/zipkin2/collector/scribe/generated/Scribe$Log_result$Log_resultTupleScheme.classScribe$Log_result$Log_resultTupleSchemeTupleScheme<Log_result> MESSAGESReturns true if field messages is set (has been assigned a value) and false otherwise SUCCESSReturns true if field success is set (has been assigned a value) and false otherwiseC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ITScribeCollector.javaITScribeCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/testeqdoAnswertimeslogEntry(zipkin2.Span)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ITScribeCollector.classnormalnormal()stopServerstopServer()startServerstartServer()ITScribeCollector()Class<Collector>Answer<>answeranswer(org.mockito.invocation.InvocationOnMock)invocation"localhost"localhostprotocolentriesCollector<? super LogEntry,A,R>Optional<LogEntry>BiConsumer<R,? super LogEntry>BiFunction<U,? super LogEntry,U>BinaryOperator<LogEntry>BiFunction<LogEntry,LogEntry,LogEntry>reduce(zipkin2.collector.scribe.generated.LogEntry,java.util.function.BinaryOperator)Function<? super LogEntry,? extends DoubleStream>Function<? super LogEntry,? extends LongStream>Function<? super LogEntry,? extends IntStream>Function<? super LogEntry,? extends Stream<? extends R>>ToDoubleFunction<? super LogEntry>ToLongFunction<? super LogEntry>ToIntFunction<? super LogEntry>Function<? super LogEntry,? extends R>Collector<LogEntry,?,List<LogEntry>>Function<Span,LogEntry>Function<Span,V>Function<? super LogEntry,? extends V>Function<V,LogEntry>Function<? super V,? extends Span>apply(zipkin2.Span)codeAbstractComparableAssert<?,ResultCode>AbstractObjectAssert<?,ResultCode>AbstractAssert<?,ResultCode>Assert<?,ResultCode>ExtensionPoints<?,ResultCode>ComparableAssert<?,ResultCode>? super ResultCodeCondition<? super ResultCode>Descriptable<Condition<? super ResultCode>>Comparator<? super ResultCode>Function<? super ResultCode,? extends T>Consumer<ResultCode>Predicate<? super ResultCode>AbstractAssert<?,ResultCode>(zipkin2.collector.scribe.generated.ResultCode,java.lang.Class) Java version of this sample code https://github.com/facebookarchive/scribe/wiki/Logging-MessagesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeCollectorTest.javaScribeCollectorTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeCollectorTest.classstart_failsWhenCantBindPortstart_failsWhenCantBindPort()anonymousPortanonymousPort()check_failsWhenNotStartedcheck_failsWhenNotStarted()ScribeCollectorTest()Class<IllegalStateException>samePortObjectAssert<ScribeCollector>AbstractObjectAssert<ObjectAssert<ScribeCollector>,ScribeCollector>AbstractAssert<ObjectAssert<ScribeCollector>,ScribeCollector>Assert<ObjectAssert<ScribeCollector>,ScribeCollector>Descriptable<ObjectAssert<ScribeCollector>>ExtensionPoints<ObjectAssert<ScribeCollector>,ScribeCollector>? super ScribeCollectorCondition<? super ScribeCollector>Descriptable<Condition<? super ScribeCollector>>Comparator<? super ScribeCollector>Function<? super ScribeCollector,? extends T>Consumer<ScribeCollector>Predicate<? super ScribeCollector>AbstractAssert<ObjectAssert<ScribeCollector>,ScribeCollector>(zipkin2.collector.scribe.ScribeCollector,java.lang.Class)", category=zipkin}", category=zipkin}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeSpanConsumerTest.javaScribeSpanConsumerTestawaitnewScribeSpanConsumernewScribeSpanConsumer(java.lang.String,zipkin2.storage.SpanConsumer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeSpanConsumerTest.classdecodesSpanGeneratedByFinagledecodesSpanGeneratedByFinagle()callbackExceptionDoesntThrowcallbackExceptionDoesntThrow()consumerExceptionBeforeCallbackDoesntSetFutureExceptionconsumerExceptionBeforeCallbackDoesntSetFutureException()malformedDataIsDroppedmalformedDataIsDropped()expectSuccessexpectSuccess(zipkin2.collector.scribe.ScribeSpanConsumer,zipkin2.collector.scribe.generated.LogEntry)entriesWithoutSpansAreSkippedentriesWithoutSpansAreSkipped()entriesWithSpansAreConsumedentriesWithSpansAreConsumed()encodedSpanv2zipkinQuery0zipkinQueryreallyLongAnnotationscribeMetricsScribeSpanConsumerTest()"zipkin-query"zipkin-query"127.0.0.1"127.0.0.194116054243957716233329L6054243957716233329"getTracesByIds"getTracesByIds3615651937927048332L36156519379270483321442493420635000L14424934206350001442493420747000L14424934207470001442493422583586L1442493422583586"Gc(9,0.PSScavenge,2015-09-17 12:37:02 +0000,304.milliseconds+762.microseconds)"Gc(9,0.PSScavenge,2015-09-17 12:37:02 +0000,304.milliseconds+762.microseconds)1442493422680000L1442493422680000"srv/finagle.version"srv/finagle.version"6.28.0"6.28.063840C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/test-classes/zipkin2/collector/scribe/ScribeSpanConsumerTest$CaptureAsyncMethodCallback.classScribeSpanConsumerTest$CaptureAsyncMethodCallbackC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/test-classes/zipkin2/collector/scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/test-classes/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/test-classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/target/test-classesresultCodeCaptureAsyncMethodCallbackCaptureAsyncMethodCallback()org.awaitility.core"notzipkin"notzipkin"hello world"hello world"notbase64"notbase64"endpoint was null"endpoint was nullC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeSpanConsumerTest$1.classScribeSpanConsumerTest$1""
      + "CgABq/sBMnzE048LAAMAAAAOZ2V0VHJhY2VzQnlJZHMKAATN0p+4EGfTdAoABav7ATJ8xNOPDwAGDAAAAAQKAAEABR/wq+2DeAsAAgAAAAJzcgwAAwgAAX8AAAEGAAIkwwsAAwAAAAx6aXBraW4tcXVlcnkAAAoAAQAFH/Cr7zj4CwACAAAIAGFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFh\n"
      + "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAACgABAAUf8KwLPyILAAIAAABOR2MoOSwwLlBTU2NhdmVuZ2UsMjAxNS0wOS0xNyAxMjozNzowMiArMDAwMCwzMDQubWlsbGlzZWNvbmRzKzc2Mi5taWNyb3NlY29uZHMpDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAIAAQABKZ6AAoAAQAFH/CsDLfACwACAAAAAnNzDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAADwAIDAAAAAULAAEAAAATc3J2L2ZpbmFnbGUudmVyc2lvbgsAAgAAAAY2LjI4LjAIAAMAAAAGDAAECAABfwAAAQYAAgAACwADAAAADHppcGtpbi1xdWVyeQAACwABAAAAD3Nydi9tdXgvZW5hYmxlZAsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAIAAAsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAJzYQsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAIkwwsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAJjYQsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAL5YAsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAZudW1JZHMLAAIAAAAEAAAAAQgAAwAAAAMMAAQIAAF/AAABBgACJMMLAAMAAAAMemlwa2luLXF1ZXJ5AAACAAkAAA==\n"CgABq/sBMnzE048LAAMAAAAOZ2V0VHJhY2VzQnlJZHMKAATN0p+4EGfTdAoABav7ATJ8xNOPDwAGDAAAAAQKAAEABR/wq+2DeAsAAgAAAAJzcgwAAwgAAX8AAAEGAAIkwwsAAwAAAAx6aXBraW4tcXVlcnkAAAoAAQAFH/Cr7zj4CwACAAAIAGFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFh
YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAACgABAAUf8KwLPyILAAIAAABOR2MoOSwwLlBTU2NhdmVuZ2UsMjAxNS0wOS0xNyAxMjozNzowMiArMDAwMCwzMDQubWlsbGlzZWNvbmRzKzc2Mi5taWNyb3NlY29uZHMpDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAIAAQABKZ6AAoAAQAFH/CsDLfACwACAAAAAnNzDAADCAABfwAAAQYAAiTDCwADAAAADHppcGtpbi1xdWVyeQAADwAIDAAAAAULAAEAAAATc3J2L2ZpbmFnbGUudmVyc2lvbgsAAgAAAAY2LjI4LjAIAAMAAAAGDAAECAABfwAAAQYAAgAACwADAAAADHppcGtpbi1xdWVyeQAACwABAAAAD3Nydi9tdXgvZW5hYmxlZAsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAIAAAsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAJzYQsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAIkwwsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAJjYQsAAgAAAAEBCAADAAAAAAwABAgAAX8AAAEGAAL5YAsAAwAAAAx6aXBraW4tcXVlcnkAAAsAAQAAAAZudW1JZHMLAAIAAAAEAAAAAQgAAwAAAAMMAAQIAAF/AAABBgACJMMLAAMAAAAMemlwa2luLXF1ZXJ5AAACAAkAAA==
C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-collector/scribe/src/test/java/zipkin2/collector/scribe/ScribeSpanConsumerTest$2.classScribeSpanConsumerTest$2 scope to scribe as we aren't creating the consumer with the builder. Storage finishes after callback so wait for it. as we shouldn't get here. Storage related exceptions are not propagated to the caller. Only marshalling ones are.Callbacks are performed asynchronously. If they throw, it hints that we are chaining futureswhen we shouldn'tFinagle's zipkin tracer breaks on a column width with a trailing newlineC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junitZipkin JUnitJUnit rule to spin-up a Zipkin server during testscom.squareup.okhttp3mockwebserver${okhttp.version} okhttp uses jul jul-to-slf4jC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/HttpFailure.javaHttpFailureC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junitC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/srczipkin2.junitDISCONNECT_DURING_REQUEST_BODYHttpFailure(okhttp3.mockwebserver.MockResponse)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/HttpFailure.classInstrumentation that use {@code POST} endpoints need to survive failures. Besides simply notstarting the zipkin server, you can enqueue failures like this to test edge cases. For example,that you log a failure when a 400 code is returned.Ex a network partition occurs in the middle of the POST requestEx code 400 when the server cannot read the spansNot exposed publicly in order to not leak okhttp3 types.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinDispatcher.javaZipkinDispatcheracceptSpansacceptSpans(okhttp3.mockwebserver.RecordedRequest,zipkin2.codec.SpanBytesDecoder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinDispatcher.classZipkinDispatcher(zipkin2.storage.StorageComponent,zipkin2.collector.CollectorMetrics,okhttp3.mockwebserver.MockWebServer)? extends ZipkinDispatcherClass<? extends ZipkinDispatcher>"POST"POST"Content-Type"Content-Type"/api/v1/spans"/api/v1/spans"/x-thrift"/x-thrift"/api/v2/spans"/api/v2/spans"/x-protobuf"/x-protobuf405404"Content-Encoding"Content-Encoding"gzip"gzip400"Cannot gunzip spans"Cannot gunzip spans202C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinDispatcher$1.classZipkinDispatcher$1"Cannot store"Cannot store500 unsupported method lenient on emptyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinRule.javaZipkinRuleKEEP_OPENreceivedSpanBytesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinRule.classBlockingQueue<MockResponse>Queue<MockResponse>Collection<MockResponse>Iterable<MockResponse>failureQueueLinkedBlockingQueue<MockResponse>AbstractQueue<MockResponse>AbstractCollection<MockResponse>LinkedBlockingQueue<MockResponse>()Spliterator<MockResponse>? super MockResponseConsumer<? super MockResponse>Iterator<MockResponse>Stream<MockResponse>BaseStream<MockResponse,Stream<MockResponse>>Predicate<? super MockResponse>? extends MockResponseCollection<? extends MockResponse>Iterable<? extends MockResponse>add(okhttp3.mockwebserver.MockResponse)AbstractCollection<MockResponse>()offer(okhttp3.mockwebserver.MockResponse)AbstractQueue<MockResponse>()Collection<? super MockResponse>Iterable<? super MockResponse>offer(okhttp3.mockwebserver.MockResponse,long,java.util.concurrent.TimeUnit)put(okhttp3.mockwebserver.MockResponse)Node<MockResponse>LinkedBlockingQueue<MockResponse>(java.util.Collection)LinkedBlockingQueue<MockResponse>(int)successDispatchdispatcherC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin2/junit/ZipkinRule$1.classZipkinRule$1dispatchdispatch(okhttp3.mockwebserver.RecordedRequest)maybeFailure"http://%s:%s"http://%s:%s"I/O exception in in-memory storage"I/O exception in in-memory storagehttpPortbaseStarts up a local Zipkin server, listening for http requests on {@link #httpUrl}.<p>This can be used to test instrumentation. For example, you can POST spans directly to thisserver.<p>See http://openzipkin.github.io/zipkin-api/#/Use this to connect. The zipkin v1 interface will be under "/api/v1"Use this to see how many requests you've sent to any zipkin http endpoint.Use this to see how many spans or serialized bytes were collected on the http endpoint.Stores the given spans directly, to setup preconditions for a test.<p>For example, if you are testing what happens when instrumentation adds a child to a trace,you'd add the parent here.Adds a one-time failure to the http endpoint.<p>Ex. If you want to test that you don't repeatedly send bad data, you could send a 400 back.zipkin.enqueueFailure(sendErrorResponse(400, "bad format"));type of failure the next call to the http endpoint responds withRetrieves all traces this zipkin server has received.Retrieves a trace by ID which Zipkin server has received, or null if not present. Note: this is a different behavior than Traces.getTrace() which is not nullable!Retrieves all service links between traces this zipkin server has received.Used to manually start the server.choose 0 to select an available portUsed to manually stop the server.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/test/java/zipkin2/junit/ZipkinRuleTest.javaZipkinRuleTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/test/java/zipkin2/junitC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/testfailBecauseExceptionWasNotThrownpostSpansV1postSpansV1(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-junit/src/test/java/zipkin2/junit/ZipkinRuleTest.classgetTraces_storedViaPostVersion2getTraces_storedViaPostVersion2(java.lang.String,zipkin2.codec.SpanBytesEncoder)"application/json"application/json"application/x-protobuf"application/x-protobufmediaType"foo"foomissingDurationwithDurationClass<IOException>expectedflake"test flaked"test flaked"Invalid Format"Invalid FormatisEqualTo(java.lang.String)? super CharacterComparator<? super Character>isUpperCaseisUpperCase()isLowerCaseisLowerCase()isEqualToIgnoringNewLinesisEqualToIgnoringNewLines(java.lang.CharSequence)isEqualToNormalizingNewlinesisEqualToNormalizingNewlines(java.lang.CharSequence)containsPatterncontainsPattern(java.util.regex.Pattern)containsPattern(java.lang.CharSequence)isSubstringOfisSubstringOf(java.lang.CharSequence)isEqualToNormalizingPunctuationAndWhitespaceisEqualToNormalizingPunctuationAndWhitespace(java.lang.CharSequence)isNotEqualToNormalizingWhitespaceisNotEqualToNormalizingWhitespace(java.lang.CharSequence)isEqualToNormalizingWhitespaceisEqualToNormalizingWhitespace(java.lang.CharSequence)isNotEqualToIgnoringWhitespaceisNotEqualToIgnoringWhitespace(java.lang.CharSequence)isEqualToIgnoringWhitespaceisEqualToIgnoringWhitespace(java.lang.CharSequence)inUnicodeinUnicode()isXmlEqualToContentOfisXmlEqualToContentOf(java.io.File)isXmlEqualToisXmlEqualTo(java.lang.CharSequence)doesNotMatchdoesNotMatch(java.util.regex.Pattern)matches(java.util.regex.Pattern)doesNotMatch(java.lang.CharSequence)matches(java.lang.CharSequence)doesNotEndWithdoesNotEndWith(java.lang.CharSequence)endsWith(java.lang.CharSequence)doesNotStartWithdoesNotStartWith(java.lang.CharSequence)startsWith(java.lang.CharSequence)doesNotContainPatterndoesNotContainPattern(java.util.regex.Pattern)doesNotContainPattern(java.lang.CharSequence)doesNotContainIgnoringCasedoesNotContainIgnoringCase(java.lang.CharSequence[])? extends CharSequenceIterable<? extends CharSequence>doesNotContain(java.lang.Iterable)doesNotContain(java.lang.CharSequence[])containsIgnoringCasecontainsIgnoringCase(java.lang.CharSequence)containsSubsequence(java.lang.CharSequence[])containsSequence(java.lang.CharSequence[])contains(java.lang.Iterable)contains(java.lang.CharSequence[])containsOnlyOnce(java.lang.CharSequence)containsOnlyDigitscontainsOnlyDigits()isNotEqualToIgnoringCaseisNotEqualToIgnoringCase(java.lang.CharSequence)isEqualToIgnoringCaseisEqualToIgnoringCase(java.lang.CharSequence)hasSameSizeAs(java.lang.CharSequence)hasLineCounthasLineCount(int)isNotJavaBlankisNotJavaBlank()isJavaBlankisJavaBlank()doesNotContainOnlyWhitespacesdoesNotContainOnlyWhitespaces()doesNotContainAnyWhitespacesdoesNotContainAnyWhitespaces()containsOnlyWhitespacescontainsOnlyWhitespaces()containsWhitespacescontainsWhitespaces()isNotBlankisNotBlank()isBlankisBlank()AbstractCharSequenceAssert(java.lang.CharSequence,java.lang.Class)AbstractCharSequenceAssert<?,String>(java.lang.String,java.lang.Class)stringsisEqualTo(java.lang.String,java.lang.Object[])AbstractByteArrayAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractByteArrayAssert.classAbstractByteArrayAssertAbstractArrayAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractArrayAssert.classAbstractArrayAssertAbstractEnumerableAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractEnumerableAssert.classAbstractEnumerableAssertAbstractByteArrayAssert<?>AbstractArrayAssert<?,byte[],Byte>AbstractEnumerableAssert<?,byte[],Byte>AbstractAssert<?,byte[]>Assert<?,byte[]>ExtensionPoints<?,byte[]>EnumerableAssert<AbstractEnumerableAssert<?,byte[],Byte>,Byte>ArraySortedAssert<AbstractArrayAssert<?,byte[],Byte>,Byte>decodedAsBase64decodedAsBase64()isBase64isBase64()isStrictlyBetween(java.lang.String,java.lang.String)isBetween(java.lang.String,java.lang.String)isGreaterThanOrEqualTo(java.lang.String)isGreaterThan(java.lang.String)isLessThanOrEqualTo(java.lang.String)isLessThan(java.lang.String)AbstractStringAssert(java.lang.String,java.lang.Class)AbstractStringAssert<?>(java.lang.String,java.lang.Class)spansInJsongzipSinkgzippedJson ensure jul-to-slf4j works write the span to the zipkin using http read the traces directly write the span to the zipkin using http api v2The rule is here to help debugging. Even partial spans should be returnedThe raw query can show affects like redundant rows in the data store. write the span to zipkin directlyNormally, a span can be reported twice: for client and server. However, there are bugs thathappened where several updates went to the same span id. {@link ZipkinRule#collectorMetrics}can be used to help ensure a span isn't reported more times than expected. not always a ConnectException! Zipkin didn't store the spans, as they shouldn't have been readable, due to disconnect The failure shouldn't affect later requests Zipkin didn't store the spans, as they shouldn't have been readable, due to the errorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-lens/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-lensZipkin LensRepackages Zipkin Lens into a jar so we can use it in Spring Bootnpm.skipTests Update occasionally based on LTS, but don't overrun what's in Alpine:
         https://nodejs.org/en/download/
         https://pkgs.alpinelinux.org/packages?name=nodejs&branch=edge node.version14.15.3exec-maven-plugin.version3.0.0frontend-maven-plugin.versionmaven-clean-plugin.version3.1.0maven-resources-plugin.version no dependencies as this is just javascript exec-maven-plugin${exec-maven-plugin.version}com.github.eirslettfrontend-maven-plugin${frontend-maven-plugin.version}maven-clean-plugin${maven-clean-plugin.version}maven-resources-plugin${maven-resources-plugin.version}remove existing NPM buildcleanexcludeDefaultDirectoriesfilesetsfilesetinstallDirectorynodeVersionv${node.version}environmentVariables
            create-react-app runs tests in watch mode unless this is defined. We define it here for running Maven locally.
            CIinstall node and npminstall-node-and-npmnpm installnpmargumentsinstallnpm lintrun lintnpm run buildrun buildnpm run testskipTests${npm.skipTests}run testcopy NPM build to zipkin-lens directory This needs to happen after compile or it could copy an empty directory! prepare-packagecopy-resources NPM build output will end up in the jar under the 'zipkin-lens' directory ${project.build.directory}/classes/zipkin-lens Allows us to use a true value in maven-exec-plugin when skipTests exist only in name normalize skipTests frontend-maven-plugin requires downloading via a public URL, and suggests exec-maven-plugin
         otherwise.

         ARM64 is not supported with musl, yet https://github.com/nodejs/node/blob/master/BUILDING.md
         See issue #3166

         There are problems on alpine+arm64 with posix_spawn. https://github.com/openzipkin/docker-java/issues/34
         So, always execute exporting MAVEN_OPTS=-Djdk.lang.Process.launchMechanism=vfork osarchaarch64/etc/alpine-release It isn't currently possible to disable frontend-maven-plugin.
               Instead, we set each execution to none  This duplicates exactly what we did in frontend-maven-plugin 
                create-react-app runs tests in watch mode unless this is defined. We define it here for running Maven locally.
                execgenerate-resourcesexecutableargumentlint Creates empty javadoc jar empty-javadoc-jarclassifierjavadocclassesDirectory${basedir}/javadocC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-serverZipkin Server Sometimes we need to override Armeria's Brave version brave.version5.13.2proto.generatedSourceDirectory${project.build.directory}/generated-test-sources/wireio.zipkin.bravebrave-bom${brave.version} Don't bring in brave's transitive dep on zipkin brave Makes sure spring doesn't eagerly bind tomcat or slf4j org.springframework.bootspring-boot-starter${spring-boot.version}spring-boot-starter-loggingspring-boot-starter-actuator Use log4j 2 as default logging implementation spring-boot-starter-log4j2 More efficient, gRPC ready server with brave tracing built-in armeria-spring-boot2-autoconfigurearmeria-logbackjavax.validationvalidation-apiarmeria-bravearmeria-grpc-protocolPrometheus metricsio.micrometermicrometer-registry-prometheus${micrometer.version}com.netflix.concurrency-limitsconcurrency-limits-core0.3.6micrometer-core the "exec" jar will exclude this  Optional, but packaged in the supported distribution  Cassandra backend  Elasticsearch http  MySQL backend  ActiveMQ Collector  Kafka Collector  RabbitMQ Collector  Scribe Collector  Trace api controller activity with Brave brave-context-slf4j    <dependency>      <groupId>io.zipkin.brave.cassandra</groupId>      <artifactId>brave-instrumentation-cassandra-driver</artifactId>      <version>0.10.3</version>      <optional>true</optional>    </dependency> Test dependencies  to test the experimental grpc endpoint with the square/wire library okhttparmeria-junit5 TODO: port everything to jupiter  Don't use spring-boot-starter-test as it complicates the dependency tree and causes heavier
         downloads. We only need the spring-provided libraries spring-boot-test-autoconfigurespring-boot-testorg.springframeworkspring-test${spring.version}com.jayway.jsonpathjson-pathactuator!skipActuator /actuator endpoints armeria-spring-boot2-actuator-autoconfigure Static content for the Lens UI src/main/resources wire-maven-plugin cannot get proto definitions from dependencies, so we will generate-test-sourcesgeneratedSourceDirectory${proto.generatedSourceDirectory} Adds the output directory from proto source generation for the test compiler build-helper-maven-pluginadd-test-sourcesourcespl.project13.mavengit-commit-id-plugin${git-commit-id.version}extract-git-inforevisionfailOnNoGitDirectoryspring-boot-maven-pluginzipkin.server.ZipkinServerrepackage Make a jar less than half the size, which only supports armeria-native features slim https://github.com/spring-projects/spring-boot/issues/3426 transitive exclude doesn't work excludeGroupIds
                com.google.auto.value,com.google.guava,io.dropwizard.metrics,com.datastax.oss,com.github.jnr,org.ow2.asm,org.jooq,javax.xml.bind,org.mariadb.jdbc,com.zaxxer,org.apache.activemq,org.apache.geronimo.specs,org.fusesource.hawtbuf,org.apache.kafka,com.github.luben,org.lz4,org.xerial.snappy,com.rabbitmq,jakarta.annotation,org.apache.thrift,org.apache.logging.log4j
               Actuator spring-boot-actuator-autoconfigurespring-boot-actuatorcom.fasterxml.jackson.datatypejackson-datatype-jsr310 Log4J 2  Unnecessary netty deps netty-tcnative-boringssl-staticnetty-codec-haproxy Unnecessary micrometer deps  TODO: https://github.com/micrometer-metrics/micrometer/issues/1599                 <dependency>                  &lt;!&ndash; only used by TimeWindowPercentileHistogram &ndash;&gt;                  <groupId>org.hdrhistogram</groupId>                  <artifactId>HdrHistogram</artifactId>                </dependency>                  &lt;!&ndash; we don't use pause detector &ndash;&gt;                  <groupId>org.latencyutils</groupId>                  <artifactId>LatencyUtils</artifactId> storage and collectors which have 3rd party deps io.zipkin.brave.cassandrabrave-instrumentation-cassandra-driverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/EnableZipkinServer.javaEnableZipkinServerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkinC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/srczipkin.serverElementType[]Class<InternalZipkinConfiguration>Custom servers are possible, but not supported by the community. Please use our<a href="https://github.com/openzipkin/zipkin#quick-start">default server build</a> first.If you find something missing, please <a href="https://gitter.im/openzipkin/zipkin">gitter</a> usabout it before making a custom server.<p>If you decide to make a custom server, you accept responsibility for troubleshooting yourbuild or configuration problems, even if such problems are a reaction to a change made by theZipkin maintainers. In other words, custom servers are possible, but not supported.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/ZipkinServer.javaZipkinServerApplicationContextInitializer[]org.springframework.contextApplicationContextInitializer<?>C:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2/spring-context-5.3.2.jarspring-context-5.3.2C:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2C:/Users/Semiu/.m2/repository/org/springframework/spring-contextspring-contextC:/Users/Semiu/.m2/repository/org/springframeworkspringframeworkC:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2/spring-context-5.3.2.jar/orgC:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2/spring-context-5.3.2.jar/org/springframeworkC:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2/spring-context-5.3.2.jar/org/springframework/contextC:/Users/Semiu/.m2/repository/org/springframework/spring-context/5.3.2/spring-context-5.3.2.jar/org/springframework/context/ApplicationContextInitializer.classApplicationContextInitializerApplicationContextInitializer<?>[]Class<ZipkinServer>"=false"=false"spring.config.name=zipkin-server"spring.config.name=zipkin-serverThis adds the {@link EnableAutoConfiguration} annotation, but disables it by default to savestartup time.<p>Supported Zipkin modules like zipkin-gcp need to explicitly configure themselves.<p>For example, add the following to {@code src/main/resources/zipkin-server-stackdriver.yml}:zipkin:internal:module:stackdriver: zipkin.module.storage.stackdriver.ZipkinStackdriverStorageModule Avoids potentially expensive DNS lookup and inaccurate startup timingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/BodyIsExceptionMessage.javaBodyIsExceptionMessageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2zipkin2.server.internalBAD_REQUESTINTERNAL_SERVER_ERRORANY_TEXT_TYPEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/BodyIsExceptionMessage.classBodyIsExceptionMessage()Class<BodyIsExceptionMessage>req"/api/v"/api/v"Unexpected error handling request."Unexpected error handling request.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ConditionalOnSelfTracing.javaConditionalOnSelfTracingClass<SelfTracingCondition>checkForBravecheckForBrave()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ConditionalOnSelfTracing$SelfTracingCondition.classConditionalOnSelfTracing$SelfTracingConditionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/targetBRAVE_PRESENT"brave.Tracing"brave.TracingselfTracingEnabled"zipkin.self-tracing.enabled"zipkin.self-tracing.enabledexpectedStorageTypeClass<ConditionalOnSelfTracing>Map<String,ConditionalOnSelfTracing>ConditionalOnSelfTracing[]Constructor<ConditionalOnSelfTracing>? super ConditionalOnSelfTracingClass<? super ConditionalOnSelfTracing>TypeVariable<Class<ConditionalOnSelfTracing>>TypeVariable<Class<ConditionalOnSelfTracing>>[]"storageType"storageType"zipkin.storage.type"zipkin.storage.type"Brave must be in the classpath"Brave must be in the classpath"zipkin.self-tracing.enabled isn't true"zipkin.self-tracing.enabled isn't true"zipkin.storage.type was: "zipkin.storage.type was: " expected " expected This helps solve a number of problems including the following, which sometimes only break in analpine JRE. The solution is to go with pure properties instead.<p>ConditionalOnClass(name = "brave.Tracing")<p>ConditionalOnBean(Brave.class)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ConditionalOnThrottledStorage.javaConditionalOnThrottledStorageClass<ThrottledStorageCondition>throttleEnabled"zipkin.storage.throttle.enabled"zipkin.storage.throttle.enabled"zipkin.storage.throttle.enabled isn't true"zipkin.storage.throttle.enabled isn't trueC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/EnableZipkinServer.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/InternalZipkinConfiguration.javaInternalZipkinConfigurationClass<ArmeriaAutoConfiguration>Class<ZipkinConfiguration>Class<ZipkinHttpConfiguration>Class<ZipkinUiConfiguration>Class<ZipkinCassandra3StorageConfiguration>Class<ZipkinElasticsearchStorageConfiguration>Class<ZipkinMySQLStorageConfiguration>Class<ZipkinScribeCollectorConfiguration>Class<ZipkinSelfTracingConfiguration>Class<ZipkinQueryApiV2>Class<ZipkinHttpCollector>Class<ZipkinGrpcCollector>Class<ZipkinActiveMQCollectorConfiguration>Class<ZipkinKafkaCollectorConfiguration>Class<ZipkinRabbitMQCollectorConfiguration>Class<ZipkinMetricsController>Class<ZipkinHealthController>Class<ZipkinPrometheusMetricsConfiguration>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/JsonUtil.javaJsonUtilTWOSPACES_LF_INDENTERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/JsonUtil.classJSON_FACTORY"  "  "\n"generatorprettyPrinterUtilities for working with JSON.Creates a new {@link JsonGenerator} with pretty-printing enabled forcing {@code '\n'}between lines, as opposed to Jackson's default which uses the system line separator.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/MicrometerCollectorMetrics.javaMicrometerCollectorMetricscheckScopedcheckScoped()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/MicrometerCollectorMetrics.classMicrometerCollectorMetrics(java.lang.String,io.micrometer.core.instrument.MeterRegistry)messageSpansmessageBytesregistryInstanceregistrymeterRegistry"zipkin_collector.messages"zipkin_collector.messages"cumulative amount of messages received"cumulative amount of messages received"transport""zipkin_collector.messages_dropped"zipkin_collector.messages_dropped"cumulative amount of messages received that were later dropped"cumulative amount of messages received that were later dropped"zipkin_collector.bytes"zipkin_collector.bytes"cumulative amount of bytes received"cumulative amount of bytes received"zipkin_collector.spans"zipkin_collector.spans"cumulative amount of spans received"cumulative amount of spans received"zipkin_collector.spans_dropped"zipkin_collector.spans_dropped"cumulative amount of spans received that were later dropped"cumulative amount of spans received that were later droppedio.micrometer.core.instrumentBuilder<AtomicInteger>C:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jarmicrometer-core-1.6.2C:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2C:/Users/Semiu/.m2/repository/io/micrometer/micrometer-coreC:/Users/Semiu/.m2/repository/io/micrometermicrometerC:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jar/ioC:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jar/io/micrometerC:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jar/io/micrometer/coreC:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jar/io/micrometer/core/instrumentinstrumentC:/Users/Semiu/.m2/repository/io/micrometer/micrometer-core/1.6.2/micrometer-core-1.6.2.jar/io/micrometer/core/instrument/Gauge$Builder.classGauge$Builderregister(io.micrometer.core.instrument.MeterRegistry)strongReferencestrongReference(boolean)syntheticsynthetic(io.micrometer.core.instrument.Meter.Id)baseUnitbaseUnit(java.lang.String)description(java.lang.String)tag(java.lang.String,java.lang.String)Iterable<Tag>tags(java.lang.Iterable)tags(java.lang.String[])ToDoubleFunction<AtomicInteger>"zipkin_collector.message_spans"zipkin_collector.message_spansapplyAsDoubleapplyAsDouble(java.lang.Object)applyAsDouble(java.util.concurrent.atomic.AtomicInteger)"count of spans per message"count of spans per message"zipkin_collector.message_bytes"zipkin_collector.message_bytes"size of a message containing serialized spans"size of a message containing serialized spans"always scope with ActuateCollectorMetrics.forTransport"always scope with ActuateCollectorMetrics.forTransportThis is a simple metric service that exports the following to the "/metrics" endpoint:<li>counter.zipkin_collector.messages.$transport - cumulative messages received; shouldrelate to messages reported by instrumented apps</li><li>counter.zipkin_collector.messages_dropped.$transport - cumulative messages dropped;reasons include client disconnects or malformed content</li><li>counter.zipkin_collector.bytes.$transport - cumulative message bytes</li><li>counter.zipkin_collector.spans.$transport - cumulative spans read; should relate tomessages reported by instrumented apps</li><li>counter.zipkin_collector.spans_dropped.$transport - cumulative spans dropped; reasonsinclude sampling or storage failures</li><li>gauge.zipkin_collector.message_spans.$transport - last count of spans in a message</li><li>gauge.zipkin_collector.message_bytes.$transport - last count of bytes in a message</li>See https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-metrics.htmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/WrappingExecutorService.javaWrappingExecutorServiceC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/WrappingExecutorService.classCallable<T>C:/modules/java.base/java/util/concurrent/Callable.classCallable? extends Callable<T>Collection<? extends Callable<T>>Iterable<? extends Callable<T>>wrapwrap(java.util.Collection)Callable<>Callable<C>tasktimeoutList<Future<T>>Collection<Future<T>>Iterable<Future<T>>tasksArrayList<Callable<T>>AbstractList<Callable<T>>AbstractCollection<Callable<T>>Collection<Callable<T>>Iterable<Callable<T>>List<Callable<T>>ArrayList<Callable<T>>(int)Spliterator<Callable<T>>? super Callable<T>Consumer<? super Callable<T>>Iterator<Callable<T>>Stream<Callable<T>>BaseStream<Callable<T>,Stream<Callable<T>>>Predicate<? super Callable<T>>add(java.util.concurrent.Callable)AbstractCollection<Callable<T>>()ListIterator<Callable<T>>add(int,java.util.concurrent.Callable)set(int,java.util.concurrent.Callable)Comparator<? super Callable<T>>UnaryOperator<Callable<T>>Function<Callable<T>,Callable<T>>AbstractList<Callable<T>>()ArrayList<Callable<T>>(java.util.Collection)ArrayList<Callable<T>>()Spliterator<? extends Callable<T>>? super ? extends Callable<T>Consumer<? super ? extends Callable<T>>Iterator<? extends Callable<T>>Stream<? extends Callable<T>>BaseStream<? extends Callable<T>,Stream<? extends Callable<T>>>Predicate<? super ? extends Callable<T>>Used to implement a context propagating executor service which wraps tasks copy/pasted from BraveC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinActuatorImporter.javaZipkinActuatorImporterZipkinActuatorImporter(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinActuatorImporter.classactuatorImplClassPROPERTY_NAME_ACTUATOR_INCLUDEPROPERTY_NAME_ACTUATOR_ENABLEDACTUATOR_IMPL_CLASSApplicationContextInitializer<GenericApplicationContext>Class<ZipkinActuatorImporter>"com.linecorp.armeria.spring.actuate.ArmeriaSpringActuatorAutoConfiguration"com.linecorp.armeria.spring.actuate.ArmeriaSpringActuatorAutoConfiguration"zipkin.internal.actuator.enabled"zipkin.internal.actuator.enabled"zipkin.internal.actuator.include"zipkin.internal.actuator.includeenvorg.springframework.boot.context.properties.bindBindResult<String[]>C:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jarspring-boot-2.4.1C:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1C:/Users/Semiu/.m2/repository/org/springframework/boot/spring-bootspring-bootC:/Users/Semiu/.m2/repository/org/springframework/bootbootC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/orgC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframeworkC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframework/bootC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframework/boot/contextC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframework/boot/context/propertiesC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframework/boot/context/properties/bindC:/Users/Semiu/.m2/repository/org/springframework/boot/spring-boot/2.4.1/spring-boot-2.4.1.jar/org/springframework/boot/context/properties/bind/BindResult.classBindResultorElseorElse(java.lang.String[])BindResult<>BindResult<T>XorElseThroworElseThrow(java.util.function.Supplier)? extends XSupplier<? extends X>orElseGetorElseGet(java.util.function.Supplier)? extends String[]Supplier<? extends String[]>orElse(java.lang.Object)BindResult<U>? super String[]Function<? super String[],? extends U>ifBoundifBound(java.util.function.Consumer)Consumer<? super String[]>isBoundisBound()Class<String[]>"false""skipping actuator as it is disabled"skipping actuator as it is disabled"no actuator configuration found under path "no actuator configuration found under path "attempting to load actuator configuration: "attempting to load actuator configuration: BeanDefinitionCustomizer[]"skipping actuator as implementation is not available"skipping actuator as implementation is not available"skipping unloadable actuator config "skipping unloadable actuator config When auto-configuration is enabled, actuator and all of its subordinate endpoints such as {@codeBeansEndpointAutoConfiguration} load, subject to further conditions like {@codemanagement.endpoint.health.enabled=false}. When auto-configuration is disabled, theseconfiguration discovered indirectly via {@code META-INF/spring.factories} are no longer loaded.This type helps load the actuator functionality we currently support without a compilationdependency on actuator, and without relying on auto-configuration being enabled.<p><h3>Implementation note</h3><p>It may be possible to re-implement this as {@link ImportSelector} to provide {@link#ACTUATOR_IMPL_CLASS} and the endpoint configuration types from {@link#PROPERTY_NAME_ACTUATOR_INCLUDE}. look at RATIONALE.md and update if relevant when changing this file At this point in the life-cycle, env can directly resolve plain properties, like the boolean above. If you tried to resolve a property bound by a yaml list, it returns null, as they are not yet bound. As we are in a configurable environment, we can bind lists properties. We expect this to take includes from PROPERTY_NAME_ACTUATOR_INCLUDE yaml path of zipkin-server-shared.yml. Skip any classes that didn't match due to driftC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinConfiguration.javaZipkinConfigurationmetrics(io.micrometer.core.instrument.MeterRegistry)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinConfiguration.class"(inferred)"(inferred)traceIdSamplertraceIdSampler(float)"${zipkin.collector.sample-rate:1.0}"${zipkin.collector.sample-rate:1.0}Class<InMemoryConfiguration>Class<ThrottledStorageComponentEnhancer>Class<TracingStorageComponentEnhancer>beanFactoryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinConfiguration$ThrottledStorageComponentEnhancer.classZipkinConfiguration$ThrottledStorageComponentEnhancerThrottledStorageComponentEnhancerThrottledStorageComponentEnhancer()Class<ZipkinStorageThrottleProperties>beanbeanNamethrottlePropertiesClass<MeterRegistry>"tracing"tracingClass<Tracing>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinConfiguration$TracingStorageComponentEnhancer.classZipkinConfiguration$TracingStorageComponentEnhancerTracingStorageComponentEnhancerTracingStorageComponentEnhancer()storage(boolean,boolean,int,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinConfiguration$InMemoryConfiguration.classZipkinConfiguration$InMemoryConfiguration"${zipkin.storage.strict-trace-id:true}"${zipkin.storage.strict-trace-id:true}"${zipkin.storage.search-enabled:true}"${zipkin.storage.search-enabled:true}"${zipkin.storage.mem.max-spans:500000}"${zipkin.storage.mem.max-spans:500000}"${zipkin.storage.autocomplete-keys:}"${zipkin.storage.autocomplete-keys:}InMemoryConfigurationInMemoryConfiguration()Class<StorageTypeMemAbsentOrEmpty>maxSpansStorageTypeMemAbsentOrEmptyStorageTypeMemAbsentOrEmpty()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinConfiguration$StorageTypeMemAbsentOrEmpty.classZipkinConfiguration$StorageTypeMemAbsentOrEmptycondition"mem"memBase collector and storage configurations needed for higher-level integrationsNeed this to resolve cyclic instantiation issue with spring when instantiating with metricsand tracing.<p>Ref: <a href="https://stackoverflow.com/a/19688634">Tracking down cause of Spring's "noteligible for auto-proxying"</a></p>Need this to resolve cyclic instantiation issue with spring when instantiating with tracing.This is a special-case configuration if there's no StorageComponent of any kind. In-Mem cansupply both read apis, so we add two beans here.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinGrpcCollector.javaZipkinGrpcCollectorgrpcCollectorConfiguratorgrpcCollectorConfigurator(zipkin2.storage.StorageComponent,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinGrpcCollector.classZipkinGrpcCollector()"zipkin.collector.grpc.enabled"zipkin.collector.grpc.enabledgrpcMetrics"grpc"grpc? extends ZipkinGrpcCollectorClass<? extends ZipkinGrpcCollector>com.linecorp.armeria.springconfigure(com.linecorp.armeria.server.ServerBuilder)"/zipkin.proto3.SpanService/Report"/zipkin.proto3.SpanService/ReportSpanServiceSpanService(zipkin2.collector.Collector,zipkin2.collector.CollectorMetrics)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinGrpcCollector$SpanService.classZipkinGrpcCollector$SpanServiceCompletableFuture<ByteBuf>Future<ByteBuf>CompletionStage<ByteBuf>CompletableFuture<>(java.lang.Object)CompletableFuture<>()BiRun<>UniExceptionally<>UniWhenComplete<>Function<ServiceRequestContext,ScheduledExecutorService>Supplier<ScheduledExecutorService>Function<ServiceRequestContext,V>? super ScheduledExecutorServiceFunction<? super ScheduledExecutorService,? extends V>Function<V,ScheduledExecutorService>? extends ServiceRequestContextFunction<? super V,? extends ServiceRequestContext>apply(com.linecorp.armeria.server.ServiceRequestContext)CompletableFutureCallbackCompletableFutureCallback()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ZipkinGrpcCollector$CompletableFutureCallback.classZipkinGrpcCollector$CompletableFutureCallbackCollector for receiving spans on a gRPC endpoint. disabled by default collector.accept might block so need to move off the event loop. We make sure the callback is context aware to continue the trace.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpCollector.javaZipkinHttpCollectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpCollector.classBINARY_ANNOTATION_FIELD_SUFFIXtestForUnexpectedFormattestForUnexpectedFormat(zipkin2.codec.BytesDecoder,java.nio.ByteBuffer)maybeLogmaybeLog(java.lang.String,com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.AggregatedHttpRequest)validateAndStoreSpansvalidateAndStoreSpans(zipkin2.codec.SpanBytesDecoder,com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.HttpRequest)ZipkinHttpCollector(zipkin2.storage.StorageComponent,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics)"StaticAssignmentInConstructor"StaticAssignmentInConstructor"zipkin.collector.http.enabled"zipkin.collector.http.enabled'y'"http"http? extends ZipkinHttpCollectorClass<? extends ZipkinHttpCollector>CompletableFuture<AggregatedHttpRequest>Future<AggregatedHttpRequest>CompletionStage<AggregatedHttpRequest>? super AggregatedHttpRequestBiFunction<? super AggregatedHttpRequest,Throwable,? extends U>? extends CompletionStage<AggregatedHttpRequest>Function<Throwable,? extends CompletionStage<AggregatedHttpRequest>>? extends AggregatedHttpRequestFunction<Throwable,? extends AggregatedHttpRequest>BiConsumer<? super AggregatedHttpRequest,? super Throwable>Function<? super AggregatedHttpRequest,? extends CompletionStage<U>>CompletionStage<? extends AggregatedHttpRequest>Consumer<? super AggregatedHttpRequest>Function<? super AggregatedHttpRequest,U>BiConsumer<? super AggregatedHttpRequest,? super U>BiFunction<? super AggregatedHttpRequest,? super U,? extends V>Function<? super AggregatedHttpRequest,? extends U>completeOnTimeout(com.linecorp.armeria.common.AggregatedHttpRequest,long,java.util.concurrent.TimeUnit)Supplier<? extends AggregatedHttpRequest>obtrudeValue(com.linecorp.armeria.common.AggregatedHttpRequest)complete(com.linecorp.armeria.common.AggregatedHttpRequest)getNow(com.linecorp.armeria.common.AggregatedHttpRequest)CompletableFuture<AggregatedHttpRequest>(java.lang.Object)CompletableFuture<AggregatedHttpRequest>()BiFunction<? super R,? super S,? extends AggregatedHttpRequest>BiApply<R,S,AggregatedHttpRequest>BiCompletion<R,S,AggregatedHttpRequest>UniCompletion<R,AggregatedHttpRequest>Function<? super Throwable,? extends AggregatedHttpRequest>UniExceptionally<AggregatedHttpRequest>UniCompletion<AggregatedHttpRequest,AggregatedHttpRequest>BiFunction<? super S,Throwable,? extends AggregatedHttpRequest>UniHandle<S,AggregatedHttpRequest>UniCompletion<S,AggregatedHttpRequest>UniWhenComplete<AggregatedHttpRequest>encodeOutcome(com.linecorp.armeria.common.AggregatedHttpRequest,java.lang.Throwable)completeValue(com.linecorp.armeria.common.AggregatedHttpRequest)encodeValue(com.linecorp.armeria.common.AggregatedHttpRequest)BiFunction<AggregatedHttpRequest,Throwable,Object>BiFunction<AggregatedHttpRequest,Throwable,V>apply(com.linecorp.armeria.common.AggregatedHttpRequest,java.lang.Throwable)requestContentt1nioBufferunexpectedDecoder"Expected a "Expected a " encoded list\n" encoded list
" encoded list, but received: " encoded list, but received: ? extends HttpResponseCompletionStage<? extends HttpResponse>"{} sent by clientAddress->{}, userAgent->{}"{} sent by clientAddress->{}, userAgent->{}ACCEPTED_RESPONSEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/CompletableCallback.classCompletableCallbackCompletableCallback()CompletableFuture<HttpResponse>Future<HttpResponse>CompletionStage<HttpResponse>convertRequestconvertRequest(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.AggregatedHttpRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/UnzippingBytesRequestConverter.classUnzippingBytesRequestConverterUnzippingBytesRequestConverter()"Malformed gzip body"Malformed gzip body"Empty POST body"Empty POST body"[]"[]"Empty JSON list POST body"Empty JSON list POST body converter instances aren't injected by SpringThis synchronously decodes the message so that users can see data errors. TODO: errorprone wants us to check this future before returning, but what would be a sensible check? Say it is somehow canceled, would we take action? Would callback.onError() be redundant? logging already handled upstream in UnzippingBytesRequestConverter where request context existsSome formats clash on partial data. For example, a v1 and v2 span is identical if only the spanname is sent. This looks for unexpected data format. copy-pasted from SpanBytesDecoderDetector, to avoid making it public The implementation of the armeria decoder is to return an empty body on failureC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpConfiguration.javaZipkinHttpConfigurationinfoServiceinfoService(com.linecorp.armeria.common.MediaType)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpConfiguration.classcorsConfiguratorcorsConfigurator(java.lang.String)"${zipkin.query.allowed-origins:*}"${zipkin.query.allowed-origins:*}Optional<ZipkinQueryApiV2>Optional<ZipkinHttpCollector>Optional<ZipkinHealthController>Optional<ZipkinMetricsController>Optional<MeterRegistry>Optional<CollectorRegistry>serverConfiguratorserverConfigurator(java.util.Optional,java.util.Optional,java.util.Optional,java.util.Optional,java.util.Optional,java.util.Optional,java.time.Duration)"${zipkin.query.timeout:11s}"${zipkin.query.timeout:11s}"application/vnd.spring-boot.actuator.v2+json;charset=UTF-8"application/vnd.spring-boot.actuator.v2+json;charset=UTF-8httpQueryhttpCollectorhealthControllermetricsControllercollectorRegistryqueryTimeout? super ZipkinQueryApiV2Consumer<? super ZipkinQueryApiV2>ifPresentifPresent(java.util.function.Consumer)orElseThrow()? extends ZipkinQueryApiV2Supplier<? extends ZipkinQueryApiV2>orElse(zipkin2.server.internal.ZipkinQueryApiV2)Stream<ZipkinQueryApiV2>BaseStream<ZipkinQueryApiV2,Stream<ZipkinQueryApiV2>>Optional<? extends T>? extends Optional<? extends T>Supplier<? extends Optional<? extends T>>or(java.util.function.Supplier)Optional<? extends ZipkinQueryApiV2>? extends Optional<? extends ZipkinQueryApiV2>Supplier<? extends Optional<? extends ZipkinQueryApiV2>>Optional<U>Optional<? extends U>? extends Optional<? extends U>Function<? super T,? extends Optional<? extends U>>Function<? super ZipkinQueryApiV2,? extends Optional<? extends U>>Function<? super ZipkinQueryApiV2,? extends U>Predicate<? super ZipkinQueryApiV2>ifPresentOrElseifPresentOrElse(java.util.function.Consumer,java.lang.Runnable)Consumer<ZipkinQueryApiV2>accept(zipkin2.server.internal.ZipkinQueryApiV2)Function<HttpService,HttpService>timeoutDecoratorFunction<HttpService,V>? super HttpServiceFunction<? super HttpService,? extends V>Function<V,HttpService>? extends HttpServiceFunction<? super V,? extends HttpService>apply(com.linecorp.armeria.server.HttpService)com.linecorp.armeria.serverserveserve(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.HttpRequest)Function<? super HttpService,? extends HttpService>"/zipkin"/zipkin? super ZipkinHttpCollectorConsumer<? super ZipkinHttpCollector>Supplier<? extends ZipkinHttpCollector>orElse(zipkin2.server.internal.ZipkinHttpCollector)Stream<ZipkinHttpCollector>BaseStream<ZipkinHttpCollector,Stream<ZipkinHttpCollector>>Optional<? extends ZipkinHttpCollector>? extends Optional<? extends ZipkinHttpCollector>Supplier<? extends Optional<? extends ZipkinHttpCollector>>Function<? super ZipkinHttpCollector,? extends Optional<? extends U>>Function<? super ZipkinHttpCollector,? extends U>Predicate<? super ZipkinHttpCollector>Consumer<ZipkinHttpCollector>accept(zipkin2.server.internal.ZipkinHttpCollector)arg0? super ZipkinHealthControllerConsumer<? super ZipkinHealthController>? extends ZipkinHealthControllerSupplier<? extends ZipkinHealthController>orElse(zipkin2.server.internal.health.ZipkinHealthController)Stream<ZipkinHealthController>BaseStream<ZipkinHealthController,Stream<ZipkinHealthController>>Optional<? extends ZipkinHealthController>? extends Optional<? extends ZipkinHealthController>Supplier<? extends Optional<? extends ZipkinHealthController>>Function<? super ZipkinHealthController,? extends Optional<? extends U>>Function<? super ZipkinHealthController,? extends U>Predicate<? super ZipkinHealthController>Consumer<ZipkinHealthController>accept(zipkin2.server.internal.health.ZipkinHealthController)? super ZipkinMetricsControllerConsumer<? super ZipkinMetricsController>? extends ZipkinMetricsControllerSupplier<? extends ZipkinMetricsController>orElse(zipkin2.server.internal.prometheus.ZipkinMetricsController)Stream<ZipkinMetricsController>BaseStream<ZipkinMetricsController,Stream<ZipkinMetricsController>>Optional<? extends ZipkinMetricsController>? extends Optional<? extends ZipkinMetricsController>Supplier<? extends Optional<? extends ZipkinMetricsController>>Function<? super ZipkinMetricsController,? extends Optional<? extends U>>Function<? super ZipkinMetricsController,? extends U>Predicate<? super ZipkinMetricsController>Consumer<ZipkinMetricsController>accept(zipkin2.server.internal.prometheus.ZipkinMetricsController)? super CollectorRegistryConsumer<? super CollectorRegistry>? extends CollectorRegistrySupplier<? extends CollectorRegistry>orElse(io.prometheus.client.CollectorRegistry)Stream<CollectorRegistry>BaseStream<CollectorRegistry,Stream<CollectorRegistry>>Optional<? extends CollectorRegistry>? extends Optional<? extends CollectorRegistry>Supplier<? extends Optional<? extends CollectorRegistry>>Function<? super CollectorRegistry,? extends Optional<? extends U>>Function<? super CollectorRegistry,? extends U>Predicate<? super CollectorRegistry>Consumer<CollectorRegistry>accept(io.prometheus.client.CollectorRegistry)prometheusService"/actuator/prometheus"/actuator/prometheus"/prometheus"/prometheus"/actuator/info"/actuator/info"/info"/info"prefix:/"prefix:/serve(com.linecorp.armeria.server.HttpService,com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.HttpRequest)allowedOriginscorsBuilderHttpMethod[]"X-GRPC-WEB"X-GRPC-WEB"grpc-status"grpc-status"grpc-message"grpc-message"armeria.grpc.ThrowableProto-bin"armeria.grpc.ThrowableProto-bin? extends ZipkinHttpConfigurationClass<? extends ZipkinHttpConfiguration>Map<String,? extends ZipkinHttpConfiguration>ZipkinHttpConfiguration[]? extends ZipkinHttpConfiguration[]Constructor<? extends ZipkinHttpConfiguration>? super ? extends ZipkinHttpConfigurationClass<? super ? extends ZipkinHttpConfiguration>TypeVariable<Class<? extends ZipkinHttpConfiguration>>TypeVariable<Class<? extends ZipkinHttpConfiguration>>[]"info.json"info.json For UI. Directly implement info endpoint, but use different content type for the /actuator path It's common for backend requests to have timeouts of the magic number 10s, so we go ahead and default to a slightly longer timeout on the server to be able to handle these with better error messages where possible. Block TRACE requests because https://github.com/openzipkin/zipkin/issues/2286Configures the server at the last because of the specified {@link Order} annotation. NOTE: The property says query, and the UI does not use POST, but we allow POST? The reason is that our former CORS implementation accidentally allowed POST. People doing browser-based tracing relied on this, so we can't remove it by default. In the future, we could split the collector's CORS policy into a different property, still allowing POST with content-type by default. Use literals to avoid a runtime dependency on armeria-grpc typesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinModuleImporter.javaZipkinModuleImporterPROPERTY_NAME_MODULEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinModuleImporter.classClass<ZipkinModuleImporter>"zipkin.internal.module"zipkin.internal.moduleBindResult<Map<>>orElse(java.util.Map)? extends Map<>Supplier<? extends Map<>>? super Map<>Function<? super Map<>,? extends U>Consumer<? super Map<>>Class<Map<>>"no modules found under path "no modules found under path "attempting to load modules: "attempting to load modules: "skipping unloadable module "skipping unloadable module This loads configuration needed for modules like zipkin-aws, but without relying onAutoConfiguration via spring.factories. Instead, this uses a configuration path defined in ouryaml here and any profiles loaded by the modules themselves.<p>To use this, move autoconfiguration values from {@code src/main/resources/META-INF/spring.factories}to map entries under the yaml path {@link #PROPERTY_NAME_MODULE}.stackdriver: zipkin.autoconfigure.storage.stackdriver.ZipkinStackdriverModule<p><h3>Implementation note</h3>*<p>It may be possible to re-implement this as {@link ImportSelector} to provide configurationtypes from {@link #PROPERTY_NAME_MODULE}. above. If you tried to resolve a property bound by a yaml map, it returns null, as they are includes from PROPERTY_NAME_MODULE yaml path from all modules.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinQueryApiV2.javaZipkinQueryApiV2CACHE_CONTROLwriteTraceswriteTraces(zipkin2.codec.SpanBytesEncoder,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinQueryApiV2.classmaybeCacheNamesmaybeCacheNames(boolean,java.util.List,io.netty.buffer.ByteBufAllocator)jsonResponsejsonResponse(byte[])ZipkinQueryApiV2(zipkin2.storage.StorageComponent,java.lang.String,long,int,java.util.List)"${zipkin.storage.type:mem}"${zipkin.storage.type:mem}"${zipkin.query.lookback:86400000}"${zipkin.query.lookback:86400000}"${zipkin.query.names-max-age:300}"${zipkin.query.names-max-age:300}serviceCountnamesMaxAgedefaultLookback"zipkin.query.enabled"zipkin.query.enabledOptional<Long>"/api/v2/dependencies"/api/v2/dependencies"endTs""lookback"orElse(java.lang.Long)Supplier<? extends Long>Optional<? extends Long>? extends Optional<? extends Long>Supplier<? extends Optional<? extends Long>>Function<? super Long,? extends Optional<? extends U>>Function<? super Long,? extends U>Callback<List<DependencyLink>>ErrorHandler<List<DependencyLink>>FlatMapper<List<DependencyLink>,R>Mapper<List<DependencyLink>,R>Call<List<DependencyLink>>()"/api/v2/services"/api/v2/servicesserviceNamesspanNames"/api/v2/remoteServices"/api/v2/remoteServicesremoteServiceNames"/api/v2/traces"/api/v2/traces"remoteServiceName""spanName""annotationQuery""minDuration""maxDuration""10""limit"queryRequestorElse(java.lang.String)Supplier<? extends String>Optional<? extends String>? extends Optional<? extends String>Supplier<? extends Optional<? extends String>>Function<? super String,? extends Optional<? extends U>>tracesCallback<List<List<Span>>>ErrorHandler<List<List<Span>>>FlatMapper<List<List<Span>>,R>Mapper<List<List<Span>>,R>Call<List<List<Span>>>()"/api/v2/trace/{traceId}"/api/v2/trace/{traceId}" not found" not found"/api/v2/traceMany"/api/v2/traceMany"traceIds""traceIds parameter is empty"traceIds parameter is empty"redundant traceId: "redundant traceId: "Use /api/v2/trace/{traceId} endpoint to retrieve a single trace"Use /api/v2/trace/{traceId} endpoint to retrieve a single trace200"/api/v2/autocompleteKeys"/api/v2/autocompleteKeys"/api/v2/autocompleteValues"/api/v2/autocompleteValuesshouldCacheControlallocsizeEstimategen"max-age="max-age=", must-revalidate", must-revalidatejLength don't cache spanStore here as it can cause the app to crash!The Cache-Control max-age (seconds) for /api/v2/services /api/v2/remoteServices and used as a threshold to start returning cache-control headers 1 day in millis 5 minutesWe cache names if there are more than 3 names. This helps people getting started: if we cacheempty results, users have more questions. We assume caching becomes a concern when zipkin is inactive use, and active use usually implies more than 3 services. Two brackets.comma Last element doesn't have a comma. If the values don't require escaping, this buffer will not be resized. This is inlined here as there isn't enough re-use to warrant it being in the zipkin2 library Get the encoded size of the nested list so that we don't need to grow the buffer start list of traces stop list of tracesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorConfiguration.javaZipkinActiveMQCollectorConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/activemqzipkin2.server.internal.activemqactiveMqactiveMq(zipkin2.server.internal.activemq.ZipkinActiveMQCollectorProperties,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics,zipkin2.storage.StorageComponent)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorConfiguration.class"start"Class<ZipkinActiveMQCollectorProperties>Class<ActiveMQUrlSet>notFalsenotFalse(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorConfiguration$ActiveMQUrlSet.classZipkinActiveMQCollectorConfiguration$ActiveMQUrlSetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/activemqisEmpty(java.lang.String)ActiveMQUrlSetActiveMQUrlSet()"zipkin.collector.activemq.url"zipkin.collector.activemq.url"zipkin.collector.activemq.enabled"zipkin.collector.activemq.enabledAuto-configuration for {@link ActiveMQCollector}.This condition passes when {@link ZipkinActiveMQCollectorProperties#getUrl()}} is set tonon-empty.<p>This is here because the yaml defaults this property to empty like this, and spring-bootdoesn't have an option to treat empty properties as unset.url: ${ACTIVEMQ_URL:}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorProperties.javaZipkinActiveMQCollectorPropertiesemptyToNullemptyToNull(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorProperties.classpasswordusernameconnectionIdPrefixclientIdPrefixZipkinActiveMQCollectorProperties()"zipkin.collector.activemq"zipkin.collector.activemqProperties for configuring and building a {@link ActiveMQCollector}.URL of the ActiveMQ broker.ActiveMQ queue from which to collect the Zipkin spansClient ID prefix for queue consumersConnection ID prefix for queue consumersNumber of concurrent span consumersLogin user of the broker.Login password of the broker.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/banner/ZipkinBanner.javaZipkinBannerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/bannerbannerzipkin2.server.internal.bannerZIPKIN_ORANGEC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/banner/ZipkinBanner.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/banner/ZipkinBanner$1.classZipkinBanner$1"38;5;208"38;5;208environmentsourceClass"zipkin.txt"zipkin.txt"${AnsiOrange}"${AnsiOrange}"${AnsiNormal}"${AnsiNormal}More efficient Banner implementation which doesn't use property sources as variables are expandedat compile time using Maven resource filtering. Ansi 256 color code 208 (orange) Instead of use property expansion for only 2 ansi codes, inline them who caresC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/SelfTracingProperties.javaSelfTracingPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/bravezipkin2.server.internal.bravemessageTimeoutC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/SelfTracingProperties.classtracesPerSecondenabledSelfTracingProperties()"zipkin.self-tracing"zipkin.self-tracingWhether self-tracing is enabled. Defaults to {@code false}.The percentage of traces retained when self-tracing. If 1.0 (i.e., all traces are sampled), thevalue of {@link #getTracesPerSecond()} will be used for sampling traces. Defaults to {@code1.0}, sampling all traces.The number of traces per second to retain. If 0, an unlimited number of traces will beretained. This value has no effect if {@link #getSampleRate()} is set to something other than{@code 1.0}. Defaults to 1 trace per second.Timeout to flush self-tracing data to storage.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/TracedCall.javaTracedCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/TracedCall.classtracerSpanFinishingCallback<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracedCall$SpanFinishingCallback.classTracedCall$SpanFinishingCallbackC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/braveTracedCall<>SpanFinishingCallback<V>(zipkin2.Callback,brave.Span)SpanFinishingCallbackSpanFinishingCallback(zipkin2.Callback,brave.Span)"Traced("Traced(C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/TracingStorageComponent.javaTracingStorageComponentC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/TracingStorageComponent.class"Traced{"Traced{TracingTracesTracingTraces(brave.Tracing,zipkin2.storage.Traces)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracingStorageComponent$TracingTraces.classTracingStorageComponent$TracingTracesTracedCall<List<Span>>TracedCall<List<Span>>(brave.Tracer,zipkin2.Call,java.lang.String)TracedCall(brave.Tracer,zipkin2.Call,java.lang.String)"get-trace"get-traceTracedCall<List<List<Span>>>TracedCall<List<List<Span>>>(brave.Tracer,zipkin2.Call,java.lang.String)"get-traces"get-tracesTracingSpanStoreTracingSpanStore(brave.Tracing,zipkin2.storage.SpanStore)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracingStorageComponent$TracingSpanStore.classTracingStorageComponent$TracingSpanStoreTracedCall<List<String>>TracedCall<List<String>>(brave.Tracer,zipkin2.Call,java.lang.String)"get-service-names"get-service-names"get-span-names"get-span-namesTracedCall<List<DependencyLink>>TracedCall<List<DependencyLink>>(brave.Tracer,zipkin2.Call,java.lang.String)"get-dependencies"get-dependenciesTracingAutocompleteTagsTracingAutocompleteTags(brave.Tracing,zipkin2.storage.AutocompleteTags)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracingStorageComponent$TracingAutocompleteTags.classTracingStorageComponent$TracingAutocompleteTags"get-keys"get-keys"get-values"get-valuesTracingServiceAndSpanNamesTracingServiceAndSpanNames(brave.Tracing,zipkin2.storage.ServiceAndSpanNames)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracingStorageComponent$TracingServiceAndSpanNames.classTracingStorageComponent$TracingServiceAndSpanNames"get-remote-service-names"get-remote-service-namesTracingSpanConsumerTracingSpanConsumer(brave.Tracing,zipkin2.storage.SpanConsumer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/TracingStorageComponent$TracingSpanConsumer.classTracingStorageComponent$TracingSpanConsumerTracedCall<Void>TracedCall<Void>(brave.Tracer,zipkin2.Call,java.lang.String)"accept-spans"accept-spans public for use in ZipkinServerConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/ZipkinSelfTracingConfiguration.javaZipkinSelfTracingConfigurationtracingConfiguratortracingConfigurator(brave.http.HttpTracing)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/ZipkinSelfTracingConfiguration.classhttpTracinghttpTracing(brave.Tracing,brave.sampler.Sampler)tracing(zipkin2.reporter.brave.AsyncZipkinSpanHandler,brave.propagation.CurrentTraceContext)sampler(zipkin2.server.internal.brave.SelfTracingProperties)threadLocalSpanthreadLocalSpan(brave.Tracing)currentTraceContextcurrentTraceContext()reporterreporter(org.springframework.beans.factory.BeanFactory,zipkin2.server.internal.brave.SelfTracingProperties)Class<SelfTracingProperties>newThreadnewThread(java.lang.Runnable)runnableC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/brave/ZipkinSelfTracingConfiguration$1.classZipkinSelfTracingConfiguration$10.01zipkinSpanHandler"zipkin-server"brave.propagationB3Propagation<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jarbrave-5.13.2C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2C:/Users/Semiu/.m2/repository/io/zipkin/brave/braveC:/Users/Semiu/.m2/repository/io/zipkin/braveC:/Users/Semiu/.m2/repository/io/zipkinC:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/braveC:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagationpropagationC:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/B3Propagation.classB3PropagationPropagation<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/Propagation.classPropagationnewFactoryBuildernewFactoryBuilder()Getter<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/Propagation$Getter.classPropagation$GetterExtractor<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/TraceContext$Extractor.classTraceContext$ExtractorExtractor<R>extractorextractor(brave.propagation.Propagation.Getter)Getter<R,K>Setter<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/Propagation$Setter.classPropagation$SetterInjector<>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/propagation/TraceContext$Injector.classTraceContext$InjectorInjector<R>injectorinjector(brave.propagation.Propagation.Setter)Setter<R,K>List<K>Propagation<String>B3_SINGLE_STRINGB3_STRINGB3Propagation()B3Propagation<>()FLAGSSAMPLED_MALFORMEDSAMPLEDPARENT_SPAN_IDSPAN_IDB3INSTANCEFACTORYbrave.samplerSamplerFunction<HttpRequest>C:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/samplerC:/Users/Semiu/.m2/repository/io/zipkin/brave/brave/5.13.2/brave-5.13.2.jar/brave/sampler/SamplerFunction.classSamplerFunctiontrySampletrySample(java.lang.Object)trySample(brave.http.HttpRequest)path"/api"/api"/zipkin/api"/zipkin/apiFunction<? super HttpService,BraveService>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/ZipkinSelfTracingConfiguration$LocalSender.classZipkinSelfTracingConfiguration$LocalSenderLocalSenderLocalSender(org.springframework.beans.factory.BeanFactory)1024listencodedSpansv2Span"StorageComponent"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/brave/ZipkinSelfTracingConfiguration$ReporterMetricsAdapter.classZipkinSelfTracingConfiguration$ReporterMetricsAdapterReporterMetricsAdapterReporterMetricsAdapter(org.springframework.beans.factory.BeanFactory)"local"localConfiguration for how to buffer spans into messages for Zipkin puts trace IDs into logsThere's no attribute namespace shared across request and response. Hence, we need to save off areference to the span in scope, so that we can close it in the response.This controls the general rate. In order to not accidentally start traces started from thetracer itself, this isn't used as {@link Tracing.Builder#sampler(Sampler)}. The impact of thisis that we can't currently start traces from Kafka or Rabbit (until we use a messagingsampler).See https://github.com/openzipkin/brave/pull/914 for the messaging abstractionControls aspects of tracing such as the name that shows up in the UI don't sample traces at this abstraction Reduce the impact on untraced downstream http services such as Elasticsearch server starts traces for read requests under the path /api use the global rate limitLazily looks up the storage component in order to to avoid proxying. volatile to prevent stale reads TODO: less memory efficient, but not a huge problem for self-tracing which is rarely on https://github.com/openzipkin/zipkin-reporter-java/issues/178 arbitrary Avoid using the delegate to avoid eagerly loading the bean during initialization don't close delegate as we didn't open it!Lazy lookup to avoid proxying synchronization is not needed as redundant calls have no ill effectsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageConfiguration.javaZipkinCassandra3StorageConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/cassandra3cassandra3zipkin2.server.internal.cassandra3storage(zipkin2.server.internal.cassandra3.ZipkinCassandra3StorageProperties,zipkin2.storage.cassandra.CassandraStorage.SessionFactory,boolean,boolean,java.util.List,int,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageConfiguration.classClass<? extends Annotation>[]"${zipkin.storage.autocomplete-ttl:3600000}"${zipkin.storage.autocomplete-ttl:3600000}"${zipkin.storage.autocomplete-cardinality:20000}"${zipkin.storage.autocomplete-cardinality:20000}sessionFactorysessionFactory()Class<CassandraStorage>"cassandra3"Class<ZipkinCassandra3StorageProperties>Class<TracingSessionFactoryEnhancer>zipkin2.storage.cassandra.internalCassandraStorageBuilder<Builder>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jarzipkin-storage-cassandra-2.23.3-SNAPSHOTC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/targetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandracassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jar/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jar/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jar/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jar/zipkin2/storage/cassandra/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/zipkin-storage-cassandra-2.23.3-SNAPSHOT.jar/zipkin2/storage/cassandra/internal/CassandraStorageBuilder.classCassandraStorageBuilderCassandraStorageBuilder<>autocompleteCardinality(int)indexFetchMultiplierindexFetchMultiplier(int)maxTraceColsmaxTraceCols(int)ensureSchemaensureSchema(boolean)keyspacekeyspace(java.lang.String)useSsluseSsl(boolean)password(java.lang.String)username(java.lang.String)maxConnectionsmaxConnections(int)localDclocalDc(java.lang.String)contactPointscontactPoints(java.lang.String)autocompleteTtl(int)autocompleteKeys(java.util.List)searchEnabled(boolean)strictTraceId(boolean)CassandraStorageBuilder(java.lang.String)CassandraStorageBuilder<Builder>(java.lang.String)Map<DriverOption,Integer>poolingOptionspoolingOptions()maxRequestsPerConnectionpoolLocalSizeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageConfiguration$TracingSessionFactoryEnhancer.classZipkinCassandra3StorageConfiguration$TracingSessionFactoryEnhancerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/cassandra3TracingSessionFactoryEnhancerTracingSessionFactoryEnhancer()This storage accepts Cassandra logs in a specified category. Each log entry is expected tocontain a single span, which is TBinaryProtocol big-endian, then base64 encoded. Decoded spansare stored asynchronously. This component is named .*Cassandra3.* even though the package already says cassandra3 because Spring Boot configuration endpoints only printout the simple name of the classif (bean instanceof SessionFactory && beanFactory.containsBean("tracing")) {  SessionFactory delegate = (SessionFactory) bean;  Tracing tracing = beanFactory.getBean(Tracing.class);  return (SessionFactory) storage -> TracingSession.create(tracing, delegate.create(storage));C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageProperties.javaZipkinCassandra3StoragePropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageProperties.classZipkinCassandra3StorageProperties()"zipkin.storage.cassandra3"zipkin.storage.cassandra3"zipkin3"zipkin3"datacenter1"datacenter1See {@link CassandraStorage.Builder#indexFetchMultiplier(int)}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/BasicAuthInterceptor.javaBasicAuthInterceptorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearchelasticsearchzipkin2.server.internal.elasticsearchBasicAuthInterceptor(com.linecorp.armeria.client.HttpClient,zipkin2.server.internal.elasticsearch.BasicCredentials)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/BasicAuthInterceptor.classbasicCredentialscredentialscom.linecorp.armeria.clientClient<HttpRequest,HttpResponse>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jararmeria-1.3.0C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeriaarmeriaC:/Users/Semiu/.m2/repository/com/linecorp/armeriaC:/Users/Semiu/.m2/repository/com/linecorplinecorpC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/comC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorpC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeriaC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/clientC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/client/Client.classClientexecute(com.linecorp.armeria.client.ClientRequestContext,com.linecorp.armeria.common.HttpRequest)Client<>? extends Request? extends ResponseClient<? extends Request,? extends Response>unwrapunwrap()as(java.lang.Class)execute(com.linecorp.armeria.client.ClientRequestContext,com.linecorp.armeria.common.Request)Adds basic auth username and password to every request.<p>Ref: <a href="https://www.elastic.co/guide/en/x-pack/current/how-security-works.html"> HowElasticsearch security works</a></p>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/BasicCredentials.javaBasicCredentialsgetCredentialsgetCredentials()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/BasicCredentials.classupdateCredentialsupdateCredentials(java.lang.String,java.lang.String)BasicCredentials(java.lang.String,java.lang.String)BasicCredentials()token"Basic "Basic Generate Elasticsearch basic user credentials.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/DynamicCredentialsFileLoader.javaDynamicCredentialsFileLoaderPASSWORDUSERNAMEensureNotEmptyOrNullensureNotEmptyOrNull(java.util.Properties,java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/DynamicCredentialsFileLoader.classupdateCredentialsFromPropertiesupdateCredentialsFromProperties()credentialsFileClass<DynamicCredentialsFileLoader>"Error loading elasticsearch credentials"Error loading elasticsearch credentialsfileName"no "no " property in " property in "empty "empty Loads username/password from credentials file.<p><em>NOTE:</em> This implementation loops instead of using {@link java.nio.file.WatchService}.This means that spans will drop and api failures will occur for any time remaining in the refreshinterval. A future version can tighten this by also using poll events.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/HttpClientFactory.javaHttpClientFactoryconfigureOptionsExceptHttpLoggingconfigureOptionsExceptHttpLogging(com.linecorp.armeria.client.ClientOptionsBuilder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/HttpClientFactory.classconfigureHttpLoggingconfigureHttpLogging(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties.HttpLogging,com.linecorp.armeria.client.ClientOptionsBuilder)Consumer<ClientOptionsBuilder>List<Consumer<ClientOptionsBuilder>>Collection<Consumer<ClientOptionsBuilder>>Iterable<Consumer<ClientOptionsBuilder>>HttpClientFactory(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties,com.linecorp.armeria.client.ClientFactory,com.linecorp.armeria.common.SessionProtocol,java.util.List)customizersclientFactoryFunction<EndpointGroup,WebClient>eshttpLogging? super HttpClient? extends HttpClientFunction<? super HttpClient,? extends HttpClient>Function<? super HttpClient,DecodingClient>Function<? super HttpClient,MetricCollectingClient>"elasticsearch"loggingBuilder? super RequestContext? super HttpHeadersBiFunction<? super RequestContext,? super HttpHeaders,?>BiFunction<RequestContext,HttpHeaders,Object>BiFunction<RequestContext,HttpHeaders,V>apply(com.linecorp.armeria.common.RequestContext,com.linecorp.armeria.common.HttpHeaders)"****"****BiFunction<? super RequestContext,Object,?>BiFunction<RequestContext,Object,Object>BiFunction<RequestContext,Object,V>apply(com.linecorp.armeria.common.RequestContext,java.lang.Object)Function<? super HttpClient,LoggingClient>Function<? super HttpClient,ContentPreviewingClient>? super Consumer<ClientOptionsBuilder>Consumer<? super Consumer<ClientOptionsBuilder>>Spliterator<Consumer<ClientOptionsBuilder>>Iterator<Consumer<ClientOptionsBuilder>>Consumer<Consumer<ClientOptionsBuilder>>accept(java.util.function.Consumer)accept(com.linecorp.armeria.client.ClientOptionsBuilder)? super ClientOptionsBuilderConsumer<? super ClientOptionsBuilder> Exposed as a bean so that zipkin-aws can use this for api requests to get initial endpoints. TODO(anuraaga): Add unit tests after https://github.com/line/armeria/issues/2220This takes care to not expose health checks into wire level loggingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/InitialEndpointSupplier.javaInitialEndpointSupplierisIpAddressisIpAddress(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/InitialEndpointSupplier.classgetPortgetPort(java.net.URI)InitialEndpointSupplier(com.linecorp.armeria.common.SessionProtocol,java.lang.String)sessionProtocolhostsSupplier<EndpointGroup>Class<InitialEndpointSupplier>"sessionProtocol == null"sessionProtocol == null"://localhost:9200"://localhost:9200List<EndpointGroup>Collection<EndpointGroup>Iterable<EndpointGroup>endpointGroupsArrayList<EndpointGroup>AbstractList<EndpointGroup>AbstractCollection<EndpointGroup>ArrayList<EndpointGroup>()Spliterator<EndpointGroup>? super EndpointGroupConsumer<? super EndpointGroup>Iterator<EndpointGroup>Stream<EndpointGroup>BaseStream<EndpointGroup,Stream<EndpointGroup>>Predicate<? super EndpointGroup>? extends EndpointGroupCollection<? extends EndpointGroup>Iterable<? extends EndpointGroup>add(com.linecorp.armeria.client.endpoint.EndpointGroup)AbstractCollection<EndpointGroup>()ListIterator<EndpointGroup>add(int,com.linecorp.armeria.client.endpoint.EndpointGroup)set(int,com.linecorp.armeria.client.endpoint.EndpointGroup)Comparator<? super EndpointGroup>UnaryOperator<EndpointGroup>Function<EndpointGroup,EndpointGroup>AbstractList<EndpointGroup>()ArrayList<EndpointGroup>(java.util.Collection)ArrayList<EndpointGroup>(int)hostText"http://"http://"https://"https://"://"://":9200":9200"Skipping invalid ES host {}"Skipping invalid ES host {}9300"Native transport no longer supported. Changing {} to http port 9200"Native transport no longer supported. Changing {} to http port 92009200EndpointGroup[]"No valid endpoints found in ES hosts: "No valid endpoints found in ES hosts:  possibly extra comma A host that isn't an IP may resolve to multiple IP addresses, so we use a endpoint group to round-robin over them. Users can mix addresses that resolve to multiple IPs with single IPs freely, they'll all get used.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/LazyHttpClientImpl.javaLazyHttpClientImpldecorateHealthCheckdecorateHealthCheck(com.linecorp.armeria.client.endpoint.EndpointGroup)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/LazyHttpClientImpl.classgetEndpointgetEndpoint()LazyHttpClientImpl(zipkin2.server.internal.elasticsearch.HttpClientFactory,com.linecorp.armeria.common.SessionProtocol,java.util.function.Supplier,zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties,io.micrometer.core.instrument.MeterRegistry)timeoutMillishealthCheckinitialEndpointsinitialendpointGrouphealthCheckedFunction<? super ClientOptionsBuilder,ClientOptionsBuilder>Function<ClientOptionsBuilder,ClientOptionsBuilder>"/_cluster/health"/_cluster/healthFunction<ClientOptionsBuilder,V>Function<? super ClientOptionsBuilder,? extends V>Function<V,ClientOptionsBuilder>? extends ClientOptionsBuilderFunction<? super V,? extends ClientOptionsBuilder>apply(com.linecorp.armeria.client.ClientOptionsBuilder)"elasticsearch-healthcheck"elasticsearch-healthcheckexecute(com.linecorp.armeria.client.HttpClient,com.linecorp.armeria.client.ClientRequestContext,com.linecorp.armeria.common.HttpRequest)"health-check"health-check Only health-check when there are alternative endpoints. There aren't when instanceof Endpoint Wrap the result when health checking is enabled. Enables health-checking of an endpoint group, so we only send requests to endpoints that are upC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/SslUtil.javaSslUtilloadKeyStoreloadKeyStore(java.lang.String,java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/SslUtil.classgetTrustManagerFactorygetTrustManagerFactory(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties.Ssl)getKeyManagerFactorygetKeyManagerFactory(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties.Ssl)SslUtil()sslkeyManagerFactorykeyPasswordtrustManagerFactory"JKS"JKS snippets adapted from com.linecorp.armeria.internal.spring.ArmeriaConfigurationUtilC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration.javaZipkinElasticsearchStorageConfigurationSslC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration.classconfigureSslconfigureSsl(com.linecorp.armeria.client.ClientFactoryBuilder,zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties.Ssl)Optional<HttpTracing>esTracingesTracing(java.util.Optional)"zipkinElasticsearch"zipkinElasticsearchdynamicCredentialsScheduledExecutorServicedynamicCredentialsScheduledExecutorService(java.lang.String,java.lang.Integer,zipkin2.server.internal.elasticsearch.BasicCredentials)"shutdown"shutdown? extends ConditionClass<? extends Condition>Class<? extends Condition>[]"${zipkin.storage.elasticsearch.credentials-file}"${zipkin.storage.elasticsearch.credentials-file}"${zipkin.storage.elasticsearch.credentials-refresh-interval}"${zipkin.storage.elasticsearch.credentials-refresh-interval}basicCredentials(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties)esBasicAuthesBasicAuth(zipkin2.server.internal.elasticsearch.BasicCredentials)storage(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties,zipkin2.server.internal.elasticsearch.HttpClientFactory,io.micrometer.core.instrument.MeterRegistry,com.linecorp.armeria.common.SessionProtocol,java.util.function.Supplier,int,boolean,boolean,java.util.List,int,int)esHttpClientFactoryesHttpClientFactory(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties,com.linecorp.armeria.client.ClientFactory,com.linecorp.armeria.common.SessionProtocol,java.util.List)esClientFactoryesClientFactory(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties,io.micrometer.core.instrument.MeterRegistry)esSessionProtocolesSessionProtocol(zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties)esInitialEndpointsesInitialEndpoints(com.linecorp.armeria.common.SessionProtocol,zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageProperties)CREDENTIALS_REFRESH_INTERVALCREDENTIALS_FILEQUALIFIERClass<ZipkinElasticsearchStorageProperties>"zipkin.storage.elasticsearch.username"zipkin.storage.elasticsearch.username"zipkin.storage.elasticsearch.password"zipkin.storage.elasticsearch.password"zipkin.storage.elasticsearch.credentials-file"zipkin.storage.elasticsearch.credentials-file"zipkin.storage.elasticsearch.credentials-refresh-interval"zipkin.storage.elasticsearch.credentials-refresh-intervalnamesLookbackClass<BasicAuthRequired>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration$1.classZipkinElasticsearchStorageConfiguration$1Function<HttpClient,HttpClient>Function<HttpClient,V>Function<? super HttpClient,? extends V>Function<V,HttpClient>Function<? super V,? extends HttpClient>apply(com.linecorp.armeria.client.HttpClient)"BasicAuthCustomizer{basicCredentials=<redacted>}"BasicAuthCustomizer{basicCredentials=<redacted>}Class<DynamicRefreshRequired>"${"${credentialsRefreshIntervalses"zipkin-load-es-credentials"zipkin-load-es-credentialscredentialsFileLoaderScheduledFuture<?>C:/modules/java.base/java/util/concurrent/ScheduledFuture.classScheduledFuturefutureScheduledFuture<>"credential refresh thread didn't start"credential refresh thread didn't startmaybeHttpTracing? extends HttpTracingSupplier<? extends HttpTracing>orElse(brave.http.HttpTracing)Stream<HttpTracing>BaseStream<HttpTracing,Stream<HttpTracing>>Optional<? extends HttpTracing>? extends Optional<? extends HttpTracing>Supplier<? extends Optional<? extends HttpTracing>>? super HttpTracingFunction<? super HttpTracing,? extends Optional<? extends U>>Function<? super HttpTracing,? extends U>Predicate<? super HttpTracing>Consumer<? super HttpTracing>spanCustomizerFunction<? super HttpClient,BraveClient>BasicAuthRequiredBasicAuthRequired()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration$BasicAuthRequired.classZipkinElasticsearchStorageConfiguration$BasicAuthRequiredC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearchuserNameDynamicRefreshRequiredDynamicRefreshRequired()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration$DynamicRefreshRequired.classZipkinElasticsearchStorageConfiguration$DynamicRefreshRequired? super SslContextBuilderConsumer<? super SslContextBuilder>Consumer<SslContextBuilder>accept(io.netty.handler.ssl.SslContextBuilder)sslContextBuilder Exposed as a bean so that zipkin-aws can override this as sourced from the AWS endpoints api Exposed as a bean so that zipkin-aws can override this to always be SSL exposed as a bean so that we can test TLS by swapping it out. TODO: see if we can override the TLS via properties instead as that has less surface area. Allow use of a custom KeyStore or TrustStore when connecting to Elasticsearch Elasticsearch 7 never returns a response when receiving an HTTP/2 preface instead of the more valid behavior of returning a bad request response, so we can't use the preface. TODO: find or raise a bug with Elastic TODO: is there a special cased empty consumer we can use here? I suspect debug is cluttered Alternatively, check why we would ever get here if ConditionalOnSelfTracing matches We only need the name if it's available and can unsafely access the partially filled log. override the span name if set the tracing decorator is added last so that it encloses the attempt to overwrite the name.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageProperties.javaZipkinElasticsearchStoragePropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageProperties.classtemplatePrioritymaxRequestsensureTemplatesindexReplicasindexShardsdateSeparatorpipelineZipkinElasticsearchStorageProperties()"zipkin.storage.elasticsearch"zipkin.storage.elasticsearch"http://localhost:9200"http://localhost:920010_000Map<String,ZipkinElasticsearchStorageProperties>ZipkinElasticsearchStorageProperties[]Constructor<ZipkinElasticsearchStorageProperties>? super ZipkinElasticsearchStoragePropertiesClass<? super ZipkinElasticsearchStorageProperties>TypeVariable<Class<ZipkinElasticsearchStorageProperties>>TypeVariable<Class<ZipkinElasticsearchStorageProperties>>[]HttpLoggingHttpLogging()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageProperties$HttpLogging.classZipkinElasticsearchStorageProperties$HttpLoggingnoVerifyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageProperties$Ssl.classZipkinElasticsearchStorageProperties$SsltrustStoreTypetrustStorePasswordtrustStorekeyStoreTypekeyStorePasswordkeyStore"javax.net.ssl.keyStore"javax.net.ssl.keyStore"javax.net.ssl.keyStorePassword"javax.net.ssl.keyStorePassword"javax.net.ssl.keyStoreType"javax.net.ssl.keyStoreType"javax.net.ssl.trustStore"javax.net.ssl.trustStore"javax.net.ssl.trustStorePassword"javax.net.ssl.trustStorePassword"javax.net.ssl.trustStoreType"javax.net.ssl.trustStoreTypeintervalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageProperties$HealthCheck.classZipkinElasticsearchStorageProperties$HealthChecktrimmed"dateSeparator must be empty or a single character"dateSeparator must be empty or a single characterhttpClient"ES_MAX_REQUESTS is no longer honored. Use STORAGE_THROTTLE_ENABLED instead"ES_MAX_REQUESTS is no longer honored. Use STORAGE_THROTTLE_ENABLED insteadSettings for Elasticsearch client connectionzipkin.storage.elasticsearch:hosts: localhost:9200pipeline: my_pipelinetimeout: 10000index: zipkindate-separator: -index-shards: 5index-replicas: 1ensure-templates: trueusername: usernamepassword: passwordcredentials-file: credentialsFilecredentials-refresh-interval: 1http-logging: HEADERSssl:key-store: keystore.p12key-store-password: changemekey-store-type: PKCS12trust-store: truststore.p12trust-store-password: changemetrust-store-type: PKCS12health-check:enabled: trueinterval: 3stemplate-priority: 0Sets the level of logging for HTTP requests made by the Elasticsearch client. If not set ornone, logging will be disabled.Disables the verification of server's key certificate chain.Configures the health-checking of endpoints by the Elasticsearch client.Indicates health checking is enabled.When set, controls the volume of HTTP logging of the Elasticsearch API.The time to wait between sending health check requests.Indicates the ingest pipeline used before spans are indexed.A comma separated list of base urls to connect to.The index prefix to use when generating daily index names.The date separator used to create the index name.Number of shards (horizontal scaling factor) per index.Number of replicas (redundancy factor) per index.False disables automatic index template creation.username used for basic auth. Needed when Shield or X-Pack security is enabledpassword used for basic auth. Needed when Shield or X-Pack security is enabledcredentialsFile is an absolute path refers to a properties-file used to store username andCredentials refresh interval (in seconds)Connect, read and write socket timeouts (in milliseconds) for Elasticsearch API requests.Overrides ssl configuration relating to the Elasticsearch client connection. unusedC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/health/ComponentHealth.javaComponentHealthC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/healthhealthzipkin2.server.internal.healthComponentHealth(java.lang.String,java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/health/ComponentHealth.classstatusofComponentofComponent(zipkin2.Component)STATUS_DOWNSTATUS_UP"UP"UP"DOWN"DOWNcomponentC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/health/ZipkinHealthController.javaZipkinHealthControllerMEDIA_TYPE_ACTUATORList<ComponentHealth>Collection<ComponentHealth>Iterable<ComponentHealth>writeJsonwriteJson(java.lang.String,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/health/ZipkinHealthController.classwriteJsonErrorwriteJsonError(java.lang.String)newHealthResponsenewHealthResponse(java.lang.String,com.linecorp.armeria.common.MediaType,java.lang.String)newHealthResponse(java.util.List,com.linecorp.armeria.common.MediaType)health(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.MediaType)List<Component>Collection<Component>Iterable<Component>ZipkinHealthController(java.util.List)components"/actuator/health"/actuator/health"/health"/healthresponseFutureCompletableFuture<HttpResponse>()? extends CompletionStage<HttpResponse>Function<Throwable,? extends CompletionStage<HttpResponse>>Function<Throwable,? extends HttpResponse>? super HttpResponseBiConsumer<? super HttpResponse,? super Throwable>BiFunction<? super HttpResponse,Throwable,? extends U>Function<? super HttpResponse,? extends CompletionStage<U>>Consumer<? super HttpResponse>Function<? super HttpResponse,U>BiConsumer<? super HttpResponse,? super U>BiFunction<? super HttpResponse,? super U,? extends V>Function<? super HttpResponse,? extends U>completeOnTimeout(com.linecorp.armeria.common.HttpResponse,long,java.util.concurrent.TimeUnit)Supplier<? extends HttpResponse>obtrudeValue(com.linecorp.armeria.common.HttpResponse)complete(com.linecorp.armeria.common.HttpResponse)getNow(com.linecorp.armeria.common.HttpResponse)CompletableFuture<HttpResponse>(java.lang.Object)BiFunction<? super R,? super S,? extends HttpResponse>BiApply<R,S,HttpResponse>BiCompletion<R,S,HttpResponse>UniCompletion<R,HttpResponse>Function<? super Throwable,? extends HttpResponse>UniExceptionally<HttpResponse>UniCompletion<HttpResponse,HttpResponse>BiFunction<? super S,Throwable,? extends HttpResponse>UniHandle<S,HttpResponse>UniCompletion<S,HttpResponse>UniWhenComplete<HttpResponse>encodeOutcome(com.linecorp.armeria.common.HttpResponse,java.lang.Throwable)completeValue(com.linecorp.armeria.common.HttpResponse)encodeValue(com.linecorp.armeria.common.HttpResponse)CompletableFuture<ComponentHealth>Future<ComponentHealth>CompletionStage<ComponentHealth>List<CompletableFuture<ComponentHealth>>Collection<CompletableFuture<ComponentHealth>>Iterable<CompletableFuture<ComponentHealth>>futuresStream<CompletableFuture<ComponentHealth>>BaseStream<CompletableFuture<ComponentHealth>,Stream<CompletableFuture<ComponentHealth>>>? super CompletableFuture<ComponentHealth>Collector<? super CompletableFuture<ComponentHealth>,A,R>Spliterator<CompletableFuture<ComponentHealth>>Iterator<CompletableFuture<ComponentHealth>>Optional<CompletableFuture<ComponentHealth>>Predicate<? super CompletableFuture<ComponentHealth>>Comparator<? super CompletableFuture<ComponentHealth>>BiConsumer<R,? super CompletableFuture<ComponentHealth>>BiFunction<U,? super CompletableFuture<ComponentHealth>,U>BinaryOperator<CompletableFuture<ComponentHealth>>BiFunction<CompletableFuture<ComponentHealth>,CompletableFuture<ComponentHealth>,CompletableFuture<ComponentHealth>>reduce(java.util.concurrent.CompletableFuture,java.util.function.BinaryOperator)Consumer<? super CompletableFuture<ComponentHealth>>Function<? super CompletableFuture<ComponentHealth>,? extends DoubleStream>Function<? super CompletableFuture<ComponentHealth>,? extends LongStream>Function<? super CompletableFuture<ComponentHealth>,? extends IntStream>Function<? super CompletableFuture<ComponentHealth>,? extends Stream<? extends R>>ToDoubleFunction<? super CompletableFuture<ComponentHealth>>ToLongFunction<? super CompletableFuture<ComponentHealth>>ToIntFunction<? super CompletableFuture<ComponentHealth>>Function<? super CompletableFuture<ComponentHealth>,? extends R>Collector<CompletableFuture<ComponentHealth>,?,List<CompletableFuture<ComponentHealth>>>Stream<Component>BaseStream<Component,Stream<Component>>? super ComponentFunction<? super Component,? extends R>Spliterator<Component>Iterator<Component>Optional<Component>Predicate<? super Component>Comparator<? super Component>Collector<? super Component,A,R>BiConsumer<R,? super Component>BiFunction<U,? super Component,U>BinaryOperator<Component>BiFunction<Component,Component,Component>reduce(zipkin2.Component,java.util.function.BinaryOperator)Consumer<? super Component>Function<? super Component,? extends DoubleStream>Function<? super Component,? extends LongStream>Function<? super Component,? extends IntStream>Function<? super Component,? extends Stream<? extends R>>ToDoubleFunction<? super Component>ToLongFunction<? super Component>ToIntFunction<? super Component>Function<Component,CompletableFuture<ComponentHealth>>? extends ComponentCollection<? extends Component>Iterable<? extends Component>add(zipkin2.Component)Function<Component,V>Function<? super CompletableFuture<ComponentHealth>,? extends V>Function<V,CompletableFuture<ComponentHealth>>Function<? super V,? extends Component>apply(zipkin2.Component)Supplier<ComponentHealth>BiFunction<? super Void,Throwable,? extends U>? extends CompletionStage<Void>Function<Throwable,? extends CompletionStage<Void>>? extends VoidFunction<Throwable,? extends Void>Function<? super Void,? extends CompletionStage<U>>CompletionStage<? extends Void>Consumer<? super Void>Function<? super Void,U>BiConsumer<? super Void,? super U>BiFunction<? super Void,? super U,? extends V>Function<? super Void,? extends U>completeOnTimeout(java.lang.Void,long,java.util.concurrent.TimeUnit)Supplier<? extends Void>obtrudeValue(java.lang.Void)CompletableFuture<Void>(java.lang.Object)CompletableFuture<Void>()BiFunction<? super R,? super S,? extends Void>BiApply<R,S,Void>Function<? super Throwable,? extends Void>UniExceptionally<Void>UniCompletion<Void,Void>BiFunction<? super S,Throwable,? extends Void>UniHandle<S,Void>UniCompletion<S,Void>UniWhenComplete<Void>encodeOutcome(java.lang.Void,java.lang.Throwable)completeValue(java.lang.Void)encodeValue(java.lang.Void)BiFunction<Void,Throwable,Object>BiFunction<Void,Throwable,V>apply(java.lang.Void,java.lang.Throwable)unused2healthJson"Timed out computing health status. "
          + "This often means your storage backend is unreachable."Timed out computing health status. This often means your storage backend is unreachable.CompletableFuture<>[]? extends CompletableFuture<ComponentHealth>Collection<? extends CompletableFuture<ComponentHealth>>Iterable<? extends CompletableFuture<ComponentHealth>>add(java.util.concurrent.CompletableFuture)ListIterator<CompletableFuture<ComponentHealth>>add(int,java.util.concurrent.CompletableFuture)set(int,java.util.concurrent.CompletableFuture)UnaryOperator<CompletableFuture<ComponentHealth>>Function<CompletableFuture<ComponentHealth>,CompletableFuture<ComponentHealth>>Stream<ComponentHealth>BaseStream<ComponentHealth,Stream<ComponentHealth>>? super ComponentHealthCollector<? super ComponentHealth,A,R>Spliterator<ComponentHealth>Iterator<ComponentHealth>Optional<ComponentHealth>Predicate<? super ComponentHealth>Comparator<? super ComponentHealth>BiConsumer<R,? super ComponentHealth>BiFunction<U,? super ComponentHealth,U>BinaryOperator<ComponentHealth>BiFunction<ComponentHealth,ComponentHealth,ComponentHealth>reduce(zipkin2.server.internal.health.ComponentHealth,java.util.function.BinaryOperator)Consumer<? super ComponentHealth>Function<? super ComponentHealth,? extends DoubleStream>Function<? super ComponentHealth,? extends LongStream>Function<? super ComponentHealth,? extends IntStream>Function<? super ComponentHealth,? extends Stream<? extends R>>ToDoubleFunction<? super ComponentHealth>ToLongFunction<? super ComponentHealth>ToIntFunction<? super ComponentHealth>Function<? super ComponentHealth,? extends R>Collector<ComponentHealth,?,List<ComponentHealth>>Function<CompletableFuture<ComponentHealth>,ComponentHealth>Function<CompletableFuture<ComponentHealth>,V>Function<? super ComponentHealth,? extends V>Function<V,ComponentHealth>Function<? super V,? extends CompletableFuture<ComponentHealth>>apply(java.util.concurrent.CompletableFuture)healthsoverallStatus"status""details"details Shouldn't happen since we serialize to an array. Computing health of a component may block so we make sure to invoke in the blocking executor. Can't have an exception writing to a string. .zipkin.details .zipkin . .zipkin.details.healthName.details .zipkin.details.healthNameC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorConfiguration.javaZipkinKafkaCollectorConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/kafkazipkin2.server.internal.kafkakafka(zipkin2.server.internal.kafka.ZipkinKafkaCollectorProperties,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics,zipkin2.storage.StorageComponent)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorConfiguration.classClass<ZipkinKafkaCollectorProperties>Class<KafkaBootstrapServersSet>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/kafka/ZipkinKafkaCollectorConfiguration$KafkaBootstrapServersSet.classZipkinKafkaCollectorConfiguration$KafkaBootstrapServersSetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/kafkaKafkaBootstrapServersSetKafkaBootstrapServersSet()"zipkin.collector.kafka.bootstrap-servers"zipkin.collector.kafka.bootstrap-servers"zipkin.collector.kafka.enabled"zipkin.collector.kafka.enabledThis collector consumes a topic, decodes spans from thrift messages and stores them subject tosampling policy. makes simple type name unique for /actuator/conditionsThis condition passes when {@link ZipkinKafkaCollectorProperties#getBootstrapServers()} is setto non-empty.bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorProperties.javaZipkinKafkaCollectorPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorProperties.classZipkinKafkaCollectorProperties()"zipkin.collector.kafka"zipkin.collector.kafkaComma-separated list of Kafka bootstrap servers in the form [host]:[port],...Kafka consumer group id used by the collector.Kafka topic span data will be retrieved from.Number of Kafka consumer threads to run.Additional Kafka consumer configuration.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinMySQLStorageConfiguration.javaZipkinMySQLStorageConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysqlmysqlzipkin2.server.internal.mysqlstorage(java.util.concurrent.Executor,javax.sql.DataSource,boolean,boolean,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinMySQLStorageConfiguration.classmysqlDataSourcemysqlDataSource()mysqlExecutormysqlExecutor()mysqlListenerClass<MySQLStorage>"mysql"Class<ZipkinMySQLStorageProperties>Class<ZipkinSelfTracingMySQLStorageConfiguration>"ZipkinMySQLStorage-"ZipkinMySQLStorage-C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinMySQLStorageProperties.javaZipkinMySQLStoragePropertiesdetermineJdbcUrldetermineJdbcUrl()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinMySQLStorageProperties.classmaxActivedbjdbcUrlZipkinMySQLStorageProperties()"zipkin.storage.mysql"zipkin.storage.mysql3306"org.mariadb.jdbc.Driver"org.mariadb.jdbc.Driver"jdbc:mysql://"jdbc:mysql://"?autoReconnect=true"?autoReconnect=true"&useSSL="&useSSL="&useUnicode=yes&characterEncoding=UTF-8"&useUnicode=yes&characterEncoding=UTF-8C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinSelfTracingMySQLStorageConfiguration.javaZipkinSelfTracingMySQLStorageConfigurationmakeContextAwaremakeContextAware(java.util.concurrent.Executor,brave.propagation.CurrentTraceContext)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinSelfTracingMySQLStorageConfiguration.classmysqlListener()ZipkinSelfTracingMySQLStorageConfiguration()TracingCurrentRequestContextExecutorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/mysql/ZipkinSelfTracingMySQLStorageConfiguration$1TracingCurrentRequestContextExecutor.classZipkinSelfTracingMySQLStorageConfiguration$1TracingCurrentRequestContextExecutorTracingCurrentRequestContextExecutor()sqlspaceIndex' ' "sql.query"sql.querySets up the MySQL tracing in Brave as an initialization.Decorates the input such that the {@link RequestContext#current() current request context} andthe and the {@link CurrentTraceContext#get() current trace context} at assembly time is madecurrent when task is executed. don't start new traces (to prevent amplifying writes to local storage) Gets the next span (and places it in scope) so code between here and postProcess can read it Allow span names of single-word statements like COMMITC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/prometheus/ZipkinMetricsController.javaZipkinMetricsControllerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/prometheusprometheuszipkin2.server.internal.prometheusZipkinMetricsController(io.micrometer.core.instrument.MeterRegistry,io.prometheus.client.CollectorRegistry)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/prometheus/ZipkinMetricsController.class"/metrics"/metricsmeterList<Meter>Collection<Meter>Iterable<Meter>"zipkin_collector"zipkin_collector"counter."counter."gauge."gauge. Extracts Zipkin metrics to provide backward compatibility Get the Zipkin Custom meters for constructing the Metrics endpoint We only use counters and gauges instead of using try/finally as extra indent causes lines to wrapC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/prometheus/ZipkinPrometheusMetricsConfiguration.javaZipkinPrometheusMetricsConfigurationgetPathInfogetPathInfo(com.linecorp.armeria.common.logging.RequestLog)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/prometheus/ZipkinPrometheusMetricsConfiguration.classuriuri(com.linecorp.armeria.common.logging.RequestLog)getTagsgetTags(com.linecorp.armeria.common.logging.RequestLog)getTimeBuildergetTimeBuilder(com.linecorp.armeria.common.logging.RequestLog,java.lang.String)AttributeKey<Boolean>AbstractConstant<AttributeKey<Boolean>>Constant<AttributeKey<Boolean>>Comparable<AttributeKey<Boolean>>PROMETHEUS_METRICS_SETnotFoundMetricCollectornotFoundMetricCollector()httpRequestDurationConfiguratorhttpRequestDurationConfigurator(io.micrometer.core.instrument.MeterRegistry)ZipkinPrometheusMetricsConfiguration(java.lang.String)"${management.metrics.web.server.requests-metric-name:http.server.requests}"${management.metrics.web.server.requests-metric-name:http.server.requests}metricNameURI_CROSSROADSURI_TRACE_V2URI_REDIRECTIONURI_NOT_FOUND"uri""REDIRECTION"REDIRECTION"/zipkin/index.html"/zipkin/index.htmlid()compareTo(io.netty.util.AbstractConstant)AbstractConstant(int,java.lang.String)AbstractConstant<>(int,java.lang.String)newInstance(java.lang.String)exists(java.lang.String)valueOf(java.lang.String)Class<Boolean>"PROMETHEUS_METRICS_SET"clockserverBuilder"/**"/**MetricCollectingServiceMetricCollectingService(com.linecorp.armeria.server.HttpService,io.micrometer.core.instrument.MeterRegistry,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/prometheus/ZipkinPrometheusMetricsConfiguration$MetricCollectingService.classZipkinPrometheusMetricsConfiguration$MetricCollectingServiceC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/prometheusService<HttpRequest,HttpResponse>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/serverC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/server/Service.classServiceshouldCachePathshouldCachePath(java.lang.String,java.lang.String,com.linecorp.armeria.server.Route)Service<>Service<? extends Request,? extends Response>serve(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.Request)serviceAddedserviceAdded(com.linecorp.armeria.server.ServiceConfig)CompletableFuture<RequestLog>Future<RequestLog>CompletionStage<RequestLog>? super RequestLogConsumer<? super RequestLog>? extends CompletionStage<RequestLog>Function<Throwable,? extends CompletionStage<RequestLog>>? extends RequestLogFunction<Throwable,? extends RequestLog>BiConsumer<? super RequestLog,? super Throwable>BiFunction<? super RequestLog,Throwable,? extends U>Function<? super RequestLog,? extends CompletionStage<U>>CompletionStage<? extends RequestLog>Function<? super RequestLog,U>BiConsumer<? super RequestLog,? super U>BiFunction<? super RequestLog,? super U,? extends V>Function<? super RequestLog,? extends U>completeOnTimeout(com.linecorp.armeria.common.logging.RequestLog,long,java.util.concurrent.TimeUnit)Supplier<? extends RequestLog>obtrudeValue(com.linecorp.armeria.common.logging.RequestLog)complete(com.linecorp.armeria.common.logging.RequestLog)getNow(com.linecorp.armeria.common.logging.RequestLog)CompletableFuture<RequestLog>(java.lang.Object)CompletableFuture<RequestLog>()BiFunction<? super R,? super S,? extends RequestLog>BiApply<R,S,RequestLog>BiCompletion<R,S,RequestLog>UniCompletion<R,RequestLog>Function<? super Throwable,? extends RequestLog>UniExceptionally<RequestLog>UniCompletion<RequestLog,RequestLog>BiFunction<? super S,Throwable,? extends RequestLog>UniHandle<S,RequestLog>UniCompletion<S,RequestLog>UniWhenComplete<RequestLog>encodeOutcome(com.linecorp.armeria.common.logging.RequestLog,java.lang.Throwable)completeValue(com.linecorp.armeria.common.logging.RequestLog)encodeValue(com.linecorp.armeria.common.logging.RequestLog)Consumer<RequestLog>accept(com.linecorp.armeria.common.logging.RequestLog)requestLog"Response time histogram"Response time histogramList<Tag>Collection<Tag>"method"methodEnum<HttpMethod>Comparable<HttpMethod>compareTo(com.linecorp.armeria.common.HttpMethod)EnumDesc<HttpMethod>DynamicConstantDesc<HttpMethod>Optional<EnumDesc<HttpMethod>>Class<HttpMethod>Enum<HttpMethod>(java.lang.String,int)299"/zipkin/"/zipkin/"/zipkin/traces/"/zipkin/traces/"/zipkin/dependency"/zipkin/dependency"/zipkin/traceViewer"/zipkin/traceViewer"/api/v2/trace/"/api/v2/trace/"//+"//+"/$"/$ from io.micrometer.spring.web.servlet.WebMvcTags single-page app requests are forwarded to index: ZipkinUiConfiguration.forwardUiEndpoints https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-metrics-spring-mvc We need to make sure not-found requests are still handled by a service to be decorated for adding metrics. We add a lower precedence path mapping so anything not mapped by another service is handled by this. Use glob instead of catch-all to avoid adding it to the trie router. A variable to make sure setup method is not called twice. no known action to take following .thenAcceptEnsure metrics cardinality doesn't blow up on variables single-page app route un-map UI's api route handle templated routes instead of exploding on trace ID cardinalityC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorConfiguration.javaZipkinRabbitMQCollectorConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/rabbitmqzipkin2.server.internal.rabbitmqrabbitMqrabbitMq(zipkin2.server.internal.rabbitmq.ZipkinRabbitMQCollectorProperties,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics,zipkin2.storage.StorageComponent)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorConfiguration.classClass<ZipkinRabbitMQCollectorProperties>Class<RabbitMQAddressesOrUriSet>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorConfiguration$RabbitMQAddressesOrUriSet.classZipkinRabbitMQCollectorConfiguration$RabbitMQAddressesOrUriSetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/rabbitmqRabbitMQAddressesOrUriSetRabbitMQAddressesOrUriSet()"zipkin.collector.rabbitmq.addresses"zipkin.collector.rabbitmq.addresses"zipkin.collector.rabbitmq.uri"zipkin.collector.rabbitmq.uri"zipkin.collector.rabbitmq.enabled"zipkin.collector.rabbitmq.enabledAuto-configuration for {@link RabbitMQCollector}.This condition passes when {@link ZipkinRabbitMQCollectorProperties#getAddresses()} or {@linkZipkinRabbitMQCollectorProperties#getUri()} is set to a non-empty value.<p>This is here because the yaml defaults this property to empty like this, and Spring Bootaddresses: ${RABBIT_ADDRESSES:}uri: ${RABBIT_URI:}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorProperties.javaZipkinRabbitMQCollectorPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorProperties.classvirtualHostconnectionTimeoutEMPTY_URIZipkinRabbitMQCollectorProperties()"zipkin.collector.rabbitmq"zipkin.collector.rabbitmqProperties for configuring and building a {@link RabbitMQCollector}.RabbitMQ server addresses in the form of a (comma-separated) list of host:port pairsNumber of concurrent consumersTCP connection timeout in millisecondsRabbitMQ user passwordRabbitMQ queue from which to collect the Zipkin spansRabbitMQ usernameRabbitMQ virtual hostFlag to use SSLRabbitMQ URI spec-compliant URI to connect to the RabbitMQ server. When used, other connectionproperties will be ignored.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/scribe/ZipkinScribeCollectorConfiguration.javaZipkinScribeCollectorConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/scribezipkin2.server.internal.scribescribe(java.lang.String,int,zipkin2.collector.CollectorSampler,zipkin2.collector.CollectorMetrics,zipkin2.storage.StorageComponent)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/scribe/ZipkinScribeCollectorConfiguration.class"${zipkin.collector.scribe.category:zipkin}"${zipkin.collector.scribe.category:zipkin}"${zipkin.collector.scribe.port:9410}"${zipkin.collector.scribe.port:9410}"zipkin.collector.scribe.enabled"zipkin.collector.scribe.enableda single span, which is TBinaryProtocol big-endian, then base64 encoded. Decoded spans are storedasynchronously.The init method will block until the scribe port is listening, or crash on port conflictC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/LimiterMetrics.javaLimiterMetricsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttlethrottlezipkin2.server.internal.throttleLimiterMetrics(io.micrometer.core.instrument.MeterRegistry)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/LimiterMetrics.classrequestsDroppedrequestsIgnoredrequestsSucceededrequests"zipkin_storage.throttle.requests"zipkin_storage.throttle.requests"cumulative amount of limiter requests acquired"cumulative amount of limiter requests acquired"zipkin_storage.throttle.requests_succeeded"zipkin_storage.throttle.requests_succeeded"cumulative amount of limiter requests acquired that later succeeded"cumulative amount of limiter requests acquired that later succeeded"zipkin_storage.throttle.requests_dropped"zipkin_storage.throttle.requests_dropped"cumulative amount of limiter requests acquired that later dropped due to capacity"cumulative amount of limiter requests acquired that later dropped due to capacity"zipkin_storage.throttle.requests_ignored"zipkin_storage.throttle.requests_ignored"cumulative amount of limiter requests acquired that later dropped not due to capacity"cumulative amount of limiter requests acquired that later dropped not due to capacityFollows the same naming convention as {@link CollectorMetrics}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/MicrometerThrottleMetrics.javaMicrometerThrottleMetricscom.netflix.concurrency.limits.limiterAbstractLimiter<>C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jarconcurrency-limits-core-0.3.6C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-coreC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limitsconcurrency-limitsC:/Users/Semiu/.m2/repository/com/netflixnetflixC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/comC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflixC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrencyC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limitslimitsC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limits/limiterlimiterC:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limits/limiter/AbstractLimiter.classAbstractLimitercom.netflix.concurrency.limitsLimiter<>C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limits/Limiter.classLimiterbind(com.netflix.concurrency.limits.limiter.AbstractLimiter)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/MicrometerThrottleMetrics.classbind(java.util.concurrent.ThreadPoolExecutor)MicrometerThrottleMetrics(io.micrometer.core.instrument.MeterRegistry)Supplier<Number>Builder<Supplier<Number>>"zipkin_storage.throttle.concurrency"zipkin_storage.throttle.concurrency"number of threads running storage requests"number of threads running storage requests"zipkin_storage.throttle.queue_size"zipkin_storage.throttle.queue_sizeBlockingQueue<Runnable>Queue<Runnable>"number of items queued waiting for access to storage"number of items queued waiting for access to storage"zipkin_storage.throttle.in_flight_requests"zipkin_storage.throttle.in_flight_requests"number of requests the limiter thinks are active"number of requests the limiter thinks are activeFollows the same naming convention as {@link MicrometerCollectorMetrics} This value should parallel (zipkin_storage.throttle.queue_size + zipkin_storage.throttle.concurrency) It is tracked to make sure it doesn't perpetually increase.  If it does then we're not resolving LimitListeners.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledCall.javaThrottledCallclearTraceawait(java.util.concurrent.CountDownLatch)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledCall.classLimiter<Void>Predicate<Throwable>ThrottledCall(zipkin2.Call,java.util.concurrent.Executor,com.netflix.concurrency.limits.Limiter,zipkin2.server.internal.throttle.LimiterMetrics,java.util.function.Predicate)isOverCapacitylimiterMetricsSTORAGE_THROTTLE_MAX_CONCURRENCY"STORAGE_THROTTLE_MAX_CONCURRENCY reached"STORAGE_THROTTLE_MAX_CONCURRENCY reachedC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledCall$1.classThrottledCall$1limiterListenerOptional<Listener>? extends ListenerSupplier<? extends Listener>orElse(com.netflix.concurrency.limits.Limiter.Listener)Stream<Listener>BaseStream<Listener,Stream<Listener>>Optional<? extends Listener>? extends Optional<? extends Listener>Supplier<? extends Optional<? extends Listener>>? super ListenerFunction<? super Listener,? extends Optional<? extends U>>Function<? super Listener,? extends U>Predicate<? super Listener>Consumer<? super Listener>Supplier<RejectedExecutionException>acquireacquire(java.lang.Void)acquire(java.lang.Object)enqueueAndAwait"Throttled("Throttled(EnqueueAndAwaitEnqueueAndAwait(zipkin2.Callback,com.netflix.concurrency.limits.Limiter.Listener)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttle/ThrottledCall$EnqueueAndAwait.classThrottledCall$EnqueueAndAwaitC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttletest(java.lang.Throwable)Predicate<? super Throwable>"EnqueueAndAwait{call="EnqueueAndAwait{call=", callback=", callback={@link Call} implementation that is backed by an {@link ExecutorService}. The ExecutorServiceserves two purposes:<ol><li>Limits the number of requests that can run in parallel.</li><li>Depending on configuration, can queue up requests to make sure we don't aggressively droprequests that would otherwise succeed if given a moment. Bounded queues are safest for this asunbounded ones can lead to heap exhaustion and {@link OutOfMemoryError OOM errors}.</li></ol>ThrottledStorageComponent<p>This reduces allocations when concurrency reached by always returning the same instance.This is only thrown in one location, and a stack trace starting from static initializationisn't useful. Hence, we {@link Exceptions#clearTrace clear the trace}. thread visibility guaranteed by the countdown latchTo simplify code, this doesn't actually invoke the underlying {@link #execute()} method. Thisis ok because in almost all cases, doing so would imply invoking {@link #enqueue(Callback)}anyway. Enqueue the call invocation on the executor and block until it completes. Check if the run resulted in an exception success Coerce the throwable to the signature of Call.execute() When handling enqueue, we don't block the calling thread. Any exception goes to the callback. possibly rejected, but from the executor, not storage! Ignoring in all cases here because storage itself isn't saying we need to throttle. Though we may still be write bound, but a drop in concurrency won't necessarily help. allows blocking calls to see the exceptionWhen run, this enqueues a call with a given callback, and awaits its completion.This waits until completion to ensure the number of executing calls doesn't surpass theconcurrency limit of the executor.<h3>The {@link Listener} isn't affected during run</h3>There could be an error enqueuing the call or an interruption during shutdown of theexecutor. We do not affect the {@link Listener} here because it would be redundant tohandling already done in callbacks. For example, if shutting down, the storage layer wouldalso invoke {@link #onError(Throwable)}. Need to wait here since the callback call will run asynchronously also. This ensures we don't exceed our throttle/queue limits. edge case: error during enqueue! usually we don't add metrics like this, but for now it is helpful to sanity check acquired vs erred. NOTE: limiter could block and delay the caller's callback catch the throwable in case the invocation is blocking (Call.execute()) NOTE: the above limiter could block and delay the caller's callbackReturns true if uninterrupted waiting for the latchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledStorageComponent.javacreateQueuecreateQueue(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledStorageComponent.classAbstractLimiter<Void>STORAGE_THROTTLE_MAX_QUEUE_SIZE"STORAGE_THROTTLE_MAX_QUEUE_SIZE reached"STORAGE_THROTTLE_MAX_QUEUE_SIZE reachedminConcurrencymaxConcurrencymaxQueueSizeBuilder<Builder>C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limits/limiter/AbstractLimiter$Builder.classAbstractLimiter$Builderlimit(com.netflix.concurrency.limits.Limit)metricRegistrymetricRegistry(com.netflix.concurrency.limits.MetricRegistry)Supplier<Long>clock(java.util.function.Supplier)namednamed(java.lang.String)Builder<Builder>()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledStorageComponent$1.classThrottledStorageComponent$1(java.lang.String)"zipkin-throttle-pool"zipkin-throttle-poolC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ThrottledStorageComponent$1$1.classThrottledStorageComponent$1$1rejectedExecutionrejectedExecution(java.lang.Runnable,java.util.concurrent.ThreadPoolExecutor)r"Throttled{"Throttled{ThrottledSpanConsumerThrottledSpanConsumer(zipkin2.server.internal.throttle.ThrottledStorageComponent)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttle/ThrottledStorageComponent$ThrottledSpanConsumer.classThrottledStorageComponent$ThrottledSpanConsumerthrottledStorage"throttled-accept-spans"throttled-accept-spansmaxSize"maxSize < 0"maxSize < 0LinkedBlockingQueue<Runnable>AbstractQueue<Runnable>AbstractCollection<Runnable>LinkedBlockingQueue<Runnable>(int)Spliterator<Runnable>? super RunnableConsumer<? super Runnable>Iterator<Runnable>Stream<Runnable>BaseStream<Runnable,Stream<Runnable>>Predicate<? super Runnable>? extends RunnableCollection<? extends Runnable>Iterable<? extends Runnable>add(java.lang.Runnable)AbstractCollection<Runnable>()offer(java.lang.Runnable)AbstractQueue<Runnable>()Collection<? super Runnable>Iterable<? super Runnable>offer(java.lang.Runnable,long,java.util.concurrent.TimeUnit)put(java.lang.Runnable)Node<Runnable>LinkedBlockingQueue<Runnable>(java.util.Collection)LinkedBlockingQueue<Runnable>()ThreadPoolExecutorResizerThreadPoolExecutorResizer(java.util.concurrent.ThreadPoolExecutor)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttle/ThrottledStorageComponent$ThreadPoolExecutorResizer.classThrottledStorageComponent$ThreadPoolExecutorResizernewValuepreviousValuenewValueIntbuild()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttle/ThrottledStorageComponent$Builder.classThrottledStorageComponent$BuilderBuilder<?>NonLimitingLimiterNonLimitingLimiter(com.netflix.concurrency.limits.limiter.AbstractLimiter.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/throttle/ThrottledStorageComponent$NonLimitingLimiter.classThrottledStorageComponent$NonLimitingLimiterDelegating implementation that limits requests to the {@link #spanConsumer()} of another {@linkStorageComponent}.  The theory here is that this class can be used to:<li>Prevent spamming the storage engine with excessive, spike requests when they come in; thuspreserving it's life.</li><li>Optionally act as a buffer so that a fixed number requests can be queued for execution whenthe throttle allows for it.  This optional queue must be bounded in order to avoid running out ofmemory from infinitely queueing.</li>See {@link ThrottledCall#STORAGE_THROTTLE_MAX_CONCURRENCY} if unfamiliar with clearing trace onexceptions only thrown from one spot. Limiter will trend towards min until otherwise necessary so may as well start there The size of the thread pool is managed by the limiter, so we initialize it with the lower bound (current limit), and later use change notification to resize it. 0 means we should be bounded but we can't create a queue with that size so use 1 instead.This is {@code synchronized} to ensure that we don't let the core/max pool sizes get out ofsync; even for an instant.  The two need to be tightly coupled together to ensure that whenour queue fills up we don't spin up extra Threads beyond our calculated limit.<p>There is also an unfortunate aspect where the {@code max} has to always be greater than{@code core} or an exception will be thrown.  So they have to be adjust appropriatelyrelative to the direction the size is going. Note: no case for equals.  Why modify something that doesn't need modified?Unlike a normal Limiter, this will actually not prevent the creation of a {@link Listener} in{@link #acquire(java.lang.Void)}.  The point of this is to ensure that we can always derive anappropriate {@link Limit#getLimit() Limit} while the {@link #executor} handles actuallylimiting running requests.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ZipkinStorageThrottleProperties.javaZipkinStorageThrottlePropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/throttle/ZipkinStorageThrottleProperties.class"zipkin.storage.throttle"zipkin.storage.throttleShould we throttle at all?Minimum number of storage requests to allow through at a given time.Maximum number of storage requests to allow through at a given time. Should be tuned to(bulk_index_pool_size / num_servers_in_cluster). e.g. 200 (default pool size in Elasticsearch)/ 2 (number of load balanced zipkin-server instances) = 100.Maximum number of storage requests to buffer while waiting for open Thread. 0 = no buffering.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/CompressionProperties.javaCompressionPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/uiuizipkin2.server.internal.uicompressionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/CompressionProperties.classCompressionProperties()"server"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/ZipkinUiConfiguration.javaZipkinUiConfigurationDEFAULT_BASEPATHmaybeResourcemaybeResource(java.lang.String,org.springframework.core.io.Resource)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/ZipkinUiConfiguration.classmaybeIndexServicemaybeIndexService(java.lang.String,org.springframework.core.io.Resource)writeConfigwriteConfig(zipkin2.server.internal.ui.ZipkinUiProperties)uiServerConfiguratoruiServerConfigurator(com.linecorp.armeria.server.HttpService,java.util.Optional)indexServiceindexService()lensIndexHtml"classpath:zipkin-lens/index.html"classpath:zipkin-lens/index.html"zipkin.ui.enabled"zipkin.ui.enabledClass<ZipkinUiProperties>Class<CompressionProperties>lensIndex"Could not load Lens UI from "Could not load Lens UI from maxAgeYear365uiFileService? extends ZipkinUiConfigurationClass<? extends ZipkinUiConfiguration>Map<String,? extends ZipkinUiConfiguration>ZipkinUiConfiguration[]? extends ZipkinUiConfiguration[]Constructor<? extends ZipkinUiConfiguration>? super ? extends ZipkinUiConfigurationClass<? super ? extends ZipkinUiConfiguration>TypeVariable<Class<? extends ZipkinUiConfiguration>>TypeVariable<Class<? extends ZipkinUiConfiguration>>[]"zipkin-lens""/zipkin/config.json"/zipkin/config.json600"/zipkin/traces/{id}"/zipkin/traces/{id}"/favicon.ico"/favicon.ico"/zipkin/favicon.ico"/zipkin/favicon.ico? super MeterRegistryConsumer<? super MeterRegistry>? extends MeterRegistrySupplier<? extends MeterRegistry>orElse(io.micrometer.core.instrument.MeterRegistry)Stream<MeterRegistry>BaseStream<MeterRegistry,Stream<MeterRegistry>>Optional<? extends MeterRegistry>? extends Optional<? extends MeterRegistry>Supplier<? extends Optional<? extends MeterRegistry>>Function<? super MeterRegistry,? extends Optional<? extends U>>Function<? super MeterRegistry,? extends U>Predicate<? super MeterRegistry>Consumer<MeterRegistry>accept(io.micrometer.core.instrument.MeterRegistry)mPredicate<Id>? super IdPredicate<? super Id>test(io.micrometer.core.instrument.Meter.Id)"environment""queryLimit"queryLimit"defaultLookback""searchEnabled""logsUrl"logsUrl"supportUrl"supportUrl"archivePostUrl"archivePostUrl"archiveUrl"archiveUrl"dependency""enabled""lowErrorRate"lowErrorRate"highErrorRate"highErrorRatebasePathmaybeContentmaxAgeMinutebaseTagValue"<base href=[^>]+>"<base href=[^>]+>"<base href=\""<base href=""\">"">Zipkin-UI is a single-page application mounted at /zipkin. For simplicity, assume paths mentionedbelow are relative to that. For example, the UI reads config.json, from the absolute path<p>When looking at a trace, the browser is sent to the path "/traces/{id}". For the single-pageapp to serve that route, the server needs to forward the request to "/index.html". The sameforwarding applies to "/dependencies" and any other routes the UI controls.<p>Under the scenes the JavaScript code looks at {@code window.location} to figure out what theUI should do. This is handled by a route api defined in the crossroads library.<h3>Caching</h3><p>This includes a hard-coded cache policy, consistent with zipkin-scala.<li>1 minute for index.html</li><li>10 minute for /config.json</li><li>365 days for hashed resources (ex /app-e12b3bbb7e5a572f270d.min.js)</li>Since index.html links to hashed resource names, any change to it will orphan old resources.That's why hashed resource age can be 365 days. TODO This approach requires maintenance when new UI routes are added. Change to the following: If the path is a a file w/an extension, treat normally. Otherwise instead of returning 404, forward to the index. See https://github.com/twitter/finatra/blob/458c6b639c3afb4e29873d123125eeeb2b02e2cd/http/src/main/scala/com/twitter/finatra/http/response/ResponseBuilder.scala#L321 don't add metrics for favicon environment: '', queryLimit: 10, defaultLookback: 15 * 60 * 1000, // 15 minutes searchEnabled: true, dependency: {   enabled: true,   lowErrorRate: 0.5, // 50% of calls in error turns line yellow   highErrorRate: 0.75 // 75% of calls in error turns line red .dependency html-webpack-plugin seems to strip out quotes from the base tag when compiling so be careful with this matcher.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/ZipkinUiProperties.javaZipkinUiPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/ui/ZipkinUiProperties.classbasepathinstrumentedZipkinUiProperties()"zipkin.ui"zipkin.ui".*".*C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ui/ZipkinUiProperties$Dependency.classZipkinUiProperties$DependencyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/classes/zipkin2/server/internal/ui0.5f0.50.75f0.75 TODO: this isn't honored in lens https://github.com/openzipkin/zipkin/issues/2519 50% of calls in error turns line yellow 75% of calls in error turns line redC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin/server/ITEnableZipkinServer.javaITEnableZipkinServerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkinC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/testC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin/server/ITEnableZipkinServer.classClass<SpringRunner>Class<CustomServer>"server.port=0"server.port=0CustomServerCustomServer()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin/server/CustomServer.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkinC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes RANDOM_PORT requires spring-webC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/activemq/ZipkinActiveMQCollectorPropertiesOverrideTest.javaZipkinActiveMQCollectorPropertiesOverrideTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/activemqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collectorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/activemq/ZipkinActiveMQCollectorPropertiesOverrideTest.classparametersparameters(java.lang.String,java.lang.Object,java.util.function.Function)Function<Builder,T>Class<Parameterized>Function<Builder,Object>"{0}"{0}Iterable<Object[]>List<Object[]>Collection<Object[]>Function<Builder,String>"url""failover:(tcp://localhost:61616,tcp://remotehost:61616)"failover:(tcp://localhost:61616,tcp://remotehost:61616)Function<Builder,V>Function<? super V,? extends Builder>apply(zipkin2.collector.activemq.ActiveMQCollector.Builder)"client-id-prefix"client-id-prefix"zipkin-prod"zipkin-prod"zapkin"zapkinFunction<Builder,Integer>"concurrency"Function<? super Integer,? extends V>Function<V,Integer>"username""u"u"password""p"propertySuffixbuilderExtractor"zipkin.collector.activemq."zipkin.collector.activemq."zipkin.collector.activemq.url:tcp://localhost:61616"zipkin.collector.activemq.url:tcp://localhost:61616"zipkin.collector.activemq.$property:$value"zipkin.collector.activemq.$property:$value"zipkin.collector.activemq.password:p"zipkin.collector.activemq.password:p"zipkin.collector.activemq.username:u"zipkin.collector.activemq.username:uAbstractObjectAssert<?,Object>Function<? super Object,? extends T>Consumer<Object>AbstractAssert<?,Object>(java.lang.Object,java.lang.Class)ObjectAssert<Builder>AbstractObjectAssert<ObjectAssert<Builder>,Builder>AbstractAssert<ObjectAssert<Builder>,Builder>Assert<ObjectAssert<Builder>,Builder>Descriptable<ObjectAssert<Builder>>ExtensionPoints<ObjectAssert<Builder>,Builder>Function<? super Builder,T>Condition<? super Builder>Descriptable<Condition<? super Builder>>Function<? super Builder,? extends T>Consumer<Builder>AbstractAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.activemq.ActiveMQCollector.Builder,java.lang.Class)Function<? super Builder,?>Function<? super Builder,?>[]AbstractObjectAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.activemq.ActiveMQCollector.Builder,java.lang.Class)to allow us to define with a lambdaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/kafka/ZipkinKafkaCollectorPropertiesOverrideTest.javaZipkinKafkaCollectorPropertiesOverrideTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/kafkaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/kafka/ZipkinKafkaCollectorPropertiesOverrideTest.class"bootstrap-servers"bootstrap-servers"127.0.0.1:9092"127.0.0.1:9092apply(zipkin2.collector.kafka.KafkaCollector.Builder)"bootstrap.servers"bootstrap.servers"group-id"group-id"group.id"group.id"topic""streams""overrides.auto.offset.reset"overrides.auto.offset.reset"latest"latest"auto.offset.reset"auto.offset.reset"zipkin.collector.kafka."zipkin.collector.kafka.AbstractAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.kafka.KafkaCollector.Builder,java.lang.Class)AbstractObjectAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.kafka.KafkaCollector.Builder,java.lang.Class)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/rabbitmq/ZipkinRabbitMQCollectorPropertiesOverrideTest.javaZipkinRabbitMQCollectorPropertiesOverrideTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/rabbitmqC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/rabbitmq/ZipkinRabbitMQCollectorPropertiesOverrideTest.class"addresses""localhost:5671"localhost:5671apply(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder)"connectionTimeout"30_00030000"admin"admin"virtualHost""/hello"/helloFunction<Builder,Boolean>"useSsl"Function<? super Boolean,? extends V>Function<V,Boolean>Function<Builder,URI>"amqp://localhost"amqp://localhost? super URIFunction<? super URI,? extends V>Function<V,URI>"amqp://"amqp://"zipkin.collector.rabbitmq."zipkin.collector.rabbitmq.AbstractAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder,java.lang.Class)AbstractObjectAssert<ObjectAssert<Builder>,Builder>(zipkin2.collector.rabbitmq.RabbitMQCollector.Builder,java.lang.Class) intentionally punting on comma-separated form of a list of addresses as it doesn't fit this unit test. Better to make a separate one than force-fit!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/scribe/ZipkinScribeCollectorConfigurationTest.javaZipkinScribeCollectorConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/scribeC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/collector/scribe/ZipkinScribeCollectorConfigurationTest.classClass<NoSuchBeanDefinitionException>"zipkin.collector.scribe.enabled:true"zipkin.collector.scribe.enabled:true"zipkin.collector.scribe.port:9999"zipkin.collector.scribe.port:99999999Class<PropertyPlaceholderAutoConfiguration>Note: this will flake if you happen to be running a server on port 9410!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITActuatorMappings.javaITActuatorMappingsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/serverassumeThatscrapescrape()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITActuatorMappings.class"/actuator"/actuator"actuator"actuatorInfoObjectAssert<MediaType>AbstractObjectAssert<ObjectAssert<MediaType>,MediaType>AbstractAssert<ObjectAssert<MediaType>,MediaType>Assert<ObjectAssert<MediaType>,MediaType>Descriptable<ObjectAssert<MediaType>>ExtensionPoints<ObjectAssert<MediaType>,MediaType>? super MediaTypeCondition<? super MediaType>Descriptable<Condition<? super MediaType>>Comparator<? super MediaType>Function<? super MediaType,? extends T>Consumer<MediaType>Predicate<? super MediaType>AbstractAssert<ObjectAssert<MediaType>,MediaType>(okhttp3.MediaType,java.lang.Class)"application/vnd.spring-boot.actuator.v2+json; charset=utf-8"application/vnd.spring-boot.actuator.v2+json; charset=utf-8actuatorHealth actuator is optional ensure we don't track actuator in prometheus Different content type Same content ensure we don't track info in prometheus ensure we don't track health in prometheusC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinGrpcCollector.javaITZipkinGrpcCollectorH2_PRIOR_KNOWLEDGEawaitSpansawaitSpans()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinGrpcCollector.classcallReportcallReport(zipkin2.proto3.ListOfSpans)"zipkin.collector.grpc.enabled=true"zipkin.collector.grpc.enabled=true? extends ProtocolList<? extends Protocol>Collection<? extends Protocol>Iterable<? extends Protocol>List<Protocol>Collection<Protocol>Iterable<Protocol>ProtoAdapter<ListOfSpans>C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jarwire-runtime-3.0.2C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtimeC:/Users/Semiu/.m2/repository/com/squareup/wirewireC:/Users/Semiu/.m2/repository/com/squareupsquareupC:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/comC:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareupC:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareup/wireC:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareup/wire/ProtoAdapter.classProtoAdapter" \n\n \n \n \n\n \n\n \n\n\n \n\n\n\n\n\n\n\n\n\n \n\n\n\n \n\n \n\n\n\n\n\n\n\n\n\n&  B* 20:BCB0\n0B00\tJ\n8 0\r0 J\n8 0\r0 J8 20H&J8 20J8 20J8 2 0!\"J8 20#$J%02&8 'J%0(2)0*2&8 H&+J%0(20,2&8 -J%0(2.0/2&8 0J'10(2)0*22032&8 H4J5032&8 H&6J70322032&8 H8J98 2&8 H&:J;0<2&8 H=J>0 2?0@H AR0X\n \nR\"\n8 0\r0 X\n R\"\n8 0\r0 X\n R0\n D" 

 
 
 

 

 


 









 



 

 









&  B* 20:BCB0
0B00	J
8 00 J
8 00 J8 20H&J8 20J8 20J8 2 0!"J8 20#$J%02&8 'J%0(2)0*2&8 H&+J%0(20,2&8 -J%0(2.0/2&8 0J'10(2)0*22032&8 H4J5032&8 H&6J70322032&8 H8J98 2&8 H&:J;0<2&8 H=J>0 2?0@H AR0X
 
R"
8 00 X
 R"
8 00 X
 R0
 D"Lcom/squareup/wire/ProtoAdapter;"Lcom/squareup/wire/ProtoAdapter;"E""fieldEncoding"fieldEncoding"Lcom/squareup/wire/FieldEncoding;"Lcom/squareup/wire/FieldEncoding;"type""Ljava/lang/Class;"Ljava/lang/Class;"(Lcom/squareup/wire/FieldEncoding;Ljava/lang/Class;)V"(Lcom/squareup/wire/FieldEncoding;Ljava/lang/Class;)V"Lkotlin/reflect/KClass;"Lkotlin/reflect/KClass;"(Lcom/squareup/wire/FieldEncoding;Lkotlin/reflect/KClass;)V"(Lcom/squareup/wire/FieldEncoding;Lkotlin/reflect/KClass;)V"getFieldEncoding$wire_runtime"getFieldEncoding$wire_runtime"()Lcom/squareup/wire/FieldEncoding;"()Lcom/squareup/wire/FieldEncoding;"packedAdapter"packedAdapter"getPackedAdapter$wire_runtime"getPackedAdapter$wire_runtime"()Lcom/squareup/wire/ProtoAdapter;"()Lcom/squareup/wire/ProtoAdapter;"repeatedAdapter"repeatedAdapter"getRepeatedAdapter$wire_runtime"getRepeatedAdapter$wire_runtime"getType"getType"()Lkotlin/reflect/KClass;"()Lkotlin/reflect/KClass;"asPacked"asPacked"asRepeated"asRepeated"decode""reader""Lcom/squareup/wire/ProtoReader;"Lcom/squareup/wire/ProtoReader;"(Lcom/squareup/wire/ProtoReader;)Ljava/lang/Object;"(Lcom/squareup/wire/ProtoReader;)Ljava/lang/Object;"stream""Ljava/io/InputStream;"Ljava/io/InputStream;"(Ljava/io/InputStream;)Ljava/lang/Object;"(Ljava/io/InputStream;)Ljava/lang/Object;"([B)Ljava/lang/Object;"([B)Ljava/lang/Object;"source""Lokio/BufferedSource;"Lokio/BufferedSource;"(Lokio/BufferedSource;)Ljava/lang/Object;"(Lokio/BufferedSource;)Ljava/lang/Object;"Lokio/ByteString;"Lokio/ByteString;"(Lokio/ByteString;)Ljava/lang/Object;"(Lokio/ByteString;)Ljava/lang/Object;"encode""(Ljava/lang/Object;)[B"(Ljava/lang/Object;)[B"writer""Lcom/squareup/wire/ProtoWriter;"Lcom/squareup/wire/ProtoWriter;"(Lcom/squareup/wire/ProtoWriter;Ljava/lang/Object;)V"(Lcom/squareup/wire/ProtoWriter;Ljava/lang/Object;)V"Ljava/io/OutputStream;"Ljava/io/OutputStream;"(Ljava/io/OutputStream;Ljava/lang/Object;)V"(Ljava/io/OutputStream;Ljava/lang/Object;)V"sink""Lokio/BufferedSink;"Lokio/BufferedSink;"(Lokio/BufferedSink;Ljava/lang/Object;)V"(Lokio/BufferedSink;Ljava/lang/Object;)V"encodeWithTag"encodeWithTag"tag""(Lcom/squareup/wire/ProtoWriter;ILjava/lang/Object;)V"(Lcom/squareup/wire/ProtoWriter;ILjava/lang/Object;)V"encodedSize"encodedSize"(Ljava/lang/Object;)I"(Ljava/lang/Object;)I"encodedSizeWithTag"encodedSizeWithTag"(ILjava/lang/Object;)I"(ILjava/lang/Object;)I"redact"redact"(Ljava/lang/Object;)Ljava/lang/Object;"(Ljava/lang/Object;)Ljava/lang/Object;"toString""(Ljava/lang/Object;)Ljava/lang/String;"(Ljava/lang/Object;)Ljava/lang/String;"withLabel""label"label"Lcom/squareup/wire/WireField$Label;"Lcom/squareup/wire/WireField$Label;"withLabel$wire_runtime"withLabel$wire_runtime"Companion"Companion"EnumConstantNotFoundException"EnumConstantNotFoundException"wire-runtime"decode(byte[])ProtoAdapter<>ProtoAdapter<?>ProtoAdapter<M>get(java.lang.Class)Class<M>Message<>C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareup/wire/Message.classMessage" P\n\n\n\n\n \n\n \n\n\n\n\n\n\n \n\n \n\n\n\n\n \n&  #* *HH0 **HH020:\"#B8 00\tJ0J020J020J\r8H&J0HJ8 J 0!HR8 08\n \nR0X\n \r\"R08@X\n R08G\n $" P




 

 






 

 




 
&  #* *HH0 **HH020:"#B8 00	J0J020J020J8H&J0HJ8 J 0!HR8 08
 
R0X
 "R08@X
 R08G
 $"Lcom/squareup/wire/Message;"Lcom/squareup/wire/Message;"M""B"B"Lcom/squareup/wire/Message$Builder;"Lcom/squareup/wire/Message$Builder;"Ljava/io/Serializable;"Ljava/io/Serializable;"adapter""unknownFields"unknownFields"(Lcom/squareup/wire/ProtoAdapter;Lokio/ByteString;)V"(Lcom/squareup/wire/ProtoAdapter;Lokio/ByteString;)V"cachedSerializedSize"cachedSerializedSize"getCachedSerializedSize$wire_runtime"getCachedSerializedSize$wire_runtime"()I"()I"setCachedSerializedSize$wire_runtime"setCachedSerializedSize$wire_runtime"(I)V"(I)V"hashCode""()Lokio/ByteString;"()Lokio/ByteString;"newBuilder""()Lcom/squareup/wire/Message$Builder;"()Lcom/squareup/wire/Message$Builder;"withoutUnknownFields"withoutUnknownFields"()Lcom/squareup/wire/Message;"()Lcom/squareup/wire/Message;"writeReplace""Builder"Message<?,?>get(com.squareup.wire.Message)EnumAdapter<>C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareup/wire/EnumAdapter.classEnumAdapter" <\n\n \n\n\n \n\n \n\n\n\n\n\n \n\n\n\n& * *02H0B8 0B8 0J\t8 2\n0HJ\r02028 HJ028 HJ8 20H$J8 28 H" <

 


 

 





 



& * *02H0B8 0B8 0J	8 2
0HJ02028 HJ028 HJ8 20H$J8 28 H"Lcom/squareup/wire/EnumAdapter;"Lcom/squareup/wire/EnumAdapter;"Lcom/squareup/wire/WireEnum;"Lcom/squareup/wire/WireEnum;"(Ljava/lang/Class;)V"(Ljava/lang/Class;)V"(Lkotlin/reflect/KClass;)V"(Lkotlin/reflect/KClass;)V"(Lcom/squareup/wire/ProtoReader;)Lcom/squareup/wire/WireEnum;"(Lcom/squareup/wire/ProtoReader;)Lcom/squareup/wire/WireEnum;"(Lcom/squareup/wire/ProtoWriter;Lcom/squareup/wire/WireEnum;)V"(Lcom/squareup/wire/ProtoWriter;Lcom/squareup/wire/WireEnum;)V"(Lcom/squareup/wire/WireEnum;)I"(Lcom/squareup/wire/WireEnum;)I"fromValue"fromValue"(I)Lcom/squareup/wire/WireEnum;"(I)Lcom/squareup/wire/WireEnum;"(Lcom/squareup/wire/WireEnum;)Lcom/squareup/wire/WireEnum;"(Lcom/squareup/wire/WireEnum;)Lcom/squareup/wire/WireEnum;EnumAdapter<E>ProtoAdapter<E>newEnumAdapternewEnumAdapter(java.lang.Class)Message<M,B>Builder<M,B>C:/Users/Semiu/.m2/repository/com/squareup/wire/wire-runtime/3.0.2/wire-runtime-3.0.2.jar/com/squareup/wire/Message$Builder.classMessage$Builder" @\n\n \n\n \n \n\n\n\n\n\n\n\n\n \n\n\n\n & **HH0**HH0 20BJ,880 202020J880 20\rJ\r 8H&!J\"0\rJ#880 J$0%HR0X\n \t\"\nR0\rX\n \"R0X\n \"&" @

 

 
 








 



 & **HH0**HH0 20BJ,880 202020J880 20J 8H&!J"0J#880 J$0%HR0X
 	"
R0X
 "R0X
 "&"()V"()V"unknownFieldsBuffer"unknownFieldsBuffer"Lokio/Buffer;"Lokio/Buffer;"getUnknownFieldsBuffer$wire_runtime"getUnknownFieldsBuffer$wire_runtime"()Lokio/Buffer;"()Lokio/Buffer;"setUnknownFieldsBuffer$wire_runtime"setUnknownFieldsBuffer$wire_runtime"(Lokio/Buffer;)V"(Lokio/Buffer;)V"unknownFieldsByteString"unknownFieldsByteString"getUnknownFieldsByteString$wire_runtime"getUnknownFieldsByteString$wire_runtime"setUnknownFieldsByteString$wire_runtime"setUnknownFieldsByteString$wire_runtime"(Lokio/ByteString;)V"(Lokio/ByteString;)V"unknownFieldsWriter"unknownFieldsWriter"getUnknownFieldsWriter$wire_runtime"getUnknownFieldsWriter$wire_runtime"()Lcom/squareup/wire/ProtoWriter;"()Lcom/squareup/wire/ProtoWriter;"setUnknownFieldsWriter$wire_runtime"setUnknownFieldsWriter$wire_runtime"(Lcom/squareup/wire/ProtoWriter;)V"(Lcom/squareup/wire/ProtoWriter;)V"addUnknownField"addUnknownField"addUnknownFields"addUnknownFields"build""buildUnknownFields"buildUnknownFields"clearUnknownFields"clearUnknownFields"prepareForNewUnknownFields"prepareForNewUnknownFieldsnewMessageAdapternewMessageAdapter(java.lang.Class)ProtoAdapter<Map<K,V>>newMapAdapternewMapAdapter(com.squareup.wire.ProtoAdapter,com.squareup.wire.ProtoAdapter)ProtoAdapter<K>ProtoAdapter<V>ProtoAdapter(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<ListOfSpans>(com.squareup.wire.FieldEncoding,java.lang.Class)kotlin.reflectKClass<?>C:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jarkotlin-stdlib-1.3.50C:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.501.3.50C:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlibkotlin-stdlibC:/Users/Semiu/.m2/repository/org/jetbrains/kotlinkotlinC:/Users/Semiu/.m2/repository/org/jetbrainsjetbrainsC:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jar/kotlinC:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jar/kotlin/reflectC:/Users/Semiu/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.3.50/kotlin-stdlib-1.3.50.jar/kotlin/reflect/KClass.classKClass" d\n\n \n \n\n\n\n \n\n\n\n\n\n\n\n\n\n \n\n\n\n\n\n\n\n\nf * *0202020J<02=0HJ>0?H&J@02A0H'R\n8 00X\t\nR08&X\rR08&XR08&XR08&XR08&XR08&XR08&XR00X\nR0 0X \nR!8 X\"#R$0%X&'R((\n8 0 0)8&X*+,R-0%X.'R /000)8&X12,R 3040)8&X56,R7088&X9:;B" d

 
 



 









 








f * *0202020J<02=0HJ>0?H&J@02A0H'R
8 00X	
R08&XR08&XR08&XR08&XR08&XR08&XR08&XR00X
R0 0X 
R!8 X"#R$0%X&'R((
8 0 0)8&X*+,R-0%X.'R /000)8&X12,R 3040)8&X56,R7088&X9:;B"T""Lkotlin/reflect/KDeclarationContainer;"Lkotlin/reflect/KDeclarationContainer;"Lkotlin/reflect/KAnnotatedElement;"Lkotlin/reflect/KAnnotatedElement;"Lkotlin/reflect/KClassifier;"Lkotlin/reflect/KClassifier;"constructors"constructors"Lkotlin/reflect/KFunction;"Lkotlin/reflect/KFunction;"getConstructors""()Ljava/util/Collection;"()Ljava/util/Collection;"isAbstract"isAbstract"isAbstract$annotations"isAbstract$annotations"()Z"()Z"isCompanion"isCompanion"isCompanion$annotations"isCompanion$annotations"isData"isData"isData$annotations"isData$annotations"isFinal"isFinal"isFinal$annotations"isFinal$annotations"isInner"isInner"isInner$annotations"isInner$annotations"isOpen"isOpen"isOpen$annotations"isOpen$annotations"isSealed""isSealed$annotations"isSealed$annotations"members"members"Lkotlin/reflect/KCallable;"Lkotlin/reflect/KCallable;"getMembers"getMembers"nestedClasses"nestedClasses"getNestedClasses"getNestedClasses"objectInstance"objectInstance"getObjectInstance"getObjectInstance"()Ljava/lang/Object;"()Ljava/lang/Object;"qualifiedName"qualifiedName"getQualifiedName"getQualifiedName"()Ljava/lang/String;"()Ljava/lang/String;"sealedSubclasses"sealedSubclasses"sealedSubclasses$annotations"sealedSubclasses$annotations"getSealedSubclasses"getSealedSubclasses"()Ljava/util/List;"()Ljava/util/List;"simpleName"simpleName"getSimpleName""supertypes"supertypes"Lkotlin/reflect/KType;"Lkotlin/reflect/KType;"supertypes$annotations"supertypes$annotations"getSupertypes"getSupertypes"typeParameters"typeParameters"Lkotlin/reflect/KTypeParameter;"Lkotlin/reflect/KTypeParameter;"typeParameters$annotations"typeParameters$annotations"getTypeParameters""visibility"visibility"Lkotlin/reflect/KVisibility;"Lkotlin/reflect/KVisibility;"visibility$annotations"visibility$annotations"getVisibility"getVisibility"()Lkotlin/reflect/KVisibility;"()Lkotlin/reflect/KVisibility;"equals""other""isInstance""kotlin-stdlib"ProtoAdapter(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<ListOfSpans>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)KClass<>getType()getFieldEncoding$wire_runtime()ProtoAdapter<List<E>>asRepeated()List<ListOfSpans>Collection<ListOfSpans>Iterable<ListOfSpans>ProtoAdapter<List<ListOfSpans>>asPacked()withLabel$wire_runtime(com.squareup.wire.WireField.Label)toString(java.lang.Object)toString(zipkin2.proto3.ListOfSpans)decode(java.io.InputStream)decode(okio.BufferedSource)decode(okio.ByteString)decode(com.squareup.wire.ProtoReader)encode(java.io.OutputStream,java.lang.Object)encode(java.io.OutputStream,zipkin2.proto3.ListOfSpans)encode(zipkin2.proto3.ListOfSpans)encode(okio.BufferedSink,java.lang.Object)encode(okio.BufferedSink,zipkin2.proto3.ListOfSpans)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.lang.Object)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.ListOfSpans)encode(com.squareup.wire.ProtoWriter,java.lang.Object)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.ListOfSpans)encodedSizeWithTag(int,java.lang.Object)encodedSizeWithTag(int,zipkin2.proto3.ListOfSpans)encodedSize(java.lang.Object)encodedSize(zipkin2.proto3.ListOfSpans)redact(java.lang.Object)redact(zipkin2.proto3.ListOfSpans)getRepeatedAdapter$wire_runtime()getPackedAdapter$wire_runtime()ProtoAdapter<String>ProtoAdapter<ByteString>BYTESProtoAdapter<Double>DOUBLEProtoAdapter<Float>FLOATProtoAdapter<Long>SFIXED64FIXED64SINT64UINT64INT64ProtoAdapter<Integer>SFIXED32FIXED32SINT32UINT32INT32ProtoAdapter<Boolean>BOOLMessage<ListOfSpans,Builder>encode()Message(com.squareup.wire.ProtoAdapter,okio.ByteString)Message<ListOfSpans,Builder>(com.squareup.wire.ProtoAdapter,okio.ByteString)adapter()encode(java.io.OutputStream)encode(okio.BufferedSink)withoutUnknownFields()setCachedSerializedSize$wire_runtime(int)getCachedSerializedSize$wire_runtime()unknownFields()requestBodyencodedMessage"te""trailers"trailers"application/grpc"application/grpcresponseBodyencodedLength0xffffffffL4294967295ProtoAdapter<ReportResponse>ProtoAdapter<ReportResponse>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<ReportResponse>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<ReportResponse>Collection<ReportResponse>Iterable<ReportResponse>ProtoAdapter<List<ReportResponse>>toString(zipkin2.proto3.ReportResponse)encode(java.io.OutputStream,zipkin2.proto3.ReportResponse)encode(zipkin2.proto3.ReportResponse)encode(okio.BufferedSink,zipkin2.proto3.ReportResponse)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.ReportResponse)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.ReportResponse)encodedSizeWithTag(int,zipkin2.proto3.ReportResponse)encodedSize(zipkin2.proto3.ReportResponse)redact(zipkin2.proto3.ReportResponse)This tests that we accept messages constructed by other clients. sanity check codec compatible Result is effectively voidcompressedFlag uncompressed wait for spansC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServer.javaITZipkinServerFRONTENDTODAYC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServer.classcontainsExactly(byte[])Condition<? super byte[]>Descriptable<Condition<? super byte[]>>Function<? super byte[],? extends T>Consumer<byte[]>AbstractAssert<?,byte[]>(byte[],java.lang.Class)? super ByteComparator<? super Byte>AbstractEnumerableAssert(java.lang.Object,java.lang.Class)AbstractEnumerableAssert<?,byte[],Byte>(byte[],java.lang.Class)AbstractArrayAssert(java.lang.Object,java.lang.Class)AbstractArrayAssert<?,byte[],Byte>(byte[],java.lang.Class)encodedAsBase64encodedAsBase64()asString(java.nio.charset.Charset)asHexStringasHexString()containsAnyOf(int[])containsAnyOf(byte[])containsExactlyInAnyOrder(int[])containsExactlyInAnyOrder(byte[])containsExactly(int[])endsWith(int[])endsWith(byte[])startsWith(int[])startsWith(byte[])doesNotContain(int,org.assertj.core.data.Index)doesNotContain(byte,org.assertj.core.data.Index)doesNotContain(int[])doesNotContain(byte[])contains(int,org.assertj.core.data.Index)contains(byte,org.assertj.core.data.Index)containsSubsequence(int[])containsSubsequence(byte[])containsSequence(int[])containsSequence(byte[])containsOnlyOnce(int[])containsOnlyOnce(byte[])containsOnly(int[])containsOnly(byte[])contains(int[])contains(byte[])AbstractByteArrayAssert(byte[],java.lang.Class)AbstractByteArrayAssert<?>(byte[],java.lang.Class)"/api/v2/trace/0e8b46e1-81b"/api/v2/trace/0e8b46e1-81b"0e8b46e1-81b should be lower-hex encoded with no prefix"0e8b46e1-81b should be lower-hex encoded with no prefix"/api/v2/traceMany?traceIds=abcd,"/api/v2/traceMany?traceIds=abcd,"/api/v2/traceMany?traceIds="/api/v2/traceMany?traceIds="/api/v2/traceMany?traceIds=abcd,0e8b46e1-81b"/api/v2/traceMany?traceIds=abcd,0e8b46e1-81b"Cache-Control"Cache-Control"/api/v2/spans?serviceName=web"/api/v2/spans?serviceName=web"/api/v2/remoteServices?serviceName=web"/api/v2/remoteServices?serviceName=web"/api/v2/spans?serviceName="/api/v2/spans?serviceName="/api/v2/remoteServices?serviceName="/api/v2/remoteServices?serviceName="foo\tbar"foo	bar"[\"foo\\tbar\"]"["foo\tbar"]services"bar"bar"baz"baz"quz"quz"a""whopper"whopper"max-age=300, must-revalidate"max-age=300, must-revalidate"[\"bar\",\"baz\",\"foo\",\"quz\"]"["bar","baz","foo","quz"]"Origin"Origin"http://foo.example.com"http://foo.example.com"vary"vary"access-control-allow-credentials"access-control-allow-credentials"access-control-allow-origin"access-control-allow-origin"*""/zipkin/api/v2/traces"/zipkin/api/v2/tracesforwarded"Host"Host"zipkin.com"zipkin.com"X-Forwarded-Proto"X-Forwarded-Proto"https"https"X-Forwarded-Port"X-Forwarded-Port"444"444"Location"Location"application/json; charset=utf-8"application/json; charset=utf-8? extends ITZipkinServerClass<? extends ITZipkinServer>" "Collector<? super String,A,R>BiConsumer<R,? super String>BiFunction<U,? super String,U>BinaryOperator<String>BiFunction<String,String,String>reduce(java.lang.String,java.util.function.BinaryOperator)Function<? super String,? extends DoubleStream>Function<? super String,? extends LongStream>Function<? super String,? extends IntStream>Function<? super String,? extends Stream<? extends R>>Function<? super String,? extends R>"/whatever/and/not"/whatever/and/notaccept(java.lang.String)"TRACE""http://localhost:"http://localhost:thisClassAbstractUrlAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractUrlAssert.classAbstractUrlAssertAbstractAssert<?,URL>Assert<?,URL>ExtensionPoints<?,URL>AbstractUrlAssert<>? super URLCondition<? super URL>Descriptable<Condition<? super URL>>Comparator<? super URL>Function<? super URL,? extends T>Consumer<URL>Predicate<? super URL>AbstractAssert<?,URL>(java.net.URL,java.lang.Class)fromClasspath Check that the response is alphabetically sorted.Simulate a proxy which forwards / to zipkin as opposed to resolving / -> /zipkin first Redirect header should be the proxy, not the backed IP/port trace method is disallowed for any route but we just test couple of paths here, can't test them allC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerAutocomplete.javaITZipkinServerAutocompletepostpost(java.lang.String,byte[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerAutocomplete.class"zipkin.storage.autocomplete-keys=environment,clnt/finagle.version"zipkin.storage.autocomplete-keys=environment,clnt/finagle.version"/api/v2/autocompleteValues?key=environment"/api/v2/autocompleteValues?key=environment"/api/v2/autocompleteValues?key=clnt/finagle.version"/api/v2/autocompleteValues?key=clnt/finagle.version"clnt/finagle.version"clnt/finagle.version"6.45."6.45.Integration test suite for autocomplete tags.Verifies that the whitelist of key can be configured via "zipkin.storage.autocomplete-keys".C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerCORS.javaITZipkinServerCORSpostSpansFromOriginpostSpansFromOrigin(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerCORS.classgetTracesFromOrigingetTracesFromOrigin(java.lang.String)optionsForOriginoptionsForOrigin(java.lang.String,java.lang.String,java.lang.String)shouldDisallowOriginshouldDisallowOrigin(okhttp3.Response)shouldAllowConfiguredOriginshouldAllowConfiguredOrigin(okhttp3.Response)shouldPermitPreflightshouldPermitPreflight(okhttp3.Response)DISALLOWED_ORIGINALLOWED_ORIGIN"zipkin.query.allowed-origins="zipkin.query.allowed-origins="http://bar.example.com"http://bar.example.com"GET"GET"origin"origin"access-control-allow-methods"access-control-allow-methods"access-control-request-method"access-control-request-method"access-control-allow-headers"access-control-allow-headers"content-type"content-type"access-control-request-headers"access-control-request-headers"OPTIONS"OPTIONSIntegration test suite for CORS configuration.Verifies that allowed-origins can be configured via properties (zipkin.query.allowed-origins).Notably, javascript makes pre-flight requests, and won't POST spans if disallowed!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerHttpCollectorDisabled.javaITZipkinServerHttpCollectorDisabledC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerHttpCollectorDisabled.class"zipkin.storage.type="zipkin.storage.type="zipkin.collector.http.enabled=false"zipkin.collector.http.enabled=false"/api/v2/spans?serviceName=unknown"/api/v2/spans?serviceName=unknownQuery-only builds should be able to disable the HTTP collector, so that associated assets 404instead of allowing creation of spans. cheat and test empty storage typeShows the same http path still works for GETC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerQueryDisabled.javaITZipkinServerQueryDisabledC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerQueryDisabled.class"zipkin.query.enabled=false"zipkin.query.enabled=false"zipkin.ui.enabled=false"zipkin.ui.enabled=false"/index.html"/index.htmlCollector-only builds should be able to disable the query (and indirectly the UI), so thatassociated assets 404 vs throw exceptions. but other endpoints are okC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerSsl.javaITZipkinServerSslbaseUrlbaseUrl(com.linecorp.armeria.server.Server,com.linecorp.armeria.common.SessionProtocol)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerSsl.classcallHealthEndpointcallHealthEndpoint(com.linecorp.armeria.common.SessionProtocol)armeriaSettings"armeria.ssl.enabled=true"armeria.ssl.enabled=true"armeria.ssl.key-store=classpath:keystore.p12"armeria.ssl.key-store=classpath:keystore.p12"armeria.ssl.key-store-password=password"armeria.ssl.key-store-password=password"armeria.ssl.key-store-type=PKCS12"armeria.ssl.key-store-type=PKCS12"armeria.ssl.trust-store=classpath:keystore.p12"armeria.ssl.trust-store=classpath:keystore.p12"armeria.ssl.trust-store-password=password"armeria.ssl.trust-store-password=password"armeria.ssl.trust-store-type=PKCS12"armeria.ssl.trust-store-type=PKCS12"armeria.ports[1].port=0"armeria.ports[1].port=0"armeria.ports[1].protocols[0]=https"armeria.ports[1].protocols[0]=https"armeria.ports[0].port=${server.port}"armeria.ports[0].port=${server.port}"armeria.ports[0].protocols[0]=http"armeria.ports[0].protocols[0]=httpAbstractComparableAssert<?,HttpStatus>AbstractObjectAssert<?,HttpStatus>AbstractAssert<?,HttpStatus>Assert<?,HttpStatus>ExtensionPoints<?,HttpStatus>ComparableAssert<?,HttpStatus>? super HttpStatusCondition<? super HttpStatus>Descriptable<Condition<? super HttpStatus>>Comparator<? super HttpStatus>Function<? super HttpStatus,? extends T>Consumer<HttpStatus>Predicate<? super HttpStatus>AbstractAssert<?,HttpStatus>(com.linecorp.armeria.common.HttpStatus,java.lang.Class)Supplier<AssertionError>Optional<ServerPort>? super ServerPortFunction<? super ServerPort,? extends U>? extends ServerPortSupplier<? extends ServerPort>orElse(com.linecorp.armeria.server.ServerPort)Stream<ServerPort>BaseStream<ServerPort,Stream<ServerPort>>Optional<? extends ServerPort>? extends Optional<? extends ServerPort>Supplier<? extends Optional<? extends ServerPort>>Function<? super ServerPort,? extends Optional<? extends U>>Predicate<? super ServerPort>Consumer<? super ServerPort>Function<ServerPort,String>Spliterator<ServerPort>Iterator<ServerPort>Comparator<? super ServerPort>Collector<? super ServerPort,A,R>BiConsumer<R,? super ServerPort>BiFunction<U,? super ServerPort,U>BinaryOperator<ServerPort>BiFunction<ServerPort,ServerPort,ServerPort>reduce(com.linecorp.armeria.server.ServerPort,java.util.function.BinaryOperator)Function<? super ServerPort,? extends DoubleStream>Function<? super ServerPort,? extends LongStream>Function<? super ServerPort,? extends IntStream>Function<? super ServerPort,? extends Stream<? extends R>>ToDoubleFunction<? super ServerPort>ToLongFunction<? super ServerPort>ToIntFunction<? super ServerPort>Function<? super ServerPort,? extends R>Predicate<ServerPort>Collection<ServerPort>Iterable<ServerPort>Collection<? extends ServerPort>Iterable<? extends ServerPort>add(com.linecorp.armeria.server.ServerPort)Map<InetSocketAddress,ServerPort>BiFunction<? super ServerPort,? super ServerPort,? extends ServerPort>merge(java.net.InetSocketAddress,com.linecorp.armeria.server.ServerPort,java.util.function.BiFunction)? super InetSocketAddressBiFunction<? super InetSocketAddress,? super ServerPort,? extends ServerPort>compute(java.net.InetSocketAddress,java.util.function.BiFunction)computeIfPresent(java.net.InetSocketAddress,java.util.function.BiFunction)Function<? super InetSocketAddress,? extends ServerPort>computeIfAbsent(java.net.InetSocketAddress,java.util.function.Function)replace(java.net.InetSocketAddress,com.linecorp.armeria.server.ServerPort)replace(java.net.InetSocketAddress,com.linecorp.armeria.server.ServerPort,com.linecorp.armeria.server.ServerPort)putIfAbsent(java.net.InetSocketAddress,com.linecorp.armeria.server.ServerPort)BiConsumer<? super InetSocketAddress,? super ServerPort>getOrDefault(java.lang.Object,com.linecorp.armeria.server.ServerPort)Entry<InetSocketAddress,ServerPort>Set<Entry<InetSocketAddress,ServerPort>>Collection<Entry<InetSocketAddress,ServerPort>>Iterable<Entry<InetSocketAddress,ServerPort>>Set<InetSocketAddress>Collection<InetSocketAddress>Iterable<InetSocketAddress>? extends InetSocketAddressMap<? extends InetSocketAddress,? extends ServerPort>put(java.net.InetSocketAddress,com.linecorp.armeria.server.ServerPort)test(com.linecorp.armeria.server.ServerPort)Function<ServerPort,V>Function<? super V,? extends ServerPort>apply(com.linecorp.armeria.server.ServerPort)"://localhost:"://localhost:" port not open" port not openThis code ensures you can setup SSL. Look at {@link ArmeriaSettings} for property names.<p>This is inspired by com.linecorp.armeria.spring.ArmeriaSslConfigurationTest TODO: use normal spring.server properties after https://github.com/line/armeria/issues/1834 redundant in zipkin-server-shared https://github.com/spring-projects/spring-boot/issues/16394C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerTimeout.javaITZipkinServerTimeouturl(com.linecorp.armeria.server.Server,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServerTimeout.class"zipkin.query.timeout=1ms"zipkin.query.timeout=1msOngoingStubbing<SpanStore>thenReturn(zipkin2.storage.SpanStore)SpanStore[]thenReturn(zipkin2.storage.SpanStore,zipkin2.storage.SpanStore[])OngoingStubbing<Traces>thenReturn(zipkin2.storage.Traces)Traces[]thenReturn(zipkin2.storage.Traces,zipkin2.storage.Traces[])503sleepsleep()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ITZipkinServerTimeout$SlowSpanStore.classITZipkinServerTimeout$SlowSpanStoreC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2SlowSpanStoreSlowSpanStore()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/InMemoryConfiguration.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/NoOpMeterRegistryConfiguration.javaNoOpMeterRegistryConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinActuatorImporterTest.javaZipkinActuatorImporterTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinActuatorImporterTest.classzipkinActuatorImporterClass<ActuatorImpl>Map<String,ActuatorImpl>ActuatorImpl[]Constructor<ActuatorImpl>? super ActuatorImplClass<? super ActuatorImpl>TypeVariable<Class<ActuatorImpl>>TypeVariable<Class<ActuatorImpl>>[]"zipkin.internal.actuator.include[0]="zipkin.internal.actuator.include[0]=Class<Include1>Map<String,Include1>Include1[]Constructor<Include1>? super Include1Class<? super Include1>TypeVariable<Class<Include1>>TypeVariable<Class<Include1>>[]"tomatoes"tomatoes"zipkin.internal.actuator.include[1]="zipkin.internal.actuator.include[1]=Class<Include2>Map<String,Include2>Include2[]Constructor<Include2>? super Include2Class<? super Include2>TypeVariable<Class<Include2>>TypeVariable<Class<Include2>>[]"zipkin.internal.actuator.include[0]=tomatoes"zipkin.internal.actuator.include[0]=tomatoesActuatorImplActuatorImpl()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinActuatorImporterTest$ActuatorImpl.classZipkinActuatorImporterTest$ActuatorImplInclude1Include1()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinActuatorImporterTest$Include1.classZipkinActuatorImporterTest$Include1Include2Include2()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinActuatorImporterTest$Include2.classZipkinActuatorImporterTest$Include2 This tests actuator integration without actually requiring a compile dep on actuatorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinHttpConfigurationTest.javaZipkinHttpConfigurationTestregisterBaseConfigregisterBaseConfig(org.springframework.context.annotation.AnnotationConfigApplicationContext)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinHttpConfigurationTest.classObjectAssert<ZipkinHttpCollector>AbstractObjectAssert<ObjectAssert<ZipkinHttpCollector>,ZipkinHttpCollector>AbstractAssert<ObjectAssert<ZipkinHttpCollector>,ZipkinHttpCollector>Assert<ObjectAssert<ZipkinHttpCollector>,ZipkinHttpCollector>Descriptable<ObjectAssert<ZipkinHttpCollector>>ExtensionPoints<ObjectAssert<ZipkinHttpCollector>,ZipkinHttpCollector>Condition<? super ZipkinHttpCollector>Descriptable<Condition<? super ZipkinHttpCollector>>Comparator<? super ZipkinHttpCollector>Function<? super ZipkinHttpCollector,? extends T>AbstractAssert<ObjectAssert<ZipkinHttpCollector>,ZipkinHttpCollector>(zipkin2.server.internal.ZipkinHttpCollector,java.lang.Class)"zipkin.collector.http.enabled:false"zipkin.collector.http.enabled:falseObjectAssert<ZipkinQueryApiV2>AbstractObjectAssert<ObjectAssert<ZipkinQueryApiV2>,ZipkinQueryApiV2>AbstractAssert<ObjectAssert<ZipkinQueryApiV2>,ZipkinQueryApiV2>Assert<ObjectAssert<ZipkinQueryApiV2>,ZipkinQueryApiV2>Descriptable<ObjectAssert<ZipkinQueryApiV2>>ExtensionPoints<ObjectAssert<ZipkinQueryApiV2>,ZipkinQueryApiV2>Condition<? super ZipkinQueryApiV2>Descriptable<Condition<? super ZipkinQueryApiV2>>Comparator<? super ZipkinQueryApiV2>Function<? super ZipkinQueryApiV2,? extends T>AbstractAssert<ObjectAssert<ZipkinQueryApiV2>,ZipkinQueryApiV2>(zipkin2.server.internal.ZipkinQueryApiV2,java.lang.Class)"zipkin.query.enabled:false"zipkin.query.enabled:false"zipkin.self-tracing.enabled:true"zipkin.self-tracing.enabled:truev2Storage"zipkin.storage.search-enabled:false"zipkin.storage.search-enabled:falseCondition<? super ?>Descriptable<Condition<? super ?>>Comparator<? super ?>Function<? super ?,? extends T>Consumer<?>Predicate<? super ?>AbstractAssert<?,?>(java.lang.Object,java.lang.Class)ObjectAssert<StorageComponent>AbstractObjectAssert<ObjectAssert<StorageComponent>,StorageComponent>AbstractAssert<ObjectAssert<StorageComponent>,StorageComponent>Assert<ObjectAssert<StorageComponent>,StorageComponent>Descriptable<ObjectAssert<StorageComponent>>ExtensionPoints<ObjectAssert<StorageComponent>,StorageComponent>? super StorageComponentCondition<? super StorageComponent>Descriptable<Condition<? super StorageComponent>>Comparator<? super StorageComponent>Function<? super StorageComponent,? extends T>Consumer<StorageComponent>Predicate<? super StorageComponent>AbstractAssert<ObjectAssert<StorageComponent>,StorageComponent>(zipkin2.storage.StorageComponent,java.lang.Class)Function<StorageComponent,T>Function<? super StorageComponent,T>Function<? super StorageComponent,?>Function<? super StorageComponent,?>[]AbstractObjectAssert<ObjectAssert<StorageComponent>,StorageComponent>(zipkin2.storage.StorageComponent,java.lang.Class)conversionServiceconversionService()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinHttpConfigurationTest$Config.classZipkinHttpConfigurationTest$Configregistry()Class<Config>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinModuleImporterTest.javaZipkinModuleImporterTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ZipkinModuleImporterTest.classzipkinModuleImporter"zipkin.internal.module.module1="zipkin.internal.module.module1=Class<Module1>Map<String,Module1>Module1[]Constructor<Module1>? super Module1Class<? super Module1>TypeVariable<Class<Module1>>TypeVariable<Class<Module1>>[]"zipkin.internal.module.module1=tomatoes"zipkin.internal.module.module1=tomatoes"zipkin.internal.module.module2="zipkin.internal.module.module2=Class<Module2>Map<String,Module2>Module2[]Constructor<Module2>? super Module2Class<? super Module2>TypeVariable<Class<Module2>>TypeVariable<Class<Module2>>[]Module1Module1()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinModuleImporterTest$Module1.classZipkinModuleImporterTest$Module1Module2Module2()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/ZipkinModuleImporterTest$Module2.classZipkinModuleImporterTest$Module2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemq/Access.javaAccessC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemqClass<EnableActiveMQCollectorProperties>EnableActiveMQCollectorPropertiesEnableActiveMQCollectorProperties()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/activemq/Access$EnableActiveMQCollectorProperties.classAccess$EnableActiveMQCollectorPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/activemqopens package access for testingJust registering properties to avoid automatically connecting to a ActiveMQ serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorConfigurationTest.javaZipkinActiveMQCollectorConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorConfigurationTest.class"zipkin.collector.activemq.url=vm://localhost"zipkin.collector.activemq.url=vm://localhostClass<BeanCreationException>"Unable to establish connection to ActiveMQ broker: Transport scheme NOT recognized: [vm]"Unable to establish connection to ActiveMQ broker: Transport scheme NOT recognized: [vm]C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorPropertiesTest.javaZipkinActiveMQCollectorPropertiesTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/activemq/ZipkinActiveMQCollectorPropertiesTest.class"zipkin.collector.activemq.url:tcp://localhost:61611"zipkin.collector.activemq.url:tcp://localhost:61611"Unable to establish connection to ActiveMQ broker"Unable to establish connection to ActiveMQ broker"zipkin.collector.activemq.enabled:false"zipkin.collector.activemq.enabled:falseThis prevents an empty ACTIVEMQ_URL variable from being mistaken as a real one wrong portC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/banner/ZipkinBannerTest.javaZipkinBannerTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/banner"\033" ansi codesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/brave/ITZipkinSelfTracing.javaITZipkinSelfTracingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/bravesingletonMapDAYassertSuccessfulassertSuccessful(okhttp3.Response)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/brave/ITZipkinSelfTracing.classgetServicesgetServices(java.lang.String)postSpanpostSpan(java.lang.String)assertQueryReturnsResultsassertQueryReturnsResults(zipkin2.storage.QueryRequest.Builder,java.util.List)awaitSpans(int)inMemoryStorageinMemoryStorage()"zipkin.self-tracing.enabled=true"zipkin.self-tracing.enabled=true"zipkin.self-tracing.message-timeout=100ms"zipkin.self-tracing.message-timeout=100ms"zipkin.self-tracing.traces-per-second=100"zipkin.self-tracing.traces-per-second=100"v2""http.path"http.path"https://github.com/openzipkin/zipkin/issues/2781"https://github.com/openzipkin/zipkin/issues/2781"v1"ObjectAssert<TracingStorageComponent>AbstractObjectAssert<ObjectAssert<TracingStorageComponent>,TracingStorageComponent>AbstractAssert<ObjectAssert<TracingStorageComponent>,TracingStorageComponent>Assert<ObjectAssert<TracingStorageComponent>,TracingStorageComponent>Descriptable<ObjectAssert<TracingStorageComponent>>ExtensionPoints<ObjectAssert<TracingStorageComponent>,TracingStorageComponent>? super TracingStorageComponentCondition<? super TracingStorageComponent>Descriptable<Condition<? super TracingStorageComponent>>Comparator<? super TracingStorageComponent>Function<? super TracingStorageComponent,? extends T>Consumer<TracingStorageComponent>Predicate<? super TracingStorageComponent>AbstractAssert<ObjectAssert<TracingStorageComponent>,TracingStorageComponent>(zipkin2.server.internal.brave.TracingStorageComponent,java.lang.Class)"Traced{InMemoryStorage{}}"Traced{InMemoryStorage{}}ObjectAssert<AsyncZipkinSpanHandler>AbstractObjectAssert<ObjectAssert<AsyncZipkinSpanHandler>,AsyncZipkinSpanHandler>AbstractAssert<ObjectAssert<AsyncZipkinSpanHandler>,AsyncZipkinSpanHandler>Assert<ObjectAssert<AsyncZipkinSpanHandler>,AsyncZipkinSpanHandler>Descriptable<ObjectAssert<AsyncZipkinSpanHandler>>ExtensionPoints<ObjectAssert<AsyncZipkinSpanHandler>,AsyncZipkinSpanHandler>? super AsyncZipkinSpanHandlerCondition<? super AsyncZipkinSpanHandler>Descriptable<Condition<? super AsyncZipkinSpanHandler>>Comparator<? super AsyncZipkinSpanHandler>Function<? super AsyncZipkinSpanHandler,? extends T>Consumer<AsyncZipkinSpanHandler>Predicate<? super AsyncZipkinSpanHandler>AbstractAssert<ObjectAssert<AsyncZipkinSpanHandler>,AsyncZipkinSpanHandler>(zipkin2.reporter.brave.AsyncZipkinSpanHandler,java.lang.Class)"AsyncReporter{StorageComponent}"AsyncReporter{StorageComponent}receivedFunction<? super List<Span>,? extends Stream<? extends R>>Optional<List<Span>>Collector<? super List<Span>,A,R>BiConsumer<R,? super List<Span>>BiFunction<U,? super List<Span>,U>BinaryOperator<List<Span>>BiFunction<List<Span>,List<Span>,List<Span>>reduce(java.util.List,java.util.function.BinaryOperator)Function<? super List<Span>,? extends DoubleStream>Function<? super List<Span>,? extends LongStream>Function<? super List<Span>,? extends IntStream>ToDoubleFunction<? super List<Span>>ToLongFunction<? super List<Span>>ToIntFunction<? super List<Span>>Function<? super List<Span>,? extends R>Function<List<Span>,Stream<? extends Span>>Function<List<Span>,V>? super Stream<? extends Span>Function<? super Stream<? extends Span>,? extends V>Function<V,Stream<? extends Span>>Function<? super V,? extends List<Span>>apply(java.util.List)"Wanted %s spans: got %s. Current traces: %s"Wanted %s spans: got %s. Current traces: %squery"Expected results from %s. Current traces: %s"Expected results from %s. Current traces: %stestTrace"2""test-trace"test-trace"/api/"/api/"/spans"/spans"/services"/services"unsuccessful %s: %s"unsuccessful %s: %sThis class is flaky for as yet unknown reasons. For example, in CI, sometimes assertions faildue to incomplete traces. Hence, it includes more assertion customization than normal. test span + POST + accept-spansThis POSTs a single span. Afterwards, we expect this trace in storage, and also the self-traceof POSTing it.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/cassandra3/Access.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/cassandra3C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/Access.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearchClass<NoOpMeterRegistryConfiguration>eSslC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchAuth.javaITElasticsearchAuthVERSION_RESPONSEYELLOW_RESPONSEhealthcheck_usesAuthAndTlshealthcheck_usesAuthAndTls()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchAuth.classITElasticsearchAuth()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchAuth$1.classITElasticsearchAuth$1configureServerconfigureServer(com.linecorp.armeria.server.ServerBuilder)"classpath:keystore.jks"classpath:keystore.jks"zipkin.storage.type=elasticsearch"zipkin.storage.type=elasticsearch"zipkin.storage.elasticsearch.ensure-templates=false"zipkin.storage.elasticsearch.ensure-templates=false"zipkin.storage.elasticsearch.username=Aladdin"zipkin.storage.elasticsearch.username=Aladdin"zipkin.storage.elasticsearch.password=OpenSesame"zipkin.storage.elasticsearch.password=OpenSesame"zipkin.storage.elasticsearch.hosts=https://localhost:"zipkin.storage.elasticsearch.hosts=https://localhost:"zipkin.storage.elasticsearch.ssl.key-store=classpath:keystore.jks"zipkin.storage.elasticsearch.ssl.key-store=classpath:keystore.jks"zipkin.storage.elasticsearch.ssl.key-store-password=password"zipkin.storage.elasticsearch.ssl.key-store-password=password"zipkin.storage.elasticsearch.ssl.trust-store=classpath:keystore.jks"zipkin.storage.elasticsearch.ssl.trust-store=classpath:keystore.jks"zipkin.storage.elasticsearch.ssl.trust-store-password=password"zipkin.storage.elasticsearch.ssl.trust-store-password=passwordClass<ElasticsearchStorage>"Authorization"Authorization"Basic QWxhZGRpbjpPcGVuU2VzYW1l"Basic QWxhZGRpbjpPcGVuU2VzYW1l hard coded for sanity taken from https://en.wikipedia.org/wiki/Basic_access_authenticationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchClientInitialization.javaITElasticsearchClientInitializationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchClientInitialization.class1900L1900"zipkin.storage.type:elasticsearch"zipkin.storage.type:elasticsearch"zipkin.storage.elasticsearch.timeout:2000"zipkin.storage.elasticsearch.timeout:2000"zipkin.storage.elasticsearch.hosts:127.0.0.1:1234,127.0.0.1:5678"zipkin.storage.elasticsearch.hosts:127.0.0.1:1234,127.0.0.1:56783000L3000"zipkin.storage.elasticsearch.timeout:1000"zipkin.storage.elasticsearch.timeout:1000This blocks for less than the timeout of 2 second to prove we defer i/o until first use of thestorage component.blocking a little is ok, but blocking forever is not.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchDynamicCredentials.javaITElasticsearchDynamicCredentialspathOfResourcepathOfResource(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchDynamicCredentials.classhealthcheck_usesDynamicCredentialsAndTlshealthcheck_usesDynamicCredentialsAndTls()ITElasticsearchDynamicCredentials()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchDynamicCredentials$1.classITElasticsearchDynamicCredentials$1"es-credentials"es-credentials"zipkin.storage.elasticsearch.credentials-file="zipkin.storage.elasticsearch.credentials-file="zipkin.storage.elasticsearch.credentials-refresh-interval=3"zipkin.storage.elasticsearch.credentials-refresh-interval=3"Basic Zm9vOmJhcg=="Basic Zm9vOmJhcg==Class<ITElasticsearchDynamicCredentials>Map<String,ITElasticsearchDynamicCredentials>ITElasticsearchDynamicCredentials[]Constructor<ITElasticsearchDynamicCredentials>? super ITElasticsearchDynamicCredentialsClass<? super ITElasticsearchDynamicCredentials>TypeVariable<Class<ITElasticsearchDynamicCredentials>>TypeVariable<Class<ITElasticsearchDynamicCredentials>>[]C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchHealthCheck.javaITElasticsearchHealthCheckGREEN_RESPONSEassertOkassertOk(zipkin2.CheckResult)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchHealthCheck.classinitWithHostsinitWithHosts(java.lang.String)server2Healthserver1HealthawaitTimeoutClass<ITElasticsearchHealthCheck>Map<String,ITElasticsearchHealthCheck>ITElasticsearchHealthCheck[]Constructor<ITElasticsearchHealthCheck>? super ITElasticsearchHealthCheckClass<? super ITElasticsearchHealthCheck>TypeVariable<Class<ITElasticsearchHealthCheck>>TypeVariable<Class<ITElasticsearchHealthCheck>>[]"com.linecorp.armeria.verboseExceptions""always"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchHealthCheck$1.classITElasticsearchHealthCheck$1HealthChecker[]"/_cluster/health/"/_cluster/health/C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchHealthCheck$2.classITElasticsearchHealthCheck$2"server 1: {}, server 2: {}"server 1: {}, server 2: {}"127.0.0.1:"127.0.0.1:",127.0.0.1:",127.0.0.1:"zipkin.storage.elasticsearch.timeout=200"zipkin.storage.elasticsearch.timeout=200"zipkin.storage.elasticsearch.health-check.enabled=true"zipkin.storage.elasticsearch.health-check.enabled=true"zipkin.storage.elasticsearch.health-check.interval=100ms"zipkin.storage.elasticsearch.health-check.interval=100ms"zipkin.storage.elasticsearch.hosts="zipkin.storage.elasticsearch.hosts="https://localhost:"https://localhost:Class<SSLException>Class<EmptyEndpointGroupException>"setting server 1 and 2 unhealthy"setting server 1 and 2 unhealthy"setting server 1 healthy"setting server 1 healthy"zipkin.storage.elasticsearch.health-check.enabled=false"zipkin.storage.elasticsearch.health-check.enabled=false"zipkin.storage.elasticsearch.hosts=127.0.0.1:"zipkin.storage.elasticsearch.hosts=127.0.0.1:"Health check failed with message: "Health check failed with message: These tests focus on http client health checks not currently in zipkin-storage-elasticsearch. Health check interval is 100ms, but in-flight requests in CI might take a few hundred ms Gives better context when there's an exception such as AbortedStreamException uncomment (and also change log4j2.properties) to see health-checks requests in the console"zipkin.storage.elasticsearch.health-check.http-logging=headers", Test this is not wrapped in a rejection exception, as health check is not throttled Depending on JDK this is SSLHandshakeException or NotSslRecordException If this flakes, uncomment in initWithHosts and log4j2.properties Even though cluster health is false, we ignore that and continue to check index health, which is correctly returned by our mock server.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchNoVerify.javaITElasticsearchNoVerifyservice_no_tls_verifyservice_no_tls_verify()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchNoVerify.classhealthcheck_no_tls_verifyhealthcheck_no_tls_verify()ITElasticsearchNoVerify()"zipkin.storage.elasticsearch.ssl.no-verify=true"zipkin.storage.elasticsearch.ssl.no-verify=true"{}"{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchSelfTracing.javaITElasticsearchSelfTracinghealthcheck_usesB3Singlehealthcheck_usesB3Single()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ITElasticsearchSelfTracing.classITElasticsearchSelfTracing()"zipkin.self-tracing.message-timeout=1ms"zipkin.self-tracing.message-timeout=1ms"zipkin.self-tracing.traces-per-second=10"zipkin.self-tracing.traces-per-second=10Entry<AsciiString,String>IterableAssert<Entry<AsciiString,String>>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/IterableAssert.classIterableAssert? extends Entry<AsciiString,String>Iterable<? extends Entry<AsciiString,String>>ObjectAssert<Entry<AsciiString,String>>AbstractObjectAssert<ObjectAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>AbstractAssert<ObjectAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>Assert<ObjectAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>Descriptable<ObjectAssert<Entry<AsciiString,String>>>ExtensionPoints<ObjectAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>FactoryBasedNavigableIterableAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/FactoryBasedNavigableIterableAssert.classFactoryBasedNavigableIterableAssertAbstractIterableAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>AbstractAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>>Assert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>>Descriptable<IterableAssert<Entry<AsciiString,String>>>ExtensionPoints<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>>ObjectEnumerableAssert<IterableAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>EnumerableAssert<IterableAssert<Entry<AsciiString,String>>,Entry<AsciiString,String>>? super Entry<AsciiString,String>ThrowingExtractor<? super Entry<AsciiString,String>,V,EXCEPTION>Function<? super Entry<AsciiString,String>,V>IterableAssert<>FactoryBasedNavigableIterableAssert<>? super Iterable<? extends Entry<AsciiString,String>>Condition<? super Iterable<? extends Entry<AsciiString,String>>>Descriptable<Condition<? super Iterable<? extends Entry<AsciiString,String>>>>Comparator<? super Iterable<? extends Entry<AsciiString,String>>>Function<? super Iterable<? extends Entry<AsciiString,String>>,? extends T>Consumer<Iterable<? extends Entry<AsciiString,String>>>Predicate<? super Iterable<? extends Entry<AsciiString,String>>>AbstractAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>>(java.lang.Iterable,java.lang.Class)Comparator<? super Entry<AsciiString,String>>Predicate<? super Entry<AsciiString,String>>Entry<AsciiString,String>[]containsAnyOf(java.util.Map.Entry[])Consumer<? super Entry<AsciiString,String>>isSubsetOf(java.util.Map.Entry[])Condition<? super Entry<AsciiString,String>>Descriptable<Condition<? super Entry<AsciiString,String>>>endsWith(java.util.Map.Entry[])endsWith(java.util.Map.Entry,java.util.Map.Entry[])startsWith(java.util.Map.Entry[])doesNotContain(java.util.Map.Entry[])doesNotContainSubsequence(java.util.Map.Entry[])containsSubsequence(java.util.Map.Entry[])doesNotContainSequence(java.util.Map.Entry[])containsSequence(java.util.Map.Entry[])containsExactlyInAnyOrder(java.util.Map.Entry[])containsExactly(java.util.Map.Entry[])containsOnlyOnce(java.util.Map.Entry[])containsOnly(java.util.Map.Entry[])contains(java.util.Map.Entry[])AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>AbstractIntegerAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>>AbstractComparableAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>AbstractAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>Assert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>Descriptable<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>>ExtensionPoints<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>ComparableAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>NumberAssert<AbstractIterableSizeAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>,Integer>BiConsumer<? super Entry<AsciiString,String>,OTHER_ELEMENT>toAssert(java.util.Map.Entry,java.lang.String)Function<? super Entry<AsciiString,String>,T>Function<? super Entry<AsciiString,String>,?>Function<? super Entry<AsciiString,String>,?>[]ThrowingExtractor<? super Entry<AsciiString,String>,?,EXCEPTION>ThrowingExtractor<? super Entry<AsciiString,String>,?,EXCEPTION>[]ThrowingExtractor<? super Entry<AsciiString,String>,? extends Collection<V>,EXCEPTION>Function<? super Entry<AsciiString,String>,? extends Collection<V>>AbstractIterableAssert<IterableAssert<Entry<AsciiString,String>>,Iterable<? extends Entry<AsciiString,String>>,Entry<AsciiString,String>,ObjectAssert<Entry<AsciiString,String>>>(java.lang.Iterable,java.lang.Class)ThrowingExtractor<Entry<AsciiString,String>,String,RuntimeException>Function<Entry<AsciiString,String>,String>Function<Entry<AsciiString,String>,V>Function<? super V,? extends Entry<AsciiString,String>>apply(java.util.Map.Entry)extractThrows(java.util.Map.Entry)"b3"b3"x-b3-traceid"x-b3-traceidWe currently don't have a nice way to mute outbound propagation in Brave. This just makes surewe are nicer.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/InitialEndpointSupplierTest.javaInitialEndpointSupplierTestHTTPHTTPSparsesListOfLocalhosts_failsWhenAllInvalidparsesListOfLocalhosts_failsWhenAllInvalid()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/InitialEndpointSupplierTest.classparsesEmptyListOfHosts_toDefaultparsesEmptyListOfHosts_toDefault()parsesListOfLocalhosts_skipsBlankEntryparsesListOfLocalhosts_skipsBlankEntry()parsesListOfLocalhostsparsesListOfLocalhosts()defaultsPlainHostsToPort9200defaultsPlainHostsToPort9200()usesNaturalHttpPortsWhenUrlsusesNaturalHttpPortsWhenUrls()defaultIsLocalhost9200RegardlessOfSessionProtocoldefaultIsLocalhost9200RegardlessOfSessionProtocol()InitialEndpointSupplierTest()ObjectAssert<EndpointGroup>AbstractObjectAssert<ObjectAssert<EndpointGroup>,EndpointGroup>AbstractAssert<ObjectAssert<EndpointGroup>,EndpointGroup>Assert<ObjectAssert<EndpointGroup>,EndpointGroup>Descriptable<ObjectAssert<EndpointGroup>>ExtensionPoints<ObjectAssert<EndpointGroup>,EndpointGroup>Condition<? super EndpointGroup>Descriptable<Condition<? super EndpointGroup>>Function<? super EndpointGroup,? extends T>Consumer<EndpointGroup>AbstractAssert<ObjectAssert<EndpointGroup>,EndpointGroup>(com.linecorp.armeria.client.endpoint.EndpointGroup,java.lang.Class)"http://localhost"http://localhost80"https://localhost"https://localhost443"localhost:9300"localhost:9300hostList"localhost:9201,localhost:9202"localhost:9201,localhost:9202ListAssert<Endpoint>? extends EndpointList<? extends Endpoint>Collection<? extends Endpoint>Iterable<? extends Endpoint>ObjectAssert<Endpoint>AbstractObjectAssert<ObjectAssert<Endpoint>,Endpoint>AbstractAssert<ObjectAssert<Endpoint>,Endpoint>Assert<ObjectAssert<Endpoint>,Endpoint>Descriptable<ObjectAssert<Endpoint>>ExtensionPoints<ObjectAssert<Endpoint>,Endpoint>FactoryBasedNavigableListAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>AbstractListAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>AbstractIterableAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>AbstractAssert<ListAssert<Endpoint>,List<? extends Endpoint>>Assert<ListAssert<Endpoint>,List<? extends Endpoint>>Descriptable<ListAssert<Endpoint>>ExtensionPoints<ListAssert<Endpoint>,List<? extends Endpoint>>ObjectEnumerableAssert<ListAssert<Endpoint>,Endpoint>EnumerableAssert<ListAssert<Endpoint>,Endpoint>IndexedObjectEnumerableAssert<ListAssert<Endpoint>,Endpoint>? super List<? extends Endpoint>Condition<? super List<? extends Endpoint>>Descriptable<Condition<? super List<? extends Endpoint>>>Comparator<? super List<? extends Endpoint>>Function<? super List<? extends Endpoint>,? extends T>Consumer<List<? extends Endpoint>>Predicate<? super List<? extends Endpoint>>AbstractAssert<ListAssert<Endpoint>,List<? extends Endpoint>>(java.util.List,java.lang.Class)? super EndpointComparator<? super Endpoint>Predicate<? super Endpoint>Endpoint[]containsAnyOf(com.linecorp.armeria.client.Endpoint[])Consumer<? super Endpoint>isSubsetOf(com.linecorp.armeria.client.Endpoint[])Condition<? super Endpoint>Descriptable<Condition<? super Endpoint>>endsWith(com.linecorp.armeria.client.Endpoint[])endsWith(com.linecorp.armeria.client.Endpoint,com.linecorp.armeria.client.Endpoint[])startsWith(com.linecorp.armeria.client.Endpoint[])doesNotContain(com.linecorp.armeria.client.Endpoint[])doesNotContainSubsequence(com.linecorp.armeria.client.Endpoint[])containsSubsequence(com.linecorp.armeria.client.Endpoint[])doesNotContainSequence(com.linecorp.armeria.client.Endpoint[])containsSequence(com.linecorp.armeria.client.Endpoint[])containsExactlyInAnyOrder(com.linecorp.armeria.client.Endpoint[])containsExactly(com.linecorp.armeria.client.Endpoint[])containsOnlyOnce(com.linecorp.armeria.client.Endpoint[])containsOnly(com.linecorp.armeria.client.Endpoint[])contains(com.linecorp.armeria.client.Endpoint[])AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>,Integer>BiConsumer<? super Endpoint,OTHER_ELEMENT>toAssert(com.linecorp.armeria.client.Endpoint,java.lang.String)Function<? super Endpoint,T>Function<? super Endpoint,?>Function<? super Endpoint,?>[]ThrowingExtractor<? super Endpoint,?,EXCEPTION>ThrowingExtractor<? super Endpoint,?,EXCEPTION>[]ThrowingExtractor<? super Endpoint,? extends Collection<V>,EXCEPTION>Function<? super Endpoint,? extends Collection<V>>ThrowingExtractor<? super Endpoint,V,EXCEPTION>Function<? super Endpoint,V>AbstractIterableAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>(java.util.List,java.lang.Class)List<Endpoint>Collection<Endpoint>Iterable<Endpoint>doesNotContain(com.linecorp.armeria.client.Endpoint,org.assertj.core.data.Index)contains(com.linecorp.armeria.client.Endpoint,org.assertj.core.data.Index)AbstractListAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>(java.util.List,java.lang.Class)AssertFactory<Endpoint,ObjectAssert<Endpoint>>FactoryBasedNavigableListAssert<ListAssert<Endpoint>,List<? extends Endpoint>,Endpoint,ObjectAssert<Endpoint>>(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)ListAssert<Endpoint>(java.util.stream.DoubleStream)ListAssert<Endpoint>(java.util.stream.LongStream)ListAssert<Endpoint>(java.util.stream.IntStream)Stream<? extends Endpoint>BaseStream<? extends Endpoint,Stream<? extends Endpoint>>ListAssert<Endpoint>(java.util.stream.Stream)ListAssert<Endpoint>(java.util.List)92019202"localhost:9201,,localhost:9202"localhost:9201,,localhost:9202supplier"No valid endpoints found in ES hosts: ,"No valid endpoints found in ES hosts: ,This helps ensure old setups don't break (provided they have http port 9200 open)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/TestResponses.javaTestResponsesOKJSONTestResponses()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/TestResponses.class""
    + "{\n"
    + "  \"name\" : \"PV-NhJd\",\n"
    + "  \"cluster_name\" : \"CollectorDBCluster\",\n"
    + "  \"cluster_uuid\" : \"UjZaM0fQRC6tkHINCg9y8w\",\n"
    + "  \"version\" : {\n"
    + "    \"number\" : \"6.7.0\",\n"
    + "    \"build_flavor\" : \"oss\",\n"
    + "    \"build_type\" : \"tar\",\n"
    + "    \"build_hash\" : \"8453f77\",\n"
    + "    \"build_date\" : \"2019-03-21T15:32:29.844721Z\",\n"
    + "    \"build_snapshot\" : false,\n"
    + "    \"lucene_version\" : \"7.7.0\",\n"
    + "    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n"
    + "    \"minimum_index_compatibility_version\" : \"5.0.0\"\n"
    + "  },\n"
    + "  \"tagline\" : \"You Know, for Search\"\n"
    + "}"{
  "name" : "PV-NhJd",
  "cluster_name" : "CollectorDBCluster",
  "cluster_uuid" : "UjZaM0fQRC6tkHINCg9y8w",
  "version" : {
    "number" : "6.7.0",
    "build_flavor" : "oss",
    "build_type" : "tar",
    "build_hash" : "8453f77",
    "build_date" : "2019-03-21T15:32:29.844721Z",
    "build_snapshot" : false,
    "lucene_version" : "7.7.0",
    "minimum_wire_compatibility_version" : "5.6.0",
    "minimum_index_compatibility_version" : "5.0.0"
  },
  "tagline" : "You Know, for Search"
}""
    + "{\n"
    + "  \"cluster_name\": \"CollectorDBCluster\",\n"
    + "  \"status\": \"yellow\",\n"
    + "  \"timed_out\": false,\n"
    + "  \"number_of_nodes\": 1,\n"
    + "  \"number_of_data_nodes\": 1,\n"
    + "  \"active_primary_shards\": 5,\n"
    + "  \"active_shards\": 5,\n"
    + "  \"relocating_shards\": 0,\n"
    + "  \"initializing_shards\": 0,\n"
    + "  \"unassigned_shards\": 5,\n"
    + "  \"delayed_unassigned_shards\": 0,\n"
    + "  \"number_of_pending_tasks\": 0,\n"
    + "  \"number_of_in_flight_fetch\": 0,\n"
    + "  \"task_max_waiting_in_queue_millis\": 0,\n"
    + "  \"active_shards_percent_as_number\": 50\n"
    + "}\n"{
  "cluster_name": "CollectorDBCluster",
  "status": "yellow",
  "timed_out": false,
  "number_of_nodes": 1,
  "number_of_data_nodes": 1,
  "active_primary_shards": 5,
  "active_shards": 5,
  "relocating_shards": 0,
  "initializing_shards": 0,
  "unassigned_shards": 5,
  "delayed_unassigned_shards": 0,
  "number_of_pending_tasks": 0,
  "number_of_in_flight_fetch": 0,
  "task_max_waiting_in_queue_millis": 0,
  "active_shards_percent_as_number": 50
}
"{\n"
      + "  \"cluster_name\": \"CollectorDBCluster\",\n"
      + "  \"status\": \"green\",\n"
      + "  \"timed_out\": false,\n"
      + "  \"number_of_nodes\": 1,\n"
      + "  \"number_of_data_nodes\": 1,\n"
      + "  \"active_primary_shards\": 5,\n"
      + "  \"active_shards\": 5,\n"
      + "  \"relocating_shards\": 0,\n"
      + "  \"initializing_shards\": 0,\n"
      + "  \"unassigned_shards\": 5,\n"
      + "  \"delayed_unassigned_shards\": 0,\n"
      + "  \"number_of_pending_tasks\": 0,\n"
      + "  \"number_of_in_flight_fetch\": 0,\n"
      + "  \"task_max_waiting_in_queue_millis\": 0,\n"
      + "  \"active_shards_percent_as_number\": 50\n"
      + "}\n"{
  "cluster_name": "CollectorDBCluster",
  "status": "green",
  "timed_out": false,
  "number_of_nodes": 1,
  "number_of_data_nodes": 1,
  "active_primary_shards": 5,
  "active_shards": 5,
  "relocating_shards": 0,
  "initializing_shards": 0,
  "unassigned_shards": 5,
  "delayed_unassigned_shards": 0,
  "number_of_pending_tasks": 0,
  "number_of_in_flight_fetch": 0,
  "task_max_waiting_in_queue_millis": 0,
  "active_shards_percent_as_number": 50
}
C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfigurationTest.javaZipkinElasticsearchStorageConfigurationTestes()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfigurationTest.class"zipkin.storage.type:cassandra"zipkin.storage.type:cassandra"zipkin.storage.elasticsearch.hosts:http://host1:9200"zipkin.storage.elasticsearch.hosts:http://host1:9200ObjectAssert<ElasticsearchStorage>AbstractObjectAssert<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>AbstractAssert<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>Assert<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>Descriptable<ObjectAssert<ElasticsearchStorage>>ExtensionPoints<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>? super ElasticsearchStorageCondition<? super ElasticsearchStorage>Descriptable<Condition<? super ElasticsearchStorage>>Comparator<? super ElasticsearchStorage>Function<? super ElasticsearchStorage,? extends T>Consumer<ElasticsearchStorage>Predicate<? super ElasticsearchStorage>AbstractAssert<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>(zipkin2.elasticsearch.ElasticsearchStorage,java.lang.Class)"zipkin.storage.elasticsearch.hosts:http://host1:9200,http://host2:9200"zipkin.storage.elasticsearch.hosts:http://host1:9200,http://host2:9200"http://host1:9200,http://host2:9200"http://host1:9200,http://host2:9200"zipkin.storage.elasticsearch.hosts:http://127.0.0.1:9200,http://127.0.0.1:9201"zipkin.storage.elasticsearch.hosts:http://127.0.0.1:9200,http://127.0.0.1:9201"ElasticsearchStorage{initialEndpoints=http://127.0.0.1:9200,http://127.0.0.1:9201, index=zipkin}"ElasticsearchStorage{initialEndpoints=http://127.0.0.1:9200,http://127.0.0.1:9201, index=zipkin}"zipkin.storage.elasticsearch.pipeline:zipkin"zipkin.storage.elasticsearch.pipeline:zipkin"zipkin.storage.elasticsearch.hosts:host1:9200"zipkin.storage.elasticsearch.hosts:host1:9200AbstractComparableAssert<?,SessionProtocol>AbstractObjectAssert<?,SessionProtocol>AbstractAssert<?,SessionProtocol>Assert<?,SessionProtocol>ExtensionPoints<?,SessionProtocol>ComparableAssert<?,SessionProtocol>? super SessionProtocolCondition<? super SessionProtocol>Descriptable<Condition<? super SessionProtocol>>Comparator<? super SessionProtocol>Function<? super SessionProtocol,? extends T>Consumer<SessionProtocol>Predicate<? super SessionProtocol>AbstractAssert<?,SessionProtocol>(com.linecorp.armeria.common.SessionProtocol,java.lang.Class)Class<SessionProtocol>"zipkin.storage.elasticsearch.hosts:https://localhost"zipkin.storage.elasticsearch.hosts:https://localhostSpliterator<Endpoint>Iterator<Endpoint>Stream<Endpoint>BaseStream<Endpoint,Stream<Endpoint>>add(com.linecorp.armeria.client.Endpoint)ListIterator<Endpoint>add(int,com.linecorp.armeria.client.Endpoint)set(int,com.linecorp.armeria.client.Endpoint)UnaryOperator<Endpoint>Function<Endpoint,Endpoint>twoC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfigurationTest$CustomizerConfiguration.classZipkinElasticsearchStorageConfigurationTest$CustomizerConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/elasticsearchoneCustomizerConfigurationCustomizerConfiguration()12345L12345"test"Class<HttpClientFactory>Class<CustomizerConfiguration>30000L"zipkin.storage.elasticsearch.hosts:127.0.0.1:1234"zipkin.storage.elasticsearch.hosts:127.0.0.1:1234"zipkin.storage.elasticsearch.timeout:"zipkin.storage.elasticsearch.timeout:"zipkin.storage.strict-trace-id:false"zipkin.storage.strict-trace-id:false"span""zipkin*span-1970-01-01"zipkin*span-1970-01-01"zipkin.storage.elasticsearch.index:zipkin_prod"zipkin.storage.elasticsearch.index:zipkin_prod"zipkin_prod*span-1970-01-01"zipkin_prod*span-1970-01-01"zipkin.storage.elasticsearch.date-separator:."zipkin.storage.elasticsearch.date-separator:."zipkin*span-1970.01.01"zipkin*span-1970.01.01"zipkin.storage.elasticsearch.date-separator:"zipkin.storage.elasticsearch.date-separator:"zipkin*span-19700101"zipkin*span-19700101"zipkin.storage.elasticsearch.date-separator:blagho"zipkin.storage.elasticsearch.date-separator:blagho"zipkin.query.lookback:"zipkin.query.lookback:ClientOption<>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/client/ClientOption.classClientOptioncom.linecorp.armeria.common.utilAbstractOption<>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/commonC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/common/utilC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/common/util/AbstractOption.classAbstractOptionClientOption<ClientDecoration>ClientOptionValue<ClientDecoration>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/client/ClientOptionValue.classClientOptionValueAbstractOptionValue<ClientOptionValue<ClientDecoration>,ClientOption<ClientDecoration>,ClientDecoration>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/common/util/AbstractOptionValue.classAbstractOptionValueAbstractOption<ClientOption<ClientDecoration>,ClientOptionValue<ClientDecoration>,ClientDecoration>AbstractOption<?,?,?>Comparable<AbstractOption<?,?,?>>"http://127.0.0.1:1234"http://127.0.0.1:1234ObjectAssert<BasicAuthInterceptor>AbstractObjectAssert<ObjectAssert<BasicAuthInterceptor>,BasicAuthInterceptor>AbstractAssert<ObjectAssert<BasicAuthInterceptor>,BasicAuthInterceptor>Assert<ObjectAssert<BasicAuthInterceptor>,BasicAuthInterceptor>Descriptable<ObjectAssert<BasicAuthInterceptor>>ExtensionPoints<ObjectAssert<BasicAuthInterceptor>,BasicAuthInterceptor>? super BasicAuthInterceptorCondition<? super BasicAuthInterceptor>Descriptable<Condition<? super BasicAuthInterceptor>>Comparator<? super BasicAuthInterceptor>Function<? super BasicAuthInterceptor,? extends T>Consumer<BasicAuthInterceptor>Predicate<? super BasicAuthInterceptor>AbstractAssert<ObjectAssert<BasicAuthInterceptor>,BasicAuthInterceptor>(zipkin2.server.internal.elasticsearch.BasicAuthInterceptor,java.lang.Class)Class<BasicAuthInterceptor>"zipkin.storage.elasticsearch.username:somename"zipkin.storage.elasticsearch.username:somename"zipkin.storage.elasticsearch.password:pass"zipkin.storage.elasticsearch.password:pass"zipkin.storage.elasticsearch.credentials-file:"zipkin.storage.elasticsearch.credentials-file:"zipkin.storage.elasticsearch.credentials-refresh-interval:2"zipkin.storage.elasticsearch.credentials-refresh-interval:2"es-credentials-invalid"es-credentials-invalid"zipkin.storage.elasticsearch.credentials-file:no-this-file"zipkin.storage.elasticsearch.credentials-file:no-this-fileFunction<ElasticsearchStorage,T>Function<? super ElasticsearchStorage,T>Function<? super ElasticsearchStorage,?>Function<? super ElasticsearchStorage,?>[]AbstractObjectAssert<ObjectAssert<ElasticsearchStorage>,ElasticsearchStorage>(zipkin2.elasticsearch.ElasticsearchStorage,java.lang.Class)"zipkin.storage.autocomplete-keys:environment"zipkin.storage.autocomplete-keys:environment"autocompleteKeys""zipkin.storage.autocomplete-ttl:60000"zipkin.storage.autocomplete-ttl:60000"autocompleteTtl"60000"zipkin.storage.autocomplete-cardinality:5000"zipkin.storage.autocomplete-cardinality:5000"autocompleteCardinality"5000"zipkin.storage.elasticsearch.template-priority:0"zipkin.storage.elasticsearch.template-priority:0"templatePriority""zipkin.storage.elasticsearch.template-priority:"zipkin.storage.elasticsearch.template-priority:Class<UnsatisfiedDependencyException>"zipkin.storage.elasticsearch.template-priority:string"zipkin.storage.elasticsearch.template-priority:stringEnsures we can wire up network interceptors, such as for logging or authentication TODO(anuraaga): Verify connect timeout after https://github.com/line/armeria/issues/1890C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ComponentHealthTest.javaComponentHealthTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/healthC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ComponentHealthTest$1.classComponentHealthTest$1check()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ComponentHealthTest.class"socket disconnect"socket disconnect"java.io.IOException: socket disconnect"java.io.IOException: socket disconnectC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ComponentHealthTest$2.classComponentHealthTest$2"com.linecorp.armeria.common.ClosedSessionException"com.linecorp.armeria.common.ClosedSessionExceptionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ITZipkinHealth.javaITZipkinHealthreadStringreadString(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ITZipkinHealth.classgetAsStringgetAsString(java.lang.String)""
      + "{\n"
      + "  \"status\" : \"UP\",\n"
      + "  \"zipkin\" : {\n"
      + "    \"status\" : \"UP\",\n"
      + "    \"details\" : {\n"
      + "      \"InMemoryStorage{}\" : {\n"
      + "        \"status\" : \"UP\"\n"
      + "      }\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "status" : "UP",
  "zipkin" : {
    "status" : "UP",
    "details" : {
      "InMemoryStorage{}" : {
        "status" : "UP"
      }
    }
  }
}"health"json"$.status"$.status"UNKNOWN"UNKNOWN"$.zipkin.status"$.zipkin.statusjsonPathPredicate[]C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ITZipkinHealthDown.javaITZipkinHealthDownC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ITZipkinHealthDown.class"zipkin.storage.elasticsearch.hosts=127.0.0.1:9999"zipkin.storage.elasticsearch.hosts=127.0.0.1:9999C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/health/ZipkinHealthControllerTest.javaZipkinHealthControllerTest"robots"robots""
      + "{\n"
      + "  \"status\" : \"DOWN\",\n"
      + "  \"zipkin\" : {\n"
      + "    \"status\" : \"DOWN\",\n"
      + "    \"details\" : {\n"
      + "      \"error\" : \"robots\"\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "status" : "DOWN",
  "zipkin" : {
    "status" : "DOWN",
    "details" : {
      "error" : "robots"
    }
  }
}""
      + "{\n"
      + "  \"status\" : \"DOWN\",\n"
      + "  \"zipkin\" : {\n"
      + "    \"status\" : \"DOWN\",\n"
      + "    \"details\" : {\n"
      + "      \"foo\" : {\n"
      + "        \"status\" : \"UP\"\n"
      + "      },\n"
      + "      \"bar\" : {\n"
      + "        \"status\" : \"DOWN\",\n"
      + "        \"details\" : {\n"
      + "          \"error\" : \"java.io.IOException: socket disconnect\"\n"
      + "        }\n"
      + "      }\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "status" : "DOWN",
  "zipkin" : {
    "status" : "DOWN",
    "details" : {
      "foo" : {
        "status" : "UP"
      },
      "bar" : {
        "status" : "DOWN",
        "details" : {
          "error" : "java.io.IOException: socket disconnect"
        }
      }
    }
  }
}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/kafka/Access.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/kafkaClass<EnableKafkaCollectorProperties>EnableKafkaCollectorPropertiesEnableKafkaCollectorProperties()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/kafka/Access$EnableKafkaCollectorProperties.classAccess$EnableKafkaCollectorPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/kafkaJust registering properties to avoid automatically connecting to a Kafka serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorConfigurationTest.javaZipkinKafkaCollectorConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorConfigurationTest.class"zipkin.collector.kafka.bootstrap-servers:"zipkin.collector.kafka.bootstrap-servers:"zipkin.collector.kafka.bootstrap-servers:localhost:9092"zipkin.collector.kafka.bootstrap-servers:localhost:9092"zipkin.collector.kafka.enabled:false"zipkin.collector.kafka.enabled:falseC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/kafka/ZipkinKafkaCollectorPropertiesTest.javaZipkinKafkaCollectorPropertiesTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/mysql/Access.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/mysqlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ITZipkinMetrics.javaITZipkinMetricsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheusMap<String,Integer>readJsonreadJson(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ITZipkinMetrics.classwritesSpans_readMetricsFormatwritesSpans_readMetricsFormat()jvmMetrics_prometheusjvmMetrics_prometheus()forwardedRoute_prometheusforwardedRoute_prometheus()apiTemplate_prometheusapiTemplate_prometheus()prometheusIsOKprometheusIsOK()metricsIsOKmetricsIsOK()"metrics""prometheus""uri=\"/zipkin"uri="/zipkin"uri=\"/\""uri="/""/api/v2/traceMany?traceIds=abcde,"/api/v2/traceMany?traceIds=abcde,"uri=\"/api/v2/traceMany\""uri="/api/v2/traceMany""uri=\"/api/v2/trace/{traceId}\""uri="/api/v2/trace/{traceId}""/zipkin/api/v2/services"/zipkin/api/v2/services"uri=\"/api/v2/services\""uri="/api/v2/services""uri=\"/zipkin/api/v2/services\""uri="/zipkin/api/v2/services""jvm_memory_max_bytes"jvm_memory_max_bytes"jvm_memory_used_bytes"jvm_memory_used_bytes"jvm_memory_committed_bytes"jvm_memory_committed_bytes"jvm_buffer_count_buffers"jvm_buffer_count_buffers"jvm_buffer_memory_used_bytes"jvm_buffer_memory_used_bytes"jvm_buffer_total_capacity_bytes"jvm_buffer_total_capacity_bytes"jvm_classes_loaded_classes"jvm_classes_loaded_classes"jvm_classes_unloaded_classes_total"jvm_classes_unloaded_classes_total"jvm_threads_live_threads"jvm_threads_live_threads"jvm_threads_states_threads"jvm_threads_states_threads"jvm_threads_peak_threads"jvm_threads_peak_threads"jvm_threads_daemon_threads"jvm_threads_daemon_threads'z'z'k'k1500MapAssert<String,Integer>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/MapAssert.classMapAssertAbstractMapAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractMapAssert.classAbstractMapAssertAbstractObjectAssert<MapAssert<String,Integer>,Map<String,Integer>>AbstractAssert<MapAssert<String,Integer>,Map<String,Integer>>Assert<MapAssert<String,Integer>,Map<String,Integer>>Descriptable<MapAssert<String,Integer>>ExtensionPoints<MapAssert<String,Integer>,Map<String,Integer>>Entry<? extends String,? extends Integer>EnumerableAssert<MapAssert<String,Integer>,Entry<? extends String,? extends Integer>>MapAssert<>AbstractMapAssert<>KEY[]containsOnlyKeyscontainsOnlyKeys(java.lang.String[])? super Map<String,Integer>Condition<? super Map<String,Integer>>Descriptable<Condition<? super Map<String,Integer>>>Comparator<? super Map<String,Integer>>Function<? super Map<String,Integer>,? extends T>Consumer<Map<String,Integer>>Predicate<? super Map<String,Integer>>AbstractAssert<MapAssert<String,Integer>,Map<String,Integer>>(java.util.Map,java.lang.Class)Function<Map<String,Integer>,T>Function<? super Map<String,Integer>,T>Function<? super Map<String,Integer>,?>Function<? super Map<String,Integer>,?>[]AbstractObjectAssert<MapAssert<String,Integer>,Map<String,Integer>>(java.util.Map,java.lang.Class)? super Entry<? extends String,? extends Integer>Comparator<? super Entry<? extends String,? extends Integer>>Function<? super Entry<K,V>,Object>Function<? super Entry<K,V>,Object>[]extractingFromEntriesextractingFromEntries(java.util.function.Function[])Entry<String,Integer>? super Entry<String,Integer>Function<? super Entry<String,Integer>,Object>Function<? super Entry<String,Integer>,Object>[]extractingFromEntries(java.util.function.Function)extractingByKeyextractingByKey(java.lang.Object,org.assertj.core.api.InstanceOfAssertFactory)extractingByKey(java.lang.String,org.assertj.core.api.InstanceOfAssertFactory)AbstractObjectAssert<?,V>AbstractAssert<?,V>Assert<?,V>ExtensionPoints<?,V>extractingByKey(java.lang.Object)extractingByKey(java.lang.String)extracting(java.lang.Object)K[]extractingByKeysextractingByKeys(java.lang.Object[])List<? extends Integer>Collection<? extends Integer>Iterable<? extends Integer>ObjectAssert<Integer>AbstractObjectAssert<ObjectAssert<Integer>,Integer>AbstractAssert<ObjectAssert<Integer>,Integer>Assert<ObjectAssert<Integer>,Integer>Descriptable<ObjectAssert<Integer>>ExtensionPoints<ObjectAssert<Integer>,Integer>AbstractListAssert<?,List<? extends Integer>,Integer,ObjectAssert<Integer>>AbstractIterableAssert<?,List<? extends Integer>,Integer,ObjectAssert<Integer>>AbstractAssert<?,List<? extends Integer>>Assert<?,List<? extends Integer>>ExtensionPoints<?,List<? extends Integer>>ObjectEnumerableAssert<?,Integer>EnumerableAssert<?,Integer>IndexedObjectEnumerableAssert<?,Integer>extractingByKeys(java.lang.String[])extracting(java.lang.Object[])AbstractMapSizeAssert<>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractMapSizeAssert.classAbstractMapSizeAssertAbstractMapSizeAssert<SELF,ACTUAL,K,V>AbstractIntegerAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>>AbstractComparableAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>AbstractObjectAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>AbstractAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>Assert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>Descriptable<AbstractMapSizeAssert<SELF,ACTUAL,K,V>>ExtensionPoints<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>ComparableAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>NumberAssert<AbstractMapSizeAssert<SELF,ACTUAL,K,V>,Integer>AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>AbstractIntegerAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>>AbstractComparableAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>AbstractObjectAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>AbstractAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>Assert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>Descriptable<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>>ExtensionPoints<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>ComparableAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>NumberAssert<AbstractMapSizeAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>,Integer>? super Entry<? extends K,? extends V>Comparator<? super Entry<? extends K,? extends V>>Entry<? extends String,? extends Integer>[]doesNotContainValuedoesNotContainValue(java.lang.Object)doesNotContainValue(java.lang.Integer)V[]containsValuescontainsValues(java.lang.Object[])containsValues(java.lang.Integer[])containsValue(java.lang.Integer)containsOnlyKeys(java.lang.Iterable)containsOnlyKeys(java.lang.Object[])doesNotContainKeysdoesNotContainKeys(java.lang.Object[])doesNotContainKeys(java.lang.String[])doesNotContainKeydoesNotContainKey(java.lang.Object)doesNotContainKey(java.lang.String)containsKeyscontainsKeys(java.lang.Object[])containsKeys(java.lang.String[])containsKey(java.lang.String)doesNotContainEntrydoesNotContainEntry(java.lang.Object,java.lang.Object)doesNotContainEntry(java.lang.String,java.lang.Integer)Condition<? super V>Descriptable<Condition<? super V>>hasValueSatisfyinghasValueSatisfying(org.assertj.core.api.Condition)Condition<? super K>Descriptable<Condition<? super K>>hasKeySatisfyinghasKeySatisfying(org.assertj.core.api.Condition)hasEntrySatisfyinghasEntrySatisfying(org.assertj.core.api.Condition,org.assertj.core.api.Condition)Condition<? super Entry<K,V>>Descriptable<Condition<? super Entry<K,V>>>hasEntrySatisfying(org.assertj.core.api.Condition)Condition<? super Entry<String,Integer>>Descriptable<Condition<? super Entry<String,Integer>>>hasEntrySatisfying(java.lang.Object,java.util.function.Consumer)Consumer<? super Integer>hasEntrySatisfying(java.lang.String,java.util.function.Consumer)hasEntrySatisfying(java.lang.Object,org.assertj.core.api.Condition)hasEntrySatisfying(java.lang.String,org.assertj.core.api.Condition)containsEntrycontainsEntry(java.lang.Object,java.lang.Object)containsEntry(java.lang.String,java.lang.Integer)containsExactlyInAnyOrderEntriesOfcontainsExactlyInAnyOrderEntriesOf(java.util.Map)Map<? extends String,? extends Integer>containsExactlyEntriesOfcontainsExactlyEntriesOf(java.util.Map)containsAllEntriesOfcontainsAllEntriesOf(java.util.Map)hasSameSizeAs(java.util.Map)noneSatisfy(java.util.function.BiConsumer)BiConsumer<? super String,? super Integer>anySatisfy(java.util.function.BiConsumer)allSatisfy(java.util.function.BiConsumer)AbstractMapAssert(java.util.Map,java.lang.Class)AbstractMapAssert<MapAssert<String,Integer>,Map<String,Integer>,String,Integer>(java.util.Map,java.lang.Class)mapsEntry<KEY,VALUE>? super Entry<KEY,VALUE>Function<? super Entry<KEY,VALUE>,Object>Function<? super Entry<KEY,VALUE>,Object>[]? extends VALUEList<? extends VALUE>Collection<? extends VALUE>Iterable<? extends VALUE>ObjectAssert<VALUE>AbstractObjectAssert<ObjectAssert<VALUE>,VALUE>AbstractAssert<ObjectAssert<VALUE>,VALUE>Assert<ObjectAssert<VALUE>,VALUE>Descriptable<ObjectAssert<VALUE>>ExtensionPoints<ObjectAssert<VALUE>,VALUE>AbstractListAssert<?,List<? extends VALUE>,VALUE,ObjectAssert<VALUE>>AbstractIterableAssert<?,List<? extends VALUE>,VALUE,ObjectAssert<VALUE>>AbstractAssert<?,List<? extends VALUE>>Assert<?,List<? extends VALUE>>ExtensionPoints<?,List<? extends VALUE>>ObjectEnumerableAssert<?,VALUE>EnumerableAssert<?,VALUE>IndexedObjectEnumerableAssert<?,VALUE>Map<KEY,VALUE>? super Map<KEY,VALUE>Function<? super Map<KEY,VALUE>,?>Function<? super Map<KEY,VALUE>,?>[]? extends KEYEntry<? extends KEY,? extends VALUE>Entry<? extends KEY,? extends VALUE>[]VALUE[]MapAssert(java.util.Map)MapAssert<String,Integer>(java.util.Map)"gauge.zipkin_collector.message_spans.http"gauge.zipkin_collector.message_spans.http"gauge.zipkin_collector.message_bytes.http"gauge.zipkin_collector.message_bytes.http"counter.zipkin_collector.messages.http"counter.zipkin_collector.messages.http"counter.zipkin_collector.bytes.http"counter.zipkin_collector.bytes.http"counter.zipkin_collector.spans.http"counter.zipkin_collector.spans.http"counter.zipkin_collector.messages_dropped.http"counter.zipkin_collector.messages_dropped.http"counter.zipkin_collector.spans_dropped.http"counter.zipkin_collector.spans_dropped.httpLinkedHashMap<String,Integer>HashMap<String,Integer>AbstractMap<String,Integer>LinkedHashMap<String,Integer>()BiFunction<? super Integer,? super Integer,? extends Integer>merge(java.lang.String,java.lang.Integer,java.util.function.BiFunction)BiFunction<? super String,? super Integer,? extends Integer>Function<? super String,? extends Integer>replace(java.lang.String,java.lang.Integer)replace(java.lang.String,java.lang.Integer,java.lang.Integer)putIfAbsent(java.lang.String,java.lang.Integer)getOrDefault(java.lang.Object,java.lang.Integer)Set<Entry<String,Integer>>Collection<Entry<String,Integer>>Iterable<Entry<String,Integer>>put(java.lang.String,java.lang.Integer)AbstractMap<String,Integer>()Node<String,Integer>TreeNode<String,Integer>newTreeNode(int,java.lang.String,java.lang.Integer,java.util.HashMap.Node)newNode(int,java.lang.String,java.lang.Integer,java.util.HashMap.Node)Node<String,Integer>[]putVal(int,java.lang.String,java.lang.Integer,boolean,boolean)HashMap<String,Integer>(java.util.Map)HashMap<String,Integer>()HashMap<String,Integer>(int)HashMap<String,Integer>(int,float)LinkedHashMap<String,Integer>(int,float,boolean)LinkedHashMap<String,Integer>(java.util.Map)LinkedHashMap<String,Integer>(int)LinkedHashMap<String,Integer>(int,float)parsernextFieldAbstractComparableAssert<?,JsonToken>AbstractObjectAssert<?,JsonToken>AbstractAssert<?,JsonToken>Assert<?,JsonToken>ExtensionPoints<?,JsonToken>ComparableAssert<?,JsonToken>? super JsonTokenCondition<? super JsonToken>Descriptable<Condition<? super JsonToken>>Comparator<? super JsonToken>Function<? super JsonToken,? extends T>Consumer<JsonToken>Predicate<? super JsonToken>AbstractAssert<?,JsonToken>(com.fasterxml.jackson.core.JsonToken,java.lang.Class)Only add tests that do not consider the value of a counter or gauge, as these will flake and soshould only exist in {@link ITZipkinMetricsDirty}. ensure we don't track metrics in prometheus ensure we don't track prometheus, UI requests in prometheus sanity check gc metrics are not tested as are not present during test runningC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ITZipkinMetricsDirty.javaITZipkinMetricsDirtyBEFORE_EACH_TEST_METHODreadDoublereadDouble(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ITZipkinMetricsDirty.classwriteSpans_updatesPrometheusMetricswriteSpans_updatesPrometheusMetrics()getTrace_malformedDoesntUpdateCollectorMetricsgetTrace_malformedDoesntUpdateCollectorMetrics()writeSpans_malformedUpdatesMetricswriteSpans_malformedUpdatesMetrics()writeSpans_updatesMetricswriteSpans_updatesMetrics()messagesCountbytesCountspansCountAbstractDoubleAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractDoubleAssert.classAbstractDoubleAssertAbstractComparableAssert<?,Double>AbstractObjectAssert<?,Double>AbstractAssert<?,Double>Assert<?,Double>ExtensionPoints<?,Double>ComparableAssert<?,Double>FloatingPointNumberAssert<?,Double>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/FloatingPointNumberAssert.classFloatingPointNumberAssertNumberAssert<?,Double>AbstractDoubleAssert<>FloatingPointNumberAssert<>isEqualTo(double)? super DoubleCondition<? super Double>Descriptable<Condition<? super Double>>Comparator<? super Double>Function<? super Double,? extends T>Consumer<Double>Predicate<? super Double>AbstractAssert<?,Double>(java.lang.Double,java.lang.Class)Function<Double,T>Function<? super Double,T>Function<? super Double,?>Function<? super Double,?>[]AbstractObjectAssert<?,Double>(java.lang.Double,java.lang.Class)isStrictlyBetween(java.lang.Double,java.lang.Double)isBetween(java.lang.Double,java.lang.Double)isGreaterThanOrEqualTo(java.lang.Double)isGreaterThan(java.lang.Double)isLessThanOrEqualTo(java.lang.Double)isLessThan(java.lang.Double)isNotEqualByComparingTo(java.lang.Double)isEqualByComparingTo(java.lang.Double)AbstractComparableAssert<?,Double>(java.lang.Double,java.lang.Class)isNotCloseTo(java.lang.Double,org.assertj.core.data.Percentage)isCloseTo(java.lang.Double,org.assertj.core.data.Percentage)Offset<Double>isNotCloseTo(java.lang.Double,org.assertj.core.data.Offset)isCloseTo(java.lang.Double,org.assertj.core.data.Offset)isNotNaNisNotNaN()isNaNisNaN()isEqualTo(java.lang.Number,org.assertj.core.data.Offset)isEqualTo(java.lang.Double,org.assertj.core.data.Offset)isGreaterThanOrEqualTo(double)isGreaterThan(double)isLessThanOrEqualTo(double)isLessThan(double)isNotEqualTo(java.lang.Double)isNotEqualTo(double)isEqualTo(double,org.assertj.core.data.Offset)isEqualTo(java.lang.Double)isNotCloseTo(double,org.assertj.core.data.Percentage)isCloseTo(double,org.assertj.core.data.Percentage)isNotCloseTo(double,org.assertj.core.data.Offset)isCloseTo(double,org.assertj.core.data.Offset)AbstractDoubleAssert(double,java.lang.Class)AbstractDoubleAssert<?>(double,java.lang.Class)AbstractDoubleAssert(java.lang.Double,java.lang.Class)AbstractDoubleAssert<?>(java.lang.Double,java.lang.Class)doubles"$.['counter.zipkin_collector.messages.http']"$.['counter.zipkin_collector.messages.http']2.0"$.['counter.zipkin_collector.bytes.http']"$.['counter.zipkin_collector.bytes.http']"$.['gauge.zipkin_collector.message_bytes.http']"$.['gauge.zipkin_collector.message_bytes.http']"$.['counter.zipkin_collector.spans.http']"$.['counter.zipkin_collector.spans.http']"$.['gauge.zipkin_collector.message_spans.http']"$.['gauge.zipkin_collector.message_spans.http']'h''l'lmessagesDroppedCount"$.['counter.zipkin_collector.messages_dropped.http']"$.['counter.zipkin_collector.messages_dropped.http']httpCount"http.server.requests"http.server.requests"zipkin_collector_spans_total "zipkin_collector_spans_total "zipkin_collector_spans_total{transport=\"http\",} "zipkin_collector_spans_total{transport="http",} "http_server_requests_seconds_count{method=\"POST\",status=\"202\",uri=\"/api/v2/spans\",} "http_server_requests_seconds_count{method="POST",status="202",uri="/api/v2/spans",} Tests here look at values based on counter values, so need to run independently. It would seemcorrect to {@link PrometheusMeterRegistry#clear() clear the registry} to isolate countersincremented in one test from interfering with another. However, this clears the metricsthemselves, resulting in an empty {@link PrometheusMeterRegistry#scrape()}.<p>Currently, the only way we know how to reset the whole registry is to recreate the Springcontext, via {@link DirtiesContext} on each test. This is extremely slow, so please only addtests that require isolation here! Clearing the prometheus registry also clears the metrics themselves, not just the values, so we have to use dirties context so that each test runs in a separate instance of Spring Boot. We use DirtiesContext, not registry.clear(), as the latter would cause an empty scrapeThis tests logic in {@code BodyIsExceptionMessage} is scoped to POST requests.Makes sure the prometheus filter doesn't count twice sometimes CI flakes getting the "http.server.requests" timer Get the http count from the registry and it should match the summation previous count and count of calls below ensure unscoped counter does not existC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ZipkinPrometheusMetricsConfigurationTest.javaZipkinPrometheusMetricsConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/prometheus/ZipkinPrometheusMetricsConfigurationTest.classMap<String,ArmeriaServerConfigurator>Class<ArmeriaServerConfigurator>"management.metrics.web.server.requests-metric-name:foo"management.metrics.web.server.requests-metric-name:fooC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmq/Access.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmqClass<EnableRabbitMQCollectorProperties>EnableRabbitMQCollectorPropertiesEnableRabbitMQCollectorProperties()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/rabbitmq/Access$EnableRabbitMQCollectorProperties.classAccess$EnableRabbitMQCollectorPropertiesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/rabbitmqJust registering properties to avoid automatically connecting to a Rabbit MQ serverC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorConfigurationTest.javaZipkinRabbitMQCollectorConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorConfigurationTest.class"zipkin.collector.rabbitmq.addresses:"zipkin.collector.rabbitmq.addresses:"zipkin.collector.rabbitmq.uri:"zipkin.collector.rabbitmq.uri:"zipkin.collector.rabbitmq.addresses:localhost:1234"zipkin.collector.rabbitmq.addresses:localhost:1234"Unable to establish connection to RabbitMQ server: Connection refused"Unable to establish connection to RabbitMQ server: Connection refused"zipkin.collector.rabbitmq.enabled:false"zipkin.collector.rabbitmq.enabled:falseC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorPropertiesTest.javaZipkinRabbitMQCollectorPropertiesTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/rabbitmq/ZipkinRabbitMQCollectorPropertiesTest.class"amqp://admin:admin@localhost:5678/myv"amqp://admin:admin@localhost:5678/myv"will_not^work!"will_not^work!"bob"bob"letmein"letmein"drwho"drwho"connectionFactory"Consumer<? super ?>objectconnFactory5678"myv"myvAbstractUriAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractUriAssert.classAbstractUriAssertAbstractAssert<?,URI>Assert<?,URI>ExtensionPoints<?,URI>AbstractUriAssert<>Condition<? super URI>Descriptable<Condition<? super URI>>Comparator<? super URI>Function<? super URI,? extends T>Consumer<URI>Predicate<? super URI>AbstractAssert<?,URI>(java.net.URI,java.lang.Class)This prevents an empty RABBIT_URI variable from being mistaken as a real oneC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/FakeCall.javaFakeCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttlesetOverCapacitysetOverCapacity(boolean)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/FakeCall.classoverCapacityFakeCall()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/ThrottledCallTest.javaThrottledCallTestdoThrowOVER_CAPACITYC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/ThrottledCallTest.classmockLimitermockLimiter(com.netflix.concurrency.limits.Limiter.Listener)mockExhaustedPoolmockExhaustedPool()throttle(zipkin2.Call)numThreadsSimpleLimiter<>C:/Users/Semiu/.m2/repository/com/netflix/concurrency-limits/concurrency-limits-core/0.3.6/concurrency-limits-core-0.3.6.jar/com/netflix/concurrency/limits/limiter/SimpleLimiter.classSimpleLimiterSimpleLimiter<Object>AbstractLimiter<Object>Limiter<Object>onNewLimitonNewLimit(int)getInflightgetInflight()getLimitgetLimit()createListenercreateListener()createRejectedListenercreateRejectedListener()AbstractLimiter(com.netflix.concurrency.limits.limiter.AbstractLimiter.Builder)AbstractLimiter<>(com.netflix.concurrency.limits.limiter.AbstractLimiter.Builder)STATUS_TAGID_TAGSimpleLimiter(com.netflix.concurrency.limits.limiter.AbstractLimiter.Builder)SimpleLimiter<>(com.netflix.concurrency.limits.limiter.AbstractLimiter.Builder)Class<RejectedExecutionException>"overCapacity"Class<Call<>>"StoreSpansCall{}"StoreSpansCall{}ObjectAssert<ThrottledCall>AbstractObjectAssert<ObjectAssert<ThrottledCall>,ThrottledCall>AbstractAssert<ObjectAssert<ThrottledCall>,ThrottledCall>Assert<ObjectAssert<ThrottledCall>,ThrottledCall>Descriptable<ObjectAssert<ThrottledCall>>ExtensionPoints<ObjectAssert<ThrottledCall>,ThrottledCall>? super ThrottledCallCondition<? super ThrottledCall>Descriptable<Condition<? super ThrottledCall>>Comparator<? super ThrottledCall>Function<? super ThrottledCall,? extends T>Consumer<ThrottledCall>Predicate<? super ThrottledCall>AbstractAssert<ObjectAssert<ThrottledCall>,ThrottledCall>(zipkin2.server.internal.throttle.ThrottledCall,java.lang.Class)"Throttled(StoreSpansCall{})"Throttled(StoreSpansCall{})queueSizetotalTasksstartLockwaitLockfailLockthrottledbackgroundPoolCallable<Void>Class<ExecutionException>listenerClass<Listener>LockedCallLockedCall(java.util.concurrent.Semaphore,java.util.concurrent.Semaphore)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/throttle/ThrottledCallTest$LockedCall.classThrottledCallTest$LockedCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/throttleClass<ExecutorService>Class<Callable<>>Class<Limiter<>>OngoingStubbing<Optional<Listener>>thenReturn(java.util.Optional)Optional[]Optional<Listener>[]thenReturn(java.util.Optional,java.util.Optional[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/server/internal/throttle/ThrottledCallTest$FakeCall.classThrottledCallTest$FakeCall"throttling never uses execute"throttling never uses execute Step 1: drain appropriate locks Step 2: saturate threads and fill queue Step 3: make sure the threads actually started Step 4: submit something beyond our limits Step 6: signal that we tripped the limit Step 5: wait to make sure our limit actually tripped Step 7: Expect great things from future.get should raise a RejectedExecutionException Step 4: submit something beyond our limits and make sure it failsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/ThrottledStorageComponentTest.javaThrottledStorageComponentTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/throttle/ThrottledStorageComponentTest.classAbstractAssert<ClassAssert,Class<?>>Assert<ClassAssert,Class<?>>Descriptable<ClassAssert>ExtensionPoints<ClassAssert,Class<?>>? super Class<?>Condition<? super Class<?>>Descriptable<Condition<? super Class<?>>>Comparator<? super Class<?>>Function<? super Class<?>,? extends T>Consumer<Class<?>>Predicate<? super Class<?>>AbstractAssert<ClassAssert,Class<?>>(java.lang.Class,java.lang.Class)? extends SpanConsumerClass<? extends SpanConsumer>Class<ThrottledSpanConsumer>ObjectAssert<ThrottledStorageComponent>AbstractObjectAssert<ObjectAssert<ThrottledStorageComponent>,ThrottledStorageComponent>AbstractAssert<ObjectAssert<ThrottledStorageComponent>,ThrottledStorageComponent>Assert<ObjectAssert<ThrottledStorageComponent>,ThrottledStorageComponent>Descriptable<ObjectAssert<ThrottledStorageComponent>>ExtensionPoints<ObjectAssert<ThrottledStorageComponent>,ThrottledStorageComponent>? super ThrottledStorageComponentCondition<? super ThrottledStorageComponent>Descriptable<Condition<? super ThrottledStorageComponent>>Comparator<? super ThrottledStorageComponent>Function<? super ThrottledStorageComponent,? extends T>Consumer<ThrottledStorageComponent>Predicate<? super ThrottledStorageComponent>AbstractAssert<ObjectAssert<ThrottledStorageComponent>,ThrottledStorageComponent>(zipkin2.server.internal.throttle.ThrottledStorageComponent,java.lang.Class)"Throttled{InMemoryStorage{}}"Throttled{InMemoryStorage{}} no exception == passC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ui/ITZipkinUiConfiguration.javaITZipkinUiConfigurationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/uistringFromClasspathgetContentEncodingFromRequestThatAcceptsGzipgetContentEncodingFromRequestThatAcceptsGzip(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ui/ITZipkinUiConfiguration.classconditionalGetconditionalGet(java.lang.String,java.lang.String)"zipkin.ui.base-path=/foozipkin"zipkin.ui.base-path=/foozipkin"server.compression.enabled=true"server.compression.enabled=true"server.compression.min-response-size=128"server.compression.min-response-size=128""
      + "{\n"
      + "  \"environment\" : \"\",\n"
      + "  \"queryLimit\" : 10,\n"
      + "  \"defaultLookback\" : 900000,\n"
      + "  \"searchEnabled\" : true,\n"
      + "  \"logsUrl\" : null,\n"
      + "  \"supportUrl\" : null,\n"
      + "  \"archivePostUrl\" : null,\n"
      + "  \"archiveUrl\" : null,\n"
      + "  \"dependency\" : {\n"
      + "    \"enabled\" : true,\n"
      + "    \"lowErrorRate\" : 0.5,\n"
      + "    \"highErrorRate\" : 0.75\n"
      + "  }\n"
      + "}"{
  "environment" : "",
  "queryLimit" : 10,
  "defaultLookback" : 900000,
  "searchEnabled" : true,
  "logsUrl" : null,
  "supportUrl" : null,
  "archivePostUrl" : null,
  "archiveUrl" : null,
  "dependency" : {
    "enabled" : true,
    "lowErrorRate" : 0.5,
    "highErrorRate" : 0.75
  }
}"max-age=600"max-age=600"max-age=60"max-age=60"/zipkin/test.txt"/zipkin/test.txt"max-age=31536000"max-age=31536000etag"etag"304"aargh"aargh? extends ITZipkinUiConfigurationClass<? extends ITZipkinUiConfiguration>"zipkin-lens/index.html"zipkin-lens/index.html"<base href=\"/\" />"<base href="/" />"<base href=\"/foozipkin/\">"<base href="/foozipkin/">"zipkin-lens/test.txt"zipkin-lens/test.txt"If-None-Match"If-None-MatchThe zipkin-lens is a single-page app. This prevents reloading all resources on each click.Browsers honor conditional requests such as eTag. Let's make sure the server doesSome assets are pretty big. ensure they use compression. too small to compressThe test sets the property {@code zipkin.ui.base-path=/foozipkin}, which should reflect inindex.htmlindex.html is served separately. This tests other content is also loaded from the classpath. We typically use OkHttp in our tests, but that automatically unzips..C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ui/ZipkinUiConfigurationTest.javaZipkinUiConfigurationTestcreateContextWithOverridenPropertycreateContextWithOverridenProperty(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ui/ZipkinUiConfigurationTest.classcreateContextcreateContext()Cookie[]serveIndexserveIndex(io.netty.handler.codec.http.cookie.Cookie[])AbstractAssert<ObjectAssert<MediaType>,MediaType>(com.linecorp.armeria.common.MediaType,java.lang.Class)"does-not-exist.html"does-not-exist.html"zipkin.ui.defaultLookback:100"zipkin.ui.defaultLookback:100"http://mycompany.com/kibana"http://mycompany.com/kibana"zipkin.ui.logs-url:"zipkin.ui.logs-url:"http://zipkin.archive.com/api/v2/spans"http://zipkin.archive.com/api/v2/spans"zipkin.ui.archive-post-url:"zipkin.ui.archive-post-url:"http://zipkin.archive.com/zipkin/traces/{traceId}"http://zipkin.archive.com/zipkin/traces/{traceId}"zipkin.ui.archive-url:"zipkin.ui.archive-url:"http://mycompany.com/file-a-bug"http://mycompany.com/file-a-bug"zipkin.ui.support-url:"zipkin.ui.support-url:"zipkin.ui.enabled:false"zipkin.ui.enabled:false"zipkin.ui.search-enabled:false"zipkin.ui.search-enabled:false"zipkin.ui.dependency.enabled:false"zipkin.ui.dependency.enabled:false"zipkin.ui.dependency.low-error-rate:0.1"zipkin.ui.dependency.low-error-rate:0.1AbstractFloatAssert<?>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractFloatAssert.classAbstractFloatAssertAbstractComparableAssert<?,Float>AbstractObjectAssert<?,Float>AbstractAssert<?,Float>Assert<?,Float>ExtensionPoints<?,Float>ComparableAssert<?,Float>FloatingPointNumberAssert<?,Float>NumberAssert<?,Float>AbstractFloatAssert<>isEqualTo(float)? super FloatCondition<? super Float>Descriptable<Condition<? super Float>>Comparator<? super Float>Function<? super Float,? extends T>Consumer<Float>Predicate<? super Float>AbstractAssert<?,Float>(java.lang.Float,java.lang.Class)Function<Float,T>Function<? super Float,T>Function<? super Float,?>Function<? super Float,?>[]AbstractObjectAssert<?,Float>(java.lang.Float,java.lang.Class)isStrictlyBetween(java.lang.Float,java.lang.Float)isBetween(java.lang.Float,java.lang.Float)isGreaterThanOrEqualTo(java.lang.Float)isGreaterThan(java.lang.Float)isLessThanOrEqualTo(java.lang.Float)isLessThan(java.lang.Float)isNotEqualByComparingTo(java.lang.Float)isEqualByComparingTo(java.lang.Float)AbstractComparableAssert<?,Float>(java.lang.Float,java.lang.Class)isNotCloseTo(java.lang.Float,org.assertj.core.data.Percentage)isCloseTo(java.lang.Float,org.assertj.core.data.Percentage)Offset<Float>isNotCloseTo(java.lang.Float,org.assertj.core.data.Offset)isCloseTo(java.lang.Float,org.assertj.core.data.Offset)isEqualTo(java.lang.Float,org.assertj.core.data.Offset)isGreaterThanOrEqualTo(float)isGreaterThan(float)isLessThanOrEqualTo(float)isLessThan(float)isNotEqualTo(java.lang.Float)isNotEqualTo(float)isEqualTo(float,org.assertj.core.data.Offset)isNotCloseTo(float,org.assertj.core.data.Percentage)isCloseTo(float,org.assertj.core.data.Percentage)isNotCloseTo(float,org.assertj.core.data.Offset)isCloseTo(float,org.assertj.core.data.Offset)isEqualTo(java.lang.Float)AbstractFloatAssert(float,java.lang.Class)AbstractFloatAssert<?>(float,java.lang.Class)AbstractFloatAssert(java.lang.Float,java.lang.Class)AbstractFloatAssert<?>(java.lang.Float,java.lang.Class)floats"zipkin.ui.dependency.high-error-rate:0.1"zipkin.ui.dependency.high-error-rate:0.1? extends InputStreamAbstractInputStreamAssert<?,? extends InputStream>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractInputStreamAssert.classAbstractInputStreamAssertAbstractAssert<?,? extends InputStream>Assert<?,? extends InputStream>ExtensionPoints<?,? extends InputStream>AbstractInputStreamAssert<>hasSameContentAshasSameContentAs(java.io.InputStream)? super ? extends InputStreamCondition<? super ? extends InputStream>Descriptable<Condition<? super ? extends InputStream>>Comparator<? super ? extends InputStream>Function<? super ? extends InputStream,? extends T>Consumer<? extends InputStream>Predicate<? super ? extends InputStream>AbstractAssert<?,? extends InputStream>(java.io.InputStream,java.lang.Class)hasDigesthasDigest(java.lang.String,java.lang.String)hasDigest(java.lang.String,byte[])hasDigest(java.security.MessageDigest,java.lang.String)hasDigest(java.security.MessageDigest,byte[])hasBinaryContenthasBinaryContent(byte[])hasContenthasContent(java.lang.String)hasContentEqualTohasContentEqualTo(java.io.InputStream)AbstractInputStreamAssert(java.io.InputStream,java.lang.Class)AbstractInputStreamAssert<?,? extends InputStream>(java.io.InputStream,java.lang.Class)inputStreams? extends ZipkinUiConfigurationTestClass<? extends ZipkinUiConfigurationTest>Map<String,? extends ZipkinUiConfigurationTest>ZipkinUiConfigurationTest[]? extends ZipkinUiConfigurationTest[]Constructor<? extends ZipkinUiConfigurationTest>? super ? extends ZipkinUiConfigurationTestClass<? super ? extends ZipkinUiConfigurationTest>TypeVariable<Class<? extends ZipkinUiConfigurationTest>>TypeVariable<Class<? extends ZipkinUiConfigurationTest>>[]"/zipkin-lens/index.html"/zipkin-lens/index.html"zipkin.ui.basepath:/foo/bar"zipkin.ui.basepath:/foo/bar"<base href=\"/foo/bar/\">"<base href="/foo/bar/">"lens"lens"zipkin.ui.basepath:/"zipkin.ui.basepath:/"<base href=\"/\">"<base href="/">cookiesencodedCookiesClass<HttpService>pair Instantiate directly so that spring doesn't cache itC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/cassandra/ZipkinCassandraStorageAutoConfigurationTest.javaZipkinCassandraStorageAutoConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storagezipkin2.storage.cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/cassandra/ZipkinCassandraStorageAutoConfigurationTest.class"zipkin.storage.type:cassandra3"zipkin.storage.type:cassandra3ObjectAssert<CassandraStorage>AbstractObjectAssert<ObjectAssert<CassandraStorage>,CassandraStorage>AbstractAssert<ObjectAssert<CassandraStorage>,CassandraStorage>Assert<ObjectAssert<CassandraStorage>,CassandraStorage>Descriptable<ObjectAssert<CassandraStorage>>ExtensionPoints<ObjectAssert<CassandraStorage>,CassandraStorage>? super CassandraStorageCondition<? super CassandraStorage>Descriptable<Condition<? super CassandraStorage>>Comparator<? super CassandraStorage>Function<? super CassandraStorage,? extends T>Consumer<CassandraStorage>Predicate<? super CassandraStorage>AbstractAssert<ObjectAssert<CassandraStorage>,CassandraStorage>(zipkin2.storage.cassandra.CassandraStorage,java.lang.Class)"zipkin.storage.cassandra3.contact-points:host1,host2"zipkin.storage.cassandra3.contact-points:host1,host2"host1,host2"host1,host2IterableAssert<String>FactoryBasedNavigableIterableAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>AbstractIterableAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>AbstractAssert<IterableAssert<String>,Iterable<? extends String>>Assert<IterableAssert<String>,Iterable<? extends String>>Descriptable<IterableAssert<String>>ExtensionPoints<IterableAssert<String>,Iterable<? extends String>>ObjectEnumerableAssert<IterableAssert<String>,String>EnumerableAssert<IterableAssert<String>,String>? super Iterable<? extends String>Condition<? super Iterable<? extends String>>Descriptable<Condition<? super Iterable<? extends String>>>Comparator<? super Iterable<? extends String>>Function<? super Iterable<? extends String>,? extends T>Consumer<Iterable<? extends String>>Predicate<? super Iterable<? extends String>>AbstractAssert<IterableAssert<String>,Iterable<? extends String>>(java.lang.Iterable,java.lang.Class)AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>AbstractIntegerAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>>AbstractComparableAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>AbstractAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>Assert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>Descriptable<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>>ExtensionPoints<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>ComparableAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>NumberAssert<AbstractIterableSizeAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>,Integer>AbstractIterableAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>(java.lang.Iterable,java.lang.Class)FactoryBasedNavigableIterableAssert(java.lang.Iterable,java.lang.Class,org.assertj.core.api.AssertFactory)FactoryBasedNavigableIterableAssert<IterableAssert<String>,Iterable<? extends String>,String,ObjectAssert<String>>(java.lang.Iterable,java.lang.Class,org.assertj.core.api.AssertFactory)toIterabletoIterable(java.util.Iterator)IterableAssert(java.lang.Iterable)IterableAssert<String>(java.lang.Iterable) note snake-case supportedC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/mysql/v1/ZipkinMySQLStorageConfigurationTest.javaZipkinMySQLStorageConfigurationTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/mysql/v1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/mysqlzipkin2.storage.mysql.v1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/storage/mysql/v1/ZipkinMySQLStorageConfigurationTest.class"zipkin.storage.type:mysql"zipkin.storage.type:mysqlObjectAssert<MySQLStorage>AbstractObjectAssert<ObjectAssert<MySQLStorage>,MySQLStorage>AbstractAssert<ObjectAssert<MySQLStorage>,MySQLStorage>Assert<ObjectAssert<MySQLStorage>,MySQLStorage>Descriptable<ObjectAssert<MySQLStorage>>ExtensionPoints<ObjectAssert<MySQLStorage>,MySQLStorage>? super MySQLStorageCondition<? super MySQLStorage>Descriptable<Condition<? super MySQLStorage>>Comparator<? super MySQLStorage>Function<? super MySQLStorage,? extends T>Consumer<MySQLStorage>Predicate<? super MySQLStorage>AbstractAssert<ObjectAssert<MySQLStorage>,MySQLStorage>(zipkin2.storage.mysql.v1.MySQLStorage,java.lang.Class)"zipkin.storage.mysql.username:robot"zipkin.storage.mysql.username:robotClass<HikariDataSource>"robot"robot"zipkin.storage.mysql"
      + ".jdbc-url:jdbc:mysql://host1,host2,host3/zipkin"zipkin.storage.mysql.jdbc-url:jdbc:mysql://host1,host2,host3/zipkin"jdbc:mysql://host1,host2,host3/zipkin"jdbc:mysql://host1,host2,host3/zipkin"zipkin.storage.mysql.jdbc-url:"zipkin.storage.mysql.jdbc-url:"zipkin.storage.mysql.host:host"zipkin.storage.mysql.host:host"zipkin.storage.mysql.port:3306"zipkin.storage.mysql.port:3306"zipkin.storage.mysql.username:root"zipkin.storage.mysql.username:root"zipkin.storage.mysql.password:secret"zipkin.storage.mysql.password:secret"zipkin.storage.mysql.db:zipkin"zipkin.storage.mysql.db:zipkin"jdbc:mysql://host:3306/zipkin?autoReconnect=true&useSSL=false&useUnicode=yes&characterEncoding=UTF-8"jdbc:mysql://host:3306/zipkin?autoReconnect=true&useSSL=false&useUnicode=yes&characterEncoding=UTF-8C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Annotation.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3proto3C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wireC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sourcesgenerated-test-sourceszipkin2.proto3C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Annotation.classMessage<Annotation,Builder>ProtoAdapter<Annotation>"com.squareup.wire.ProtoAdapter#FIXED64"com.squareup.wire.ProtoAdapter#FIXED64"com.squareup.wire.ProtoAdapter#STRING"com.squareup.wire.ProtoAdapter#STRINGBuilder<Annotation,Builder>addUnknownFields(okio.ByteString)Builder<Annotation,Builder>()buildUnknownFields()clearUnknownFields()addUnknownField(int,com.squareup.wire.FieldEncoding,java.lang.Object)setUnknownFieldsWriter$wire_runtime(com.squareup.wire.ProtoWriter)getUnknownFieldsWriter$wire_runtime()setUnknownFieldsBuffer$wire_runtime(okio.Buffer)getUnknownFieldsBuffer$wire_runtime()setUnknownFieldsByteString$wire_runtime(okio.ByteString)getUnknownFieldsByteString$wire_runtime()Message<Annotation,Builder>(com.squareup.wire.ProtoAdapter,okio.ByteString)", timestamp=", timestamp=", value=""Annotation{"Annotation{Class<Annotation>encodedSizeWithTag(int,java.lang.Long)ProtoAdapter<Long>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Long>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<List<Long>>toString(java.lang.Long)encode(java.io.OutputStream,java.lang.Long)encode(java.lang.Long)encode(okio.BufferedSink,java.lang.Long)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.lang.Long)encode(com.squareup.wire.ProtoWriter,java.lang.Long)encodedSize(java.lang.Long)redact(java.lang.Long)encodedSizeWithTag(int,java.lang.String)ProtoAdapter<String>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<String>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<List<String>>toString(java.lang.String)encode(java.io.OutputStream,java.lang.String)encode(java.lang.String)encode(okio.BufferedSink,java.lang.String)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.lang.String)encode(com.squareup.wire.ProtoWriter,java.lang.String)encodedSize(java.lang.String)redact(java.lang.String) Code generated by Wire protocol buffer compiler, do not edit. Source file: zipkin.protoUnlike log statements, annotations are often codes. Ex. "ws" for WireSendThe next id is 3.Epoch microseconds of this event.For example, 1502787600000000 corresponds to 2017-08-15 09:00 UTCThis value should be set directly by instrumentation, using the mostprecise value possible. For example, gettimeofday or multiplying epochmillis by 1000.Usually a short tag indicating an event, like "error"While possible to add larger data, such as garbage collection details, lowcardinality event names both keep the size of spans down and also are easyto search against.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Endpoint.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Endpoint.classMessage<Endpoint,Builder>ProtoAdapter<Endpoint>"com.squareup.wire.ProtoAdapter#BYTES"com.squareup.wire.ProtoAdapter#BYTES"com.squareup.wire.ProtoAdapter#INT32"com.squareup.wire.ProtoAdapter#INT32service_nameBuilder<Endpoint,Builder>Builder<Endpoint,Builder>()Message<Endpoint,Builder>(com.squareup.wire.ProtoAdapter,okio.ByteString)", service_name=", service_name=", ipv4="", ipv6="", port=""Endpoint{"Endpoint{Class<Endpoint>encodedSizeWithTag(int,okio.ByteString)ProtoAdapter<ByteString>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<ByteString>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<ByteString>Collection<ByteString>Iterable<ByteString>ProtoAdapter<List<ByteString>>toString(okio.ByteString)encode(java.io.OutputStream,okio.ByteString)encode(okio.ByteString)encode(okio.BufferedSink,okio.ByteString)encodeWithTag(com.squareup.wire.ProtoWriter,int,okio.ByteString)encode(com.squareup.wire.ProtoWriter,okio.ByteString)encodedSize(okio.ByteString)redact(okio.ByteString)encodedSizeWithTag(int,java.lang.Integer)ProtoAdapter<Integer>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Integer>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<List<Integer>>toString(java.lang.Integer)encode(java.io.OutputStream,java.lang.Integer)encode(java.lang.Integer)encode(okio.BufferedSink,java.lang.Integer)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.lang.Integer)encode(com.squareup.wire.ProtoWriter,java.lang.Integer)encodedSize(java.lang.Integer)redact(java.lang.Integer)The next id is 5.Lower-case label of this node in the service graph, such as "favstar".Leave absent if unknown.This is a primary label for trace lookup and aggregation, so it should beintuitive and consistent. Many use a name from service discovery.4 byte representation of the primary IPv4 address associated with thisconnection. Absent if unknown.16 byte representation of the primary IPv6 address associated with thisPrefer using the ipv4 field for mapped addresses.Depending on context, this could be a listen port or the client-side of asocket. Absent if unknown.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/ListOfSpans.javaListOfSpansC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/ListOfSpans.class"zipkin2.proto3.Span#ADAPTER"zipkin2.proto3.Span#ADAPTERBuilder<ListOfSpans,Builder>Builder<ListOfSpans,Builder>()add(zipkin2.proto3.Span)add(int,zipkin2.proto3.Span)set(int,zipkin2.proto3.Span)", spans=", spans="ListOfSpans{"ListOfSpans{Class<ListOfSpans>ProtoAdapter<List<Span>>encodedSizeWithTag(int,java.util.List)ProtoAdapter<List<Span>>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<List<Span>>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<List<List<Span>>>toString(java.util.List)encode(java.io.OutputStream,java.util.List)encode(java.util.List)encode(okio.BufferedSink,java.util.List)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.util.List)encode(com.squareup.wire.ProtoWriter,java.util.List)encodedSize(java.util.List)redact(java.util.List)ProtoAdapter<Span>ProtoAdapter<Span>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Span>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)toString(zipkin2.proto3.Span)encode(java.io.OutputStream,zipkin2.proto3.Span)encode(zipkin2.proto3.Span)encode(okio.BufferedSink,zipkin2.proto3.Span)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.Span)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.Span)encodedSizeWithTag(int,zipkin2.proto3.Span)encodedSize(zipkin2.proto3.Span)redact(zipkin2.proto3.Span)A list of spans with possibly different trace ids, in no particular order.This is used for all transports: POST, Kafka messages etc. No other fieldsare expected, This message facilitates the mechanics of encoding a list, asa field number is required. The name of this type is the same in the OpenApiaka Swagger specification. https://zipkin.io/zipkin-api/#/default/post_spansC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/ReportResponse.javaReportResponseC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/ReportResponse.classMessage<ReportResponse,Builder>Builder<ReportResponse,Builder>Builder<ReportResponse,Builder>()Message<ReportResponse,Builder>(com.squareup.wire.ProtoAdapter,okio.ByteString)"ReportResponse{"ReportResponse{Class<ReportResponse>Response for SpanService/Report RPC. This response currently does not returnany information beyond indicating that the request has finished. That said,it may be extended in the future.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Span.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/generated-test-sources/wire/zipkin2/proto3/Span.classMessage<Span,Builder>"zipkin2.proto3.Span$Kind#ADAPTER"zipkin2.proto3.Span$Kind#ADAPTER"com.squareup.wire.ProtoAdapter#UINT64"com.squareup.wire.ProtoAdapter#UINT64"zipkin2.proto3.Endpoint#ADAPTER"zipkin2.proto3.Endpoint#ADAPTER"zipkin2.proto3.Annotation#ADAPTER"zipkin2.proto3.Annotation#ADAPTER"com.squareup.wire.ProtoAdapter#BOOL"com.squareup.wire.ProtoAdapter#BOOLtrace_idparent_idlocal_endpointremote_endpointBuilder<Span,Builder>Builder<Span,Builder>()Message<Span,Builder>(com.squareup.wire.ProtoAdapter,okio.ByteString)add(zipkin2.proto3.Annotation)add(int,zipkin2.proto3.Annotation)set(int,zipkin2.proto3.Annotation)compareTo(zipkin2.proto3.Span.Kind)", trace_id=", trace_id=", parent_id=", parent_id=", id=", id=", kind=", kind=", name=", name=", duration=", duration=", local_endpoint=", local_endpoint=", remote_endpoint=", remote_endpoint=", annotations=", annotations=", tags=", tags=", debug=", debug=", shared=", shared="Span{"Span{Kind(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/proto3/Span$Kind.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/proto3ProtoAdapter<Kind>ProtoAdapter_KindProtoAdapter_Kind()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/proto3/Span$Kind$ProtoAdapter_Kind.classSpan$Kind$ProtoAdapter_KindEnumAdapter<Kind>ProtoAdapter<Map<String,String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-server/target/test-classes/zipkin2/proto3/Span$ProtoAdapter_Span.classSpan$ProtoAdapter_SpanProtoAdapter<>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)encodedSizeWithTag(int,zipkin2.proto3.Span.Kind)ProtoAdapter<Kind>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Kind>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<Kind>Collection<Kind>Iterable<Kind>ProtoAdapter<List<Kind>>toString(zipkin2.proto3.Span.Kind)encode(java.io.OutputStream,zipkin2.proto3.Span.Kind)encode(zipkin2.proto3.Span.Kind)encode(okio.BufferedSink,zipkin2.proto3.Span.Kind)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.Span.Kind)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.Span.Kind)encodedSize(zipkin2.proto3.Span.Kind)redact(zipkin2.proto3.Span.Kind)encodedSizeWithTag(int,zipkin2.proto3.Endpoint)ProtoAdapter<Endpoint>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Endpoint>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)ProtoAdapter<List<Endpoint>>toString(zipkin2.proto3.Endpoint)encode(java.io.OutputStream,zipkin2.proto3.Endpoint)encode(zipkin2.proto3.Endpoint)encode(okio.BufferedSink,zipkin2.proto3.Endpoint)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.Endpoint)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.Endpoint)encodedSize(zipkin2.proto3.Endpoint)redact(zipkin2.proto3.Endpoint)ProtoAdapter<List<Annotation>>ProtoAdapter<List<Annotation>>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<List<Annotation>>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<List<Annotation>>Collection<List<Annotation>>Iterable<List<Annotation>>ProtoAdapter<List<List<Annotation>>>ProtoAdapter<Annotation>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Annotation>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)toString(zipkin2.proto3.Annotation)encode(java.io.OutputStream,zipkin2.proto3.Annotation)encode(zipkin2.proto3.Annotation)encode(okio.BufferedSink,zipkin2.proto3.Annotation)encodeWithTag(com.squareup.wire.ProtoWriter,int,zipkin2.proto3.Annotation)encode(com.squareup.wire.ProtoWriter,zipkin2.proto3.Annotation)encodedSizeWithTag(int,zipkin2.proto3.Annotation)encodedSize(zipkin2.proto3.Annotation)redact(zipkin2.proto3.Annotation)encodedSizeWithTag(int,java.util.Map)ProtoAdapter<Map<String,String>>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Map<String,String>>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<Map<String,String>>Collection<Map<String,String>>Iterable<Map<String,String>>ProtoAdapter<List<Map<String,String>>>toString(java.util.Map)encode(java.io.OutputStream,java.util.Map)encode(java.util.Map)encode(okio.BufferedSink,java.util.Map)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.util.Map)encode(com.squareup.wire.ProtoWriter,java.util.Map)encodedSize(java.util.Map)redact(java.util.Map)encodedSizeWithTag(int,java.lang.Boolean)ProtoAdapter<Boolean>(com.squareup.wire.FieldEncoding,java.lang.Class)ProtoAdapter<Boolean>(com.squareup.wire.FieldEncoding,kotlin.reflect.KClass)List<Boolean>Collection<Boolean>Iterable<Boolean>ProtoAdapter<List<Boolean>>toString(java.lang.Boolean)encode(java.io.OutputStream,java.lang.Boolean)encode(java.lang.Boolean)encode(okio.BufferedSink,java.lang.Boolean)encodeWithTag(com.squareup.wire.ProtoWriter,int,java.lang.Boolean)encode(com.squareup.wire.ProtoWriter,java.lang.Boolean)encodedSize(java.lang.Boolean)redact(java.lang.Boolean)A span is a single-host view of an operation. A trace is a series of spans(often RPC calls) which nest to form a latency tree. Spans are in the sametrace when they share the same trace ID. The parent_id field establishes theposition of one span in the tree.The root span is where parent_id is Absent and usually has the longestduration in the trace. However, nested asynchronous work can materialize aschild spans whose duration exceed the root span.Spans usually represent remote activity such as RPC calls, or messagingproducers and consumers. However, they can also represent in-processactivity in any position of the trace. For example, a root span couldrepresent a server receiving an initial client request. A root span couldalso represent a scheduled job that has no remote context.Encoding notes:Epoch timestamp are encoded fixed64 as varint would also be 8 bytes, and moreexpensive to encode and size. Duration is stored uint64, as often the numbersare quite small.Default values are ok, as only natural numbers are used. For example, zero isan invalid timestamp and an invalid duration, false values for debug or sharedare ignorable, and zero-length strings also coerce to null.The next id is 14.Note fields up to 15 take 1 byte to encode. Take care when adding new fieldshttps://developers.google.com/protocol-buffers/docs/proto3#assigning-tagsRandomly generated, unique identifier for a trace, set on all spans withinit.This field is required and encoded as 8 or 16 bytes, in big endian byteorder.The parent span ID or absent if this the root span in a trace.Unique identifier for this operation within the trace.This field is required and encoded as 8 opaque bytes.When present, used to interpret remote_endpointThe logical operation this span represents in lowercase (e.g. rpc method).As these are lookup labels, take care to ensure names are low cardinality.For example, do not embed variables into the name.Epoch microseconds of the start of this span, possibly absent ifincomplete.There are three known edge-cases where this could be reported absent.- A span was allocated but never started (ex not yet received a timestamp)- The span's start event was lost- Data about a completed span (ex tags) were sent after the factDuration in microseconds of the critical path, if known. Durations of lessthan one are rounded up. Duration of children can be longer than theirparents due to asynchronous operations.For example 150 milliseconds is 150000 microseconds.Instrumentation should always record this. Usually, absent implies latedata. The IP address corresponding to this is usually the site local oradvertised service address. When present, the port indicates the listenport.When an RPC (or messaging) span, indicates the other side of theconnection.By recording the remote endpoint, your trace will contain network contexteven if the peer is not tracing. For example, you can record the IP fromthe "X-Forwarded-For" header or the service name and socket of a remotepeer.Associates events that explain latency with the time they happened.Tags give your span context for search, viewing and analysis.For example, a key "your_app.version" would let you lookup traces byversion. A tag "sql.query" isn't searchable, but it can help in debuggingwhen viewing a trace.This is true when the "X-B3-Flags" header has a value of 1.True if we are contributing to a span started by another tracer (ex on adifferent host).When present, kind clarifies timestamp, duration and remote_endpoint. Whenabsent, the span is local or incomplete. Unlike client and server, thereis no direct critical path latency relationship between producer andconsumer spans.Default value interpreted as absent.The span represents the client side of an RPC operation, implying thefollowing:timestamp is the moment a request was sent to the server.duration is the delay until a response or an error was received.remote_endpoint is the server.The span represents the server side of an RPC operation, implying thetimestamp is the moment a client request was received.duration is the delay until a response was sent or an error.remote_endpoint is the client.The span represents production of a message to a remote broker, implyingthe following:timestamp is the moment a message was sent to a destination.duration is the delay sending the message, such as batching.remote_endpoint is the broker.The span represents consumption of a message from a remote broker, nottime spent servicing it. For example, a message processor would be anin-process child span of a consumer. Consumer spans imply the following:timestamp is the moment a message was received from an origin.duration is the delay consuming the message, such as from backlog.Return the constant for {@code value} or null.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/pom.xmlzipkin-storage-parentStorage: Cassandra CheckReturnValue:OFF as it is used on some types that do not require it
         https://groups.google.com/a/lists.datastax.com/g/java-driver-user/c/YbXjSoNV6Ns/m/U9w-HccWBgAJ  AutoValueImmutableFields:OFF because error-prone wants InsertSpan to depend on guava! -Xep:CheckReturnValue:OFF -Xep:AutoValueImmutableFields:OFFauto-value-annotations Exclude unused graph and geo dependencies com.esri.geometryorg.apache.tinkerpop We retain reactivestreams even though we don't use it because
             Mockito dies trying to mock CqlSession without it. C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/AnnotationCodec.javaAnnotationCodecC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/srccom.datastax.oss.driver.api.core.type.codecTypeCodec<UdtValue>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jarjava-driver-core-4.9.0C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-coreC:/Users/Semiu/.m2/repository/com/datastax/ossossC:/Users/Semiu/.m2/repository/com/datastaxdatastaxC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/comC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastaxC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/ossC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driverdriverC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/apiC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/coreC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/typeC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/codecC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/codec/TypeCodec.classTypeCodecAnnotationCodec(com.datastax.oss.driver.api.core.type.codec.TypeCodec)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/AnnotationCodec.classMappingCodec<UdtValue,Annotation>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/codec/MappingCodec.classMappingCodecTypeCodec<Annotation>innerCodeccom.datastax.oss.driver.api.core.type.reflectGenericType<Annotation>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/reflectC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/reflect/GenericType.classGenericTypeGenericType<>GenericType<T>of(java.lang.Class)com.datastax.oss.driver.shaded.guava.common.reflectTypeToken<>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jarjava-driver-shaded-guava-25.1-jre-graal-sub-1C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-125.1-jre-graal-sub-1C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guavajava-driver-shaded-guavaC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/comC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastaxC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/ossC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driverC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shadedshadedC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shaded/guavaC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shaded/guava/commonC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shaded/guava/common/reflectC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shaded/guava/common/reflect/TypeToken.classTypeTokenTypeCapture<>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-shaded-guava/25.1-jre-graal-sub-1/java-driver-shaded-guava-25.1-jre-graal-sub-1.jar/com/datastax/oss/driver/shaded/guava/common/reflect/TypeCapture.classTypeCaptureTypeToken<T>TypeCapture<T>__getToken__getToken()GenericType<? extends T>getSubtypegetSubtype(java.lang.Class)GenericType<? super T>getSupertypegetSupertype(java.lang.Class)getRawTypegetRawType()GenericType<?>GenericTypeParameter<>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/type/reflect/GenericTypeParameter.classGenericTypeParameterwherewhere(com.datastax.oss.driver.api.core.type.reflect.GenericTypeParameter,java.lang.Class)GenericTypeParameter<X>Class<X>where(com.datastax.oss.driver.api.core.type.reflect.GenericTypeParameter,com.datastax.oss.driver.api.core.type.reflect.GenericType)GenericType<X>wrap()isSubtypeOfisSubtypeOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)isSupertypeOfisSupertypeOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)GenericType()GenericType<>()GenericType<Optional<T>>optionalOfoptionalOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)optionalOf(java.lang.Class)GenericType<T[]>arrayOfarrayOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)arrayOf(java.lang.Class)GenericType<Map<K,V>>mapOfmapOf(com.datastax.oss.driver.api.core.type.reflect.GenericType,com.datastax.oss.driver.api.core.type.reflect.GenericType)GenericType<K>GenericType<V>mapOf(java.lang.Class,java.lang.Class)Class<V>Set<T>GenericType<Set<T>>setOfsetOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)setOf(java.lang.Class)GenericType<List<T>>listOflistOf(com.datastax.oss.driver.api.core.type.reflect.GenericType)listOf(java.lang.Class)of(java.lang.reflect.Type)GenericType<Duration>GenericType<UdtValue>UDT_VALUEGenericType<TupleValue>TUPLE_VALUEGenericType<CqlDuration>CQL_DURATIONGenericType<InetAddress>INET_ADDRESSGenericType<UUID>UUIDGenericType<BigDecimal>BIG_DECIMALGenericType<BigInteger>BIG_INTEGERGenericType<String>GenericType<ByteBuffer>BYTE_BUFFERGenericType<LocalDateTime>LOCAL_DATE_TIMEGenericType<LocalTime>LOCAL_TIMEGenericType<LocalDate>LOCAL_DATEGenericType<ZonedDateTime>ZONED_DATE_TIMEGenericType<Instant>INSTANTGenericType<Short>SHORTGenericType<Long>LONGGenericType<Integer>INTEGERGenericType<Float>GenericType<Double>GenericType<Byte>BYTEGenericType<Boolean>TypeCodec<InnerT>GenericType<OuterT>getCqlTypegetCqlType()parse(java.lang.String)format(java.lang.Object)format(zipkin2.Annotation)decode(java.nio.ByteBuffer,com.datastax.oss.driver.api.core.ProtocolVersion)encode(java.lang.Object,com.datastax.oss.driver.api.core.ProtocolVersion)encode(zipkin2.Annotation,com.datastax.oss.driver.api.core.ProtocolVersion)acceptsaccepts(com.datastax.oss.driver.api.core.type.DataType)accepts(java.lang.Object)accepts(java.lang.Class)accepts(com.datastax.oss.driver.api.core.type.reflect.GenericType)GenericType<JavaTypeT>getJavaTypegetJavaType()outerToInnerouterToInner(java.lang.Object)outerToInner(zipkin2.Annotation)innerToOuterinnerToOuter(java.lang.Object)innerToOuter(com.datastax.oss.driver.api.core.data.UdtValue)GenericType<InnerT>getInnerJavaTypegetInnerJavaType()MappingCodec(com.datastax.oss.driver.api.core.type.codec.TypeCodec,com.datastax.oss.driver.api.core.type.reflect.GenericType)MappingCodec<UdtValue,Annotation>(com.datastax.oss.driver.api.core.type.codec.TypeCodec,com.datastax.oss.driver.api.core.type.reflect.GenericType)outerJavaTypecom.datastax.oss.driver.api.core.dataSettableByIndex<UdtValue>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/dataC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/data/SettableByIndex.classSettableByIndexSettableByIndex<>setStringsetString(int,java.lang.String)setTupleValuesetTupleValue(int,com.datastax.oss.driver.api.core.data.TupleValue)setUdtValuesetUdtValue(int,com.datastax.oss.driver.api.core.data.UdtValue)KeyTValueTsetMapsetMap(int,java.util.Map,java.lang.Class,java.lang.Class)Map<KeyT,ValueT>Class<KeyT>Class<ValueT>ElementTsetSetsetSet(int,java.util.Set,java.lang.Class)Set<ElementT>Collection<ElementT>Iterable<ElementT>Class<ElementT>setListsetList(int,java.util.List,java.lang.Class)List<ElementT>setTokensetToken(int,com.datastax.oss.driver.api.core.metadata.token.Token)setCqlDurationsetCqlDuration(int,com.datastax.oss.driver.api.core.data.CqlDuration)setInetAddresssetInetAddress(int,java.net.InetAddress)setUuidsetUuid(int,java.util.UUID)setBigDecimalsetBigDecimal(int,java.math.BigDecimal)setBigIntegersetBigInteger(int,java.math.BigInteger)setByteBuffersetByteBuffer(int,java.nio.ByteBuffer)setLocalTimesetLocalTime(int,java.time.LocalTime)setLocalDatesetLocalDate(int,java.time.LocalDate)setInstantsetInstant(int,java.time.Instant)setShortsetShort(int,short)setLongsetLong(int,long)setIntsetInt(int,int)setFloatsetFloat(int,float)setDoublesetDouble(int,double)setBytesetByte(int,byte)setBoolsetBool(int,boolean)setBooleansetBoolean(int,boolean)set(int,java.lang.Object,java.lang.Class)set(int,java.lang.Object,com.datastax.oss.driver.api.core.type.reflect.GenericType)GenericType<ValueT>TypeCodec<>set(int,java.lang.Object,com.datastax.oss.driver.api.core.type.codec.TypeCodec)TypeCodec<ValueT>setToNullsetToNull(int)setBytesUnsafesetBytesUnsafe(int,java.nio.ByteBuffer)For better performance, this relies on ordinals instead of name lookups.<p>0 = "ts" = {@link Annotation#timestamp()}<p>0 = "v" = {@link Annotation#value()}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraAutocompleteTags.javaCassandraAutocompleteTagsCassandraAutocompleteTags(zipkin2.storage.cassandra.CassandraStorage)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraAutocompleteTags.classvaluesCallFactorykeysCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanConsumer.javaCassandraSpanConsumerdurationIndexBucketTABLE_AUTOCOMPLETE_TAGSTABLE_SERVICE_REMOTE_SERVICESTABLE_SERVICE_SPANSguessTimestampguessTimestamp(zipkin2.Span)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanConsumer.classCassandraSpanConsumer(com.datastax.oss.driver.api.core.CqlSession,zipkin2.storage.cassandra.Schema.Metadata,boolean,boolean,java.util.Set,int,int)CassandraSpanConsumer(zipkin2.storage.cassandra.CassandraStorage)insertAutocompleteValueinsertServiceRemoteServiceinsertServiceSpaninsertTraceByServiceSpaninsertTraceByServiceRemoteServiceinsertSpanzipkin2.storage.cassandra.internal.callFactory<Entry<String,String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/DeduplicatingInsert$Factory.classDeduplicatingInsert$FactoryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/callC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classesDeduplicatingInsert<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsert.classDeduplicatingInsertC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/callC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internalResultSetFutureCall<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCall.classResultSetFutureCallmaybeAddmaybeAdd(java.lang.Object,java.util.List)maybeAdd(java.util.Map.Entry,java.util.List)newCallnewCall(java.lang.Object)newCall(java.util.Map.Entry)FactoryFactory(long,int)Factory<Entry<String,String>>(long,int)DelayLimiter<I>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/internal/DelayLimiter.classdelayLimitermetadata"INSERT INTO "INSERT INTO " (service, remote_service) VALUES (?,?)" (service, remote_service) VALUES (?,?)" (service, span) VALUES (?,?)" (service, span) VALUES (?,?)" (key, value) VALUES (?,?)" (key, value) VALUES (?,?)Set<Input>Collection<Input>Iterable<Input>LinkedHashSet<Input>HashSet<Input>AbstractSet<Input>AbstractCollection<Input>LinkedHashSet<Input>()Spliterator<Input>? super InputConsumer<? super Input>Iterator<Input>Stream<Input>BaseStream<Input,Stream<Input>>Predicate<? super Input>? extends InputCollection<? extends Input>Iterable<? extends Input>add(zipkin2.storage.cassandra.InsertSpan.Input)AbstractCollection<Input>()AbstractSet<Input>()HashSet<Input>(int,float,boolean)HashSet<Input>(int)HashSet<Input>(int,float)HashSet<Input>(java.util.Collection)HashSet<Input>()LinkedHashSet<Input>(java.util.Collection)LinkedHashSet<Input>(int)LinkedHashSet<Input>(int,float)serviceRemoteServicesLinkedHashSet<Entry<String,String>>HashSet<Entry<String,String>>AbstractSet<Entry<String,String>>AbstractCollection<Entry<String,String>>LinkedHashSet<Entry<String,String>>()AbstractCollection<Entry<String,String>>()AbstractSet<Entry<String,String>>()HashSet<Entry<String,String>>(int,float,boolean)HashSet<Entry<String,String>>(int)HashSet<Entry<String,String>>(int,float)HashSet<Entry<String,String>>(java.util.Collection)HashSet<Entry<String,String>>()LinkedHashSet<Entry<String,String>>(java.util.Collection)LinkedHashSet<Entry<String,String>>(int)LinkedHashSet<Entry<String,String>>(int,float)serviceSpanstraceByServiceRemoteServicesadd(zipkin2.storage.cassandra.InsertTraceByServiceRemoteService.Input)traceByServiceSpansadd(zipkin2.storage.cassandra.InsertTraceByServiceSpan.Input)ArrayList<Call<Void>>AbstractList<Call<Void>>AbstractCollection<Call<Void>>ArrayList<Call<Void>>()AbstractCollection<Call<Void>>()AbstractList<Call<Void>>()ArrayList<Call<Void>>(java.util.Collection)ArrayList<Call<Void>>(int)ts_microts_uuidremoteServicebucketSimpleImmutableEntry<String,String>C:/modules/java.base/java/util/AbstractMap$SimpleImmutableEntry.classAbstractMap$SimpleImmutableEntrySimpleImmutableEntry<String,String>(java.lang.String,java.lang.String)SimpleImmutableEntrySimpleImmutableEntry(java.util.Map.Entry)Entry<? extends String,? extends String>SimpleImmutableEntry<String,String>(java.util.Map.Entry)SimpleImmutableEntry(java.lang.Object,java.lang.Object)serviceSpanserviceRemoteServiceautocompleteTagC:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/internal/AggregateCall.classnewVoidCallnewVoidCall(java.util.List)Base<>()cloneCallscloneCalls()finish(java.lang.Object)isEmpty(java.lang.Object)appendappend(java.lang.Object,java.lang.Object)newOutputnewOutput()AggregateCall(java.util.List)AggregateCall<>(java.util.List)"method only for when span has no timestamp"method only for when span has no timestamp not final for testing Everything below here is null when search is disabled Exposed to allow tests to switch from strictTraceId to notThis fans out into many requests, last count was 2 * spans.size. If any of these fail, thereturned future will fail. Most callers drop or log the result. indexing occurs by timestamp, so derive one if not present. fallback to current time on the ts_uuid for span data, so we know when it was inserted Empty values allow for api queries with blank service or span name Empty value allows for api queries without span name don't index further w/o a service name service span and remote service indexes is refreshed regardless of timestamp search is only valid with a timestamp, don't index w/o it! duration index is milliseconds not microseconds Allows lookup without the span name return a timestamp that won't match a queryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanStore.javaCassandraSpanStoretraceIdsSortedByDescTimestampTABLE_TRACE_BY_SERVICE_SPANtimestampRangetimestampRange(zipkin2.storage.QueryRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanStore.classMap<String,Long>Call<Map<String,Long>>newBucketedTraceIdCallnewBucketedTraceIdCall(zipkin2.storage.QueryRequest,zipkin2.storage.cassandra.CassandraSpanStore.TimestampRange,int)initialiseSelectTraceIdsFromSpaninitialiseSelectTraceIdsFromSpan(com.datastax.oss.driver.api.core.CqlSession)CassandraSpanStore(zipkin2.storage.cassandra.CassandraStorage)traceIdsFromServiceRemoteServicetraceIdsFromServiceSpanspanTableindexTtlClass<CassandraSpanStore>"failed to prepare annotation_query index statements: "failed to prepare annotation_query index statements: traceIndexFetchSizeList<Call<Map<String,Long>>>Collection<Call<Map<String,Long>>>Iterable<Call<Map<String,Long>>>callsToIntersectArrayList<Call<Map<String,Long>>>AbstractList<Call<Map<String,Long>>>AbstractCollection<Call<Map<String,Long>>>ArrayList<Call<Map<String,Long>>>()Spliterator<Call<Map<String,Long>>>? super Call<Map<String,Long>>Consumer<? super Call<Map<String,Long>>>Iterator<Call<Map<String,Long>>>Stream<Call<Map<String,Long>>>BaseStream<Call<Map<String,Long>>,Stream<Call<Map<String,Long>>>>Predicate<? super Call<Map<String,Long>>>? extends Call<Map<String,Long>>Collection<? extends Call<Map<String,Long>>>Iterable<? extends Call<Map<String,Long>>>AbstractCollection<Call<Map<String,Long>>>()ListIterator<Call<Map<String,Long>>>Comparator<? super Call<Map<String,Long>>>UnaryOperator<Call<Map<String,Long>>>Function<Call<Map<String,Long>>,Call<Map<String,Long>>>AbstractList<Call<Map<String,Long>>>()ArrayList<Call<Map<String,Long>>>(java.util.Collection)ArrayList<Call<Map<String,Long>>>(int)annotationKeysintersectedTraceIdsannotationKey" query unsupported due to missing annotation_query index" query unsupported due to missing annotation_query indexCall<Set<String>>FlatMapper<Set<String>,R>Callback<Set<String>>ErrorHandler<Set<String>>Mapper<Set<String>,R>Call<Set<String>>()FlatMapper<Set<String>,List<List<Span>>>Mapper<Map<String,Long>,R>Callback<Map<String,Long>>ErrorHandler<Map<String,Long>>FlatMapper<Map<String,Long>,R>Call<Map<String,Long>>()Mapper<Map<String,Long>,Set<String>>startBucketendBucketList<Input>ArrayList<Input>AbstractList<Input>ArrayList<Input>()add(zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Input)ListIterator<Input>add(int,zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Input)set(int,zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Input)Comparator<? super Input>UnaryOperator<Input>Function<Input,Input>AbstractList<Input>()ArrayList<Input>(java.util.Collection)ArrayList<Input>(int)add(zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Input)add(int,zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Input)set(int,zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Input)"Start bucket ("Start bucket (") > end bucket (") > end bucket (addSpanQuery"remoteService="remoteService=" unsupported due to missing table " unsupported due to missing table FlatMapper<List<String>,Map<String,Long>>AggregateFlatMapper<String,Long>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/CassandraSpanStore$AggregateFlatMapper.classCassandraSpanStore$AggregateFlatMapperAggregateFlatMapper<K,V>FlatMapper<List<K>,Map<K,V>>AggregateFlatMapper<K,V>(zipkin2.Call.FlatMapper,zipkin2.Call.FlatMapper)Call<Map<K,V>>AggregateFlatMapperAggregateFlatMapper(zipkin2.Call.FlatMapper,zipkin2.Call.FlatMapper)IntersectMaps<String,Long>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/IntersectMaps.classIntersectMapsAggregateCall<Map<String,Long>,Map<String,Long>>Base<Map<String,Long>>List<Call<Map<K,V>>>Collection<Call<Map<K,V>>>Iterable<Call<Map<K,V>>>IntersectMaps<String,Long>(java.util.List)Base<Map<String,Long>>()finish(java.util.Map)isEmpty(java.util.Map)append(java.util.Map,java.util.Map)AggregateCall<Map<String,Long>,Map<String,Long>>(java.util.List)IntersectMaps<>firstInputIntersectMaps(java.util.List)IntersectMaps<K,V>AggregateCall<Map<K,V>,Map<K,V>>Base<Map<K,V>>IntersectMaps<K,V>(java.util.List)Callback<Map<K,V>>ErrorHandler<Map<K,V>>FlatMapper<Map<K,V>,R>Mapper<Map<K,V>,R>Call<Map<K,V>>()Base<Map<K,V>>()AggregateCall<Map<K,V>,Map<K,V>>(java.util.List)normalizedTraceIdendUUIDC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/CassandraSpanStore$TimestampRange.classCassandraSpanStore$TimestampRangeendMillisstartUUIDTimestampRangeTimestampRange()oldestDatanot final for testing zero when disabledThis makes it possible to safely drop the annotations_query SASI.<p>If dropped, trying to search by annotation in the UI will throw an IllegalStateException.This fans out into a number of requests corresponding to query input. In simplest case, thereis less than a day of data queried, and only one expression. This implies one call to fetchtrace IDs and another to retrieve the span details.<p>The amount of backend calls increase in dimensions of query complexity, days of data, andlimit of traces requested. For example, a query like "http.path=/foo and error" will be twoselect statements for the expression, possibly follow-up calls for pagination (when over 5Krows match). Once IDs are parsed, there's one call for each 5K rows of span data. This means"http.path=/foo and error" is minimally 3 network calls, the first two in parallel. If we have to make multiple queries, over fetch on indexes as they don't return distinct (trace id, timestamp) rows. This mitigates intersection resulting in < limit traces Bucketed calls can be expensive when service name isn't specified. This guards against abuse. We achieve the AND goal, by intersecting each of the key sets. @xxx the sorting by timestamp desc is broken here^Creates a call representing one or more queries against {@link Schema#TABLE_TRACE_BY_SERVICE_SPAN}and possibly {@link Schema#TABLE_TRACE_BY_SERVICE_REMOTE_SERVICE}.<p>The result will be an aggregate if the input requests's serviceName is null, both span nameand remote service name are supplied, or there's more than one day of data in the timestamprange.<p>Note that when {@link QueryRequest#serviceName()} is null, the returned query composes over{@link #getServiceNames()}. This means that if you have 1000 service names, you will end upwith a composition of at least 1000 calls. TODO: smartly handle when serviceName is null. For example, rank recently written serviceNames and speculatively query those first. trace_by_service_span adds special empty-string span name in order to search by all "" isn't a real value. it is used to template bucketed calls and replaced later TODO: ideally, the buckets are traversed backwards, only spawning queries for older buckets if younger buckets are empty. This will be an async continuation, punted for now. If the remote service query can satisfy the request, don't make a redundant span query If we have no service name, we have to lookup service names before running trace ID queries make sure we have a 16 or 32 character trace IDC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraStorage.javaCassandraStoragemetadata()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraStorage.classsession()tagStorecloseCalledCassandraStorage(boolean,boolean,java.util.Set,int,int,java.lang.String,java.lang.String,java.util.Map,com.datastax.oss.driver.api.core.auth.AuthProvider,boolean,zipkin2.storage.cassandra.CassandraStorage.SessionFactory,java.lang.String,boolean,int,int)authProviderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/CassandraStorage$Builder.classCassandraStorage$BuilderC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/CassandraStorageBuilder.class"sessionFactory == null"sessionFactory == nullisOverCapacity(java.lang.Throwable)getUninterruptiblygetUninterruptibly(java.util.concurrent.CompletionStage)apply(com.datastax.oss.driver.api.core.cql.AsyncResultSet)CompletionStage<AsyncResultSet>newCompletionStagenewCompletionStage()ResultSetFutureCall()ResultSetFutureCall<>()"CassandraStorage{contactPoints="CassandraStorage{contactPoints=", keyspace=", keyspace="closed"closedCQL3 implementation of zipkin storage.<p>Queries are logged to the category "com.datastax.oss.driver.api.core.cql.QueryLogger" whendebug or trace is enabled via SLF4J. Trace level includes bound values.<p>Schema is installed by default from "/zipkin2-schema.cql"<p>When {@link StorageComponent.Builder#strictTraceId(boolean)} is disabled, span and index dataare uniformly written with 64-bit trace ID length. When retrieving data, an extra "trace_id_high"field clarifies if a 128-bit trace ID was sent. @FunctionalInterface, except safe for lower language levelsKeyspace to store span and index data. Defaults to "zipkin2"Ensures that schema exists, if enabled tries to execute:<li>io.zipkin.zipkin2:zipkin-storage-cassandra/zipkin2-schema.cql</li><li>io.zipkin.zipkin2:zipkin-storage-cassandra/zipkin2-indexes.cql</li>Defaults to true.Override to control how sessions are created. Assign generic configuration for all storage components Assign configuration used to create a session Assign configuration used to control queriesclose is typically called from a different threadLazy initializes or returns the session in use by this storage component.{@inheritDoc} Memoized in order to avoid re-preparing statements Memoized in order to avoid re-preparing statementsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraUtil.javaCassandraUtilSHORT_STRING_LENGTHinetAddressOrNullinetAddressOrNull(java.lang.String,byte[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/CassandraUtil.classList<LocalDate>Collection<LocalDate>Iterable<LocalDate>getDaysgetDays(long,java.lang.Long)traceIdsSortedByDescTimestamp()annotationKeys(zipkin2.storage.QueryRequest)annotationQuery(zipkin2.Span)DURATION_INDEX_BUCKET_WINDOW_SECONDSCassandraUtil()Class<CassandraUtil>"zipkin.store.cassandra.internal.durationIndexBucket"zipkin.store.cassandra.internal.durationIndexBucket1_000_000delimiter''OFFSETC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/CassandraUtil$TraceIdsSortedByDescTimestamp.classCassandraUtil$TraceIdsSortedByDescTimestampRANDTraceIdsSortedByDescTimestampTraceIdsSortedByDescTimestamp()TreeMap<BigInteger,String>AbstractMap<BigInteger,String>Map<BigInteger,String>NavigableMap<BigInteger,String>SortedMap<BigInteger,String>Comparator<BigInteger>? super BigIntegerComparator<? super BigInteger>TreeMap<BigInteger,String>(java.util.Comparator)merge(java.math.BigInteger,java.lang.String,java.util.function.BiFunction)BiFunction<? super BigInteger,? super String,? extends String>compute(java.math.BigInteger,java.util.function.BiFunction)computeIfPresent(java.math.BigInteger,java.util.function.BiFunction)Function<? super BigInteger,? extends String>computeIfAbsent(java.math.BigInteger,java.util.function.Function)replace(java.math.BigInteger,java.lang.String)replace(java.math.BigInteger,java.lang.String,java.lang.String)putIfAbsent(java.math.BigInteger,java.lang.String)BiConsumer<? super BigInteger,? super String>Entry<BigInteger,String>Set<Entry<BigInteger,String>>Collection<Entry<BigInteger,String>>Iterable<Entry<BigInteger,String>>Set<BigInteger>Collection<BigInteger>Iterable<BigInteger>? extends BigIntegerMap<? extends BigInteger,? extends String>put(java.math.BigInteger,java.lang.String)AbstractMap<BigInteger,String>()tailMap(java.math.BigInteger)headMap(java.math.BigInteger)subMap(java.math.BigInteger,java.math.BigInteger)tailMap(java.math.BigInteger,boolean)headMap(java.math.BigInteger,boolean)subMap(java.math.BigInteger,boolean,java.math.BigInteger,boolean)NavigableSet<BigInteger>SortedSet<BigInteger>higherKey(java.math.BigInteger)higherEntry(java.math.BigInteger)ceilingKey(java.math.BigInteger)ceilingEntry(java.math.BigInteger)floorKey(java.math.BigInteger)floorEntry(java.math.BigInteger)lowerKey(java.math.BigInteger)lowerEntry(java.math.BigInteger)Spliterator<BigInteger>SortedSet<? extends BigInteger>Set<? extends BigInteger>Collection<? extends BigInteger>Iterable<? extends BigInteger>Iterator<BigInteger>getLowerEntry(java.math.BigInteger)getHigherEntry(java.math.BigInteger)getFloorEntry(java.math.BigInteger)getCeilingEntry(java.math.BigInteger)SortedMap<BigInteger,? extends String>Map<BigInteger,? extends String>TreeMap<BigInteger,String>(java.util.SortedMap)TreeMap<BigInteger,String>(java.util.Map)TreeMap<BigInteger,String>()Entry<String,Long>Set<Entry<String,Long>>Collection<Entry<String,Long>>Iterable<Entry<String,Long>>merge(java.lang.String,java.lang.Long,java.util.function.BiFunction)BiFunction<? super String,? super Long,? extends Long>Function<? super String,? extends Long>replace(java.lang.String,java.lang.Long)replace(java.lang.String,java.lang.Long,java.lang.Long)putIfAbsent(java.lang.String,java.lang.Long)BiConsumer<? super String,? super Long>Map<? extends String,? extends Long>put(java.lang.String,java.lang.Long)uncollided"TraceIdsSortedByDescTimestamp"ArrayList<LocalDate>AbstractList<LocalDate>AbstractCollection<LocalDate>ArrayList<LocalDate>()Spliterator<LocalDate>? super LocalDateConsumer<? super LocalDate>Iterator<LocalDate>Stream<LocalDate>BaseStream<LocalDate,Stream<LocalDate>>Predicate<? super LocalDate>? extends LocalDateCollection<? extends LocalDate>Iterable<? extends LocalDate>add(java.time.LocalDate)AbstractCollection<LocalDate>()ListIterator<LocalDate>add(int,java.time.LocalDate)set(int,java.time.LocalDate)Comparator<? super LocalDate>UnaryOperator<LocalDate>Function<LocalDate,LocalDate>AbstractList<LocalDate>()ArrayList<LocalDate>(java.util.Collection)ArrayList<LocalDate>(int)"InetAddress.getByAddress failed with input {}: {}"InetAddress.getByAddress failed with input {}: {}Time window covered by a single bucket of the {@link Schema#TABLE_TRACE_BY_SERVICE_SPAN} and{@link Schema#TABLE_TRACE_BY_SERVICE_REMOTE_SERVICE}, in seconds. Default: 1 day if the window constant has microsecond precision, the division produces negative getValuesReturns a set of annotation getValues and tags joined on equals, delimited by <p>Values over {@link RecyclableBuffers#SHORT_STRING_LENGTH} are not considered. Zipkin's{@link QueryRequest#annotationQuery()} are equals match. Not all values are lookup values. Forexample, {@code sql.query} isn't something that is likely to be looked up by value and indexingthat could add a potentially kilobyte partition key on {@link Schema#TABLE_SPAN}QueryRequest#annotationQuery() as very unlikely to be in the query search is possible by key alone timestamps can collide, so we need to add some random digits on end before using them as serviceSpanKeysC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/DefaultSessionFactory.javaDefaultSessionFactoryinitializeUDTsinitializeUDTs(com.datastax.oss.driver.api.core.CqlSession,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/DefaultSessionFactory.classbuildSessionbuildSession(zipkin2.storage.cassandra.CassandraStorage)DefaultSessionFactory()Class<Schema>"Skipping schema check on keyspace {} as ensureSchema was false"Skipping schema check on keyspace {} as ensureSchema was false"USE "USE ksOptional<KeyspaceMetadata>? extends KeyspaceMetadataSupplier<? extends KeyspaceMetadata>orElse(com.datastax.oss.driver.api.core.metadata.schema.KeyspaceMetadata)Stream<KeyspaceMetadata>BaseStream<KeyspaceMetadata,Stream<KeyspaceMetadata>>Optional<? extends KeyspaceMetadata>? extends Optional<? extends KeyspaceMetadata>Supplier<? extends Optional<? extends KeyspaceMetadata>>? super KeyspaceMetadataFunction<? super KeyspaceMetadata,? extends Optional<? extends U>>Function<? super KeyspaceMetadata,? extends U>Predicate<? super KeyspaceMetadata>Consumer<? super KeyspaceMetadata>codecRegistryannotationUDTCodecOptional<UserDefinedType>? extends UserDefinedTypeSupplier<? extends UserDefinedType>orElse(com.datastax.oss.driver.api.core.type.UserDefinedType)Stream<UserDefinedType>BaseStream<UserDefinedType,Stream<UserDefinedType>>Optional<? extends UserDefinedType>? extends Optional<? extends UserDefinedType>Supplier<? extends Optional<? extends UserDefinedType>>? super UserDefinedTypeFunction<? super UserDefinedType,? extends Optional<? extends U>>Function<? super UserDefinedType,? extends U>Predicate<? super UserDefinedType>Consumer<? super UserDefinedType>"annotation"endpointUDTCodecTypeCodec<?>"Registering endpoint and annotation UDTs to keyspace {}"Registering endpoint and annotation UDTs to keyspace {}Creates a session and ensures schema if configured. Closes the cluster and session if anyexception occurred. don't leak on unexpected exception!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/EndpointCodec.javaEndpointCodecEndpointCodec(com.datastax.oss.driver.api.core.type.codec.TypeCodec)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/EndpointCodec.classMappingCodec<UdtValue,Endpoint>TypeCodec<Endpoint>GenericType<Endpoint>format(zipkin2.Endpoint)encode(zipkin2.Endpoint,com.datastax.oss.driver.api.core.ProtocolVersion)outerToInner(zipkin2.Endpoint)MappingCodec<UdtValue,Endpoint>(com.datastax.oss.driver.api.core.type.codec.TypeCodec,com.datastax.oss.driver.api.core.type.reflect.GenericType)"service"SettableByName<UdtValue>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/data/SettableByName.classSettableByNameSettableByName<>setString(java.lang.String,java.lang.String)setTupleValue(java.lang.String,com.datastax.oss.driver.api.core.data.TupleValue)setUdtValue(java.lang.String,com.datastax.oss.driver.api.core.data.UdtValue)setMap(java.lang.String,java.util.Map,java.lang.Class,java.lang.Class)setSet(java.lang.String,java.util.Set,java.lang.Class)setList(java.lang.String,java.util.List,java.lang.Class)setToken(java.lang.String,com.datastax.oss.driver.api.core.metadata.token.Token)setCqlDuration(java.lang.String,com.datastax.oss.driver.api.core.data.CqlDuration)setInetAddress(java.lang.String,java.net.InetAddress)setUuid(java.lang.String,java.util.UUID)setBigDecimal(java.lang.String,java.math.BigDecimal)setBigInteger(java.lang.String,java.math.BigInteger)setByteBuffer(java.lang.String,java.nio.ByteBuffer)setLocalTime(java.lang.String,java.time.LocalTime)setLocalDate(java.lang.String,java.time.LocalDate)setInstant(java.lang.String,java.time.Instant)setShort(java.lang.String,short)setLong(java.lang.String,long)setInt(java.lang.String,int)setFloat(java.lang.String,float)setDouble(java.lang.String,double)setByte(java.lang.String,byte)setBool(java.lang.String,boolean)setBoolean(java.lang.String,boolean)set(java.lang.String,java.lang.Object,java.lang.Class)set(java.lang.String,java.lang.Object,com.datastax.oss.driver.api.core.type.reflect.GenericType)set(java.lang.String,java.lang.Object,com.datastax.oss.driver.api.core.type.codec.TypeCodec)setToNull(java.lang.String)getType(java.lang.String)setBytesUnsafe(java.lang.String,java.nio.ByteBuffer)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertSpan.javaInsertSpanTABLE_SPANInsertSpan(zipkin2.storage.cassandra.InsertSpan.Factory,zipkin2.storage.cassandra.InsertSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertSpan.classResultSetFutureCall<Void>Mapper<AsyncResultSet,Void>Function<AsyncResultSet,Void>shared()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertSpan$Input.classInsertSpan$Inputdebug()annotation_queryannotation_query()tags()annotations()r_epr_ep()l_epl_ep()duration()ts()span()kind()parent_id()trace_id()trace_id_hightrace_id_high()ts_uuid()InputInput()create(zipkin2.storage.cassandra.InsertSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertSpan$Factory.classInsertSpan$FactorynewInputnewInput(zipkin2.Span,java.util.UUID)Factory(com.datastax.oss.driver.api.core.CqlSession,boolean,boolean)preparedStatementinsertQuery" (trace_id,trace_id_high,ts_uuid,parent_id,id,kind,span,ts,duration,l_ep,r_ep,annotations,tags,debug,shared)"
        + " VALUES (:trace_id,:trace_id_high,:ts_uuid,:parent_id,:id,:kind,:span,:ts,:duration,:l_ep,:r_ep,:annotations,:tags,:debug,:shared)" (trace_id,trace_id_high,ts_uuid,parent_id,id,kind,span,ts,duration,l_ep,r_ep,annotations,tags,debug,shared) VALUES (:trace_id,:trace_id_high,:ts_uuid,:parent_id,:id,:kind,:span,:ts,:duration,:l_ep,:r_ep,:annotations,:tags,:debug,:shared)",shared)",shared)",shared, l_service, annotation_query)",shared, l_service, annotation_query)",:shared)",:shared)",:shared, :l_service, :annotation_query)",:shared, :l_service, :annotation_query)boundSettableByName<BoundStatementBuilder>SettableByIndex<BoundStatementBuilder>"ts_uuid""trace_id""trace_id_high""parent_id""ts""l_ep""r_ep"Class<String>"l_service"l_service"annotation_query"com.datastax.oss.driver.api.core.cqlStatement<?>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/cqlcqlC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/cql/Statement.classStatement"Input""InsertSpan"TLDR: we are guarding against setting null, as doing so implies tombstones. We are dodging setXto keep code simpler than other alternatives described below.<p>If there's consistently 8 tombstones (nulls) per row, then we'll only need 125 spans in atrace (rows in a partition) to trigger the `tombstone_warn_threshold warnings being logged inthe C* nodes. And if we go to 12500 spans in a trace then that whole trace partition wouldbecome unreadable. Cassandra warns at a 1000 tombstones in any query, and fails on 100000tombstones.<p>There's also a small question about disk usage efficiency. Each tombstone is a cell nameand basically empty cell value entry stored on disk. Given that the cells are, apart from tagsand annotations, generally very small then this could be proportionally an unnecessary waste ofdisk.<p>To avoid this relying upon a number of variant prepared statements for inserting a span isthe normal practice.<p>Another popular practice is to insert those potentially null columns as separate statements(and optionally put them together into UNLOGGED batches). This works as multiple writes to thesame partition has little overhead, and here we're not worried about lack of isolation betweenthose writes, as the write is asynchronous anyway. An example of this approach is in thecassandra-reaper project here: https://github.com/thelastpickle/cassandra-reaper/blob/master/src/server/src/main/java/io/cassandrareaper/storage/CassandraStorage.java#L622-L642 Don't set null as we don't want to add tombstonesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertTraceByServiceRemoteService.javaInsertTraceByServiceRemoteServiceTABLE_TRACE_BY_SERVICE_REMOTE_SERVICEInsertTraceByServiceRemoteService(zipkin2.storage.cassandra.InsertTraceByServiceRemoteService.Factory,zipkin2.storage.cassandra.InsertTraceByServiceRemoteService.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertTraceByServiceRemoteService.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertTraceByServiceRemoteService$Input.classInsertTraceByServiceRemoteService$Inputbucket()remote_serviceremote_service()service()create(zipkin2.storage.cassandra.InsertTraceByServiceRemoteService.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertTraceByServiceRemoteService$Factory.classInsertTraceByServiceRemoteService$FactorynewInput(java.lang.String,java.lang.String,int,java.util.UUID,java.lang.String)Factory(com.datastax.oss.driver.api.core.CqlSession,boolean)" (service,remote_service,bucket,ts,trace_id)"
          + " VALUES (?,?,?,?,?)" (service,remote_service,bucket,ts,trace_id) VALUES (?,?,?,?,?)"InsertTraceByServiceRemoteService"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertTraceByServiceSpan.javaInsertTraceByServiceSpanInsertTraceByServiceSpan(zipkin2.storage.cassandra.InsertTraceByServiceSpan.Factory,zipkin2.storage.cassandra.InsertTraceByServiceSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/InsertTraceByServiceSpan.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertTraceByServiceSpan$Input.classInsertTraceByServiceSpan$Inputcreate(zipkin2.storage.cassandra.InsertTraceByServiceSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/InsertTraceByServiceSpan$Factory.classInsertTraceByServiceSpan$FactorynewInput(java.lang.String,java.lang.String,int,java.util.UUID,java.lang.String,long)" (service,span,bucket,ts,trace_id,duration)"
        + " VALUES (?,?,?,?,?,?)" (service,span,bucket,ts,trace_id,duration) VALUES (?,?,?,?,?,?)durationMillis"InsertTraceByServiceSpan"While {@link zipkin2.Span#duration()} cannot be zero, zero duration in milliseconds ispermitted, as it implies the span took less than 1 millisecond (1-999us).C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/LazySession.javaLazySessionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/LazySession.classhealthCheck()LazySession(zipkin2.storage.cassandra.CassandraStorage.SessionFactory,zipkin2.storage.cassandra.CassandraStorage)"SELECT trace_id FROM "SELECT trace_id FROM " limit 1" limit 1maybeSession guarded by session cached here to warn only once when schema problems existC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/Schema.javaSchemaresourceToStringSchema()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/Schema.classreviseCQLreviseCQL(com.datastax.oss.driver.api.core.Version,java.lang.String)applyCqlFileapplyCqlFile(java.lang.String,com.datastax.oss.driver.api.core.CqlSession,java.lang.String)hasUpgrade2_remoteServicehasUpgrade2_remoteService(com.datastax.oss.driver.api.core.metadata.schema.KeyspaceMetadata)hasUpgrade1_autocompleteTagshasUpgrade1_autocompleteTags(com.datastax.oss.driver.api.core.metadata.schema.KeyspaceMetadata)ensureExistsensureExists(java.lang.String,boolean,com.datastax.oss.driver.api.core.CqlSession)ensureVersionensureVersion(com.datastax.oss.driver.api.core.metadata.Metadata)ensureKeyspaceMetadataensureKeyspaceMetadata(com.datastax.oss.driver.api.core.CqlSession,java.lang.String)readMetadatareadMetadata(com.datastax.oss.driver.api.core.CqlSession,java.lang.String)UPGRADE_2UPGRADE_1INDEX_RESOURCESCHEMA_RESOURCEDEFAULT_KEYSPACETABLE_DEPENDENCY"trace_by_service_span"trace_by_service_span"trace_by_service_remote_service"trace_by_service_remote_service"span_by_service"span_by_service"remote_service_by_service"remote_service_by_service"autocomplete_tags"autocomplete_tags"zipkin2""/zipkin2-schema.cql"/zipkin2-schema.cql"/zipkin2-schema-indexes.cql"/zipkin2-schema-indexes.cql"/zipkin2-schema-upgrade-1.cql"/zipkin2-schema-upgrade-1.cql"/zipkin2-schema-upgrade-2.cql"/zipkin2-schema-upgrade-2.cqlkeyspaceMetadatareplicationhasAutocompleteTagshasRemoteService"SimpleStrategy"SimpleStrategy"class""replication_factor"replication_factor"running with RF=1, this is not suitable for production. Optimal is 3+"running with RF=1, this is not suitable for production. Optimal is 3+"schema lacks autocomplete indexing: apply {}, or set CassandraStorage.ensureSchema=true"schema lacks autocomplete indexing: apply {}, or set CassandraStorage.ensureSchema=true"schema lacks remote service indexing: apply {}, or set CassandraStorage.ensureSchema=true"schema lacks remote service indexing: apply {}, or set CassandraStorage.ensureSchema=trueMetadataMetadata(boolean,boolean)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/Schema$Metadata.classSchema$Metadata"Cannot read keyspace metadata for keyspace: %s and cluster: %s"Cannot read keyspace metadata for keyspace: %s and cluster: %sEntry<UUID,Node>Set<Entry<UUID,Node>>Collection<Entry<UUID,Node>>Iterable<Entry<UUID,Node>>Map<UUID,Node>? super Node? extends NodeBiFunction<? super Node,? super Node,? extends Node>merge(java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node,java.util.function.BiFunction)? super UUIDBiFunction<? super UUID,? super Node,? extends Node>compute(java.util.UUID,java.util.function.BiFunction)computeIfPresent(java.util.UUID,java.util.function.BiFunction)Function<? super UUID,? extends Node>computeIfAbsent(java.util.UUID,java.util.function.Function)replace(java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node)replace(java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node,com.datastax.oss.driver.api.core.metadata.Node)putIfAbsent(java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node)BiConsumer<? super UUID,? super Node>getOrDefault(java.lang.Object,com.datastax.oss.driver.api.core.metadata.Node)Collection<Node>Iterable<Node>Set<UUID>Collection<UUID>Iterable<UUID>? extends UUIDMap<? extends UUID,? extends Node>put(java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node)setValue(com.datastax.oss.driver.api.core.metadata.Node)"node had no version: "node had no version: "3.11.3"3.11.3"Node %s is running Cassandra %s, but minimum version is 3.11.3"Node %s is running Cassandra %s, but minimum version is 3.11.3"No nodes in the cluster"No nodes in the clusterOptional<TableMetadata>? extends TableMetadataSupplier<? extends TableMetadata>orElse(com.datastax.oss.driver.api.core.metadata.schema.TableMetadata)Stream<TableMetadata>BaseStream<TableMetadata,Stream<TableMetadata>>Optional<? extends TableMetadata>? extends Optional<? extends TableMetadata>Supplier<? extends Optional<? extends TableMetadata>>? super TableMetadataFunction<? super TableMetadata,? extends Optional<? extends U>>Function<? super TableMetadata,? extends U>Predicate<? super TableMetadata>Consumer<? super TableMetadata>"Installing schema {} for keyspace {}"Installing schema {} for keyspace {}"Installing indexes {} for keyspace {}"Installing indexes {} for keyspace {}"Upgrading schema {}"Upgrading schema {}cmd";";" *AND [^\\s]*read_repair_chance = 0\n" *AND [^\s]*read_repair_chance = 0
 refresh metadata since we've installed the schema read_repair_chance options were removed and make Cassandra crash starting in v4 See https://cassandra.apache.org/doc/latest/operating/read_repair.html#background-read-repairC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectAutocompleteValues.javaSelectAutocompleteValuesSelectAutocompleteValues(zipkin2.storage.cassandra.SelectAutocompleteValues.Factory,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectAutocompleteValues.classResultSetFutureCall<AsyncResultSet>Base<AsyncResultSet>Call<AsyncResultSet>Mapper<AsyncResultSet,AsyncResultSet>Function<AsyncResultSet,AsyncResultSet>create(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectAutocompleteValues$Factory.classSelectAutocompleteValues$FactoryFactory(com.datastax.oss.driver.api.core.CqlSession)"SELECT value"
        + " FROM "SELECT value FROM " WHERE key=?"
        + " LIMIT " WHERE key=? LIMIT FlatMapper<AsyncResultSet,R>Callback<AsyncResultSet>ErrorHandler<AsyncResultSet>Mapper<AsyncResultSet,R>Call<AsyncResultSet>()AccumulateAllResults<List<String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AccumulateAllResults.classAccumulateAllResultsFlatMapper<AsyncResultSet,List<String>>AccumulateAllResults<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectDependencies.javaSelectDependenciesSelectDependencies(zipkin2.storage.cassandra.SelectDependencies.Factory,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectDependencies.classResultSetFutureCall<List<DependencyLink>>Base<List<DependencyLink>>Mapper<AsyncResultSet,List<DependencyLink>>Function<AsyncResultSet,List<DependencyLink>>create(long,long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectDependencies$Factory.classSelectDependencies$Factory"SELECT parent,child,errors,calls"
        + " FROM "SELECT parent,child,errors,calls FROM " WHERE day IN ?" WHERE day IN ?Class<LocalDate>"SelectDependencies{days="SelectDependencies{days=rsunmergedrowIterable<Row>com.datastax.oss.driver.api.coreAsyncPagingIterable<Row,AsyncResultSet>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/AsyncPagingIterable.classAsyncPagingIterablecurrentPagecurrentPage()MappedAsyncPagingIterable<>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/MappedAsyncPagingIterable.classMappedAsyncPagingIterableAsyncPagingIterable<>TargetTMappedAsyncPagingIterable<TargetT>AsyncPagingIterable<TargetT,MappedAsyncPagingIterable<TargetT>>? super ElementT? extends TargetTFunction<? super ElementT,? extends TargetT>? super RowFunction<? super Row,? extends TargetT>wasAppliedwasApplied()CompletionStage<SelfT>fetchNextPagefetchNextPage()hasMorePageshasMorePages()one()remaining()getExecutionInfogetExecutionInfo()getColumnDefinitionsgetColumnDefinitions()"errors"errors"calls"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectFromSpan.javaSelectFromSpanAccumulateAllResults<List<Span>>FlatMapper<AsyncResultSet,List<Span>>READ_SPANSC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectFromSpan.classSelectFromSpan(zipkin2.storage.cassandra.SelectFromSpan.Factory,java.util.Set,int)limit_newFlatMappernewFlatMapper(zipkin2.storage.QueryRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectFromSpan$Factory.classSelectFromSpan$FactorynewCall(java.lang.Iterable)newCall(java.lang.String)Factory(com.datastax.oss.driver.api.core.CqlSession,boolean,int)groupByTraceId"SELECT trace_id_high,trace_id,parent_id,id,kind,span,ts,duration,l_ep,r_ep,annotations,tags,debug,shared"
          + " FROM "SELECT trace_id_high,trace_id,parent_id,id,kind,span,ts,duration,l_ep,r_ep,annotations,tags,debug,shared FROM " WHERE trace_id IN ?"
          + " LIMIT ?" WHERE trace_id IN ? LIMIT ?normalizedTraceIds"SelectFromSpan{trace_id="SelectFromSpan{trace_id=", limit_=", limit_=SelectSpansByTraceIdsSelectSpansByTraceIds(zipkin2.storage.cassandra.SelectFromSpan.Factory,zipkin2.storage.QueryRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectFromSpan$SelectSpansByTraceIds.classSelectFromSpan$SelectSpansByTraceIds"SelectSpansByTraceIds{limit="SelectSpansByTraceIds{limit=ReadSpansReadSpans()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectFromSpan$ReadSpans.classSelectFromSpan$ReadSpansSupplier<List<Span>>ArrayList<>()AbstractList<>()ArrayList<>(java.util.Collection)ArrayList<>(int)BiConsumer<Row,List<Span>>andThen(java.util.function.BiConsumer)BiConsumer<? super Row,? super List<Span>>accept(java.lang.Object,java.lang.Object)accept(com.datastax.oss.driver.api.core.cql.Row,java.util.List)"ReadSpans{}"ReadSpans{} Unless we are strict, truncate the trace ID to 64bit (encoded as 16 characters)amount of spans per trace is almost always larger than trace IDs Switched Set to List which is higher overhead, as have to copy into it, but avoids this: com.datastax.oss.driver.api.core.type.codec.CodecNotFoundException: Codec not found for requested operation: [List(TEXT, not frozen) <-> java.util.Set<java.lang.String>] Cassandra always looks up traces by 64-bit trace ID, so we have to unconditionally filter when strict trace ID is enabled.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectRemoteServiceNames.javaSelectRemoteServiceNamesSelectRemoteServiceNames(zipkin2.storage.cassandra.SelectRemoteServiceNames.Factory,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectRemoteServiceNames.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectRemoteServiceNames$Factory.classSelectRemoteServiceNames$Factory"SELECT remote_service"
        + " FROM "SELECT remote_service FROM " WHERE service=?"
        + " LIMIT " WHERE service=? LIMIT "SelectSpanNames{service="SelectSpanNames{service=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectServiceNames.javaSelectServiceNamesSelectServiceNames(zipkin2.storage.cassandra.SelectServiceNames.Factory)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectServiceNames.classcreate()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectServiceNames$Factory.classSelectServiceNames$Factory"SELECT DISTINCT service"
          + " FROM "SELECT DISTINCT service FROM "SelectServiceNames{}"SelectServiceNames{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectSpanNames.javaSelectSpanNamesSelectSpanNames(zipkin2.storage.cassandra.SelectSpanNames.Factory,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectSpanNames.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectSpanNames$Factory.classSelectSpanNames$Factory"SELECT span"
        + " FROM "SELECT span FROM C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromServiceRemoteService.javaSelectTraceIdsFromServiceRemoteServiceSelectTraceIdsFromServiceRemoteService(zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Factory,com.datastax.oss.driver.api.core.cql.PreparedStatement,zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromServiceRemoteService.classwithServicewithService(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceRemoteService$Input.classSelectTraceIdsFromServiceRemoteService$Inputlimit_()end_tsend_ts()start_tsstart_ts()newFlatMapper(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceRemoteService$Factory.classSelectTraceIdsFromServiceRemoteService$FactorynewCall(zipkin2.storage.cassandra.SelectTraceIdsFromServiceRemoteService.Input)newCall(java.util.List)newInput(java.lang.String,java.lang.String,int,zipkin2.storage.cassandra.CassandraSpanStore.TimestampRange,int)"SELECT trace_id,ts"
        + " FROM "SELECT trace_id,ts FROM " WHERE service=? AND remote_service=?"
        + " AND bucket=?"
        + " AND ts>=?"
        + " AND ts<=?"
        + " LIMIT ?" WHERE service=? AND remote_service=? AND bucket=? AND ts>=? AND ts<=? LIMIT ?inputsbucketedTraceIdCallsAggregateIntoMap<String,Long>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AggregateIntoMap.classAggregateIntoMapAggregateIntoMap<String,Long>(java.util.List)AggregateIntoMap<>AggregateIntoMap(java.util.List)AccumulateAllResults<Map<String,Long>>FlatMapper<AsyncResultSet,Map<String,Long>>inputTemplatesFlatMapServicesToInputsFlatMapServicesToInputs(java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceRemoteService$Factory$FlatMapServicesToInputs.classSelectTraceIdsFromServiceRemoteService$Factory$FlatMapServicesToInputsscopedInputs"SelectTraceIdsFromServiceRemoteService""FlatMapServicesToInputs{"FlatMapServicesToInputs{StatementBuilder<BoundStatementBuilder,BoundStatement>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/cql/StatementBuilder.classStatementBuilderStatementBuilder<>setPageSizesetPageSize(int)Statement<>Map<String,ByteBuffer>buildCustomPayloadbuildCustomPayload()setNowInSecondssetNowInSeconds(int)setNodesetNode(com.datastax.oss.driver.api.core.metadata.Node)setTimeoutsetTimeout(java.time.Duration)setSerialConsistencyLevelsetSerialConsistencyLevel(com.datastax.oss.driver.api.core.ConsistencyLevel)setConsistencyLevelsetConsistencyLevel(com.datastax.oss.driver.api.core.ConsistencyLevel)setFetchSizesetFetchSize(int)setPagingStatesetPagingState(java.nio.ByteBuffer)setDefaultTimestampsetDefaultTimestamp(long)setQueryTimestampsetQueryTimestamp(long)disableTracingdisableTracing()enableTracingenableTracing()setTracingsetTracing(boolean)setTracing()setIdempotencesetIdempotence(java.lang.Boolean)clearCustomPayloadclearCustomPayload()addCustomPayloadaddCustomPayload(java.lang.String,java.nio.ByteBuffer)setRoutingTokensetRoutingToken(com.datastax.oss.driver.api.core.metadata.token.Token)ByteBuffer[]setRoutingKeysetRoutingKey(java.nio.ByteBuffer[])setRoutingKey(java.nio.ByteBuffer)setRoutingKeyspacesetRoutingKeyspace(java.lang.String)setRoutingKeyspace(com.datastax.oss.driver.api.core.CqlIdentifier)setExecutionProfilesetExecutionProfile(com.datastax.oss.driver.api.core.config.DriverExecutionProfile)setExecutionProfileNamesetExecutionProfileName(java.lang.String)StatementBuilder(com.datastax.oss.driver.api.core.cql.Statement)StatementBuilder<BoundStatementBuilder,BoundStatement>(com.datastax.oss.driver.api.core.cql.BoundStatement)StatementBuilder()StatementBuilder<BoundStatementBuilder,BoundStatement>()nowInSecondsserialConsistencyLevelconsistencyLevelpageSizepagingStateidempotentroutingTokenroutingKeyroutingKeyspaceexecutionProfileexecutionProfileNameApplies all deferred service names to all input templates fan out every input for each service nameC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan.javaSelectTraceIdsFromServiceSpanSelectTraceIdsFromServiceSpan(zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Factory,com.datastax.oss.driver.api.core.cql.PreparedStatement,zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan$Input.classSelectTraceIdsFromServiceSpan$Inputend_durationend_duration()start_durationstart_duration()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan$Factory.classSelectTraceIdsFromServiceSpan$FactorynewCall(zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Input)newInput(java.lang.String,java.lang.String,int,java.lang.Long,java.lang.Long,zipkin2.storage.cassandra.CassandraSpanStore.TimestampRange,int)selectTraceIdsByServiceSpanNameAndDurationselectTraceIdsByServiceSpanNamebaseQuery" WHERE service=?"
        + " AND span=?"
        + " AND bucket=?"
        + " AND ts>=?"
        + " AND ts<=?" WHERE service=? AND span=? AND bucket=? AND ts>=? AND ts<=?" LIMIT ?" LIMIT ?" AND duration>=?"
        + " AND duration<=?"
        + " LIMIT ?" AND duration>=? AND duration<=? LIMIT ?minDurationMicrosmaxDurationMicrosC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan$Factory$FlatMapServicesToInputs.classSelectTraceIdsFromServiceSpan$Factory$FlatMapServicesToInputs"SelectTraceIdsFromServiceSpan"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromSpan.javaSelectTraceIdsFromSpanSelectTraceIdsFromSpan(zipkin2.storage.cassandra.SelectTraceIdsFromSpan.Factory,com.datastax.oss.driver.api.core.cql.PreparedStatement,zipkin2.storage.cassandra.SelectTraceIdsFromSpan.Input)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromSpan.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromSpan$Input.classSelectTraceIdsFromSpan$Inputl_service()newCall(java.lang.String,java.lang.String,zipkin2.storage.cassandra.CassandraSpanStore.TimestampRange,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromSpan$Factory.classSelectTraceIdsFromSpan$FactorywithServiceAndAnnotationQuerywithAnnotationQueryquerySuffix"annotation_query LIKE ?"
        + " AND ts_uuid>=?"
        + " AND ts_uuid<=?"
        + " LIMIT ?"
        + " ALLOW FILTERING"annotation_query LIKE ? AND ts_uuid>=? AND ts_uuid<=? LIMIT ? ALLOW FILTERING" WHERE " WHERE " WHERE l_service=:l_service"
        + " AND " WHERE l_service=:l_service AND "SelectTraceIdsFromSpan"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/SelectTraceIdsFromSpan$AccumulateTraceIdTsLong.classSelectTraceIdsFromSpan$AccumulateTraceIdTsLongAccumulateTraceIdTsLongAccumulateTraceIdTsLong()Supplier<Map<String,Long>>LinkedHashMap<>()AbstractMap<>()HashMap<>(java.util.Map)HashMap<>()HashMap<>(int)HashMap<>(int,float)LinkedHashMap<>(int,float,boolean)LinkedHashMap<>(java.util.Map)LinkedHashMap<>(int)LinkedHashMap<>(int,float)BiConsumer<Row,Map<String,Long>>? super Map<String,Long>BiConsumer<? super Row,? super Map<String,Long>>accept(com.datastax.oss.driver.api.core.cql.Row,java.util.Map)"AccumulateTraceIdTsLong{}"AccumulateTraceIdTsLong{}Selects from the {@link Schema#TABLE_SPAN} using data in the partition key or SASI indexes.<p>Note: While queries here use "ALLOW FILTERING", they do so within a SASI clause, and onlyreturn (traceId, timestamp) tuples. This means the entire spans table is not scanned, unless thetime range implies that.<p>The spans table is sorted descending by timestamp. When a query includes only a time range,the first N rows are already in the correct order. However, the cardinality of rows is a functionof span count, not trace count. This implies an over-fetch function based on average span countper trace in order to achieve N distinct trace IDs. For example if there are 3 spans per trace,and over-fetch function of 3 * intended limit will work. See {@linkCassandraStorage#indexFetchMultiplier} for an associated parameter. because results are not distinct no timestampC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/CassandraStorageBuilder.javaCONNECTION_MAX_REQUESTSCONNECTION_POOL_LOCAL_SIZE4000100_00040960LinkedHashMap<DriverOption,Integer>HashMap<DriverOption,Integer>AbstractMap<DriverOption,Integer>LinkedHashMap<DriverOption,Integer>()merge(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer,java.util.function.BiFunction)? super DriverOptionBiFunction<? super DriverOption,? super Integer,? extends Integer>compute(com.datastax.oss.driver.api.core.config.DriverOption,java.util.function.BiFunction)computeIfPresent(com.datastax.oss.driver.api.core.config.DriverOption,java.util.function.BiFunction)Function<? super DriverOption,? extends Integer>computeIfAbsent(com.datastax.oss.driver.api.core.config.DriverOption,java.util.function.Function)replace(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer)replace(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer,java.lang.Integer)putIfAbsent(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer)BiConsumer<? super DriverOption,? super Integer>Entry<DriverOption,Integer>Set<Entry<DriverOption,Integer>>Collection<Entry<DriverOption,Integer>>Iterable<Entry<DriverOption,Integer>>Set<DriverOption>Collection<DriverOption>Iterable<DriverOption>? extends DriverOptionMap<? extends DriverOption,? extends Integer>put(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer)AbstractMap<DriverOption,Integer>()Node<DriverOption,Integer>TreeNode<DriverOption,Integer>newTreeNode(int,com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer,java.util.HashMap.Node)newNode(int,com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer,java.util.HashMap.Node)Node<DriverOption,Integer>[]putVal(int,com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer,boolean,boolean)HashMap<DriverOption,Integer>(java.util.Map)HashMap<DriverOption,Integer>()HashMap<DriverOption,Integer>(int)HashMap<DriverOption,Integer>(int,float)LinkedHashMap<DriverOption,Integer>(int,float,boolean)LinkedHashMap<DriverOption,Integer>(java.util.Map)LinkedHashMap<DriverOption,Integer>(int)LinkedHashMap<DriverOption,Integer>(int,float)defaultKeyspace"keys == null"keys == nullLinkedHashSet<E>HashSet<E>LinkedHashSet<E>(java.util.Collection)AbstractSet<E>()HashSet<E>(int,float,boolean)HashSet<E>(int)HashSet<E>(int,float)HashSet<E>(java.util.Collection)HashSet<E>()LinkedHashSet<E>()LinkedHashSet<E>(int)LinkedHashSet<E>(int,float)"autocompleteTtl <= 0"autocompleteTtl <= 0"autocompleteCardinality <= 0"autocompleteCardinality <= 0"contactPoints == null"contactPoints == null"localDc == null"localDc == null"maxConnections <= 0"maxConnections <= 0"keyspace == null"keyspace == null"maxTraceCols <= 0"maxTraceCols <= 0"indexFetchMultiplier <= 0"indexFetchMultiplier <= 0 Ex. 5 site tags with cardinality 4000 each Driver v4 requires this, so take a guess! When we are wrong, the user can override anyway Zipkin collectors can create out a lot of async requests in bursts, so we increase some properties beyond the norm.DefaultDriverOption#CONNECTION_POOL_LOCAL_SIZE Ported from java-driver v3 PoolingOptions.setMaxConnectionsPerHost(HostDistance.LOCAL, 8)DefaultDriverOption#CONNECTION_MAX_REQUESTS Ported from java-driver v3 PoolingOptions.setMaxQueueSize(40960)Comma separated list of host addresses part of Cassandra cluster. You can also specify a customport with 'host:port'. Defaults to localhost on port 9042 *Name of the datacenter that will be considered "local" for latency load balancing. When unset,load-balancing is round-robin.Max pooled connections per datacenter-local host. Defaults to 8Will throw an exception on startup if authentication fails. No default.Use ssl for connection. Defaults to false.Keyspace to store span and index data. Defaults to "zipkin3"Spans have multiple values for the same id. For example, a client and server contribute to thesame span id. When searching for spans by id, the amount of results may be larger than the ids.This defines a threshold which accommodates this situation, without looking for an unboundednumber of results.How many more index rows to fetch than the user-supplied query limit. Defaults to 3.<p>Backend requests will request {@link QueryRequest#limit()} times this factor rows fromCassandra indexes in attempts to return {@link QueryRequest#limit()} traces.<p>Indexing in cassandra will usually have more rows than trace identifiers due to factorsincluding table design and collection implementation. As there's no way to DISTINCT outduplicates server-side, this over-fetches client-side when {@code indexFetchMultiplier} &gt;1.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/HostAndPort.javaHostAndPortvalidatePortvalidatePort(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/HostAndPort.classHostAndPort(java.lang.String,int)"HostAndPort{host="HostAndPort{host=hostPortdefaultPortendHostIndex"hostPort == null"hostPort == null" contains an invalid IPv6 literal" contains an invalid IPv6 literalcolonIndexnextColonIndex" is an invalid IPv6 literal" is an invalid IPv6 literal" has an empty host" has an empty hostportString" has an invalid port" has an invalid port Similar to com.google.common.net.HostAndPort, but no guava depReturns the unvalidated hostname or IP literalReturns the portConstructs a host-port pair from the given string, defaulting to the indicated port if absent Bracketed IPv6 reuse our IPv6 validator only 1 colon isDigitC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/KeyspaceMetadataUtil.javaKeyspaceMetadataUtilKeyspaceMetadataUtil()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/KeyspaceMetadataUtil.classOptional<Object>Supplier<? extends Object>Stream<Object>BaseStream<Object,Stream<Object>>Optional<? extends Object>? extends Optional<? extends Object>Supplier<? extends Optional<? extends Object>>Function<? super Object,? extends Optional<? extends U>>Function<? super Object,? extends U>Map<CqlIdentifier,Object>Optional<Map<CqlIdentifier,Object>>? super Map<CqlIdentifier,Object>Function<? super Map<CqlIdentifier,Object>,? extends Optional<? extends U>>? extends Map<CqlIdentifier,Object>Supplier<? extends Map<CqlIdentifier,Object>>Stream<Map<CqlIdentifier,Object>>BaseStream<Map<CqlIdentifier,Object>,Stream<Map<CqlIdentifier,Object>>>Optional<? extends Map<CqlIdentifier,Object>>? extends Optional<? extends Map<CqlIdentifier,Object>>Supplier<? extends Optional<? extends Map<CqlIdentifier,Object>>>Function<? super Map<CqlIdentifier,Object>,? extends U>Predicate<? super Map<CqlIdentifier,Object>>Consumer<? super Map<CqlIdentifier,Object>>Function<Map<CqlIdentifier,Object>,Optional<? extends Object>>Function<TableMetadata,Map<CqlIdentifier,Object>>Function<TableMetadata,V>Function<? super Map<CqlIdentifier,Object>,? extends V>Function<V,Map<CqlIdentifier,Object>>Function<? super V,? extends TableMetadata>apply(com.datastax.oss.driver.api.core.metadata.schema.TableMetadata)Function<Map<CqlIdentifier,Object>,V>? super Optional<? extends Object>Function<? super Optional<? extends Object>,? extends V>Function<V,Optional<? extends Object>>Function<? super V,? extends Map<CqlIdentifier,Object>>apply(java.util.Map)merge(com.datastax.oss.driver.api.core.CqlIdentifier,java.lang.Object,java.util.function.BiFunction)? super CqlIdentifierBiFunction<? super CqlIdentifier,? super Object,? extends Object>compute(com.datastax.oss.driver.api.core.CqlIdentifier,java.util.function.BiFunction)computeIfPresent(com.datastax.oss.driver.api.core.CqlIdentifier,java.util.function.BiFunction)Function<? super CqlIdentifier,? extends Object>computeIfAbsent(com.datastax.oss.driver.api.core.CqlIdentifier,java.util.function.Function)replace(com.datastax.oss.driver.api.core.CqlIdentifier,java.lang.Object)replace(com.datastax.oss.driver.api.core.CqlIdentifier,java.lang.Object,java.lang.Object)putIfAbsent(com.datastax.oss.driver.api.core.CqlIdentifier,java.lang.Object)BiConsumer<? super CqlIdentifier,? super Object>Entry<CqlIdentifier,Object>Set<Entry<CqlIdentifier,Object>>Collection<Entry<CqlIdentifier,Object>>Iterable<Entry<CqlIdentifier,Object>>Set<CqlIdentifier>Collection<CqlIdentifier>Iterable<CqlIdentifier>? extends CqlIdentifierMap<? extends CqlIdentifier,? extends Object>put(com.datastax.oss.driver.api.core.CqlIdentifier,java.lang.Object)"default_time_to_live"default_time_to_liveC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/Resources.javaResourcesResources()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/Resources.classClass<Resources>Map<String,Resources>Resources[]Constructor<Resources>? super ResourcesClass<? super Resources>TypeVariable<Class<Resources>>TypeVariable<Class<Resources>>[]C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/SessionBuilder.javaSessionBuilderREQUEST_CONSISTENCYREQUEST_DEFAULT_IDEMPOTENCEREQUEST_LOGGER_SUCCESS_ENABLEDREQUEST_LOGGER_VALUESREQUEST_TIMEOUTREQUEST_TRACKER_CLASSREQUEST_WARN_IF_SET_KEYSPACESSL_ENGINE_FACTORY_CLASSList<InetSocketAddress>parseContactPointsparseContactPoints(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/SessionBuilder.classClass<SessionBuilder>Map<String,SessionBuilder>SessionBuilder[]Constructor<SessionBuilder>? super SessionBuilderClass<? super SessionBuilder>TypeVariable<Class<SessionBuilder>>TypeVariable<Class<SessionBuilder>>[]requestLoggerClass<RequestLogger>com.datastax.oss.driver.api.core.configOngoingConfigOptions<ProgrammaticDriverConfigLoaderBuilder>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/configC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/config/OngoingConfigOptions.classOngoingConfigOptionsOngoingConfigOptions<>withDuration(com.datastax.oss.driver.api.core.config.DriverOption,java.time.Duration)withoutwithout(com.datastax.oss.driver.api.core.config.DriverOption)List<Duration>Collection<Duration>Iterable<Duration>withDurationListwithDurationList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withBytesListwithBytesList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withByteswithBytes(com.datastax.oss.driver.api.core.config.DriverOption,long)withStringMapwithStringMap(com.datastax.oss.driver.api.core.config.DriverOption,java.util.Map)withStringListwithStringList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withClasswithClass(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Class)withStringwithString(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.String)List<Double>Collection<Double>Iterable<Double>withDoubleListwithDoubleList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withDoublewithDouble(com.datastax.oss.driver.api.core.config.DriverOption,double)withLongListwithLongList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withLongwithLong(com.datastax.oss.driver.api.core.config.DriverOption,long)withIntListwithIntList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withIntwithInt(com.datastax.oss.driver.api.core.config.DriverOption,int)withBooleanListwithBooleanList(com.datastax.oss.driver.api.core.config.DriverOption,java.util.List)withBooleanwithBoolean(com.datastax.oss.driver.api.core.config.DriverOption,boolean)com.datastax.oss.driver.api.core.sessionSessionBuilder<CqlSessionBuilder,CqlSession>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/sessionC:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/session/SessionBuilder.classSessionBuilder<>addContactPointsaddContactPoints(java.util.Collection)List<TypeCodec<?>>Collection<TypeCodec<?>>Iterable<TypeCodec<?>>Predicate<Node>Map<String,Predicate<Node>>buildContextbuildContext(com.datastax.oss.driver.api.core.config.DriverConfigLoader,java.util.List,com.datastax.oss.driver.api.core.metadata.NodeStateListener,com.datastax.oss.driver.api.core.metadata.schema.SchemaChangeListener,com.datastax.oss.driver.api.core.tracker.RequestTracker,java.util.Map,java.util.Map,java.lang.ClassLoader)buildContext(com.datastax.oss.driver.api.core.config.DriverConfigLoader,com.datastax.oss.driver.api.core.session.ProgrammaticArguments)CompletionStage<CqlSession>buildDefaultSessionAsyncbuildDefaultSessionAsync()wrap(com.datastax.oss.driver.api.core.CqlSession)CompletionStage<SessionT>buildAsyncbuildAsync()withMetricRegistrywithMetricRegistry(java.lang.Object)withApplicationVersionwithApplicationVersion(java.lang.String)withApplicationNamewithApplicationName(java.lang.String)withClientIdwithClientId(java.util.UUID)withCloudProxyAddresswithCloudProxyAddress(java.net.InetSocketAddress)withCloudSecureConnectBundlewithCloudSecureConnectBundle(java.io.InputStream)withCloudSecureConnectBundle(java.net.URL)withCodecRegistrywithCodecRegistry(com.datastax.oss.driver.api.core.type.codec.registry.MutableCodecRegistry)withCloudSecureConnectBundle(java.nio.file.Path)withClassLoaderwithClassLoader(java.lang.ClassLoader)withKeyspacewithKeyspace(java.lang.String)withKeyspace(com.datastax.oss.driver.api.core.CqlIdentifier)withNodeFilterwithNodeFilter(java.util.function.Predicate)withNodeFilter(java.lang.String,java.util.function.Predicate)withLocalDatacenterwithLocalDatacenter(java.lang.String)withLocalDatacenter(java.lang.String,java.lang.String)withSslContextwithSslContext(javax.net.ssl.SSLContext)withSslEngineFactorywithSslEngineFactory(com.datastax.oss.driver.api.core.ssl.SslEngineFactory)withCredentialswithCredentials(java.lang.String,java.lang.String,java.lang.String)withCredentials(java.lang.String,java.lang.String)withAuthCredentialswithAuthCredentials(java.lang.String,java.lang.String,java.lang.String)withAuthCredentials(java.lang.String,java.lang.String)withAuthProviderwithAuthProvider(com.datastax.oss.driver.api.core.auth.AuthProvider)withRequestTrackerwithRequestTracker(com.datastax.oss.driver.api.core.tracker.RequestTracker)withSchemaChangeListenerwithSchemaChangeListener(com.datastax.oss.driver.api.core.metadata.schema.SchemaChangeListener)withNodeStateListenerwithNodeStateListener(com.datastax.oss.driver.api.core.metadata.NodeStateListener)TypeCodec[]TypeCodec<?>[]addTypeCodecsaddTypeCodecs(com.datastax.oss.driver.api.core.type.codec.TypeCodec[])addContactEndPointaddContactEndPoint(com.datastax.oss.driver.api.core.metadata.EndPoint)Collection<EndPoint>Iterable<EndPoint>addContactEndPointsaddContactEndPoints(java.util.Collection)addContactPointaddContactPoint(java.net.InetSocketAddress)defaultConfigLoaderdefaultConfigLoader(java.lang.ClassLoader)defaultConfigLoader()withConfigLoaderwithConfigLoader(com.datastax.oss.driver.api.core.config.DriverConfigLoader)SessionBuilder()SessionBuilder<CqlSessionBuilder,CqlSession>()programmaticArgumentsBuilderCallable<InputStream>cloudConfigInputStreamSet<EndPoint>programmaticContactPointsconfigLoader"LOCAL_ONE"LOCAL_ONEBiConsumer<DriverOption,Integer>accept(com.datastax.oss.driver.api.core.config.DriverOption,java.lang.Integer)arg1Class<DefaultSslEngineFactory>ArrayList<InetSocketAddress>AbstractList<InetSocketAddress>AbstractCollection<InetSocketAddress>ArrayList<InetSocketAddress>()Spliterator<InetSocketAddress>Consumer<? super InetSocketAddress>Iterator<InetSocketAddress>Stream<InetSocketAddress>BaseStream<InetSocketAddress,Stream<InetSocketAddress>>Predicate<? super InetSocketAddress>Collection<? extends InetSocketAddress>Iterable<? extends InetSocketAddress>add(java.net.InetSocketAddress)AbstractCollection<InetSocketAddress>()ListIterator<InetSocketAddress>add(int,java.net.InetSocketAddress)set(int,java.net.InetSocketAddress)Comparator<? super InetSocketAddress>UnaryOperator<InetSocketAddress>Function<InetSocketAddress,InetSocketAddress>AbstractList<InetSocketAddress>()ArrayList<InetSocketAddress>(java.util.Collection)ArrayList<InetSocketAddress>(int)contactPointparsed9042Returns a connected session. Closes the cluster if any exception occurred. Some options aren't supported by builder methods. In these cases, we use driver config See https://groups.google.com/a/lists.datastax.com/forum/#!topic/java-driver-user/Z8HrCDX47Q0 We aren't reading any resources from the classpath, but this prevents errors running in the server, where Thread.currentThread().getContextClassLoader() returns null Ported from java-driver v3 PoolingOptions.setPoolTimeoutMillis as request timeout includes that In java-driver v3, we used LatencyAwarePolicy(DCAwareRoundRobinPolicy|RoundRobinPolicy)   where DCAwareRoundRobinPolicy was used if localDc != null In java-driver v4, the default policy is token-aware and localDc is required. Hence, we use the default load balancing policy  * https://github.com/datastax/java-driver/blob/master/manual/core/load_balancing/README.md Pooling options changed dramatically from v3->v4. This is a close match. All Zipkin CQL writes are idempotent Log categories can enable query logging Only show bodies when TRACE is enabled Don't warn: ensureSchema creates the keyspace. Hence, we need to "use" it later.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AccumulateAllResults.javaFlatMapper<AsyncResultSet,T>Supplier<T>BiConsumer<Row,T>Call<T>AccumulateNextResults<T>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/AccumulateAllResults$AccumulateNextResults.classAccumulateAllResults$AccumulateNextResultsmap(com.datastax.oss.driver.api.core.cql.AsyncResultSet)AccumulateNextResultsAccumulateNextResults(java.lang.Object,java.util.function.BiConsumer,java.util.function.Function)AccumulateNextResults<T>(java.lang.Object,java.util.function.BiConsumer,java.util.function.Function)finisheraccumulatorpendingResultsFetchMoreResultsFetchMoreResults(com.datastax.oss.driver.api.core.cql.AsyncResultSet)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/AccumulateAllResults$FetchMoreResults.classAccumulateAllResults$FetchMoreResultsresultSetCompletableFuture<AsyncResultSet>Future<AsyncResultSet>? extends CompletionStage<AsyncResultSet>Function<Throwable,? extends CompletionStage<AsyncResultSet>>? extends AsyncResultSetFunction<Throwable,? extends AsyncResultSet>? super AsyncResultSetBiConsumer<? super AsyncResultSet,? super Throwable>BiFunction<? super AsyncResultSet,Throwable,? extends U>Function<? super AsyncResultSet,? extends CompletionStage<U>>CompletionStage<? extends AsyncResultSet>Consumer<? super AsyncResultSet>Function<? super AsyncResultSet,U>BiConsumer<? super AsyncResultSet,? super U>BiFunction<? super AsyncResultSet,? super U,? extends V>Function<? super AsyncResultSet,? extends U>"FetchMoreResults{"FetchMoreResults{accept(com.datastax.oss.driver.api.core.cql.Row,java.lang.Object)BiConsumer<? super Row,? super T>Function<? super T,? extends V>Function<V,T>Iterates through the rows in each page, flatmapping on more results until exhausted Return collected results if there are no more pagesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AccumulateTraceIdTsUuid.javaAccumulateTraceIdTsUuidC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AccumulateTraceIdTsUuid.class"AccumulateTraceIdTsUuid{}"AccumulateTraceIdTsUuid{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AggregateIntoMap.javaLinkedHashMap<K,V>HashMap<K,V>AbstractMap<K,V>LinkedHashMap<K,V>()AbstractMap<K,V>()HashMap<K,V>(java.util.Map)HashMap<K,V>()HashMap<K,V>(int)HashMap<K,V>(int,float)LinkedHashMap<K,V>(int,float,boolean)LinkedHashMap<K,V>(java.util.Map)LinkedHashMap<K,V>(int)LinkedHashMap<K,V>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsert.javaDelayLimiter<>(zipkin2.internal.DelayLimiter.SuppressionFactory,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin/target/zipkin-2.23.3-SNAPSHOT.jar/zipkin2/internal/DelayLimiter$Suppression.class"input == null"input == nullDelayLimiter<I>(zipkin2.internal.DelayLimiter.SuppressionFactory,int)Function<AsyncResultSet,V>Function<? super Void,? extends V>Function<V,Void>Function<? super V,? extends AsyncResultSet>ResultSetFutureCall<Void>()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsert$1.classDeduplicatingInsert$1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DirectExecutor.javaDirectExecutorDirectExecutor()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DirectExecutor.classcommand"DirectExecutor"Same as {@code MoreExecutors.directExecutor()} except without a guava 18 depC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DistinctSortedStrings.javaDistinctSortedStringsDistinctSortedStrings()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/DistinctSortedStrings.classSupplier<List<String>>Function<List<String>,List<String>>SortDistinctSortDistinct()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/DistinctSortedStrings$SortDistinct.classDistinctSortedStrings$SortDistinctBiConsumer<Row,List<String>>? super List<String>BiConsumer<? super Row,? super List<String>>"DistinctSortedStrings{}"DistinctSortedStrings{}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/InsertEntry.javaInsertEntryInsertEntry(zipkin2.storage.cassandra.internal.call.InsertEntry.Factory,java.util.Map.Entry)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/InsertEntry.classDeduplicatingInsert<Entry<String,String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/InsertEntry$Factory.classInsertEntry$Factorystatement" USING TTL " USING TTL DelayLimiter<Entry<String,String>>"(?,?)"(?,?)"("(Cassandra v1 has deprecated support for indexTtl.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/IntersectKeySets.javaIntersectKeySetsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/IntersectKeySets.classAggregateCall<Map<String,Long>,Set<String>>Base<Set<String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/IntersectMaps.javaStream<K>BaseStream<K,Stream<K>>Predicate<? super K>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCall.javaMapper<AsyncResultSet,V>? extends CompletionStage<V>Function<Throwable,? extends CompletionStage<V>>Function<Throwable,? extends V>BiConsumer<? super V,? super Throwable>BiFunction<? super V,Throwable,? extends U>Function<? super V,? extends CompletionStage<U>>CompletionStage<? extends V>Function<? super V,U>BiConsumer<? super V,? super U>BiFunction<? super V,? super U,? extends V>CallbackFunction<V>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/ResultSetFutureCall$CallbackFunction.classResultSetFutureCall$CallbackFunctionBiFunction<V,Throwable,V>CallbackFunction<V>(zipkin2.Callback)Function<? super V,? extends V>apply(java.lang.Object,java.lang.Throwable)CallbackFunctionCallbackFunction(zipkin2.Callback)maybeFutureSupplier<? extends V>CompletableFuture<V>(java.lang.Object)CompletableFuture<V>()BiFunction<? super R,? super S,? extends V>BiApply<R,S,V>BiCompletion<R,S,V>UniCompletion<R,V>Function<? super Throwable,? extends V>UniExceptionally<V>UniCompletion<V,V>BiFunction<? super S,Throwable,? extends V>UniHandle<S,V>UniCompletion<S,V>UniWhenComplete<V>stageinterruptedCompletableFuture<T>(java.lang.Object)CompletableFuture<T>() some copy/pasting is ok here as debugging is obscured when the type hierarchy gets deep.Defers I/O until {@link #enqueue(Callback)} or {@link #execute()} are called. dispatched to Function so that toString is nicer vs a lambda Avoid internal dependency on Datastax CompletableFutures and shaded ThrowablesSets {@link zipkin2.storage.StorageComponent#isOverCapacity(java.lang.Throwable)}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraSpanConsumerTest.javaCassandraSpanConsumerTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/testsingletonListtupleBACKENDmockSessionspanConsumer(zipkin2.storage.cassandra.CassandraStorage.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraSpanConsumerTest.classspanWithoutAnnotationsOrTags"get"207000L207000ObjectAssert<Call<Void>>AbstractObjectAssert<ObjectAssert<Call<Void>>,Call<Void>>AbstractAssert<ObjectAssert<Call<Void>>,Call<Void>>Assert<ObjectAssert<Call<Void>>,Call<Void>>Descriptable<ObjectAssert<Call<Void>>>ExtensionPoints<ObjectAssert<Call<Void>>,Call<Void>>Condition<? super Call<Void>>Descriptable<Condition<? super Call<Void>>>Function<? super Call<Void>,? extends T>Consumer<Call<Void>>AbstractAssert<ObjectAssert<Call<Void>>,Call<Void>>(zipkin2.Call,java.lang.Class)Call<Object>"77fcac3d4c5be8d2a037812820c65f28"77fcac3d4c5be8d2a037812820c65f28AggregateCall<?,Void>Tuple[]containsExactly(org.assertj.core.groups.Tuple[])? super List<? extends Tuple>Condition<? super List<? extends Tuple>>Descriptable<Condition<? super List<? extends Tuple>>>Comparator<? super List<? extends Tuple>>Function<? super List<? extends Tuple>,? extends T>Consumer<List<? extends Tuple>>Predicate<? super List<? extends Tuple>>AbstractAssert<?,List<? extends Tuple>>(java.util.List,java.lang.Class)? super TupleComparator<? super Tuple>Predicate<? super Tuple>containsAnyOf(org.assertj.core.groups.Tuple[])Consumer<? super Tuple>isSubsetOf(org.assertj.core.groups.Tuple[])Condition<? super Tuple>Descriptable<Condition<? super Tuple>>endsWith(org.assertj.core.groups.Tuple[])endsWith(org.assertj.core.groups.Tuple,org.assertj.core.groups.Tuple[])startsWith(org.assertj.core.groups.Tuple[])doesNotContain(org.assertj.core.groups.Tuple[])doesNotContainSubsequence(org.assertj.core.groups.Tuple[])containsSubsequence(org.assertj.core.groups.Tuple[])doesNotContainSequence(org.assertj.core.groups.Tuple[])containsSequence(org.assertj.core.groups.Tuple[])containsExactlyInAnyOrder(org.assertj.core.groups.Tuple[])containsOnlyOnce(org.assertj.core.groups.Tuple[])containsOnly(org.assertj.core.groups.Tuple[])contains(org.assertj.core.groups.Tuple[])AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>AbstractIntegerAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>>AbstractComparableAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>AbstractAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>Assert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>Descriptable<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>>ExtensionPoints<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>ComparableAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>NumberAssert<AbstractIterableSizeAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>,Integer>BiConsumer<? super Tuple,OTHER_ELEMENT>toAssert(org.assertj.core.groups.Tuple,java.lang.String)Function<? super Tuple,T>Function<? super Tuple,?>Function<? super Tuple,?>[]ThrowingExtractor<? super Tuple,?,EXCEPTION>ThrowingExtractor<? super Tuple,?,EXCEPTION>[]ThrowingExtractor<? super Tuple,? extends Collection<V>,EXCEPTION>Function<? super Tuple,? extends Collection<V>>ThrowingExtractor<? super Tuple,V,EXCEPTION>Function<? super Tuple,V>AbstractIterableAssert<?,List<? extends Tuple>,Tuple,ObjectAssert<Tuple>>(java.util.List,java.lang.Class)Call<?>ListAssert<Call<?>>? extends Call<?>List<? extends Call<?>>Collection<? extends Call<?>>Iterable<? extends Call<?>>ObjectAssert<Call<?>>AbstractObjectAssert<ObjectAssert<Call<?>>,Call<?>>AbstractAssert<ObjectAssert<Call<?>>,Call<?>>Assert<ObjectAssert<Call<?>>,Call<?>>Descriptable<ObjectAssert<Call<?>>>ExtensionPoints<ObjectAssert<Call<?>>,Call<?>>FactoryBasedNavigableListAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>AbstractListAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>AbstractIterableAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>AbstractAssert<ListAssert<Call<?>>,List<? extends Call<?>>>Assert<ListAssert<Call<?>>,List<? extends Call<?>>>Descriptable<ListAssert<Call<?>>>ExtensionPoints<ListAssert<Call<?>>,List<? extends Call<?>>>ObjectEnumerableAssert<ListAssert<Call<?>>,Call<?>>EnumerableAssert<ListAssert<Call<?>>,Call<?>>IndexedObjectEnumerableAssert<ListAssert<Call<?>>,Call<?>>? super List<? extends Call<?>>Condition<? super List<? extends Call<?>>>Descriptable<Condition<? super List<? extends Call<?>>>>Comparator<? super List<? extends Call<?>>>Function<? super List<? extends Call<?>>,? extends T>Consumer<List<? extends Call<?>>>Predicate<? super List<? extends Call<?>>>AbstractAssert<ListAssert<Call<?>>,List<? extends Call<?>>>(java.util.List,java.lang.Class)? super Call<?>Comparator<? super Call<?>>Predicate<? super Call<?>>Call[]Call<?>[]containsAnyOf(zipkin2.Call[])Consumer<? super Call<?>>isSubsetOf(zipkin2.Call[])Condition<? super Call<?>>Descriptable<Condition<? super Call<?>>>endsWith(zipkin2.Call[])endsWith(zipkin2.Call,zipkin2.Call[])startsWith(zipkin2.Call[])doesNotContain(zipkin2.Call[])doesNotContainSubsequence(zipkin2.Call[])containsSubsequence(zipkin2.Call[])doesNotContainSequence(zipkin2.Call[])containsSequence(zipkin2.Call[])containsExactlyInAnyOrder(zipkin2.Call[])containsExactly(zipkin2.Call[])containsOnlyOnce(zipkin2.Call[])containsOnly(zipkin2.Call[])contains(zipkin2.Call[])AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>,Integer>BiConsumer<? super Call<?>,OTHER_ELEMENT>toAssert(zipkin2.Call,java.lang.String)Function<? super Call<?>,T>Function<? super Call<?>,?>Function<? super Call<?>,?>[]ThrowingExtractor<? super Call<?>,?,EXCEPTION>ThrowingExtractor<? super Call<?>,?,EXCEPTION>[]ThrowingExtractor<? super Call<?>,? extends Collection<V>,EXCEPTION>Function<? super Call<?>,? extends Collection<V>>ThrowingExtractor<? super Call<?>,V,EXCEPTION>Function<? super Call<?>,V>AbstractIterableAssert<ListAssert<Call<?>>,List<? extends Call<?>>,Call<?>,ObjectAssert<Call<?>>>(java.util.List,java.lang.Class)Predicate<Call<?>>List<Call<?>>Collection<Call<?>>Iterable<Call<?>>finish(java.lang.Void)isEmpty(java.lang.Void)append(java.lang.Object,java.lang.Void)AggregateCall<?,Void>(java.util.List)test(zipkin2.Call)"input.trace_id_high"input.trace_id_high"input.trace_id"input.trace_idC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/CassandraStorageBuilder.class"77fcac3d4c5be8d2"77fcac3d4c5be8d2"a037812820c65f28"a037812820c65f28? super List<? extends Object>Condition<? super List<? extends Object>>Descriptable<Condition<? super List<? extends Object>>>Comparator<? super List<? extends Object>>Function<? super List<? extends Object>,? extends T>Consumer<List<? extends Object>>Predicate<? super List<? extends Object>>AbstractAssert<?,List<? extends Object>>(java.util.List,java.lang.Class)AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>AbstractIntegerAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>>AbstractComparableAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>AbstractAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>Assert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>Descriptable<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>>ExtensionPoints<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>ComparableAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>NumberAssert<AbstractIterableSizeAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>,Integer>ThrowingExtractor<? super Object,?,EXCEPTION>ThrowingExtractor<? super Object,?,EXCEPTION>[]ThrowingExtractor<? super Object,? extends Collection<V>,EXCEPTION>Function<? super Object,? extends Collection<V>>AbstractIterableAssert<?,List<? extends Object>,Object,ObjectAssert<Object>>(java.util.List,java.lang.Class)MapEntry<String,String>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/data/MapEntry.classMapEntry"input"MapEntry<>Class<InsertSpan>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/ResultSetFutureCall.classClass<ResultSetFutureCall<>>"input.service"input.service"input.span"input.span"input.duration"input.duration12LFunction<Call<Void>,T>Function<? super Call<Void>,T>Function<? super Call<Void>,?>Function<? super Call<Void>,?>[]AbstractObjectAssert<ObjectAssert<Call<Void>>,Call<Void>>(zipkin2.Call,java.lang.Class)"input.annotation_query"input.annotation_queryqAbstractAssert<ObjectAssert<Object>,Object>(java.lang.Object,java.lang.Class)create(zipkin2.storage.cassandra.CassandraStorage)To allow lookups w/o a span name, we index "". "" is used instead of null to avoid creatingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraSpanStoreTest.javaCassandraSpanStoreTestspanStore(zipkin2.storage.cassandra.CassandraStorage.Builder)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraSpanStoreTest.classqueryBuilderClass<FlatMapServicesToInputs>Map<String,FlatMapServicesToInputs>FlatMapServicesToInputs[]Constructor<FlatMapServicesToInputs>? super FlatMapServicesToInputsClass<? super FlatMapServicesToInputs>TypeVariable<Class<FlatMapServicesToInputs>>TypeVariable<Class<FlatMapServicesToInputs>>[]"span=get"span=get"production"production"l_service=null, annotation_query=environment=production"l_service=null, annotation_query=environment=production"start_duration=1,"start_duration=1,"backend"backend"remote_service=backend,"remote_service=backend,"span="span="frontend"frontend"service=frontend, span=,"service=frontend, span=,"service=frontend, span=get,"service=frontend, span=get,"service=frontend, remote_service=backend,"service=frontend, remote_service=backend,"service=frontend, span="service=frontend, span=ObjectAssert<Call<List<List<Span>>>>AbstractObjectAssert<ObjectAssert<Call<List<List<Span>>>>,Call<List<List<Span>>>>AbstractAssert<ObjectAssert<Call<List<List<Span>>>>,Call<List<List<Span>>>>Assert<ObjectAssert<Call<List<List<Span>>>>,Call<List<List<Span>>>>Descriptable<ObjectAssert<Call<List<List<Span>>>>>ExtensionPoints<ObjectAssert<Call<List<List<Span>>>>,Call<List<List<Span>>>>? super Call<List<List<Span>>>Condition<? super Call<List<List<Span>>>>Descriptable<Condition<? super Call<List<List<Span>>>>>Comparator<? super Call<List<List<Span>>>>Function<? super Call<List<List<Span>>>,? extends T>Consumer<Call<List<List<Span>>>>Predicate<? super Call<List<List<Span>>>>AbstractAssert<ObjectAssert<Call<List<List<Span>>>>,Call<List<List<Span>>>>(zipkin2.Call,java.lang.Class)"ConstantCall{value=[]}"ConstantCall{value=[]}ObjectAssert<Call<List<String>>>AbstractObjectAssert<ObjectAssert<Call<List<String>>>,Call<List<String>>>AbstractAssert<ObjectAssert<Call<List<String>>>,Call<List<String>>>Assert<ObjectAssert<Call<List<String>>>,Call<List<String>>>Descriptable<ObjectAssert<Call<List<String>>>>ExtensionPoints<ObjectAssert<Call<List<String>>>,Call<List<String>>>? super Call<List<String>>Condition<? super Call<List<String>>>Descriptable<Condition<? super Call<List<String>>>>Comparator<? super Call<List<String>>>Function<? super Call<List<String>>,? extends T>Consumer<Call<List<String>>>Predicate<? super Call<List<String>>>AbstractAssert<ObjectAssert<Call<List<String>>>,Call<List<String>>>(zipkin2.Call,java.lang.Class)"icecream"icecream TODO: tests use toString because the call composition chain is complex (includes flat mapping) This could be made a little less complex if we scrub out map=>map to a list of transformations, or possibly special-casing common transformations. no need to look at two indexes works against the span table needs to look at two indexesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraStorageExtension.javaCassandraStorageExtensionassumeTrueSEARCH_TABLESpoolInFlightpoolInFlight(com.datastax.oss.driver.api.core.CqlSession)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraStorageExtension.classsleep(long)blockWhileInFlightblockWhileInFlight(zipkin2.storage.cassandra.CassandraStorage)clear(zipkin2.storage.cassandra.CassandraStorage)contactPoint()newStorageBuildernewStorageBuilder(java.lang.String)newStorageBuilder()tryToInitializeSessiontryToInitializeSession(java.lang.String)globalSessionClass<CassandraStorageExtension>GenericContainer<CassandraContainer>Container<CassandraContainer>GenericContainer<CassandraContainer>(java.util.concurrent.Future)GenericContainer<CassandraContainer>(java.lang.String)GenericContainer<CassandraContainer>()GenericContainer<CassandraContainer>(org.testcontainers.images.RemoteDockerImage)GenericContainer<CassandraContainer>(org.testcontainers.utility.DockerImageName)"Using contactPoint "Using contactPoint "SELECT now() FROM system.local"SELECT now() FROM system.localtoTruncate"TRUNCATE "TRUNCATE "unconfigured table "unconfigured table wasInFlightmillisnodesOptional<Metrics>inFlightorElse(java.lang.Integer)Supplier<? extends Integer>Stream<Integer>BaseStream<Integer,Stream<Integer>>Optional<? extends Integer>? extends Optional<? extends Integer>Supplier<? extends Optional<? extends Integer>>Function<? super Integer,? extends Optional<? extends U>>Function<? super Integer,? extends U>Function<Object,Integer>? super MetricsFunction<? super Metrics,? extends Optional<? extends U>>? extends MetricsSupplier<? extends Metrics>orElse(com.datastax.oss.driver.api.core.metrics.Metrics)Stream<Metrics>BaseStream<Metrics,Stream<Metrics>>Optional<? extends Metrics>? extends Optional<? extends Metrics>Supplier<? extends Optional<? extends Metrics>>Function<? super Metrics,? extends U>Predicate<? super Metrics>Consumer<? super Metrics>Function<Metrics,Optional<? extends Object>>Function<Metrics,V>Function<? super V,? extends Metrics>apply(com.datastax.oss.driver.api.core.metrics.Metrics)Optional<Metric>Function<Object,V>Function<? super V,? extends Object>com.codahale.metricsGauge<Integer>C:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.5/metrics-core-4.0.5.jarmetrics-core-4.0.5C:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.54.0.5C:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-coremetrics-coreC:/Users/Semiu/.m2/repository/io/dropwizard/metricsC:/Users/Semiu/.m2/repository/io/dropwizarddropwizardC:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.5/metrics-core-4.0.5.jar/comC:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.5/metrics-core-4.0.5.jar/com/codahalecodahaleC:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.5/metrics-core-4.0.5.jar/com/codahale/metricsC:/Users/Semiu/.m2/repository/io/dropwizard/metrics/metrics-core/4.0.5/metrics-core-4.0.5.jar/com/codahale/metrics/Gauge.classGaugeCassandraContainerCassandraContainer()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/CassandraStorageExtension$CassandraContainer.classCassandraStorageExtension$CassandraContainerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes"ghcr.io/openzipkin/zipkin-cassandra:2.23.2"ghcr.io/openzipkin/zipkin-cassandra:2.23.2 Builds a session without trying to use a namespace or init UDTs Clear any key cache Now, block until writes complete, notably so we can read them. give a little more to avoid flakey tests Use metrics to wait for in-flight requests to settle per https://groups.google.com/a/lists.datastax.com/g/java-driver-user/c/5um_yGNynow/m/cInH5I5jBgAJC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraStorageTest.javaCassandraStorageTestObjectAssert<AuthProvider>AbstractObjectAssert<ObjectAssert<AuthProvider>,AuthProvider>AbstractAssert<ObjectAssert<AuthProvider>,AuthProvider>Assert<ObjectAssert<AuthProvider>,AuthProvider>Descriptable<ObjectAssert<AuthProvider>>ExtensionPoints<ObjectAssert<AuthProvider>,AuthProvider>? super AuthProviderCondition<? super AuthProvider>Descriptable<Condition<? super AuthProvider>>Comparator<? super AuthProvider>Function<? super AuthProvider,? extends T>Consumer<AuthProvider>Predicate<? super AuthProvider>AbstractAssert<ObjectAssert<AuthProvider>,AuthProvider>(com.datastax.oss.driver.api.core.auth.AuthProvider,java.lang.Class)"secret"secretauthenticatorClass<EndPoint>"serverAuthenticator"serverAuthenticatorSASLhandshake'r'AbstractObjectAssert<?,byte[]>AbstractComparableAssert<?,ByteBuffer>AbstractObjectAssert<?,ByteBuffer>AbstractAssert<?,ByteBuffer>Assert<?,ByteBuffer>ExtensionPoints<?,ByteBuffer>ComparableAssert<?,ByteBuffer>? super ByteBufferFunction<? super ByteBuffer,T>Condition<? super ByteBuffer>Descriptable<Condition<? super ByteBuffer>>Comparator<? super ByteBuffer>Function<? super ByteBuffer,? extends T>Consumer<ByteBuffer>Predicate<? super ByteBuffer>AbstractAssert<?,ByteBuffer>(java.nio.ByteBuffer,java.lang.Class)Function<ByteBuffer,T>Function<? super ByteBuffer,?>Function<? super ByteBuffer,?>[]AbstractObjectAssert<?,ByteBuffer>(java.nio.ByteBuffer,java.lang.Class)Function<ByteBuffer,byte[]>CompletableFuture<ByteBuffer>Future<ByteBuffer>CompletionStage<ByteBuffer>? extends CompletionStage<ByteBuffer>Function<Throwable,? extends CompletionStage<ByteBuffer>>? extends ByteBufferFunction<Throwable,? extends ByteBuffer>BiConsumer<? super ByteBuffer,? super Throwable>BiFunction<? super ByteBuffer,Throwable,? extends U>Function<? super ByteBuffer,? extends CompletionStage<U>>CompletionStage<? extends ByteBuffer>Consumer<? super ByteBuffer>Function<? super ByteBuffer,U>BiConsumer<? super ByteBuffer,? super U>BiFunction<? super ByteBuffer,? super U,? extends V>Function<? super ByteBuffer,? extends U>completeOnTimeout(java.nio.ByteBuffer,long,java.util.concurrent.TimeUnit)Supplier<? extends ByteBuffer>obtrudeValue(java.nio.ByteBuffer)complete(java.nio.ByteBuffer)getNow(java.nio.ByteBuffer)CompletableFuture<ByteBuffer>(java.lang.Object)CompletableFuture<ByteBuffer>()BiFunction<? super R,? super S,? extends ByteBuffer>BiApply<R,S,ByteBuffer>BiCompletion<R,S,ByteBuffer>UniCompletion<R,ByteBuffer>Function<? super Throwable,? extends ByteBuffer>UniExceptionally<ByteBuffer>UniCompletion<ByteBuffer,ByteBuffer>BiFunction<? super S,Throwable,? extends ByteBuffer>UniHandle<S,ByteBuffer>UniCompletion<S,ByteBuffer>UniWhenComplete<ByteBuffer>encodeOutcome(java.nio.ByteBuffer,java.lang.Throwable)completeValue(java.nio.ByteBuffer)encodeValue(java.nio.ByteBuffer)Function<ByteBuffer,V>Function<? super byte[],? extends V>Function<V,byte[]>Function<? super V,? extends ByteBuffer>apply(java.nio.ByteBuffer)Class<AllNodesFailedException>"CassandraStorage{contactPoints=1.1.1.1, keyspace=zipkin2}"CassandraStorage{contactPoints=1.1.1.1, keyspace=zipkin2}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraUtilTest.javaCassandraUtilTestDAYS86400000L86400000"error and http.method=GET"error and http.method=GET"http.method=GET"http.method=GET"error and error"error and errorarn"arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"http://webservices.amazon.com/onca/xml?AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&AssociateTag=mytag-20&ItemId=0679722769&Operation=ItemLookup&ResponseGroup=Images%2CItemAttributes%2COffers%2CReviews&Service=AWSECommerceService&Timestamp=2014-08-18T12%3A00%3A00Z&Version=2013-08-01&Signature=j7bZM0LXZ9eXeZruTqWm2DIvDYVUU3wxPPpp%2BiXxzQc%3D"http://webservices.amazon.com/onca/xml?AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&AssociateTag=mytag-20&ItemId=0679722769&Operation=ItemLookup&ResponseGroup=Images%2CItemAttributes%2COffers%2CReviews&Service=AWSECommerceService&Timestamp=2014-08-18T12%3A00%3A00Z&Version=2013-08-01&Signature=j7bZM0LXZ9eXeZruTqWm2DIvDYVUU3wxPPpp%2BiXxzQc%3D"aws.arn"aws.arn"http.url"http.url"aws.arn="aws.arn="http.url="http.url=3654LinkedHashMap<String,Long>HashMap<String,Long>AbstractMap<String,Long>LinkedHashMap<String,Long>()AbstractMap<String,Long>()Node<String,Long>TreeNode<String,Long>newTreeNode(int,java.lang.String,java.lang.Long,java.util.HashMap.Node)newNode(int,java.lang.String,java.lang.Long,java.util.HashMap.Node)Node<String,Long>[]putVal(int,java.lang.String,java.lang.Long,boolean,boolean)HashMap<String,Long>(java.util.Map)HashMap<String,Long>()HashMap<String,Long>(int)HashMap<String,Long>(int,float)LinkedHashMap<String,Long>(int,float,boolean)LinkedHashMap<String,Long>(java.util.Map)LinkedHashMap<String,Long>(int)LinkedHashMap<String,Long>(int,float)sortedTraceIdsmap(java.util.Map)"b""c"2LList<? extends Long>ObjectAssert<Long>AbstractObjectAssert<ObjectAssert<Long>,Long>AbstractAssert<ObjectAssert<Long>,Long>Assert<ObjectAssert<Long>,Long>Descriptable<ObjectAssert<Long>>ExtensionPoints<ObjectAssert<Long>,Long>AbstractListAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>AbstractIterableAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>AbstractAssert<?,List<? extends Long>>Assert<?,List<? extends Long>>ExtensionPoints<?,List<? extends Long>>ObjectEnumerableAssert<?,Long>EnumerableAssert<?,Long>IndexedObjectEnumerableAssert<?,Long>? super List<? extends Long>Condition<? super List<? extends Long>>Descriptable<Condition<? super List<? extends Long>>>Comparator<? super List<? extends Long>>Function<? super List<? extends Long>,? extends T>Consumer<List<? extends Long>>Predicate<? super List<? extends Long>>AbstractAssert<?,List<? extends Long>>(java.util.List,java.lang.Class)Long[]containsAnyOf(java.lang.Long[])isSubsetOf(java.lang.Long[])endsWith(java.lang.Long[])endsWith(java.lang.Long,java.lang.Long[])startsWith(java.lang.Long[])doesNotContain(java.lang.Long[])doesNotContainSubsequence(java.lang.Long[])containsSubsequence(java.lang.Long[])doesNotContainSequence(java.lang.Long[])containsSequence(java.lang.Long[])containsExactlyInAnyOrder(java.lang.Long[])containsExactly(java.lang.Long[])containsOnlyOnce(java.lang.Long[])containsOnly(java.lang.Long[])contains(java.lang.Long[])AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>AbstractIntegerAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>>AbstractComparableAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>AbstractAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>Assert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>Descriptable<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>>ExtensionPoints<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>ComparableAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>NumberAssert<AbstractIterableSizeAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>,Integer>BiConsumer<? super Long,OTHER_ELEMENT>toAssert(java.lang.Long,java.lang.String)ThrowingExtractor<? super Long,?,EXCEPTION>ThrowingExtractor<? super Long,?,EXCEPTION>[]ThrowingExtractor<? super Long,? extends Collection<V>,EXCEPTION>Function<? super Long,? extends Collection<V>>ThrowingExtractor<? super Long,V,EXCEPTION>Function<? super Long,V>AbstractIterableAssert<?,List<? extends Long>,Long,ObjectAssert<Long>>(java.util.List,java.lang.Class)ListAssert<LocalDate>List<? extends LocalDate>ObjectAssert<LocalDate>AbstractObjectAssert<ObjectAssert<LocalDate>,LocalDate>AbstractAssert<ObjectAssert<LocalDate>,LocalDate>Assert<ObjectAssert<LocalDate>,LocalDate>Descriptable<ObjectAssert<LocalDate>>ExtensionPoints<ObjectAssert<LocalDate>,LocalDate>FactoryBasedNavigableListAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>AbstractListAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>AbstractIterableAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>AbstractAssert<ListAssert<LocalDate>,List<? extends LocalDate>>Assert<ListAssert<LocalDate>,List<? extends LocalDate>>Descriptable<ListAssert<LocalDate>>ExtensionPoints<ListAssert<LocalDate>,List<? extends LocalDate>>ObjectEnumerableAssert<ListAssert<LocalDate>,LocalDate>EnumerableAssert<ListAssert<LocalDate>,LocalDate>IndexedObjectEnumerableAssert<ListAssert<LocalDate>,LocalDate>ThrowingExtractor<? super LocalDate,V,EXCEPTION>Function<? super LocalDate,V>? super List<? extends LocalDate>Condition<? super List<? extends LocalDate>>Descriptable<Condition<? super List<? extends LocalDate>>>Comparator<? super List<? extends LocalDate>>Function<? super List<? extends LocalDate>,? extends T>Consumer<List<? extends LocalDate>>Predicate<? super List<? extends LocalDate>>AbstractAssert<ListAssert<LocalDate>,List<? extends LocalDate>>(java.util.List,java.lang.Class)LocalDate[]containsAnyOf(java.time.LocalDate[])isSubsetOf(java.time.LocalDate[])Condition<? super LocalDate>Descriptable<Condition<? super LocalDate>>endsWith(java.time.LocalDate[])endsWith(java.time.LocalDate,java.time.LocalDate[])startsWith(java.time.LocalDate[])doesNotContain(java.time.LocalDate[])doesNotContainSubsequence(java.time.LocalDate[])containsSubsequence(java.time.LocalDate[])doesNotContainSequence(java.time.LocalDate[])containsSequence(java.time.LocalDate[])containsExactlyInAnyOrder(java.time.LocalDate[])containsExactly(java.time.LocalDate[])containsOnlyOnce(java.time.LocalDate[])containsOnly(java.time.LocalDate[])contains(java.time.LocalDate[])AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>,Integer>BiConsumer<? super LocalDate,OTHER_ELEMENT>toAssert(java.time.LocalDate,java.lang.String)Function<? super LocalDate,T>Function<? super LocalDate,?>Function<? super LocalDate,?>[]ThrowingExtractor<? super LocalDate,?,EXCEPTION>ThrowingExtractor<? super LocalDate,?,EXCEPTION>[]ThrowingExtractor<? super LocalDate,? extends Collection<V>,EXCEPTION>Function<? super LocalDate,? extends Collection<V>>AbstractIterableAssert<ListAssert<LocalDate>,List<? extends LocalDate>,LocalDate,ObjectAssert<LocalDate>>(java.util.List,java.lang.Class)ThrowingExtractor<LocalDate,Long,RuntimeException>Function<LocalDate,Long>Function<LocalDate,V>Function<? super Long,? extends V>Function<V,Long>Function<? super V,? extends LocalDate>apply(java.time.LocalDate)extractThrows(java.time.LocalDate)java.time.chronoChronoLocalDateTime<LocalDate>C:/modules/java.base/java/time/chrono/ChronoLocalDateTime.classChronoLocalDateTimeC:/modules/java.base/java/time/chronochronoC:/modules/java.base/java/timeChronoLocalDateTime<?>Comparable<ChronoLocalDateTime<?>>toEpochSecondtoEpochSecond(java.time.ZoneOffset)compareTo(java.time.chrono.ChronoLocalDateTime)isEqual(java.time.chrono.ChronoLocalDateTime)isBeforeisBefore(java.time.chrono.ChronoLocalDateTime)isAfterisAfter(java.time.chrono.ChronoLocalDateTime)toInstanttoInstant(java.time.ZoneOffset)ChronoZonedDateTime<>C:/modules/java.base/java/time/chrono/ChronoZonedDateTime.classChronoZonedDateTimeChronoZonedDateTime<D>ChronoZonedDateTime<?>Comparable<ChronoZonedDateTime<?>>atZoneatZone(java.time.ZoneId)ChronoZonedDateTime<LocalDate>format(java.time.format.DateTimeFormatter)adjustIntoadjustInto(java.time.temporal.Temporal)java.time.temporalTemporalQuery<>C:/modules/java.base/java/time/temporal/TemporalQuery.classTemporalQueryC:/modules/java.base/java/time/temporaltemporalquery(java.time.temporal.TemporalQuery)TemporalQuery<R>ChronoLocalDateTime<>minusminus(long,java.time.temporal.TemporalUnit)minus(java.time.temporal.TemporalAmount)plusplus(long,java.time.temporal.TemporalUnit)plus(java.time.temporal.TemporalAmount)withwith(java.time.temporal.TemporalField,long)with(java.time.temporal.TemporalAdjuster)isSupportedisSupported(java.time.temporal.TemporalUnit)isSupported(java.time.temporal.TemporalField)toLocalTimetoLocalTime()toLocalDatetoLocalDate()getChronologygetChronology()from(java.time.temporal.TemporalAccessor)Comparator<ChronoLocalDateTime<?>>timeLineOrdertimeLineOrder() example long value example too long valueSanity checks our bucketing scheme for numeric overflow today isn't negative neither is 10 years from nowC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITCassandraStorage.javaITCassandraStoragewriteDependencyLinksC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITCassandraStorage.classITCassandraStorage()ITTracesITTraces()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITTraces.classITCassandraStorage$ITTracesITTraces<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jarzipkin-tests-2.23.3-SNAPSHOTC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/targetC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-testsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITTraces.classITStorage<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITStorage.classITStoragetestInfo"No consumer-side span deduplication"No consumer-side span deduplicationITSpanStoreITSpanStore()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITSpanStore.classITCassandraStorage$ITSpanStoreITSpanStore<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITSpanStore.classITSearchEnabledFalseITSearchEnabledFalse()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITSearchEnabledFalse.classITCassandraStorage$ITSearchEnabledFalseITSearchEnabledFalse<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITSearchEnabledFalse.classcloseStorageBeforeSwitchcloseStorageBeforeSwitch()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITStrictTraceIdFalse.classITCassandraStorage$ITStrictTraceIdFalseinitializeStorageBeforeSwitchinitializeStorageBeforeSwitch()ITStrictTraceIdFalseITStrictTraceIdFalse()ITStrictTraceIdFalse<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITStrictTraceIdFalse.classITServiceAndSpanNamesITServiceAndSpanNames()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITServiceAndSpanNames.classITCassandraStorage$ITServiceAndSpanNamesITServiceAndSpanNames<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITServiceAndSpanNames.classITAutocompleteTagsITAutocompleteTags()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITAutocompleteTags.classITCassandraStorage$ITAutocompleteTagsITAutocompleteTags<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITAutocompleteTags.classITDependenciesITDependencies()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITDependencies.classITCassandraStorage$ITDependenciesITDependencies<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITDependencies.classMap<Long,List<DependencyLink>>? super List<DependencyLink>BiConsumer<? super Long,? super List<DependencyLink>>? extends List<DependencyLink>BiFunction<? super List<DependencyLink>,? super List<DependencyLink>,? extends List<DependencyLink>>merge(java.lang.Long,java.util.List,java.util.function.BiFunction)BiFunction<? super Long,? super List<DependencyLink>,? extends List<DependencyLink>>compute(java.lang.Long,java.util.function.BiFunction)computeIfPresent(java.lang.Long,java.util.function.BiFunction)Function<? super Long,? extends List<DependencyLink>>computeIfAbsent(java.lang.Long,java.util.function.Function)replace(java.lang.Long,java.util.List)replace(java.lang.Long,java.util.List,java.util.List)putIfAbsent(java.lang.Long,java.util.List)Entry<Long,List<DependencyLink>>Set<Entry<Long,List<DependencyLink>>>Collection<Entry<Long,List<DependencyLink>>>Iterable<Entry<Long,List<DependencyLink>>>Collection<List<DependencyLink>>Iterable<List<DependencyLink>>Set<Long>Map<? extends Long,? extends List<DependencyLink>>put(java.lang.Long,java.util.List)BiConsumer<Long,List<DependencyLink>>accept(java.lang.Long,java.util.List)midnightITSpanConsumerITSpanConsumer()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorage$ITSpanConsumer.classITCassandraStorage$ITSpanConsumerEnsures we can still lookup fully 128-bit traces when strict trace ID id disabledEnsures data written before strict trace ID was enabled can be readThe current implementation does not include dependency aggregation. It includes retrieval ofpre-aggregated links, usually made via zipkin-dependenciesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITCassandraStorageHeavy.javaITCassandraStorageHeavyappendSuffixnewTraceaggregateLinksC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITCassandraStorageHeavy.classITCassandraStorageHeavy()overFetchesToCompensateForDuplicateIndexDataoverFetchesToCompensateForDuplicateIndexData(org.junit.jupiter.api.TestInfo)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorageHeavy$ITSpanStoreHeavy.classITCassandraStorageHeavy$ITSpanStoreHeavyITSpanStoreHeavyITSpanStoreHeavy()ITSpanStoreHeavy<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITSpanStoreHeavy.classtestSuffix2000localServiceCountConsumer<Annotation>accept(zipkin2.Annotation)PagingIterable<Row>C:/Users/Semiu/.m2/repository/com/datastax/oss/java-driver-core/4.9.0/java-driver-core-4.9.0.jar/com/datastax/oss/driver/api/core/PagingIterable.classPagingIterableSpliterator<Row>Consumer<? super Row>Iterator<Row>Spliterator<ElementT>PagingIterable<>TargetElementTPagingIterable<TargetElementT>Iterable<TargetElementT>? extends TargetElementTFunction<? super ElementT,? extends TargetElementT>Function<? super Row,? extends TargetElementT>getAvailableWithoutFetchinggetAvailableWithoutFetching()isFullyFetchedisFullyFetched()all()List<Row>Collection<Row>List<ExecutionInfo>Collection<ExecutionInfo>Iterable<ExecutionInfo>getExecutionInfosgetExecutionInfos()"SELECT COUNT(*) from trace_by_service_span"SELECT COUNT(*) from trace_by_service_spanITDependenciesHeavyITDependenciesHeavy()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorageHeavy$ITDependenciesHeavy.classITCassandraStorageHeavy$ITDependenciesHeavyITDependenciesHeavy<CassandraStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-tests/target/zipkin-tests-2.23.3-SNAPSHOT.jar/zipkin2/storage/ITDependenciesHeavy.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/ITCassandraStorageHeavy$ITEnsureSchema.classITCassandraStorageHeavy$ITEnsureSchemaITEnsureSchemaITEnsureSchema()Large amounts of writes can make other tests flake. This can happen for reasons such asoverloading the test Cassandra container or knock-on effects of tombstones left from {@linkCassandraStorageExtension#clear(CassandraStorage)}.<p>Tests here share a different Cassandra container and each method runs in an isolatedkeyspace. As schema installation takes ~10s, hesitate adding too many tests here. Intentionally don't clean up as each method runs in an isolated keyspace. This prevents adding more load to the shared Cassandra instance used for all tests. all timestamps happen a millisecond later Index ends up containing more rows than services * trace count, and cannot be de-duped in a server-side query. Implementation over-fetches on the index to allow the user to receive unsurprising results. Ensure we use serviceName so that trace_by_service_span is usedC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITEnsureSchema.javaworksWithOldSchemaworksWithOldSchema(org.junit.jupiter.api.TestInfo)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITEnsureSchema.classupgradesOldSchema_remoteServiceupgradesOldSchema_remoteService()upgradesOldSchema_autocompleteupgradesOldSchema_autocomplete()installsSearchTablesWhenMissinginstallsSearchTablesWhenMissing()installsTablesWhenMissinginstallsTablesWhenMissing()installsKeyspaceWhenMissinginstallsKeyspaceWhenMissing()ObjectAssert<KeyspaceMetadata>AbstractObjectAssert<ObjectAssert<KeyspaceMetadata>,KeyspaceMetadata>AbstractAssert<ObjectAssert<KeyspaceMetadata>,KeyspaceMetadata>Assert<ObjectAssert<KeyspaceMetadata>,KeyspaceMetadata>Descriptable<ObjectAssert<KeyspaceMetadata>>ExtensionPoints<ObjectAssert<KeyspaceMetadata>,KeyspaceMetadata>Condition<? super KeyspaceMetadata>Descriptable<Condition<? super KeyspaceMetadata>>Comparator<? super KeyspaceMetadata>Function<? super KeyspaceMetadata,? extends T>Consumer<KeyspaceMetadata>AbstractAssert<ObjectAssert<KeyspaceMetadata>,KeyspaceMetadata>(com.datastax.oss.driver.api.core.metadata.schema.KeyspaceMetadata,java.lang.Class)"CREATE KEYSPACE "CREATE KEYSPACE " WITH replication = {'class': 'SimpleStrategy', 'replication_factor': '1'};" WITH replication = {'class': 'SimpleStrategy', 'replication_factor': '1'};OptionalAssert<TableMetadata>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/OptionalAssert.classOptionalAssertAbstractOptionalAssert<OptionalAssert<TableMetadata>,TableMetadata>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AbstractOptionalAssert.classAbstractOptionalAssertAbstractAssert<OptionalAssert<TableMetadata>,Optional<TableMetadata>>Assert<OptionalAssert<TableMetadata>,Optional<TableMetadata>>Descriptable<OptionalAssert<TableMetadata>>ExtensionPoints<OptionalAssert<TableMetadata>,Optional<TableMetadata>>OptionalAssert<>AbstractOptionalAssert<>? super Optional<TableMetadata>Condition<? super Optional<TableMetadata>>Descriptable<Condition<? super Optional<TableMetadata>>>Comparator<? super Optional<TableMetadata>>Function<? super Optional<TableMetadata>,? extends T>Consumer<Optional<TableMetadata>>Predicate<? super Optional<TableMetadata>>AbstractAssert<OptionalAssert<TableMetadata>,Optional<TableMetadata>>(java.util.Optional,java.lang.Class)searchTableget(org.assertj.core.api.InstanceOfAssertFactory)AbstractObjectAssert<?,VALUE>AbstractAssert<?,VALUE>Assert<?,VALUE>ExtensionPoints<?,VALUE>AbstractObjectAssert<?,TableMetadata>AbstractAssert<?,TableMetadata>Assert<?,TableMetadata>ExtensionPoints<?,TableMetadata>AbstractOptionalAssert<?,U>AbstractAssert<?,Optional<U>>Assert<?,Optional<U>>ExtensionPoints<?,Optional<U>>? super VALUEFunction<? super VALUE,? extends U>Function<? super VALUE,Optional<U>>Function<? super TableMetadata,Optional<U>>containsSamecontainsSame(java.lang.Object)containsSame(com.datastax.oss.driver.api.core.metadata.schema.TableMetadata)usingDefaultValueComparatorusingDefaultValueComparator()Comparator<? super VALUE>usingValueComparatorusingValueComparator(java.util.Comparator)Comparator<? super TableMetadata>usingFieldByFieldValueComparatorusingFieldByFieldValueComparator()containsInstanceOfcontainsInstanceOf(java.lang.Class)hasValuehasValue(java.lang.Object)hasValue(com.datastax.oss.driver.api.core.metadata.schema.TableMetadata)Condition<? super VALUE>Descriptable<Condition<? super VALUE>>Condition<? super TableMetadata>Descriptable<Condition<? super TableMetadata>>Consumer<VALUE>hasValueSatisfying(java.util.function.Consumer)Consumer<TableMetadata>contains(com.datastax.oss.driver.api.core.metadata.schema.TableMetadata)isNotPresentisNotPresent()Optional<VALUE>AbstractOptionalAssert(java.util.Optional,java.lang.Class)AbstractOptionalAssert<OptionalAssert<TableMetadata>,TableMetadata>(java.util.Optional,java.lang.Class)"Expected to not find "Expected to not find "Expected to find "Expected to find "/zipkin2-schema-indexes-original.cql"/zipkin2-schema-indexes-original.cql"Could not connect to storage: "Could not connect to storage: " unsupported due to missing table remote_service_by_service" unsupported due to missing table remote_service_by_serviceThis test is very slow as installing the schema can take 10s per method. We need a different keyspace per test don't check as it requires the keyspace which these tests installThis tests we don't accidentally rely on new indexes such as autocomplete tags Ensure the storage component is functional before proceeding instead of an exception Make sure there's an error if a query will return incorrectly vs returning invalid resultsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITSpanConsumer.javaSERVERnewClientSpanspanBuildergetTagValuegetTagValue(zipkin2.storage.cassandra.CassandraStorage,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/ITSpanConsumer.classrowCountForTagsrowCountForTags(zipkin2.storage.cassandra.CassandraStorage)rowCountForTraceByServiceSpanrowCountForTraceByServiceSpan(zipkin2.storage.cassandra.CassandraStorage)101withoutStrictTraceIdaccept(int)4L120L120"dev"devclientSpanAggregateCall<?,?>Base<?>acceptCallinsertEntryCallsStream<Call<?>>BaseStream<Call<?>,Stream<Call<?>>>Collector<? super Call<?>,A,R>Spliterator<Call<?>>Iterator<Call<?>>Optional<Call<?>>BiConsumer<R,? super Call<?>>BiFunction<U,? super Call<?>,U>BinaryOperator<Call<?>>BiFunction<Call<?>,Call<?>,Call<?>>reduce(zipkin2.Call,java.util.function.BinaryOperator)Function<? super Call<?>,? extends DoubleStream>Function<? super Call<?>,? extends LongStream>Function<? super Call<?>,? extends IntStream>Function<? super Call<?>,? extends Stream<? extends R>>ToDoubleFunction<? super Call<?>>ToLongFunction<? super Call<?>>ToIntFunction<? super Call<?>>Function<? super Call<?>,? extends R>Collector<Call<?>,?,List<Call<?>>>Callback<?>ErrorHandler<?>FlatMapper<?,R>Mapper<?,R>Call<?>()Base<?>()AggregateCall<?,?>(java.util.List)Function<? super Call<?>,? extends T>Consumer<Call<?>>AbstractAssert<ObjectAssert<Call<?>>,Call<?>>(zipkin2.Call,java.lang.Class)ListIterator<Call<?>>UnaryOperator<Call<?>>Function<Call<?>,Call<?>>"INSERT INTO span_by_service (service, span) VALUES (frontend,get)"INSERT INTO span_by_service (service, span) VALUES (frontend,get)"INSERT INTO remote_service_by_service (service, remote_service) VALUES (frontend,backend)"INSERT INTO remote_service_by_service (service, remote_service) VALUES (frontend,backend)"SELECT COUNT(*) from "SELECT COUNT(*) from "SELECT value from "SELECT value from " WHERE key='environment'" WHERE key='environment'{@link Span#timestamp()} == 0 is likely to be a mistake, and coerces to null. It is not helpfulto index rows who have no timestamp.Simulates a trace with a step pattern, where each span starts a millisecond after the priorone. The consumer code optimizes index inserts to only represent the interval represented bythe trace as opposed to each individual timestamp. all peer span timestamps happen 1ms later sanity check base case TODO: magic number Since tag {a,b} are not in the whitelistIt is easier to use a real Cassandra connection than mock a prepared statement. This test can use fake data as it is never written to cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/InternalForTests.javaInternalForTestskeyspace(org.junit.jupiter.api.TestInfo)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/InternalForTests.classwriteDependencyLinks(zipkin2.storage.cassandra.CassandraStorage,java.util.List,long)mockSession()InternalForTests()Class<CqlSession>Class<Metadata>Class<Node>Class<KeyspaceMetadata>OngoingStubbing<Metadata>thenReturn(com.datastax.oss.driver.api.core.metadata.Metadata)Metadata[]thenReturn(com.datastax.oss.driver.api.core.metadata.Metadata,com.datastax.oss.driver.api.core.metadata.Metadata[])OngoingStubbing<Map<UUID,Node>>thenReturn(java.util.Map)Map[]Map<UUID,Node>[]thenReturn(java.util.Map,java.util.Map[])"11111111-1111-1111-1111-111111111111"11111111-1111-1111-1111-111111111111OngoingStubbing<Version>thenReturn(com.datastax.oss.driver.api.core.Version)Version[]thenReturn(com.datastax.oss.driver.api.core.Version,com.datastax.oss.driver.api.core.Version[])"3.11.9"3.11.9OngoingStubbing<Optional<KeyspaceMetadata>>Optional<KeyspaceMetadata>[]OngoingStubbing<Optional<TableMetadata>>Optional<TableMetadata>[]Class<TableMetadata>midnightUTCprepared" (day,parent,child,calls,errors)"
      + " VALUES (?,?,?,?,?)" (day,parent,child,calls,errors) VALUES (?,?,?,?,?)SettableByIndex<BoundStatement>Optional<Method>? extends MethodSupplier<? extends Method>orElse(java.lang.reflect.Method)Stream<Method>BaseStream<Method,Stream<Method>>Optional<? extends Method>? extends Optional<? extends Method>Supplier<? extends Optional<? extends Method>>? super MethodFunction<? super Method,? extends Optional<? extends U>>Function<? super Method,? extends U>Predicate<? super Method>Consumer<? super Method>Optional<Class<?>>? extends Class<?>Supplier<? extends Class<?>>orElse(java.lang.Class)Stream<Class<?>>BaseStream<Class<?>,Stream<Class<?>>>Optional<? extends Class<?>>? extends Optional<? extends Class<?>>Supplier<? extends Optional<? extends Class<?>>>Function<? super Class<?>,? extends Optional<? extends U>>Function<? super Class<?>,? extends U>Consumer<? super Class<?>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/SchemaTest.javaSchemaTestschemaWithReadRepairC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/SchemaTest.class""
    + "CREATE TABLE IF NOT EXISTS zipkin2.remote_service_by_service (\n"
    + "    service text,\n"
    + "    remote_service text,\n"
    + "    PRIMARY KEY (service, remote_service)\n"
    + ")\n"
    + "    WITH compaction = {'class': 'org.apache.cassandra.db.compaction.LeveledCompactionStrategy', 'unchecked_tombstone_compaction': 'true', 'tombstone_threshold': '0.2'}\n"
    + "    AND caching = {'rows_per_partition': 'ALL'}\n"
    + "    AND default_time_to_live =  259200\n"
    + "    AND gc_grace_seconds = 3600\n"
    + "    AND read_repair_chance = 0\n"
    + "    AND dclocal_read_repair_chance = 0\n"
    + "    AND speculative_retry = '95percentile'\n"
    + "    AND comment = 'Secondary table for looking up remote service names by a service name.';"CREATE TABLE IF NOT EXISTS zipkin2.remote_service_by_service (
    service text,
    remote_service text,
    PRIMARY KEY (service, remote_service)
)
    WITH compaction = {'class': 'org.apache.cassandra.db.compaction.LeveledCompactionStrategy', 'unchecked_tombstone_compaction': 'true', 'tombstone_threshold': '0.2'}
    AND caching = {'rows_per_partition': 'ALL'}
    AND default_time_to_live =  259200
    AND gc_grace_seconds = 3600
    AND read_repair_chance = 0
    AND dclocal_read_repair_chance = 0
    AND speculative_retry = '95percentile'
    AND comment = 'Secondary table for looking up remote service names by a service name.';"3.11.2"3.11.2"Node 11111111-1111-1111-1111-111111111111 is running Cassandra 3.11.2, but minimum version is 3.11.3"Node 11111111-1111-1111-1111-111111111111 is running Cassandra 3.11.2, but minimum version is 3.11.3node1node2LinkedHashMap<UUID,Node>HashMap<UUID,Node>AbstractMap<UUID,Node>LinkedHashMap<UUID,Node>()AbstractMap<UUID,Node>()Node<UUID,Node>TreeNode<UUID,Node>newTreeNode(int,java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node,java.util.HashMap.Node)newNode(int,java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node,java.util.HashMap.Node)Node<UUID,Node>[]putVal(int,java.util.UUID,com.datastax.oss.driver.api.core.metadata.Node,boolean,boolean)HashMap<UUID,Node>(java.util.Map)HashMap<UUID,Node>()HashMap<UUID,Node>(int)HashMap<UUID,Node>(int,float)LinkedHashMap<UUID,Node>(int,float,boolean)LinkedHashMap<UUID,Node>(java.util.Map)LinkedHashMap<UUID,Node>(int)LinkedHashMap<UUID,Node>(int,float)"22222222-2222-2222-2222-222222222222"22222222-2222-2222-2222-222222222222"Node 22222222-2222-2222-2222-222222222222 is running Cassandra 3.11.2, but minimum version is 3.11.3"Node 22222222-2222-2222-2222-222222222222 is running Cassandra 3.11.2, but minimum version is 3.11.3"3.11.4"3.11.4"Cannot read keyspace metadata for keyspace"Cannot read keyspace metadata for keyspace""
        + "CREATE TABLE IF NOT EXISTS zipkin2.remote_service_by_service (\n"
        + "    service text,\n"
        + "    remote_service text,\n"
        + "    PRIMARY KEY (service, remote_service)\n"
        + ")\n"
        + "    WITH compaction = {'class': 'org.apache.cassandra.db.compaction.LeveledCompactionStrategy', 'unchecked_tombstone_compaction': 'true', 'tombstone_threshold': '0.2'}\n"
        + "    AND caching = {'rows_per_partition': 'ALL'}\n"
        + "    AND default_time_to_live =  259200\n"
        + "    AND gc_grace_seconds = 3600\n"
        + "    AND speculative_retry = '95percentile'\n"
        + "    AND comment = 'Secondary table for looking up remote service names by a service name.';"CREATE TABLE IF NOT EXISTS zipkin2.remote_service_by_service (
    service text,
    remote_service text,
    PRIMARY KEY (service, remote_service)
)
    WITH compaction = {'class': 'org.apache.cassandra.db.compaction.LeveledCompactionStrategy', 'unchecked_tombstone_compaction': 'true', 'tombstone_threshold': '0.2'}
    AND caching = {'rows_per_partition': 'ALL'}
    AND default_time_to_live =  259200
    AND gc_grace_seconds = 3600
    AND speculative_retry = '95percentile'
    AND comment = 'Secondary table for looking up remote service names by a service name.'; literal used to show newlines etc are in-tactC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/CassandraStorageBuilderTest.javaCassandraStorageBuilderTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internalCassandraStorageBuilder<?>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/CassandraStorageBuilderTest.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/CassandraStorageBuilderTest$1.classCassandraStorageBuilderTest$1CassandraStorageBuilder<>(java.lang.String)CassandraStorageBuilder<?>(java.lang.String)Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>List<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>Collection<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>Iterable<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>badArgumentsFunction<CassandraStorageBuilder<?>,V>? super CassandraStorageBuilder<?>Function<? super CassandraStorageBuilder<?>,? extends V>Function<V,CassandraStorageBuilder<?>>? extends CassandraStorageBuilder<?>Function<? super V,? extends CassandraStorageBuilder<?>>apply(zipkin2.storage.cassandra.internal.CassandraStorageBuilder)? super Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>Consumer<? super Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>Spliterator<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>Iterator<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>Consumer<Function<CassandraStorageBuilder<?>,CassandraStorageBuilder<?>>>accept(java.util.function.Function)customizernullPointersClass<NullPointerException>Ensure NPE happens early.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/HostAndPortTest.javaHostAndPortTest"google.com"google.com"192.0.2.1"192.0.2.1"2001::3"2001::3ObjectAssert<HostAndPort>AbstractObjectAssert<ObjectAssert<HostAndPort>,HostAndPort>AbstractAssert<ObjectAssert<HostAndPort>,HostAndPort>Assert<ObjectAssert<HostAndPort>,HostAndPort>Descriptable<ObjectAssert<HostAndPort>>ExtensionPoints<ObjectAssert<HostAndPort>,HostAndPort>? super HostAndPortCondition<? super HostAndPort>Descriptable<Condition<? super HostAndPort>>Comparator<? super HostAndPort>Function<? super HostAndPort,? extends T>Consumer<HostAndPort>Predicate<? super HostAndPort>AbstractAssert<ObjectAssert<HostAndPort>,HostAndPort>(zipkin2.storage.cassandra.internal.HostAndPort,java.lang.Class)77"gmail.com:"gmail.com:"gmail.com"gmail.com"192.0.2.2:"192.0.2.2:"192.0.2.2"192.0.2.2"[2001::2]:"[2001::2]:"2001::2"2001::2"gmail.com:77"gmail.com:77"192.0.2.2:77"192.0.2.2:77"[2001::2]:77"[2001::2]:77"google.com:65536"google.com:65536"google.com:9999999999"google.com:9999999999"google.com:port"google.com:port"google.com:-25"google.com:-25"google.com:+25"google.com:+25"google.com:25  "google.com:25  "google.com:25\t"google.com:25	"google.com:0x25 "google.com:0x25 "[goo.gl]"[goo.gl]"[goo.gl]:80"[goo.gl]:80"[]:"[]:"[]:80"[]:80"[]bad"[]bad"[[:]]"[[:]]"x:y:z"x:y:z":123":123" should have failed to parse" should have failed to parse Reuses inputs from com.google.common.net.HostAndPortTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/SessionBuilderTest.javaSessionBuilderTestListAssert<InetSocketAddress>List<? extends InetSocketAddress>ObjectAssert<InetSocketAddress>AbstractObjectAssert<ObjectAssert<InetSocketAddress>,InetSocketAddress>AbstractAssert<ObjectAssert<InetSocketAddress>,InetSocketAddress>Assert<ObjectAssert<InetSocketAddress>,InetSocketAddress>Descriptable<ObjectAssert<InetSocketAddress>>ExtensionPoints<ObjectAssert<InetSocketAddress>,InetSocketAddress>FactoryBasedNavigableListAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>AbstractListAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>AbstractIterableAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>AbstractAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>>Assert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>>Descriptable<ListAssert<InetSocketAddress>>ExtensionPoints<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>>ObjectEnumerableAssert<ListAssert<InetSocketAddress>,InetSocketAddress>EnumerableAssert<ListAssert<InetSocketAddress>,InetSocketAddress>IndexedObjectEnumerableAssert<ListAssert<InetSocketAddress>,InetSocketAddress>InetSocketAddress[]containsExactly(java.net.InetSocketAddress[])? super List<? extends InetSocketAddress>Condition<? super List<? extends InetSocketAddress>>Descriptable<Condition<? super List<? extends InetSocketAddress>>>Comparator<? super List<? extends InetSocketAddress>>Function<? super List<? extends InetSocketAddress>,? extends T>Consumer<List<? extends InetSocketAddress>>Predicate<? super List<? extends InetSocketAddress>>AbstractAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>>(java.util.List,java.lang.Class)containsAnyOf(java.net.InetSocketAddress[])isSubsetOf(java.net.InetSocketAddress[])Condition<? super InetSocketAddress>Descriptable<Condition<? super InetSocketAddress>>endsWith(java.net.InetSocketAddress[])endsWith(java.net.InetSocketAddress,java.net.InetSocketAddress[])startsWith(java.net.InetSocketAddress[])doesNotContain(java.net.InetSocketAddress[])doesNotContainSubsequence(java.net.InetSocketAddress[])containsSubsequence(java.net.InetSocketAddress[])doesNotContainSequence(java.net.InetSocketAddress[])containsSequence(java.net.InetSocketAddress[])containsExactlyInAnyOrder(java.net.InetSocketAddress[])containsOnlyOnce(java.net.InetSocketAddress[])containsOnly(java.net.InetSocketAddress[])contains(java.net.InetSocketAddress[])AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>,Integer>BiConsumer<? super InetSocketAddress,OTHER_ELEMENT>toAssert(java.net.InetSocketAddress,java.lang.String)Function<? super InetSocketAddress,T>Function<? super InetSocketAddress,?>Function<? super InetSocketAddress,?>[]ThrowingExtractor<? super InetSocketAddress,?,EXCEPTION>ThrowingExtractor<? super InetSocketAddress,?,EXCEPTION>[]ThrowingExtractor<? super InetSocketAddress,? extends Collection<V>,EXCEPTION>Function<? super InetSocketAddress,? extends Collection<V>>ThrowingExtractor<? super InetSocketAddress,V,EXCEPTION>Function<? super InetSocketAddress,V>AbstractIterableAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>(java.util.List,java.lang.Class)doesNotContain(java.net.InetSocketAddress,org.assertj.core.data.Index)contains(java.net.InetSocketAddress,org.assertj.core.data.Index)AbstractListAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>(java.util.List,java.lang.Class)AssertFactory<InetSocketAddress,ObjectAssert<InetSocketAddress>>FactoryBasedNavigableListAssert<ListAssert<InetSocketAddress>,List<? extends InetSocketAddress>,InetSocketAddress,ObjectAssert<InetSocketAddress>>(java.util.List,java.lang.Class,org.assertj.core.api.AssertFactory)ListAssert<InetSocketAddress>(java.util.stream.DoubleStream)ListAssert<InetSocketAddress>(java.util.stream.LongStream)ListAssert<InetSocketAddress>(java.util.stream.IntStream)Stream<? extends InetSocketAddress>BaseStream<? extends InetSocketAddress,Stream<? extends InetSocketAddress>>ListAssert<InetSocketAddress>(java.util.stream.Stream)ListAssert<InetSocketAddress>(java.util.List)"1.1.1.1:9143,2.2.2.2"1.1.1.1:9143,2.2.2.29143"2.2.2.2"2.2.2.2"1.1.1.1:9142"1.1.1.1:91429142C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsertTest.javaDeduplicatingInsertTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/callexceptionsInvalidate_executeexceptionsInvalidate_execute()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsertTest.classexceptionsInvalidate_enqueueexceptionsInvalidate_enqueue()"Flakey: https://github.com/openzipkin/zipkin/issues/3255"Flakey: https://github.com/openzipkin/zipkin/issues/3255enqueuesInOrderenqueuesInOrder()assertFailOnErrordedupesSameCallsdedupesSameCalls()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/DeduplicatingInsertTest$1.classDeduplicatingInsertTest$1testFactoryFactory<String>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/classes/zipkin2/storage/cassandra/internal/call/DeduplicatingInsert.classmaybeAdd(java.lang.String,java.util.List)Factory<String>(long,int)ListAssert<Call<Void>>List<? extends Call<Void>>FactoryBasedNavigableListAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>AbstractListAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>AbstractIterableAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>AbstractAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>>Assert<ListAssert<Call<Void>>,List<? extends Call<Void>>>Descriptable<ListAssert<Call<Void>>>ExtensionPoints<ListAssert<Call<Void>>,List<? extends Call<Void>>>ObjectEnumerableAssert<ListAssert<Call<Void>>,Call<Void>>EnumerableAssert<ListAssert<Call<Void>>,Call<Void>>IndexedObjectEnumerableAssert<ListAssert<Call<Void>>,Call<Void>>? super List<? extends Call<Void>>Condition<? super List<? extends Call<Void>>>Descriptable<Condition<? super List<? extends Call<Void>>>>Comparator<? super List<? extends Call<Void>>>Function<? super List<? extends Call<Void>>,? extends T>Consumer<List<? extends Call<Void>>>Predicate<? super List<? extends Call<Void>>>AbstractAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>>(java.util.List,java.lang.Class)Call<Void>[]AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>AbstractIntegerAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>>AbstractComparableAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>AbstractObjectAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>AbstractAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>Assert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>Descriptable<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>>ExtensionPoints<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>ComparableAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>NumberAssert<AbstractIterableSizeAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>,Integer>BiConsumer<? super Call<Void>,OTHER_ELEMENT>ThrowingExtractor<? super Call<Void>,?,EXCEPTION>ThrowingExtractor<? super Call<Void>,?,EXCEPTION>[]ThrowingExtractor<? super Call<Void>,? extends Collection<V>,EXCEPTION>Function<? super Call<Void>,? extends Collection<V>>ThrowingExtractor<? super Call<Void>,V,EXCEPTION>Function<? super Call<Void>,V>AbstractIterableAssert<ListAssert<Call<Void>>,List<? extends Call<Void>>,Call<Void>,ObjectAssert<Call<Void>>>(java.util.List,java.lang.Class)AtomicReference<String>set(java.lang.String)weakCompareAndSetRelease(java.lang.String,java.lang.String)weakCompareAndSetAcquire(java.lang.String,java.lang.String)weakCompareAndSetVolatile(java.lang.String,java.lang.String)compareAndExchangeRelease(java.lang.String,java.lang.String)compareAndExchangeAcquire(java.lang.String,java.lang.String)compareAndExchange(java.lang.String,java.lang.String)setRelease(java.lang.String)setOpaque(java.lang.String)setPlain(java.lang.String)accumulateAndGet(java.lang.String,java.util.function.BinaryOperator)getAndAccumulate(java.lang.String,java.util.function.BinaryOperator)getAndSet(java.lang.String)weakCompareAndSetPlain(java.lang.String,java.lang.String)weakCompareAndSet(java.lang.String,java.lang.String)compareAndSet(java.lang.String,java.lang.String)lazySet(java.lang.String)AtomicReference<String>()AtomicReference<String>(java.lang.String)Class<AssertionError>TestFactoryTestFactory()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/internal/call/DeduplicatingInsertTest$TestFactory.classDeduplicatingInsertTest$TestFactoryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/internal/callC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/internalfailValueTestDeduplicatingInsertTestDeduplicatingInsert(zipkin2.storage.cassandra.internal.call.DeduplicatingInsertTest.TestFactory,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/internal/call/DeduplicatingInsertTest$TestDeduplicatingInsert.classDeduplicatingInsertTest$TestDeduplicatingInsertDeduplicatingInsert<String>DelayLimiter<String>CompletableFuture<AsyncResultSet>()completeOnTimeout(com.datastax.oss.driver.api.core.cql.AsyncResultSet,long,java.util.concurrent.TimeUnit)Supplier<? extends AsyncResultSet>obtrudeValue(com.datastax.oss.driver.api.core.cql.AsyncResultSet)complete(com.datastax.oss.driver.api.core.cql.AsyncResultSet)getNow(com.datastax.oss.driver.api.core.cql.AsyncResultSet)CompletableFuture<AsyncResultSet>(java.lang.Object)BiFunction<? super R,? super S,? extends AsyncResultSet>BiApply<R,S,AsyncResultSet>BiCompletion<R,S,AsyncResultSet>UniCompletion<R,AsyncResultSet>Function<? super Throwable,? extends AsyncResultSet>UniExceptionally<AsyncResultSet>UniCompletion<AsyncResultSet,AsyncResultSet>BiFunction<? super S,Throwable,? extends AsyncResultSet>UniHandle<S,AsyncResultSet>UniCompletion<S,AsyncResultSet>UniWhenComplete<AsyncResultSet>encodeOutcome(com.datastax.oss.driver.api.core.cql.AsyncResultSet,java.lang.Throwable)completeValue(com.datastax.oss.driver.api.core.cql.AsyncResultSet)encodeValue(com.datastax.oss.driver.api.core.cql.AsyncResultSet)Class<AsyncResultSet> invalidates on exceptionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCallTest.javaResultSetFutureCallTestCompletableCallback<AsyncResultSet>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/test-classes/zipkin2/storage/cassandra/internal/call/ResultSetFutureCallTest$CompletableCallback.classResultSetFutureCallTest$CompletableCallbackC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCallTest.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCallTest$1.classResultSetFutureCallTest$1Base<AsyncResultSet>()Function<? super AsyncResultSet,? extends V>Function<V,AsyncResultSet>ResultSetFutureCall<AsyncResultSet>()CompletableCallback<AsyncResultSet>()onSuccess(com.datastax.oss.driver.api.core.cql.AsyncResultSet)Callback<T>ObjectAssert<AsyncResultSet>AbstractObjectAssert<ObjectAssert<AsyncResultSet>,AsyncResultSet>AbstractAssert<ObjectAssert<AsyncResultSet>,AsyncResultSet>Assert<ObjectAssert<AsyncResultSet>,AsyncResultSet>Descriptable<ObjectAssert<AsyncResultSet>>ExtensionPoints<ObjectAssert<AsyncResultSet>,AsyncResultSet>Condition<? super AsyncResultSet>Descriptable<Condition<? super AsyncResultSet>>Comparator<? super AsyncResultSet>Function<? super AsyncResultSet,? extends T>Consumer<AsyncResultSet>Predicate<? super AsyncResultSet>AbstractAssert<ObjectAssert<AsyncResultSet>,AsyncResultSet>(com.datastax.oss.driver.api.core.cql.AsyncResultSet,java.lang.Class)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/internal/call/ResultSetFutureCallTest$2.classResultSetFutureCallTest$2"The session is shutting down"The session is shutting downClass<QueryConsistencyException>"Rejected execution"Rejected execution this.future will be wrapped, so can't check if that is canceled. ensure the callback received the exception below are load related exceptions which should result in a backoff of storage requests not applicableC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertSpan_Input.javaAutoValue_InsertSpan_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandraC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotationsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sourcesgenerated-sourcesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertSpan_Input.classAutoValue_InsertSpan_Input(java.util.UUID,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,long,zipkin2.Endpoint,zipkin2.Endpoint,java.util.List,java.util.Map,java.lang.String,boolean,boolean)"Null ts_uuid"Null ts_uuid"Null trace_id"Null trace_id"Null id"Null id"Null annotations"Null annotations"Null tags"Null tags"Input{"
        + "ts_uuid="Input{ts_uuid=", "
        + "trace_id_high=", trace_id_high=", "
        + "trace_id="", "
        + "parent_id="", "
        + "id="", "
        + "kind="", "
        + "span="", "
        + "ts=", ts=", "
        + "duration="", "
        + "l_ep=", l_ep=", "
        + "r_ep=", r_ep=", "
        + "annotations="", "
        + "tags="", "
        + "annotation_query=", annotation_query=", "
        + "debug="", "
        + "shared="12311237 Generated by com.google.auto.value.processor.AutoValueProcessorC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertTraceByServiceRemoteService_Input.javaAutoValue_InsertTraceByServiceRemoteService_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertTraceByServiceRemoteService_Input.classAutoValue_InsertTraceByServiceRemoteService_Input(java.lang.String,java.lang.String,int,java.util.UUID,java.lang.String)"Null service"Null service"Null remote_service"Null remote_service"Null ts"Null ts"Input{"
        + "service="Input{service=", "
        + "remote_service=", remote_service=", "
        + "bucket=", bucket=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertTraceByServiceSpan_Input.javaAutoValue_InsertTraceByServiceSpan_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_InsertTraceByServiceSpan_Input.classAutoValue_InsertTraceByServiceSpan_Input(java.lang.String,java.lang.String,int,java.util.UUID,java.lang.String,long)"Null span"Null spanC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromServiceRemoteService_Input.javaAutoValue_SelectTraceIdsFromServiceRemoteService_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromServiceRemoteService_Input.classAutoValue_SelectTraceIdsFromServiceRemoteService_Input(java.lang.String,java.lang.String,int,java.util.UUID,java.util.UUID,int)"Null start_ts"Null start_ts"Null end_ts"Null end_ts", "
        + "start_ts=", start_ts=", "
        + "end_ts=", end_ts=", "
        + "limit_="C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromServiceSpan_Input.javaAutoValue_SelectTraceIdsFromServiceSpan_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromServiceSpan_Input.classAutoValue_SelectTraceIdsFromServiceSpan_Input(java.lang.String,java.lang.String,int,java.lang.Long,java.lang.Long,java.util.UUID,java.util.UUID,int)", "
        + "start_duration=", start_duration=", "
        + "end_duration=", end_duration=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromSpan_Input.javaAutoValue_SelectTraceIdsFromSpan_InputC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/cassandra/target/generated-sources/annotations/zipkin2/storage/cassandra/AutoValue_SelectTraceIdsFromSpan_Input.classAutoValue_SelectTraceIdsFromSpan_Input(java.lang.String,java.lang.String,java.util.UUID,java.util.UUID,int)"Input{"
        + "l_service="Input{l_service=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearchStorage: Elasticsearch (V2) error-prone doesn't like generated code and it wants you to depend on guava! -XepDisableWarningsInGeneratedCode -Xep:AutoValueImmutableFields:OFF -Xep:ExtendsAutoValue:OFF -Xep:AutoValueSubclassLeaked:OFFC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/BodyConverters.javaBodyConvertersC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/srczipkin2.elasticsearchcollectValuesNamedzipkin2.elasticsearch.internal.clientBodyConverter<List<DependencyLink>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/HttpCall$BodyConverter.classHttpCall$BodyConverterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/clientC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/targetHttpCall<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.classHttpCallC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/clientC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internalDEPENDENCY_LINKSC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/BodyConverters.classBodyConverter<List<Span>>SPANSBodyConverter<List<String>>KEYSBodyConverter<Object>BodyConverters()convertconvert(com.fasterxml.jackson.core.JsonParser,java.util.function.Supplier)contentStringSearchResultConverter<Span>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchResultConverter.classSearchResultConverterSearchResultConverter<>BodyConverter<>zipkin2.elasticsearch.internalObjectParser<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/JsonSerializers$ObjectParser.classJsonSerializers$ObjectParserSearchResultConverter<T>BodyConverter<List<T>>create(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)ObjectParser<T>SearchResultConverter(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)SearchResultConverter<>(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)ObjectParser<Span>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/BodyConverters$1.classBodyConverters$1SearchResultConverter<DependencyLink>ObjectParser<DependencyLink>SearchResultConverter<DependencyLink>(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchAutocompleteTags.javaElasticsearchAutocompleteTagsTYPE_AUTOCOMPLETEElasticsearchAutocompleteTags(zipkin2.elasticsearch.ElasticsearchStorage)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchAutocompleteTags.classindexNameFormatterbeginMillisindices"tagKey"tagKey"tagValue"tagValueHttpCall<List<String>>Base<List<String>>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchSpanConsumer.javaElasticsearchSpanConsumerTYPE_SPANindexSpansindexSpans(zipkin2.elasticsearch.ElasticsearchSpanConsumer.BulkSpanIndexer,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchSpanConsumer.classformatTypeAndTimestampForInsertformatTypeAndTimestampForInsert(java.lang.String,long)ElasticsearchSpanConsumer(zipkin2.elasticsearch.ElasticsearchStorage)DelayLimiter<AutocompleteContext>indexTypeDelimitertimestampMillisindexerindexTimestampnewCall()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/ElasticsearchSpanConsumer$BulkSpanIndexer.classElasticsearchSpanConsumer$BulkSpanIndexeraddAutocompleteValuesaddAutocompleteValues(long,zipkin2.Span)add(long,zipkin2.Span)BulkSpanIndexerBulkSpanIndexer(zipkin2.elasticsearch.ElasticsearchSpanConsumer)BulkIndexWriter<Span>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkIndexWriter.classBulkIndexWriterspanWriterList<AutocompleteContext>Collection<AutocompleteContext>Iterable<AutocompleteContext>pendingAutocompleteContextsbulkCallBuilderArrayList<AutocompleteContext>AbstractList<AutocompleteContext>AbstractCollection<AutocompleteContext>ArrayList<AutocompleteContext>()Spliterator<AutocompleteContext>? super AutocompleteContextConsumer<? super AutocompleteContext>Iterator<AutocompleteContext>Stream<AutocompleteContext>BaseStream<AutocompleteContext,Stream<AutocompleteContext>>Predicate<? super AutocompleteContext>? extends AutocompleteContextCollection<? extends AutocompleteContext>Iterable<? extends AutocompleteContext>add(zipkin2.elasticsearch.ElasticsearchSpanConsumer.AutocompleteContext)AbstractCollection<AutocompleteContext>()ListIterator<AutocompleteContext>add(int,zipkin2.elasticsearch.ElasticsearchSpanConsumer.AutocompleteContext)set(int,zipkin2.elasticsearch.ElasticsearchSpanConsumer.AutocompleteContext)Comparator<? super AutocompleteContext>UnaryOperator<AutocompleteContext>Function<AutocompleteContext,AutocompleteContext>AbstractList<AutocompleteContext>()ArrayList<AutocompleteContext>(java.util.Collection)ArrayList<AutocompleteContext>(int)"index-span"index-spanBulkIndexWriter<>shouldInvoke(zipkin2.elasticsearch.ElasticsearchSpanConsumer.AutocompleteContext)invalidate(zipkin2.elasticsearch.ElasticsearchSpanConsumer.AutocompleteContext)DelayLimiter<AutocompleteContext>(zipkin2.internal.DelayLimiter.SuppressionFactory,int)BulkIndexWriter<Entry<String,String>>storeCallHttpCall<Void>AutocompleteContextAutocompleteContext(long,java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/ElasticsearchSpanConsumer$AutocompleteContext.classElasticsearchSpanConsumer$AutocompleteContext which index to store this span into guessTimestamp is made for determining the span's authoritative timestamp. When choosing the index bucket, any annotation is better than using current time.Mutable type used for each call to store spans If the autocomplete whitelist doesn't contain the key, skip storing its valueC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchSpanStore.javaElasticsearchSpanStoreTYPE_DEPENDENCYaggregatedFieldByServiceNameaggregatedFieldByServiceName(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchSpanStore.classElasticsearchSpanStore(zipkin2.elasticsearch.ElasticsearchStorage)allSpanIndicesEARLIEST_MS1456790400000L1456790400000"timestamp_millis"timestamp_millis"desc"descesRequesttraceIdsCall"localEndpoint.serviceName"localEndpoint.serviceName"remoteEndpoint.serviceName"remoteEndpoint.serviceNamekv"_q"_qHttpCall<List<Span>>Base<List<Span>>termHttpCall<List<DependencyLink>>GetSpansByTraceIdGetSpansByTraceId(zipkin2.elasticsearch.internal.client.SearchCallFactory,java.util.List)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/ElasticsearchSpanStore$GetSpansByTraceId.classElasticsearchSpanStore$GetSpansByTraceIdFlatMapper<List<String>,List<Span>>"GetSpansByTraceId{indices="GetSpansByTraceId{indices=To not produce unnecessarily long queries, we don't look back further than first ES support March 2016 We need to filter to traces that contain at least one span that matches the request, but the zipkin API is supposed to order traces by first span, regardless of if it was filtered or not. This is not possible without either multiple, heavyweight queries or complex multiple indexing, defeating much of the elegance of using elasticsearch for this. So we fudge and order on the first span among the filtered spans - in practice, there should be no significant difference in user experience since span start times are usually very close to each other in human time. Elasticsearch lookup by trace ID is by the full 128-bit length, but there's still a chance of clash on lower-64 bit. When strict trace ID is enabled, we only filter client-side on clash. A span name is only valid on a local endpoint, as a span name is defined locally We just return all dependencies in the days that fall within endTs and lookback as dependency links themselves don't have timestamps.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.javaElasticsearchStorageV7_0V7_8ensureIndexTemplateenterPathBodyConverter<CheckResult>READ_STATUSC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.classElasticsearchStorage()http()buildUrlbuildUrl(zipkin2.elasticsearch.IndexTemplates,java.lang.String)versionSpecificTemplatesversionSpecificTemplates(zipkin2.elasticsearch.ElasticsearchVersion)doEnsureIndexTemplatesdoEnsureIndexTemplates()ensureIndexTemplatesensureIndexTemplates()ensuredTemplatesensureIndexTemplatesAndClusterReadyensureIndexTemplatesAndClusterReady(java.lang.String)clear(java.lang.String)indexTypeDelimiter()templatePriority()ensureTemplates()indexReplicas()indexShards()autocompleteCardinality()autocompleteTtl()autocompleteKeys()searchEnabled()lazyHttpClientlazyHttpClient()toBuildertoBuilder()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage$1.classElasticsearchStorage$1http(zipkin2.elasticsearch.ElasticsearchStorage)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage$2.classElasticsearchStorage$2"Health status couldn't be read "Health status couldn't be read "RED"RED"Health status is RED"Health status is RED"ReadStatus"ReadStatusSupplier<WebClient>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/ElasticsearchStorage$Builder.classElasticsearchStorage$BuilderindexNameFormatterBuilderindexNameFormatterBuilder()lazyHttpClient(zipkin2.elasticsearch.ElasticsearchStorage.LazyHttpClient)flushOnWritestoClear'/'HttpCall<Object>Base<Object>Callback<Object>ErrorHandler<Object>FlatMapper<Object,R>Mapper<Object,R>Call<Object>()Base<Object>()"delete-index"delete-indexHttpCall<CheckResult>Base<CheckResult>Call<CheckResult>Callback<CheckResult>ErrorHandler<CheckResult>FlatMapper<CheckResult,R>Mapper<CheckResult,R>Call<CheckResult>()Base<CheckResult>()"get-cluster-health"get-cluster-health"No content reading cluster health"No content reading cluster healthtemplatesindexPrefix"/_index_template/"/_index_template/"_template"_template"/_template/"/_template/"_template?include_type_name=true"_template?include_type_name=true"ElasticsearchStorage{initialEndpoints="ElasticsearchStorage{initialEndpoints=", index=", index=This defers creation of an {@link WebClient}. This is needed because routinely, I/O occurs inconstructors and this can delay or cause startup to crash. For example, an underlying {@linkEndpointGroup} could be delayed due to DNS, implicit api calls or health checks.Lazily creates an instance of the http client configured to the correct elasticsearch host orcluster. The same value should always be returned.This should return the initial endpoints in a single-string without resolving them.The lazy http client supplier will be closed on {@link #close()}Only valid when the destination is Elasticsearch 5.x. Indicates the ingest pipeline usedbefore spans are indexed. No default.<p>See https://www.elastic.co/guide/en/elasticsearch/reference/master/pipeline.htmlOnly return span and service names where all {@link zipkin2.Span#timestamp()} are at or after(now - lookback) in milliseconds. Defaults to 1 day (86400000).Internal and visible only for testing.<p>See https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-refresh.htmlThe index prefix to use when generating daily index names. Defaults to zipkin.The date separator to use when generating daily index names. Defaults to '-'.<p>By default, spans with a timestamp falling on 2016/03/19 end up in the index'zipkin-span-2016-03-19'. When the date separator is '.', the index would be'zipkin-span-2016.03.19'. If the date separator is 0, there is no delimiter. Ex the indexwould be 'zipkin-span-20160319'The number of shards to split the index into. Each shard and its replicas are assigned to amachine in the cluster. Increasing the number of shards and machines in the cluster willimprove read and write performance. Number of shards cannot be changed for existing indices,but new daily indices will pick up changes to the setting. Defaults to 5.<p>Corresponds to <ahref="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html">index.number_of_shards</a>The number of replica copies of each shard in the index. Each shard and its replicas areassigned to a machine in the cluster. Increasing the number of replicas and machines in thecluster will improve read performance, but not write performance. Number of replicas can bechanged for existing indices. Defaults to 1. It is highly discouraged to set this to 0 as itwould mean a machine failure results in data loss.href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html">index.number_of_replicas</a>False disables automatic index template installation.Only valid when the destination is Elasticsearch >= 7.8. Indicates the index templatepriority in case of multiple matching templates. The template with highest priority is used.Default to 0.<p>See https://www.elastic.co/guide/en/elasticsearch/reference/7.8/_index_template_and_settings_priority.html{@inheritDoc}Returns the Elasticsearch version of the connected cluster. Internal use onlyThis is an internal blocking call, only used in tests.Internal code and api responses coerce to {@link RejectedExecutionException} when work isrejected. We also classify {@link ResponseTimeoutException} as a capacity related exceptioneventhough capacity is not the only reason (timeout could also result from a misconfigurationor a network problem).This is blocking so that we can determine if the cluster is healthy or notThis allows the health check to display problems, such as access, installing the indextemplate. It also helps reduce traffic sent to nodes still initializing (when guarded on thecheck result). Finally, this reads the cluster health of the index as it can go down after theone-time initialization passes. ensure the version is available (even if we already cached it) called only once, so we have to double-check health Wrapping interferes with humans intended to read this message: Unwrap the marker exception as the health check is not relevant for the throttle component. Unwrap any IOException from the first call to ensureIndexTemplates() synchronized since we don't want overlapping calls to apply the index templates because deprecation warning on 6 to prepare for 7 : [types removal] The parameter include_type_name should be explicitly specified in get template requests to prepare for 7.0. In 7.0 include_type_name will default to 'false', which means responses will omit the type name in mapping definitions."C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchVersion.javaElasticsearchVersionElasticsearchVersion(int,int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchVersion.classminormajorget(zipkin2.elasticsearch.internal.client.HttpCall.Factory)Comparable<ElasticsearchVersion>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/ElasticsearchVersion$Parser.classElasticsearchVersion$ParserREGEXParserParser()BodyConverter<ElasticsearchVersion>"(\\d+)\\.(\\d+).*"(\d+)\.(\d+).*callFactoryHttpCall<ElasticsearchVersion>Base<ElasticsearchVersion>Call<ElasticsearchVersion>Callback<ElasticsearchVersion>ErrorHandler<ElasticsearchVersion>FlatMapper<ElasticsearchVersion,R>Mapper<ElasticsearchVersion,R>Call<ElasticsearchVersion>()Base<ElasticsearchVersion>()"get-node"get-node"No content reading Elasticsearch version"No content reading Elasticsearch versionmatcher"version""number"possiblyParseException".version.number not found in response: ".version.number not found in response: "Invalid .version.number: "Invalid .version.number: Helps avoid problems comparing versions by number. Ex 7.10 should be > 7.9C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/EnsureIndexTemplate.javaEnsureIndexTemplateensureIndexTemplate(zipkin2.elasticsearch.internal.client.HttpCall.Factory,java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/EnsureIndexTemplate.classEnsureIndexTemplate()templateUrlindexTemplategetTemplate"get-template"get-templateupdateTemplate"update-template"update-templateEnsures the index template exists and saves off the versionThis is a blocking call, used inside a lazy. That's because no writes should occur until thetemplate is available. TODO: handle 404 slightly more nicelyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/IndexTemplates.javaIndexTemplatesautocompleteautocomplete()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/IndexTemplates.classdependency()version()IndexTemplates()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/VersionSpecificTemplates.javaVersionSpecificTemplatesV5_0V6_0V8_0maybeWrapmaybeWrap(java.lang.String,zipkin2.elasticsearch.ElasticsearchVersion,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/VersionSpecificTemplates.classindexTypeDelimiter(zipkin2.elasticsearch.ElasticsearchVersion)useComposableTemplateuseComposableTemplate(zipkin2.elasticsearch.ElasticsearchVersion)get(zipkin2.elasticsearch.ElasticsearchVersion)autocompleteTemplateautocompleteTemplate(zipkin2.elasticsearch.ElasticsearchVersion)dependencyTemplatedependencyTemplate(zipkin2.elasticsearch.ElasticsearchVersion)spanIndexTemplatespanIndexTemplate(zipkin2.elasticsearch.ElasticsearchVersion)endTemplateendTemplate(zipkin2.elasticsearch.ElasticsearchVersion)beginTemplatebeginTemplate(java.lang.String,zipkin2.elasticsearch.ElasticsearchVersion)templatePriority(zipkin2.elasticsearch.ElasticsearchVersion)indexTemplateClosingindexTemplateClosing(zipkin2.elasticsearch.ElasticsearchVersion)indexTemplate(zipkin2.elasticsearch.ElasticsearchVersion)indexPropertiesindexProperties(zipkin2.elasticsearch.ElasticsearchVersion)indexPatternindexPattern(java.lang.String,zipkin2.elasticsearch.ElasticsearchVersion)VersionSpecificTemplates(java.lang.String,int,int,boolean,boolean,java.lang.Integer)KEYWORD"autocomplete""{ \"type\": \"keyword\", \"norms\": false }"{ "type": "keyword", "norms": false }"template"template"index_patterns"index_patterns"\": \"""-*"
      + "\""-*"""
      + "    \"index.number_of_shards\": "    "index.number_of_shards": ",\n"
      + "    \"index.number_of_replicas\": ",
    "index.number_of_replicas": ",\n"
      + "    \"index.requests.cache.enable\": true",
    "index.requests.cache.enable": true"\"template\": {\n""template": {
"},\n"},
"\"priority\": ""priority": "{\n"
      + "  "{
  ",\n",
"  \"settings\": {\n"  "settings": {
traceIdMapping"{ \"type\": \"text\", \"fielddata\": \"true\", \"analyzer\": \"traceId_analyzer\" }"{ "type": "text", "fielddata": "true", "analyzer": "traceId_analyzer" }",\n"
        + "    \"analysis\": {\n"
        + "      \"analyzer\": {\n"
        + "        \"traceId_analyzer\": {\n"
        + "          \"type\": \"custom\",\n"
        + "          \"tokenizer\": \"keyword\",\n"
        + "          \"filter\": \"traceId_filter\"\n"
        + "        }\n"
        + "      },\n"
        + "      \"filter\": {\n"
        + "        \"traceId_filter\": {\n"
        + "          \"type\": \"pattern_capture\",\n"
        + "          \"patterns\": [\"([0-9a-f]{1,16})$\"],\n"
        + "          \"preserve_original\": true\n"
        + "        }\n"
        + "      }\n"
        + "    }\n",
    "analysis": {
      "analyzer": {
        "traceId_analyzer": {
          "type": "custom",
          "tokenizer": "keyword",
          "filter": "traceId_filter"
        }
      },
      "filter": {
        "traceId_filter": {
          "type": "pattern_capture",
          "patterns": ["([0-9a-f]{1,16})$"],
          "preserve_original": true
        }
      }
    }
"  },\n"  },
"  \"mappings\": {\n"  "mappings": {
""
        + "    \"_source\": {\"excludes\": [\"_q\"] },\n"
        + "    \"dynamic_templates\": [\n"
        + "      {\n"
        + "        \"strings\": {\n"
        + "          \"mapping\": {\n"
        + "            \"type\": \"keyword\",\"norms\": false,"
        + " \"ignore_above\": "    "_source": {"excludes": ["_q"] },
    "dynamic_templates": [
      {
        "strings": {
          "mapping": {
            "type": "keyword","norms": false, "ignore_above": "\n"
        + "          },\n"
        + "          \"match_mapping_type\": \"string\",\n"
        + "          \"match\": \"*\"\n"
        + "        }\n"
        + "      }\n"
        + "    ],\n"
        + "    \"properties\": {\n"
        + "      \"traceId\": "
          },
          "match_mapping_type": "string",
          "match": "*"
        }
      }
    ],
    "properties": {
      "traceId": ",\n"
        + "      \"name\": ",
      "name": ",\n"
        + "      \"localEndpoint\": {\n"
        + "        \"type\": \"object\",\n"
        + "        \"dynamic\": false,\n"
        + "        \"properties\": { \"serviceName\": ",
      "localEndpoint": {
        "type": "object",
        "dynamic": false,
        "properties": { "serviceName": " }\n"
        + "      },\n"
        + "      \"remoteEndpoint\": {\n"
        + "        \"type\": \"object\",\n"
        + "        \"dynamic\": false,\n"
        + "        \"properties\": { \"serviceName\": " }
      },
      "remoteEndpoint": {
        "type": "object",
        "dynamic": false,
        "properties": { "serviceName": " }\n"
        + "      },\n"
        + "      \"timestamp_millis\": {\n"
        + "        \"type\":   \"date\",\n"
        + "        \"format\": \"epoch_millis\"\n"
        + "      },\n"
        + "      \"duration\": { \"type\": \"long\" },\n"
        + "      \"annotations\": { \"enabled\": false },\n"
        + "      \"tags\": { \"enabled\": false },\n"
        + "      \"_q\": " }
      },
      "timestamp_millis": {
        "type":   "date",
        "format": "epoch_millis"
      },
      "duration": { "type": "long" },
      "annotations": { "enabled": false },
      "tags": { "enabled": false },
      "_q": "\n"
        + "    }\n"
    }
"  }\n"  }
""
      + "    \"properties\": {\n"
      + "      \"traceId\": "    "properties": {
      "traceId": ",\n"
      + "      \"annotations\": { \"enabled\": false },\n"
      + "      \"tags\": { \"enabled\": false }\n"
      + "    }\n",
      "annotations": { "enabled": false },
      "tags": { "enabled": false }
    }
"  },\n"
      + "  \"mappings\": {\n"  },
  "mappings": {
"    \"enabled\": false\n"    "enabled": false
""
      + "    \"enabled\": true,\n"
      + "    \"properties\": {\n"
      + "      \"tagKey\": "    "enabled": true,
    "properties": {
      "tagKey": ",\n"
      + "      \"tagValue\": ",
      "tagValue": "\n"
      + "    }\n""Elasticsearch versions 5-7.x are supported, was: "Elasticsearch versions 5-7.x are supported, was: "    \""    ""\": {\n  "": {
  "\n  "
  Returns version-specific index templates TODO: make a main class that spits out the index template using ENV variables for the server, a parameter for the version, and a parameter for the index type. Ex. java -cp zipkin-storage-elasticsearch.jar zipkin2.elasticsearch.VersionSpecificTemplates 6.7 spanIn Zipkin search, we do exact match only (keyword). Norms is about scoring. We don't use thatin our API, and disable it to reduce disk storage needed. 6.x _all disabled https://www.elastic.co/guide/en/elasticsearch/reference/6.7/breaking-changes-6.0.html#_the_literal__all_literal_meta_field_is_now_disabled_by_default 7.x _default disallowed https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-7.0.html#_the_literal__default__literal_mapping_is_no_longer_allowedTemplatized due to version differences. Only fields used in search are declared Supporting mixed trace ID length is expensive due to needing a special analyzer and "fielddata" which consumes a lot of heap. Sites should only turn off strict trace ID when in a transition, and keep trace ID length transitions as short time as possible. The key filed of a autocompleteKeys is intentionally names as tagKey since it clashes with the BodyConverters KEYThis returns a delimiter based on what's supported by the Elasticsearch version.<p>Starting in Elasticsearch 7.x, colons are no longer allowed in index names. This logic willmake sure the pattern in our index template doesn't use them either.<p>See https://github.com/openzipkin/zipkin/issues/2219 ES 7.x defaults include_type_name to false https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-7.0.html#_literal_include_type_name_literal_now_defaults_to_literal_false_literalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkCallBuilder.javaBulkCallBuilderOBJECT_MAPPERIndexEntry<>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/BulkCallBuilder$IndexEntry.classBulkCallBuilder$IndexEntryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkCallBuilder.classwriteIndexMetadatawriteIndexMetadata(io.netty.buffer.ByteBufOutputStream,zipkin2.elasticsearch.internal.BulkCallBuilder.IndexEntry,java.lang.String,boolean)IndexEntry<T>serializeserialize(io.netty.buffer.ByteBufAllocator,zipkin2.elasticsearch.internal.BulkCallBuilder.IndexEntry,boolean)newIndexEntrynewIndexEntry(java.lang.String,java.lang.String,java.lang.Object,zipkin2.elasticsearch.internal.BulkIndexWriter)BulkIndexWriter<T>IndexEntry<?>List<IndexEntry<?>>Collection<IndexEntry<?>>Iterable<IndexEntry<?>>waitForRefreshshouldAddTypeBodyConverter<Void>CHECK_FOR_ERRORSArrayList<IndexEntry<?>>AbstractList<IndexEntry<?>>AbstractCollection<IndexEntry<?>>ArrayList<IndexEntry<?>>()Spliterator<IndexEntry<?>>? super IndexEntry<?>Consumer<? super IndexEntry<?>>Iterator<IndexEntry<?>>Stream<IndexEntry<?>>BaseStream<IndexEntry<?>,Stream<IndexEntry<?>>>Predicate<? super IndexEntry<?>>? extends IndexEntry<?>Collection<? extends IndexEntry<?>>Iterable<? extends IndexEntry<?>>add(zipkin2.elasticsearch.internal.BulkCallBuilder.IndexEntry)AbstractCollection<IndexEntry<?>>()ListIterator<IndexEntry<?>>add(int,zipkin2.elasticsearch.internal.BulkCallBuilder.IndexEntry)set(int,zipkin2.elasticsearch.internal.BulkCallBuilder.IndexEntry)Comparator<? super IndexEntry<?>>UnaryOperator<IndexEntry<?>>Function<IndexEntry<?>,IndexEntry<?>>AbstractList<IndexEntry<?>>()ArrayList<IndexEntry<?>>(java.util.Collection)ArrayList<IndexEntry<?>>(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkCallBuilder$1.classBulkCallBuilder$1toThrow"reason"reason"/errors"/errors"/error"/error429"CheckForErrors"CheckForErrorstypeNameAutoValue_BulkCallBuilder_IndexEntry<T>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/internal/AutoValue_BulkCallBuilder_IndexEntry.classAutoValue_BulkCallBuilder_IndexEntryC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/internalC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotationsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sourcesAutoValue_BulkCallBuilder_IndexEntry<T>(java.lang.String,java.lang.String,java.lang.Object,zipkin2.elasticsearch.internal.BulkIndexWriter)writer()input()typeName()index()IndexEntryIndexEntry()IndexEntry<T>()AutoValue_BulkCallBuilder_IndexEntry(java.lang.String,java.lang.String,java.lang.Object,zipkin2.elasticsearch.internal.BulkIndexWriter)urlBuilder"/_bulk"/_bulkFunction<RequestContext,ByteBufAllocator>Supplier<ByteBufAllocator>Function<RequestContext,V>? super ByteBufAllocatorFunction<? super ByteBufAllocator,? extends V>Function<V,ByteBufAllocator>? extends RequestContextFunction<? super V,? extends RequestContext>apply(com.linecorp.armeria.common.RequestContext)"pipeline""refresh"refresh"wait_for"wait_forBulkRequestSupplierBulkRequestSupplier(java.util.List,boolean,com.linecorp.armeria.common.RequestHeaders,io.netty.buffer.ByteBufAllocator)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/BulkCallBuilder$BulkRequestSupplier.classBulkCallBuilder$BulkRequestSupplierrequestStreamdocumentwriteDocumentwriteDocument(java.lang.Object,io.netty.buffer.ByteBufOutputStream)md5md5(io.netty.buffer.ByteBuf)addSearchFieldsaddSearchFields(zipkin2.Span,com.fasterxml.jackson.core.JsonGenerator)write(zipkin2.Endpoint,com.fasterxml.jackson.core.JsonGenerator)write(zipkin2.Annotation,com.fasterxml.jackson.core.JsonGenerator)write(java.util.Map.Entry,com.fasterxml.jackson.core.JsonGenerator)writeAutocompleteEntrywriteAutocompleteEntry(java.lang.String,java.lang.String,com.fasterxml.jackson.core.JsonGenerator)write(zipkin2.Span,boolean,io.netty.buffer.ByteBufOutputStream)AUTOCOMPLETESPAN_SEARCH_DISABLEDBulkIndexWriter()BulkIndexWriter<T>()"index""_index"_index"_type"_type"_id"_id See https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html exposed to re-use for testing writes of dependency links This mapper is invoked under the assumption that bulk requests return errors even when the http status is success. The status codes expected to be returned were undocumented as of version 7.2 https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html only throw when we know it is an error All use of jackson throws Mutated for each call to indexCreates a bulk request when there is more than one object to store Stream aborted, no need to serialize anymore. Fuzzily assume a general small span is 600 bytes to reduce resizing while building up the JSON. Any extra bytes will be released back after serializing the document. the _type parameter is needed for Elasticsearch < 6.x No I/O writing to a Buffer.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkIndexWriter.javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkIndexWriter$1.classBulkIndexWriter$1writeDocument(zipkin2.Span,io.netty.buffer.ByteBufOutputStream)BulkIndexWriter<Span>()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkIndexWriter$2.classBulkIndexWriter$2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/BulkIndexWriter$3.classBulkIndexWriter$3writeDocument(java.util.Map.Entry,io.netty.buffer.ByteBufOutputStream)BulkIndexWriter<Entry<String,String>>()"Couldn't close generator for a memory stream."Couldn't close generator for a memory stream.startIndexslicemessageDigest"MD5"MD5Write a complete json document according to index strategy and returns the ID field. Id is used to dedupe server side as necessary. Arbitrarily same format as _q value.In order to allow systems like Kibana to search by timestamp, we add a field "timestamp_millis"when storing. The cheapest way to do this without changing the codec is prefixing it to thejson. For example. {"traceId":"... becomes {"timestamp_millis":12345,"traceId":"...<p>Tags are stored as a dictionary. Since some tag names will include inconsistent number ofdots (ex "error" and perhaps "error.message"), we cannot index them naturally withelasticsearch. Instead, we add an index-only (non-source) field of {@code _q} which includesvalid search queries. For example, the tag {@code error -> 500} results in {@code"_q":["error", "error=500"]}. This matches the input query syntax, and can be checked manuallywith curl.<p>Ex {@code curl -s localhost:9200/zipkin:span-2017-08-11/_search?q=_q:error=500}encodes timestamp_millis and _q when non-empty get a slice representing the document we just wrote so that we can make a content hashC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/IndexNameFormatter.javaIndexNameFormatterofInstantDAY_OF_MONTHformat(long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/IndexNameFormatter.classprefix(java.lang.String)midnightUTC(long)formatIndexPatternformatIndexPattern(java.lang.String,java.util.GregorianCalendar,java.lang.String)dateFormatdateFormat()dateSeparator()autoBuildautoBuild()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/IndexNameFormatter$Builder.classIndexNameFormatter$BuilderdateFormat(java.time.format.DateTimeFormatter)separator"yyyyMMdd"yyyyMMdd"yyyy-MM-dd"yyyy-MM-dd"%s-%s%c*"%s-%s%c*"%s-%s%c%02d%c*"%s-%s%c%02d%c*"%s-%s%c%02d%c0*"%s-%s%c%02d%c0*"%s-%s%c%02d%c1*"%s-%s%c%02d%c1*"%s-%s%c%02d%c2*"%s-%s%c%02d%c2*"-""-*"-*<h3>Index-Prefix/type delimiter</h3>When Elasticsearch dropped support for multiple type indexes, we introduced a delimited namingconvention to distinguish between span, dependency and autocomplete documents. Originally, thiswas a colon prefix pattern. In version 7, Elasticsearch dropped support for colons in indexes. Tokeep existing writes consistent, we still use colon in versions prior to ES 7, eventhoughstarting at version 7, we change to hyphens. {@code zipkin2.elasticsearch.IndexTemplates} isresponsible for this decision.<p><h3>Creating indexes</h3>Using the default index prefix of "zipkin", when indexes are created, they look like thefollowing, based on the version.<li>ES up to v6: zipkin:span-2019-05-03 zipkin:dependency-2019-05-03 zipkin:autocomplete-2019-05-03</li><li>ES v7: zipkin-span-2019-05-03 zipkin-dependency-2019-05-03 zipkin-autocomplete-2019-05-03</li><p>We can allow an index prefix of up to 231 UTF-8 encoded bytes, subject to the index namingconstraints. This is the normal 255 limit minus the longest suffix (ex. -autocomplete-2019-05-03).<p><h3>Reading indexes</h3>While ES 7 cannot write new indexes with a colons, it can read them. Upon upgrade, some siteswill have a mixed read state where some indexes delimit types with a colon and others a hyphen.Accordingly, we use * in read patterns in place of a type delimiter. We use * because there is nosupport for single character wildcards in ES.<p><h3>Elasticsearch 7 naming constraints</h3>According to a <a href="https://github.com/elastic/elasticsearch/blob/83e9d0b9c63589f1dc5bda8abb6b10b27502ef71/server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java#L162">recentreference</a>, the following index naming constraints apply to index names as of ES 7:<li>No more than 255 UTF-8 encoded bytes</li><li>Cannot be . or ..</li><li>Cannot contain : or #</li><li>Cannot start with _ - or +</li>Returns a set of index patterns that represent the range provided. Notably, this compressesmonths or years using wildcards (in order to send smaller API calls).<p>For example, if {@code beginMillis} is 2016-11-30 and {@code endMillis} is 2017-01-02, theresult will be 2016-11-30, 2016-12-*, 2017-01-01 and 2017-01-02. attempt to compress a year rollover to next year rollback to first of the year attempt to compress a month rollover to next month try to compress days 0-9 rollover to day 10 set back to day 1 try to compress days 10-19 rollover to day 20 set back to day 10 try to compress days 20-29 rollover to day 30 set back to day 20On insert, require a version-specific index-type delimiter as ES 7+ dropped colons We use single-character wildcard here in order to read both : and - as starting in ES 7, : is no longer permitted.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/Internal.javaInternalEscalate internal APIs so they can be used from outside packages. The only implementation is in{@link ElasticsearchStorage}.<p>Inspired by {@code okhttp3.internal.Internal}.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonReaders.javaJsonReadersJsonReaders()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonReaders.classcheckStartObjectcheckStartObject(com.fasterxml.jackson.core.JsonParser,boolean)visitNextOrSkipvisitNextOrSkip(com.fasterxml.jackson.core.JsonParser,java.lang.String,java.util.Set)visitObjectvisitObject(com.fasterxml.jackson.core.JsonParser,java.lang.String,java.util.Set)path1path2shouldThrowcurrentToken"Expected start object, was "Expected start object, was Utilities used here aim to reduce allocation overhead for common requests. It does so by skippingunrelated fields. This is used for responses which could be large.Navigates to a field of a JSON-serialized object. For example,JsonParser status = enterPath(JsonAdapters.jsonParser(stream), "message", "status");if (status != null) throw new IllegalStateException(status.nextString()); End of input so ignore. Skip current value. The parser may not be at a token, yet. If that's the case advance. If we are still not at the expected token, we could be an another or an empty body. likely not jsonC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonSerializers.javaJsonSerializersparseAnnotationparseAnnotation(com.fasterxml.jackson.core.JsonParser)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonSerializers.classparseEndpointparseEndpoint(com.fasterxml.jackson.core.JsonParser)parseSpanparseSpan(com.fasterxml.jackson.core.JsonParser)parse(com.fasterxml.jackson.core.JsonParser)"Expected start of dependency link object but was "Expected start of dependency link object but was "End of input while parsing object."End of input while parsing object."Could not create JSON generator for a memory stream."Could not create JSON generator for a memory stream.jsonParser"Not a valid JSON object, start token: "Not a valid JSON object, start token: "Invalid span, expecting annotations array start, got: "Invalid span, expecting annotations array start, got: "Invalid span, expecting tags object, got: "Invalid span, expecting tags object, got: JSON serialization utilities and parsing code. SkipC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/Aggregation.javaAggregationAggregation(java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/Aggregation.classMap<String,Aggregation>aggstermssubAggdirection"field"orderorder(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/Aggregation$AggTerms.classAggregation$AggTermsAggTermsAggTerms(java.lang.String,int)aggLinkedHashMap<String,Aggregation>HashMap<String,Aggregation>AbstractMap<String,Aggregation>LinkedHashMap<String,Aggregation>()? super Aggregation? extends AggregationBiFunction<? super Aggregation,? super Aggregation,? extends Aggregation>merge(java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation,java.util.function.BiFunction)BiFunction<? super String,? super Aggregation,? extends Aggregation>Function<? super String,? extends Aggregation>replace(java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation)replace(java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation,zipkin2.elasticsearch.internal.client.Aggregation)putIfAbsent(java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation)BiConsumer<? super String,? super Aggregation>getOrDefault(java.lang.Object,zipkin2.elasticsearch.internal.client.Aggregation)Entry<String,Aggregation>Set<Entry<String,Aggregation>>Collection<Entry<String,Aggregation>>Iterable<Entry<String,Aggregation>>Collection<Aggregation>Iterable<Aggregation>Map<? extends String,? extends Aggregation>put(java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation)AbstractMap<String,Aggregation>()Node<String,Aggregation>TreeNode<String,Aggregation>newTreeNode(int,java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation,java.util.HashMap.Node)newNode(int,java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation,java.util.HashMap.Node)Node<String,Aggregation>[]putVal(int,java.lang.String,zipkin2.elasticsearch.internal.client.Aggregation,boolean,boolean)HashMap<String,Aggregation>(java.util.Map)HashMap<String,Aggregation>()HashMap<String,Aggregation>(int)HashMap<String,Aggregation>(int,float)LinkedHashMap<String,Aggregation>(int,float,boolean)LinkedHashMap<String,Aggregation>(java.util.Map)LinkedHashMap<String,Aggregation>(int)LinkedHashMap<String,Aggregation>(int,float)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.javaBodyConverter<V>parseResponseparseResponse(com.linecorp.armeria.common.AggregatedHttpResponse,zipkin2.elasticsearch.internal.client.HttpCall.BodyConverter)sendRequestsendRequest()HttpCall(com.linecorp.armeria.client.WebClient,zipkin2.elasticsearch.internal.client.HttpCall.RequestSupplier,zipkin2.elasticsearch.internal.client.HttpCall.BodyConverter,java.lang.String)bodyConverterobjAggregatedRequestSupplierAggregatedRequestSupplier(com.linecorp.armeria.common.AggregatedHttpRequest)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/HttpCall$AggregatedRequestSupplier.classHttpCall$AggregatedRequestSupplierC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/HttpCall$Factory.classHttpCall$FactoryHttpCall<V>HttpCall<V>(com.linecorp.armeria.client.WebClient,zipkin2.elasticsearch.internal.client.HttpCall.RequestSupplier,zipkin2.elasticsearch.internal.client.HttpCall.BodyConverter,java.lang.String)eventLoop"Attempting to make a blocking request from an event loop. "
          + "Either use doEnqueue() or run this in a separate thread."Attempting to make a blocking request from an event loop. Either use doEnqueue() or run this in a separate thread."HttpCall("HttpCall(Function<RequestContext,CompletableFuture<AggregatedHttpResponse>>Supplier<CompletableFuture<AggregatedHttpResponse>>? super CompletableFuture<AggregatedHttpResponse>Function<? super CompletableFuture<AggregatedHttpResponse>,? extends V>Function<V,CompletableFuture<AggregatedHttpResponse>>? super ClientRequestContextConsumer<? super ClientRequestContext>Consumer<ClientRequestContext>accept(com.linecorp.armeria.client.ClientRequestContext)httpRequesttryWritetryWrite(com.linecorp.armeria.common.HttpData)com.linecorp.armeria.common.streamStreamWriter<HttpObject>C:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/common/streamC:/Users/Semiu/.m2/repository/com/linecorp/armeria/armeria/1.3.0/armeria-1.3.0.jar/com/linecorp/armeria/common/stream/StreamWriter.classStreamWriterclose(java.lang.Throwable)whenConsumedwhenConsumed()tryWrite(java.util.function.Supplier)Supplier<? extends HttpObject>tryWrite(java.lang.Object)tryWrite(com.linecorp.armeria.common.HttpObject)write(java.util.function.Supplier)write(java.lang.Object)write(com.linecorp.armeria.common.HttpObject)isOpen()Function<Throwable,AggregatedHttpResponse>Function<Throwable,V>Function<? super AggregatedHttpResponse,? extends V>Function<V,AggregatedHttpResponse>Function<? super V,? extends Throwable>apply(java.lang.Throwable)Enum<HttpStatusClass>Comparable<HttpStatusClass>compareTo(com.linecorp.armeria.common.HttpStatusClass)EnumDesc<HttpStatusClass>DynamicConstantDesc<HttpStatusClass>Optional<EnumDesc<HttpStatusClass>>Class<HttpStatusClass>Enum<HttpStatusClass>(java.lang.String,int)"response for "response for " failed: " failed: "/Message"/MessagePrefer using the {@code parser} for request-scoped conversions. Typically, {@codecontentString} is only for an unexpected failure.A request stream which can have {@link HttpData} of the request body written to it.Writes the {@link HttpData} to the stream. Returns {@code false} if the stream has beenaborted (e.g., the request timed out while writing), or {@code true} otherwise.A supplier of {@linkplain HttpHeaders headers} and {@linkplain HttpData body} of a request toElasticsearch.Returns the {@linkplain HttpHeaders headers} for this request.Writes the body of this request into the {@link RequestStream}. {@linkRequestStream#tryWrite(HttpData)} can be called any number of times to publish any number ofpayload objects. It can be useful to split up a large payload into smaller chunks instead ofbuffering everything as one payload. Unfortunately it's not possible to use pooled objects in requests and support clone() after sending the request. Visible for benchmarks TODO: testme Unreachable This should never be used in practice since the module runs in an Armeria server. Go ahead and reduce the output in logs since this is usually a configuration or infrastructure issue and the Armeria stack trace won't help debugging that. Handle the case where there is no content, as that means we have no resources to release. If this is a client or server error, we look for a json message.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchCallFactory.javaSearchCallFactorylenientSearchlenientSearch(java.util.List,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchCallFactory.class"Could not serialize SearchRequest to bytes."Could not serialize SearchRequest to bytes."/_search?allow_no_indices=true&expand_wildcards=open&ignore_unavailable=true"/_search?allow_no_indices=true&expand_wildcards=open&ignore_unavailable=trueMatches the behavior of {@code IndicesOptions#lenientExpandOpen()}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchRequest.javaSearchRequestquery(java.lang.Object)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchRequest.classtag()SearchRequest(java.util.List,java.lang.String)_sourceMAX_RESULT_WINDOWArrayList<Object>AbstractList<Object>AbstractCollection<Object>"must"must"aggregation"aggregation"search"Map<String,Map<String,Object>>"bool""filter"TermTerm(java.lang.String,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchRequest$Term.classSearchRequest$TermTermsTerms(java.lang.String,java.util.Collection)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchRequest$Terms.classSearchRequest$TermsRangeRange(java.lang.String,long,java.lang.Long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchRequest$Range.classSearchRequest$RangeMap<String,Bounds>BoundsBounds(long,java.lang.Long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchRequest$Range$Bounds.classSearchRequest$Range$Boundsinclude_upperinclude_lower"include_lower""include_upper"BoolQueryBoolQuery(java.lang.String,java.lang.Object)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchRequest$BoolQuery.classSearchRequest$BoolQueryopclauseThe maximum results returned in a query. This only affects non-aggregation requests.<p>Not configurable as it implies adjustments to the index template (index.max_result_window)<p> See https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html the default elasticsearch allowed limit we return aggs, not source dataC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchResultConverter.javaSearchResultConverter<T>(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)hits"hits""_source"C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchAutocompleteTagsTest.javaElasticsearchAutocompleteTagsTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/testgetValues()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchAutocompleteTagsTest.classgetValues_requestIncludesKeyNamegetValues_requestIncludesKeyName()get_list_of_autocomplete_keysget_list_of_autocomplete_keys()setUpsetUp()SUCCESS_RESPONSEElasticsearchAutocompleteTagsTest()"http#host"http#host"http-url"http-url"http.method"http.method"\"tagKey\":\"http.method\"""tagKey":"http.method""post" note: we don't enqueue a request!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchSpanConsumerTest.javaElasticsearchSpanConsumerTestaccept(zipkin2.Span[])C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchSpanConsumerTest.classaddsAutocompleteValue_revertsSuppressionOnFailureaddsAutocompleteValue_revertsSuppressionOnFailure()addsAutocompleteValue_differentDaysaddsAutocompleteValue_differentDays()addsAutocompleteValue_suppressesWhenSameDayaddsAutocompleteValue_suppressesWhenSameDay()addsAutocompleteValueaddsAutocompleteValue()searchDisabled_doesntAddTimestampMillissearchDisabled_doesntAddTimestampMillis()searchDisabled_simplerIndexTemplatesearchDisabled_simplerIndexTemplate()choosesTypeSpecificIndexchoosesTypeSpecificIndex()addsPipelineIdaddsPipelineId()traceIsSearchableByServerServiceNametraceIsSearchableByServerServiceName()writesSpanNaturallyWhenNoTimestampwritesSpanNaturallyWhenNoTimestamp()addsTimestamp_millisIntoJsonaddsTimestamp_millisIntoJson()ensureIndexTemplates(zipkin2.elasticsearch.ElasticsearchStorage)ensureIndexTemplate()APP_ENDPOINTWEB_ENDPOINTElasticsearchSpanConsumerTest()"web"web"app"app"{\"version\":{\"number\":\"6.0.0\"}}"{"version":{"number":"6.0.0"}}"20""\n{\"timestamp_millis\":"
{"timestamp_millis":",\"traceId\":","traceId":"22"22"21"serverSpan2000L"{\"timestamp_millis\":2"{"timestamp_millis":2"{\"timestamp_millis\":1"{"timestamp_millis":1"/_bulk?pipeline=zipkin"/_bulk?pipeline=zipkin"s""{\"index\":{\"_index\":\"zipkin:span-1971-01-01\",\"_type\":\"span\""{"index":{"_index":"zipkin:span-1971-01-01","_type":"span"""
          + "  \"mappings\": {\n"
          + "    \"span\": {\n"
          + "      \"properties\": {\n"
          + "        \"traceId\": { \"type\": \"keyword\", \"norms\": false },\n"
          + "        \"annotations\": { \"enabled\": false },\n"
          + "        \"tags\": { \"enabled\": false }\n"
          + "      }\n"
          + "    }\n"
          + "  }\n"  "mappings": {
    "span": {
      "properties": {
        "traceId": { "type": "keyword", "norms": false },
        "annotations": { "enabled": false },
        "tags": { "enabled": false }
      }
    }
  }
"A"""
        + "{\"index\":{\"_index\":\"zipkin:autocomplete-1970-01-01\",\"_type\":\"autocomplete\",\"_id\":\"environment=A\"}}\n"
        + "{\"tagKey\":\"environment\",\"tagValue\":\"A\"}\n"{"index":{"_index":"zipkin:autocomplete-1970-01-01","_type":"autocomplete","_id":"environment=A"}}
{"tagKey":"environment","tagValue":"A"}
""
        + "{\"index\":{\"_index\":\"zipkin:autocomplete-1970-01-02\",\"_type\":\"autocomplete\",\"_id\":\"environment=A\"}}\n"
        + "{\"tagKey\":\"environment\",\"tagValue\":\"A\"}\n"{"index":{"_index":"zipkin:autocomplete-1970-01-02","_type":"autocomplete","_id":"environment=A"}}
{"tagKey":"environment","tagValue":"A"}
 gets the index template so that each test doesn't have to get span template get dependency template get tags template get version make sure that both timestamps are in the index1971-01-01 sanity check data index timestamp is the server timestamp, not current time!Much simpler template which doesn't write the timestamp_millis field put span templateLess overhead as a span json isn't rewritten to include a millis timestamp for the bulk request skip first the tag is in the same date range as the other, so it should not write the tag again different day == different context We only cache when there was no error.. the second request should be same as the firstC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchSpanStoreTest.javaElasticsearchSpanStoreTestrequestLimitedTo2DaysOfIndices_singleTypeIndexrequestLimitedTo2DaysOfIndices_singleTypeIndex()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchSpanStoreTest.classsearchDisabled_doesntMakeRemoteQueryRequestssearchDisabled_doesntMakeRemoteQueryRequests()spanNames_defaultsTo24HrsAgo_6xspanNames_defaultsTo24HrsAgo_6x()serviceNames_defaultsTo24HrsAgo_6xserviceNames_defaultsTo24HrsAgo_6x()truncatesTraceIdTo16CharsWhenNotStricttruncatesTraceIdTo16CharsWhenNotStrict()doesntTruncateTraceIdByDefaultdoesntTruncateTraceIdByDefault()EMPTY_RESPONSEElasticsearchSpanStoreTest()"48fec942f3e78b893041d36dc43227fd"48fec942f3e78b893041d36dc43227fd"\"traceId\":\"48fec942f3e78b893041d36dc43227fd\"""traceId":"48fec942f3e78b893041d36dc43227fd""\"traceId\":\"3041d36dc43227fd\"""traceId":"3041d36dc43227fd"ObjectAssert<RecordedRequest>AbstractObjectAssert<ObjectAssert<RecordedRequest>,RecordedRequest>AbstractAssert<ObjectAssert<RecordedRequest>,RecordedRequest>Assert<ObjectAssert<RecordedRequest>,RecordedRequest>Descriptable<ObjectAssert<RecordedRequest>>ExtensionPoints<ObjectAssert<RecordedRequest>,RecordedRequest>? super RecordedRequestCondition<? super RecordedRequest>Descriptable<Condition<? super RecordedRequest>>Comparator<? super RecordedRequest>Function<? super RecordedRequest,? extends T>Consumer<RecordedRequest>Predicate<? super RecordedRequest>AbstractAssert<ObjectAssert<RecordedRequest>,RecordedRequest>(com.linecorp.armeria.testing.junit5.server.mock.RecordedRequest,java.lang.Class)todayyesterdayindexesToSearch"/_search"/_search skip template check 24 hrs ago always will fall into 2 days (ex. if it is 4:00pm, 24hrs ago is a different day)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchStorageTest.javaElasticsearchStorageTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchStorageTest.classcheck_create_composable_indexTemplate_resourcePath_version79check_create_composable_indexTemplate_resourcePath_version79()check_create_legacy_indexTemplate_resourcePath_version79check_create_legacy_indexTemplate_resourcePath_version79()check_create_composable_indexTemplate_resourcePath_version78check_create_composable_indexTemplate_resourcePath_version78()check_create_legacy_indexTemplate_resourcePath_version78check_create_legacy_indexTemplate_resourcePath_version78()isOverCapacity()check_unauthorizedcheck_unauthorized()check_fail_onNoContentcheck_fail_onNoContent()check_ensuresIndexTemplates_fail_onNoContentcheck_ensuresIndexTemplates_fail_onNoContent()check_ensuresIndexTemplates_memoziedcheck_ensuresIndexTemplates_memozied()RESPONSE_VERSION_6RESPONSE_UNAUTHORIZEDHEALTH_RESPONSEmemoizesIndexTemplatememoizesIndexTemplate()ensureIndexTemplates_falseensureIndexTemplates_false()ElasticsearchStorageTest()"{\n"
      + "  \"cluster_name\": \"elasticsearch_zipkin\",\n"
      + "  \"status\": \"yellow\",\n"
      + "  \"timed_out\": false,\n"
      + "  \"number_of_nodes\": 1,\n"
      + "  \"number_of_data_nodes\": 1,\n"
      + "  \"active_primary_shards\": 5,\n"
      + "  \"active_shards\": 5,\n"
      + "  \"relocating_shards\": 0,\n"
      + "  \"initializing_shards\": 0,\n"
      + "  \"unassigned_shards\": 5,\n"
      + "  \"delayed_unassigned_shards\": 0,\n"
      + "  \"number_of_pending_tasks\": 0,\n"
      + "  \"number_of_in_flight_fetch\": 0,\n"
      + "  \"task_max_waiting_in_queue_millis\": 0,\n"
      + "  \"active_shards_percent_as_number\": 50\n"
      + "}"{
  "cluster_name": "elasticsearch_zipkin",
  "status": "yellow",
  "timed_out": false,
  "number_of_nodes": 1,
  "number_of_data_nodes": 1,
  "active_primary_shards": 5,
  "active_shards": 5,
  "relocating_shards": 0,
  "initializing_shards": 0,
  "unassigned_shards": 5,
  "delayed_unassigned_shards": 0,
  "number_of_pending_tasks": 0,
  "number_of_in_flight_fetch": 0,
  "task_max_waiting_in_queue_millis": 0,
  "active_shards_percent_as_number": 50
}"{\"Message\":\"User: anonymous is not authorized to perform: es:ESHttpGet\"}}"{"Message":"User: anonymous is not authorized to perform: es:ESHttpGet"}}"{\"version\":{\"number\":\"6.7.0\"}}"{"version":{"number":"6.7.0"}}"2016-10-02T00:00:00Z"2016-10-02T00:00:00Z"/zipkin*dependency-2016-10-01,zipkin*dependency-2016-10-02/_search"/zipkin*dependency-2016-10-01,zipkin*dependency-2016-10-02/_searchObjectAssert<CheckResult>AbstractObjectAssert<ObjectAssert<CheckResult>,CheckResult>AbstractAssert<ObjectAssert<CheckResult>,CheckResult>Assert<ObjectAssert<CheckResult>,CheckResult>Descriptable<ObjectAssert<CheckResult>>ExtensionPoints<ObjectAssert<CheckResult>,CheckResult>? super CheckResultCondition<? super CheckResult>Descriptable<Condition<? super CheckResult>>Comparator<? super CheckResult>Function<? super CheckResult,? extends T>Consumer<CheckResult>Predicate<? super CheckResult>AbstractAssert<ObjectAssert<CheckResult>,CheckResult>(zipkin2.CheckResult,java.lang.Class)"User: anonymous is not authorized to perform: es:ESHttpGet"User: anonymous is not authorized to perform: es:ESHttpGet"{\"status\":429,\"error\":{\"type\":\"es_rejected_execution_exception\"}}"{"status":429,"error":{"type":"es_rejected_execution_exception"}}"Rejected execution: No endpoints."Rejected execution: No endpoints."No endpoints"No endpoints"ElasticsearchStorage{initialEndpoints=%s, index=zipkin}"ElasticsearchStorage{initialEndpoints=%s, index=zipkin}"{\"version\":{\"number\":\"7.8.0\"}}"{"version":{"number":"7.8.0"}}"/_template/zipkin-span_template"/_template/zipkin-span_template"/_template/zipkin-dependency_template"/_template/zipkin-dependency_template"/_template/zipkin-autocomplete_template"/_template/zipkin-autocomplete_template"/_index_template/zipkin-span_template"/_index_template/zipkin-span_template"/_index_template/zipkin-dependency_template"/_index_template/zipkin-dependency_template"/_index_template/zipkin-autocomplete_template"/_index_template/zipkin-autocomplete_template"{\"version\":{\"number\":\"7.9.0\"}}"{"version":{"number":"7.9.0"}}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchStorageTest$1.classElasticsearchStorageTest$1 dependencies request below is actual message from Amazon Later checks do not redo index template requests makes sure we don't NPE empty instead of version json assume index templates called before empty instead of success response TODO: when Armeria's mock server supports it, add a test for IOExceptionSee {@link HttpCallTest#unprocessedRequest()} which shows {@link UnprocessedRequestException}are re-wrapped as {@link RejectedExecutionException}. timeout top-level re-wrappedEnsure that Zipkin uses the legacy resource path when priority is not set. get autocomplete template cluster health // get dependency templateEnsure that Zipkin uses the correct resource path of /_index_template when creating indextemplate for ES 7.8 when priority is set, as opposed to ES < 7.8 that uses /_template/ Set up a new storage with prioritytemplate for ES 7.9 when priority is set, as opposed to ES < 7.8 that uses /_template/C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchVersionTest.javaElasticsearchVersionTestversion7_10IsGreaterThan_V7_2version7_10IsGreaterThan_V7_2()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchVersionTest.classversion7version7()version6version6()version5version5()version2version2()unauthorizedunauthorized()wrongContentwrongContent()VERSION_RESPONSE_2VERSION_RESPONSE_5VERSION_RESPONSE_6VERSION_RESPONSE_7V6_7V2_4ElasticsearchVersionTest()""
      + "{\n"
      + "  \"name\" : \"zipkin-elasticsearch\",\n"
      + "  \"cluster_name\" : \"docker-cluster\",\n"
      + "  \"cluster_uuid\" : \"wByRPgSgTryYl0TZXW4MsA\",\n"
      + "  \"version\" : {\n"
      + "    \"number\" : \"7.0.1\",\n"
      + "    \"build_flavor\" : \"default\",\n"
      + "    \"build_type\" : \"tar\",\n"
      + "    \"build_hash\" : \"e4efcb5\",\n"
      + "    \"build_date\" : \"2019-04-29T12:56:03.145736Z\",\n"
      + "    \"build_snapshot\" : false,\n"
      + "    \"lucene_version\" : \"8.0.0\",\n"
      + "    \"minimum_wire_compatibility_version\" : \"6.7.0\",\n"
      + "    \"minimum_index_compatibility_version\" : \"6.0.0-beta1\"\n"
      + "  },\n"
      + "  \"tagline\" : \"You Know, for Search\"\n"
      + "}"{
  "name" : "zipkin-elasticsearch",
  "cluster_name" : "docker-cluster",
  "cluster_uuid" : "wByRPgSgTryYl0TZXW4MsA",
  "version" : {
    "number" : "7.0.1",
    "build_flavor" : "default",
    "build_type" : "tar",
    "build_hash" : "e4efcb5",
    "build_date" : "2019-04-29T12:56:03.145736Z",
    "build_snapshot" : false,
    "lucene_version" : "8.0.0",
    "minimum_wire_compatibility_version" : "6.7.0",
    "minimum_index_compatibility_version" : "6.0.0-beta1"
  },
  "tagline" : "You Know, for Search"
}""
      + "{\n"
      + "  \"name\" : \"PV-NhJd\",\n"
      + "  \"cluster_name\" : \"CollectorDBCluster\",\n"
      + "  \"cluster_uuid\" : \"UjZaM0fQRC6tkHINCg9y8w\",\n"
      + "  \"version\" : {\n"
      + "    \"number\" : \"6.7.0\",\n"
      + "    \"build_flavor\" : \"oss\",\n"
      + "    \"build_type\" : \"tar\",\n"
      + "    \"build_hash\" : \"8453f77\",\n"
      + "    \"build_date\" : \"2019-03-21T15:32:29.844721Z\",\n"
      + "    \"build_snapshot\" : false,\n"
      + "    \"lucene_version\" : \"7.7.0\",\n"
      + "    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n"
      + "    \"minimum_index_compatibility_version\" : \"5.0.0\"\n"
      + "  },\n"
      + "  \"tagline\" : \"You Know, for Search\"\n"
      + "}"""
      + "{\n"
      + "  \"name\" : \"vU0g1--\",\n"
      + "  \"cluster_name\" : \"elasticsearch\",\n"
      + "  \"cluster_uuid\" : \"Fnm277ITSNyzsy0UCVFN7g\",\n"
      + "  \"version\" : {\n"
      + "    \"number\" : \"5.0.0\",\n"
      + "    \"build_hash\" : \"253032b\",\n"
      + "    \"build_date\" : \"2016-10-26T04:37:51.531Z\",\n"
      + "    \"build_snapshot\" : false,\n"
      + "    \"lucene_version\" : \"6.2.0\"\n"
      + "  },\n"
      + "  \"tagline\" : \"You Know, for Search\"\n"
      + "}"{
  "name" : "vU0g1--",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "Fnm277ITSNyzsy0UCVFN7g",
  "version" : {
    "number" : "5.0.0",
    "build_hash" : "253032b",
    "build_date" : "2016-10-26T04:37:51.531Z",
    "build_snapshot" : false,
    "lucene_version" : "6.2.0"
  },
  "tagline" : "You Know, for Search"
}""
      + "{\n"
      + "  \"name\" : \"Kamal\",\n"
      + "  \"cluster_name\" : \"elasticsearch\",\n"
      + "  \"version\" : {\n"
      + "    \"number\" : \"2.4.0\",\n"
      + "    \"build_hash\" : \"ce9f0c7394dee074091dd1bc4e9469251181fc55\",\n"
      + "    \"build_timestamp\" : \"2016-08-29T09:14:17Z\",\n"
      + "    \"build_snapshot\" : false,\n"
      + "    \"lucene_version\" : \"5.5.2\"\n"
      + "  },\n"
      + "  \"tagline\" : \"You Know, for Search\"\n"
      + "}"{
  "name" : "Kamal",
  "cluster_name" : "elasticsearch",
  "version" : {
    "number" : "2.4.0",
    "build_hash" : "ce9f0c7394dee074091dd1bc4e9469251181fc55",
    "build_timestamp" : "2016-08-29T09:14:17Z",
    "build_snapshot" : false,
    "lucene_version" : "5.5.2"
  },
  "tagline" : "You Know, for Search"
}"you got mail"you got mail".version.number not found in response: you got mail".version.number not found in response: you got mailAbstractComparableAssert<?,ElasticsearchVersion>AbstractObjectAssert<?,ElasticsearchVersion>AbstractAssert<?,ElasticsearchVersion>Assert<?,ElasticsearchVersion>ExtensionPoints<?,ElasticsearchVersion>ComparableAssert<?,ElasticsearchVersion>? super ElasticsearchVersionCondition<? super ElasticsearchVersion>Descriptable<Condition<? super ElasticsearchVersion>>Comparator<? super ElasticsearchVersion>Function<? super ElasticsearchVersion,? extends T>Consumer<ElasticsearchVersion>Predicate<? super ElasticsearchVersion>AbstractAssert<?,ElasticsearchVersion>(zipkin2.elasticsearch.ElasticsearchVersion,java.lang.Class)isGreaterThan(zipkin2.elasticsearch.ElasticsearchVersion)Function<ElasticsearchVersion,T>Function<? super ElasticsearchVersion,T>Function<? super ElasticsearchVersion,?>Function<? super ElasticsearchVersion,?>[]AbstractObjectAssert<?,ElasticsearchVersion>(zipkin2.elasticsearch.ElasticsearchVersion,java.lang.Class)isStrictlyBetween(zipkin2.elasticsearch.ElasticsearchVersion,zipkin2.elasticsearch.ElasticsearchVersion)isBetween(zipkin2.elasticsearch.ElasticsearchVersion,zipkin2.elasticsearch.ElasticsearchVersion)isGreaterThanOrEqualTo(zipkin2.elasticsearch.ElasticsearchVersion)isLessThanOrEqualTo(zipkin2.elasticsearch.ElasticsearchVersion)isLessThan(zipkin2.elasticsearch.ElasticsearchVersion)isNotEqualByComparingTo(zipkin2.elasticsearch.ElasticsearchVersion)isEqualByComparingTo(zipkin2.elasticsearch.ElasticsearchVersion)AbstractComparableAssert<?,ElasticsearchVersion>(zipkin2.elasticsearch.ElasticsearchVersion,java.lang.Class)"7.10"7.10Unsupported, but we should test that parsing worksProve we compare better than a float. A float of 7.10 is the same as 7.1!C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/InternalForTests.javaBulkIndexWriter<DependencyLink>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/BulkIndexWriter.classDEPENDENCY_LINK_WRITERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/InternalForTests.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/InternalForTests$1.classInternalForTests$1writeDocument(zipkin2.DependencyLink,io.netty.buffer.ByteBufOutputStream)BulkIndexWriter<DependencyLink>()"|"|"indexlinks"indexlinksC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/HttpCall.classPackage accessor for integration testsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/JsonReadersTest.javaJsonReadersTest"{\n"
      + "  \"name\" : \"Kamal\",\n"
      + "  \"cluster_name\" : \"elasticsearch\",\n"
      + "  \"version\" : {\n"
      + "    \"number\" : \"2.4.0\",\n"
      + "    \"build_hash\" : \"ce9f0c7394dee074091dd1bc4e9469251181fc55\",\n"
      + "    \"build_timestamp\" : \"2016-08-29T09:14:17Z\",\n"
      + "    \"build_snapshot\" : false,\n"
      + "    \"lucene_version\" : \"5.5.2\"\n"
      + "  },\n"
      + "  \"tagline\" : \"You Know, for Search\"\n"
      + "}""2.4.0"ObjectAssert<JsonParser>AbstractObjectAssert<ObjectAssert<JsonParser>,JsonParser>AbstractAssert<ObjectAssert<JsonParser>,JsonParser>Assert<ObjectAssert<JsonParser>,JsonParser>Descriptable<ObjectAssert<JsonParser>>ExtensionPoints<ObjectAssert<JsonParser>,JsonParser>? super JsonParserCondition<? super JsonParser>Descriptable<Condition<? super JsonParser>>Comparator<? super JsonParser>Function<? super JsonParser,? extends T>Consumer<JsonParser>Predicate<? super JsonParser>AbstractAssert<ObjectAssert<JsonParser>,JsonParser>(com.fasterxml.jackson.core.JsonParser,java.lang.Class)"{\n"
      + "  \"took\": 1,\n"
      + "  \"timed_out\": false,\n"
      + "  \"_shards\": {\n"
      + "    \"total\": 0,\n"
      + "    \"successful\": 0,\n"
      + "    \"failed\": 0\n"
      + "  },\n"
      + "  \"hits\": {\n"
      + "    \"total\": 0,\n"
      + "    \"max_score\": 0,\n"
      + "    \"hits\": []\n"
      + "  }\n"
      + "}"{
  "took": 1,
  "timed_out": false,
  "_shards": {
    "total": 0,
    "successful": 0,
    "failed": 0
  },
  "hits": {
    "total": 0,
    "max_score": 0,
    "hits": []
  }
}"methodcall"methodcall"yak"yak"{\n"
      + "  \"took\": 49,\n"
      + "  \"timed_out\": false,\n"
      + "  \"_shards\": {\n"
      + "    \"total\": 5,\n"
      + "    \"successful\": 5,\n"
      + "    \"failed\": 0\n"
      + "  },\n"
      + "  \"hits\": {\n"
      + "    \"total\": 1,\n"
      + "    \"max_score\": 0,\n"
      + "    \"hits\": []\n"
      + "  },\n"
      + "  \"aggregations\": {\n"
      + "    \"traceId_agg\": {\n"
      + "      \"doc_count_error_upper_bound\": 0,\n"
      + "      \"sum_other_doc_count\": 0,\n"
      + "      \"buckets\": [\n"
      + "        {\n"
      + "          \"key\": \"000000000000007b\",\n"
      + "          \"doc_count\": 1,\n"
      + "          \"timestamps_agg\": {\n"
      + "            \"value\": 1474761600001,\n"
      + "            \"value_as_string\": \"1474761600001\"\n"
      + "          }\n"
      + "        }\n"
      + "      ]\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "took": 49,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "failed": 0
  },
  "hits": {
    "total": 1,
    "max_score": 0,
    "hits": []
  },
  "aggregations": {
    "traceId_agg": {
      "doc_count_error_upper_bound": 0,
      "sum_other_doc_count": 0,
      "buckets": [
        {
          "key": "000000000000007b",
          "doc_count": 1,
          "timestamps_agg": {
            "value": 1474761600001,
            "value_as_string": "1474761600001"
          }
        }
      ]
    }
  }
}"000000000000007b"000000000000007b All elasticsearch results start with an object, not an array.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/JsonSerializersTest.javaJsonSerializersTestSPAN_PARSERC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/JsonSerializersTest.classparse(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser,java.lang.String)"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"parentId\": null\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "parentId": null
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"timestamp\": null\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "timestamp": null
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"duration\": null\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "duration": null
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"debug\": null\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "debug": null
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"annotations\": [\n"
        + "    {\n"
        + "      \"timestamp\": 1461750491274000,\n"
        + "      \"value\": \"cs\",\n"
        + "      \"endpoint\": null\n"
        + "    }\n"
        + "  ]\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "annotations": [
    {
      "timestamp": 1461750491274000,
      "value": "cs",
      "endpoint": null
    }
  ]
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"tags\": {"
        + "      \"num\": 9223372036854775807"
        + "  }"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "tags": {      "num": 9223372036854775807  }}MapAssert<String,String>AbstractMapAssert<MapAssert<String,String>,Map<String,String>,String,String>AbstractObjectAssert<MapAssert<String,String>,Map<String,String>>AbstractAssert<MapAssert<String,String>,Map<String,String>>Assert<MapAssert<String,String>,Map<String,String>>Descriptable<MapAssert<String,String>>ExtensionPoints<MapAssert<String,String>,Map<String,String>>EnumerableAssert<MapAssert<String,String>,Entry<? extends String,? extends String>>Entry<? extends String,? extends String>[]? super Map<String,String>Condition<? super Map<String,String>>Descriptable<Condition<? super Map<String,String>>>Comparator<? super Map<String,String>>Function<? super Map<String,String>,? extends T>Consumer<Map<String,String>>Predicate<? super Map<String,String>>AbstractAssert<MapAssert<String,String>,Map<String,String>>(java.util.Map,java.lang.Class)Function<Map<String,String>,T>Function<? super Map<String,String>,T>Function<? super Map<String,String>,?>Function<? super Map<String,String>,?>[]AbstractObjectAssert<MapAssert<String,String>,Map<String,String>>(java.util.Map,java.lang.Class)? super Entry<? extends String,? extends String>Comparator<? super Entry<? extends String,? extends String>>Function<? super Entry<String,String>,Object>Function<? super Entry<String,String>,Object>[]AbstractObjectAssert<?,String>AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>AbstractIntegerAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>>AbstractComparableAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>AbstractObjectAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>AbstractAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>Assert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>Descriptable<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>>ExtensionPoints<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>ComparableAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>NumberAssert<AbstractMapSizeAssert<MapAssert<String,String>,Map<String,String>,String,String>,Integer>doesNotContainValue(java.lang.String)containsValues(java.lang.String[])containsValue(java.lang.String)doesNotContainEntry(java.lang.String,java.lang.String)Condition<? super Entry<String,String>>Descriptable<Condition<? super Entry<String,String>>>containsEntry(java.lang.String,java.lang.String)AbstractMapAssert<MapAssert<String,String>,Map<String,String>,String,String>(java.util.Map,java.lang.Class)MapAssert<String,String>(java.util.Map)"num"num"9223372036854775807"9223372036854775807"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"tags\": {"
        + "      \"num\": 1.23456789"
        + "  }"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "tags": {      "num": 1.23456789  }}"1.23456789"1.23456789Function<? super Span,? extends T>Consumer<Span>AbstractAssert<ObjectAssert<Span>,Span>(zipkin2.Span,java.lang.Class)worstSpanInTheWorld"\u2028 and \u2029" and "\"foo""foo"Database error: ORA-00942:\u2028 and \u2029 table or view does not exist\n"Database error: ORA-00942: and  table or view does not exist
"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"localEndpoint\": {\n"
        + "    \"serviceName\": \"service\",\n"
        + "    \"port\": 65535\n"
        + "  }\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "localEndpoint": {
    "serviceName": "service",
    "port": 65535
  }
}Function<? super Endpoint,? extends T>Consumer<Endpoint>AbstractAssert<ObjectAssert<Endpoint>,Endpoint>(zipkin2.Endpoint,java.lang.Class)"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"localEndpoint\": {\n"
        + "    \"port\": 65535\n"
        + "  }\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "localEndpoint": {
    "port": 65535
  }
}"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\",\n"
        + "  \"localEndpoint\": {\n"
        + "    \"serviceName\": null,\n"
        + "    \"port\": 65535\n"
        + "  }\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c",
  "localEndpoint": {
    "serviceName": null,
    "port": 65535
  }
}with128BitTraceId"{\n"
        + "  \"traceId\": \"48485a3953bb61246b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\"\n"
        + "}"{
  "traceId": "48485a3953bb61246b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c"
}withLower64bitsTraceId"{\n"
        + "  \"traceId\": \"6b221d5bc9e6496c\",\n"
        + "  \"name\": \"get-traces\",\n"
        + "  \"id\": \"6b221d5bc9e6496c\"\n"
        + "}"{
  "traceId": "6b221d5bc9e6496c",
  "name": "get-traces",
  "id": "6b221d5bc9e6496c"
}"48485a3953bb61246b221d5bc9e6496c"48485a3953bb61246b221d5bc9e6496cObjectAssert<DependencyLink>AbstractObjectAssert<ObjectAssert<DependencyLink>,DependencyLink>AbstractAssert<ObjectAssert<DependencyLink>,DependencyLink>Assert<ObjectAssert<DependencyLink>,DependencyLink>Descriptable<ObjectAssert<DependencyLink>>ExtensionPoints<ObjectAssert<DependencyLink>,DependencyLink>Condition<? super DependencyLink>Descriptable<Condition<? super DependencyLink>>Function<? super DependencyLink,? extends T>Consumer<DependencyLink>AbstractAssert<ObjectAssert<DependencyLink>,DependencyLink>(zipkin2.DependencyLink,java.lang.Class)This isn't a test of what we "should" accept as a span, rather that characters that trip-upjson don't fail in SPAN_PARSER. service name is surrounded by control characters name is terrible annotation value includes some json newline characters binary annotation key includes a quote and value newlinesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/SearchResultConverterTest.javaSearchResultConverterTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/client/SearchResultConverter.classC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/SearchResultConverterTest.classstableMicrosstableTraceCollector<Span,?,List<Span>>Function<? super Span,? extends V>Function<V,Span>SearchResultConverter<Span>(zipkin2.elasticsearch.internal.JsonSerializers.ObjectParser)"{\"hits\":{}}"{"hits":{}}"{\"hits\":{\"hits\":[]}}"{"hits":{"hits":[]}}"{\"hits\":{\"hits\":[{}]}}"{"hits":{"hits":[{}]}} to access package private stuff Our normal test data has recent timestamps to make testing the server and dependency linker work as there are values related to recency used in search defaults. This test needs stable timestamps because items like MD5 need to match. can't result in a zero value, so minimum ts of 1.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/TestResponses.javaAUTOCOMPLETE_VALUESC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/TestResponses.classSPAN_NAMESSERVICE_NAMES"{\n"
    + "  \"took\": 4,\n"
    + "  \"timed_out\": false,\n"
    + "  \"_shards\": {\n"
    + "    \"total\": 5,\n"
    + "    \"successful\": 5,\n"
    + "    \"skipped\": 0,\n"
    + "    \"failed\": 0\n"
    + "  },\n"
    + "  \"hits\": {\n"
    + "    \"total\": 4,\n"
    + "    \"max_score\": 0,\n"
    + "    \"hits\": [\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:span-2019-07-20\",\n"
    + "        \"_type\": \"span\",\n"
    + "        \"_id\": \"7180c278b62e8f6a216a2aea45d08fc9-2a40476ca7a22f2c85ac18b9c1f3a99c\",\n"
    + "        \"_score\": 0,\n"
    + "        \"_source\": {\n"
    + "          \"traceId\": \"7180c278b62e8f6a216a2aea45d08fc9\",\n"
    + "          \"duration\": 350000,\n"
    + "          \"localEndpoint\": {\n"
    + "            \"serviceName\": \"frontend\",\n"
    + "            \"ipv4\": \"127.0.0.1\"\n"
    + "          },\n"
    + "          \"timestamp_millis\": 1,\n"
    + "          \"kind\": \"SERVER\",\n"
    + "          \"name\": \"get\",\n"
    + "          \"id\": \"0000000000000001\",\n"
    + "          \"timestamp\": 1000\n"
    + "        }\n"
    + "      },\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:span-2019-07-20\",\n"
    + "        \"_type\": \"span\",\n"
    + "        \"_id\": \"7180c278b62e8f6a216a2aea45d08fc9-466fed1eb1d5cef4a76a227e83a7a7a8\",\n"
    + "        \"_score\": 0,\n"
    + "        \"_source\": {\n"
    + "          \"traceId\": \"7180c278b62e8f6a216a2aea45d08fc9\",\n"
    + "          \"duration\": 200000,\n"
    + "          \"remoteEndpoint\": {\n"
    + "            \"serviceName\": \"backend\",\n"
    + "            \"ipv4\": \"192.168.99.101\",\n"
    + "            \"port\": 9000\n"
    + "          },\n"
    + "          \"localEndpoint\": {\n"
    + "            \"serviceName\": \"frontend\",\n"
    + "            \"ipv4\": \"127.0.0.1\"\n"
    + "          },\n"
    + "          \"timestamp_millis\": 51,\n"
    + "          \"kind\": \"CLIENT\",\n"
    + "          \"name\": \"get\",\n"
    + "          \"annotations\": [\n"
    + "            {\n"
    + "              \"timestamp\": 101000,\n"
    + "              \"value\": \"foo\"\n"
    + "            }\n"
    + "          ],\n"
    + "          \"id\": \"0000000000000002\",\n"
    + "          \"parentId\": \"0000000000000001\",\n"
    + "          \"timestamp\": 51000,\n"
    + "          \"tags\": {\n"
    + "            \"clnt/finagle.version\": \"6.45.0\",\n"
    + "            \"http.path\": \"/api\"\n"
    + "          }\n"
    + "        }\n"
    + "      },\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:span-2019-07-20\",\n"
    + "        \"_type\": \"span\",\n"
    + "        \"_id\": \"7180c278b62e8f6a216a2aea45d08fc9-74d915e86c8f53d59ef5850b4e966199\",\n"
    + "        \"_score\": 0,\n"
    + "        \"_source\": {\n"
    + "          \"traceId\": \"7180c278b62e8f6a216a2aea45d08fc9\",\n"
    + "          \"duration\": 150000,\n"
    + "          \"shared\": true,\n"
    + "          \"localEndpoint\": {\n"
    + "            \"serviceName\": \"backend\",\n"
    + "            \"ipv4\": \"192.168.99.101\",\n"
    + "            \"port\": 9000\n"
    + "          },\n"
    + "          \"timestamp_millis\": 101,\n"
    + "          \"kind\": \"SERVER\",\n"
    + "          \"name\": \"get\",\n"
    + "          \"id\": \"0000000000000002\",\n"
    + "          \"parentId\": \"0000000000000001\",\n"
    + "          \"timestamp\": 101000\n"
    + "        }\n"
    + "      },\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:span-2019-07-20\",\n"
    + "        \"_type\": \"span\",\n"
    + "        \"_id\": \"7180c278b62e8f6a216a2aea45d08fc9-989c12147ff4ca03ce10d8488d93b89d\",\n"
    + "        \"_score\": 0,\n"
    + "        \"_source\": {\n"
    + "          \"traceId\": \"7180c278b62e8f6a216a2aea45d08fc9\",\n"
    + "          \"duration\": 50000,\n"
    + "          \"remoteEndpoint\": {\n"
    + "            \"serviceName\": \"db\",\n"
    + "            \"ipv6\": \"2001:db8::c001\",\n"
    + "            \"port\": 3036\n"
    + "          },\n"
    + "          \"localEndpoint\": {\n"
    + "            \"serviceName\": \"backend\",\n"
    + "            \"ipv4\": \"192.168.99.101\",\n"
    + "            \"port\": 9000\n"
    + "          },\n"
    + "          \"timestamp_millis\": 151,\n"
    + "          \"kind\": \"CLIENT\",\n"
    + "          \"name\": \"query\",\n"
    + "          \"annotations\": [\n"
    + "            {\n"
    + "              \"timestamp\": 191000,\n"
    + "              \"value\": \"\"\n"
    + "            }\n"
    + "          ],\n"
    + "          \"id\": \"0000000000000003\",\n"
    + "          \"parentId\": \"0000000000000002\",\n"
    + "          \"timestamp\": 151000,\n"
    + "          \"tags\": {\n"
    + "            \"error\": \"\uD83D\uDCA9\"\n"
    + "          }\n"
    + "        }\n"
    + "      }\n"
    + "    ]\n"
    + "  }\n"
    + "}"{
  "took": 4,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": 4,
    "max_score": 0,
    "hits": [
      {
        "_index": "zipkin:span-2019-07-20",
        "_type": "span",
        "_id": "7180c278b62e8f6a216a2aea45d08fc9-2a40476ca7a22f2c85ac18b9c1f3a99c",
        "_score": 0,
        "_source": {
          "traceId": "7180c278b62e8f6a216a2aea45d08fc9",
          "duration": 350000,
          "localEndpoint": {
            "serviceName": "frontend",
            "ipv4": "127.0.0.1"
          },
          "timestamp_millis": 1,
          "kind": "SERVER",
          "name": "get",
          "id": "0000000000000001",
          "timestamp": 1000
        }
      },
      {
        "_index": "zipkin:span-2019-07-20",
        "_type": "span",
        "_id": "7180c278b62e8f6a216a2aea45d08fc9-466fed1eb1d5cef4a76a227e83a7a7a8",
        "_score": 0,
        "_source": {
          "traceId": "7180c278b62e8f6a216a2aea45d08fc9",
          "duration": 200000,
          "remoteEndpoint": {
            "serviceName": "backend",
            "ipv4": "192.168.99.101",
            "port": 9000
          },
          "localEndpoint": {
            "serviceName": "frontend",
            "ipv4": "127.0.0.1"
          },
          "timestamp_millis": 51,
          "kind": "CLIENT",
          "name": "get",
          "annotations": [
            {
              "timestamp": 101000,
              "value": "foo"
            }
          ],
          "id": "0000000000000002",
          "parentId": "0000000000000001",
          "timestamp": 51000,
          "tags": {
            "clnt/finagle.version": "6.45.0",
            "http.path": "/api"
          }
        }
      },
      {
        "_index": "zipkin:span-2019-07-20",
        "_type": "span",
        "_id": "7180c278b62e8f6a216a2aea45d08fc9-74d915e86c8f53d59ef5850b4e966199",
        "_score": 0,
        "_source": {
          "traceId": "7180c278b62e8f6a216a2aea45d08fc9",
          "duration": 150000,
          "shared": true,
          "localEndpoint": {
            "serviceName": "backend",
            "ipv4": "192.168.99.101",
            "port": 9000
          },
          "timestamp_millis": 101,
          "kind": "SERVER",
          "name": "get",
          "id": "0000000000000002",
          "parentId": "0000000000000001",
          "timestamp": 101000
        }
      },
      {
        "_index": "zipkin:span-2019-07-20",
        "_type": "span",
        "_id": "7180c278b62e8f6a216a2aea45d08fc9-989c12147ff4ca03ce10d8488d93b89d",
        "_score": 0,
        "_source": {
          "traceId": "7180c278b62e8f6a216a2aea45d08fc9",
          "duration": 50000,
          "remoteEndpoint": {
            "serviceName": "db",
            "ipv6": "2001:db8::c001",
            "port": 3036
          },
          "localEndpoint": {
            "serviceName": "backend",
            "ipv4": "192.168.99.101",
            "port": 9000
          },
          "timestamp_millis": 151,
          "kind": "CLIENT",
          "name": "query",
          "annotations": [
            {
              "timestamp": 191000,
              "value": ""
            }
          ],
          "id": "0000000000000003",
          "parentId": "0000000000000002",
          "timestamp": 151000,
          "tags": {
            "error": ""
          }
        }
      }
    ]
  }
}"{\n"
      + "  \"took\": 4,\n"
      + "  \"timed_out\": false,\n"
      + "  \"_shards\": {\n"
      + "    \"total\": 5,\n"
      + "    \"successful\": 5,\n"
      + "    \"failed\": 0\n"
      + "  },\n"
      + "  \"hits\": {\n"
      + "    \"total\": 1,\n"
      + "    \"max_score\": 0,\n"
      + "    \"hits\": []\n"
      + "  },\n"
      + "  \"aggregations\": {\n"
      + "    \"binaryAnnotations_agg\": {\n"
      + "      \"doc_count\": 1,\n"
      + "      \"binaryAnnotationsServiceName_agg\": {\n"
      + "        \"doc_count_error_upper_bound\": 0,\n"
      + "        \"sum_other_doc_count\": 0,\n"
      + "        \"buckets\": [\n"
      + "          {\n"
      + "            \"key\": \"yak\",\n"
      + "            \"doc_count\": 1\n"
      + "          }\n"
      + "        ]\n"
      + "      }\n"
      + "    },\n"
      + "    \"annotations_agg\": {\n"
      + "      \"doc_count\": 2,\n"
      + "      \"annotationsServiceName_agg\": {\n"
      + "        \"doc_count_error_upper_bound\": 0,\n"
      + "        \"sum_other_doc_count\": 0,\n"
      + "        \"buckets\": [\n"
      + "          {\n"
      + "            \"key\": \"service\",\n"
      + "            \"doc_count\": 2\n"
      + "          }\n"
      + "        ]\n"
      + "      }\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "took": 4,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "failed": 0
  },
  "hits": {
    "total": 1,
    "max_score": 0,
    "hits": []
  },
  "aggregations": {
    "binaryAnnotations_agg": {
      "doc_count": 1,
      "binaryAnnotationsServiceName_agg": {
        "doc_count_error_upper_bound": 0,
        "sum_other_doc_count": 0,
        "buckets": [
          {
            "key": "yak",
            "doc_count": 1
          }
        ]
      }
    },
    "annotations_agg": {
      "doc_count": 2,
      "annotationsServiceName_agg": {
        "doc_count_error_upper_bound": 0,
        "sum_other_doc_count": 0,
        "buckets": [
          {
            "key": "service",
            "doc_count": 2
          }
        ]
      }
    }
  }
}"{\n"
      + "  \"took\": 1,\n"
      + "  \"timed_out\": false,\n"
      + "  \"_shards\": {\n"
      + "    \"total\": 5,\n"
      + "    \"successful\": 5,\n"
      + "    \"failed\": 0\n"
      + "  },\n"
      + "  \"hits\": {\n"
      + "    \"total\": 2,\n"
      + "    \"max_score\": 0,\n"
      + "    \"hits\": []\n"
      + "  },\n"
      + "  \"aggregations\": {\n"
      + "    \"name_agg\": {\n"
      + "      \"doc_count_error_upper_bound\": 0,\n"
      + "      \"sum_other_doc_count\": 0,\n"
      + "      \"buckets\": [\n"
      + "        {\n"
      + "          \"key\": \"methodcall\",\n"
      + "          \"doc_count\": 1\n"
      + "        },\n"
      + "        {\n"
      + "          \"key\": \"yak\",\n"
      + "          \"doc_count\": 1\n"
      + "        }\n"
      + "      ]\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "took": 1,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "failed": 0
  },
  "hits": {
    "total": 2,
    "max_score": 0,
    "hits": []
  },
  "aggregations": {
    "name_agg": {
      "doc_count_error_upper_bound": 0,
      "sum_other_doc_count": 0,
      "buckets": [
        {
          "key": "methodcall",
          "doc_count": 1
        },
        {
          "key": "yak",
          "doc_count": 1
        }
      ]
    }
  }
}"{\n"
    + "  \"took\": 12,\n"
    + "  \"timed_out\": false,\n"
    + "  \"_shards\": {\n"
    + "    \"total\": 5,\n"
    + "    \"successful\": 5,\n"
    + "    \"skipped\": 0,\n"
    + "    \"failed\": 0\n"
    + "  },\n"
    + "  \"hits\": {\n"
    + "    \"total\": 2,\n"
    + "    \"max_score\": 0,\n"
    + "    \"hits\": [\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:autocomplete-2018-12-08\",\n"
    + "        \"_type\": \"autocomplete\",\n"
    + "        \"_id\": \"http.method|POST\",\n"
    + "        \"_score\": 0\n"
    + "      },\n"
    + "      {\n"
    + "        \"_index\": \"zipkin:autocomplete-2018-12-08\",\n"
    + "        \"_type\": \"autocomplete\",\n"
    + "        \"_id\": \"http.method|GET\",\n"
    + "        \"_score\": 0\n"
    + "      }\n"
    + "    ]\n"
    + "  },\n"
    + "  \"aggregations\": {\n"
    + "    \"tagValue\": {\n"
    + "      \"doc_count_error_upper_bound\": 0,\n"
    + "      \"sum_other_doc_count\": 0,\n"
    + "      \"buckets\": [\n"
    + "        {\n"
    + "          \"key\": \"get\",\n"
    + "          \"doc_count\": 1\n"
    + "        },\n"
    + "        {\n"
    + "          \"key\": \"post\",\n"
    + "          \"doc_count\": 1\n"
    + "        }\n"
    + "      ]\n"
    + "    }\n"
    + "  }\n"
    + "}"{
  "took": 12,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": 2,
    "max_score": 0,
    "hits": [
      {
        "_index": "zipkin:autocomplete-2018-12-08",
        "_type": "autocomplete",
        "_id": "http.method|POST",
        "_score": 0
      },
      {
        "_index": "zipkin:autocomplete-2018-12-08",
        "_type": "autocomplete",
        "_id": "http.method|GET",
        "_score": 0
      }
    ]
  },
  "aggregations": {
    "tagValue": {
      "doc_count_error_upper_bound": 0,
      "sum_other_doc_count": 0,
      "buckets": [
        {
          "key": "get",
          "doc_count": 1
        },
        {
          "key": "post",
          "doc_count": 1
        }
      ]
    }
  }
}C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/VersionSpecificTemplatesTest.javaVersionSpecificTemplatesTeststrictTraceId_false_includesAnalysisForMixedLengthTraceIdstrictTraceId_false_includesAnalysisForMixedLengthTraceId()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/VersionSpecificTemplatesTest.classstrictTraceId_doesNotIncludeAnalysisSectionstrictTraceId_doesNotIncludeAnalysisSection()searchEnabled_minimalSpanIndexing_7xsearchEnabled_minimalSpanIndexing_7x()searchEnabled_minimalSpanIndexing_6xsearchEnabled_minimalSpanIndexing_6x()version79_composableversion79_composable()version79_legacyversion79_legacy()version78_composableversion78_composable()version78_legacyversion78_legacy()version7_doesntWrapPropertiesWithTypeversion7_doesntWrapPropertiesWithType()version6_wrapsPropertiesWithTypeversion6_wrapsPropertiesWithType()version2_unsupportedversion2_unsupported()V7_9VersionSpecificTemplatesTest()Class<WebClient>"Elasticsearch versions 5-7.x are supported, was: 2.4"Elasticsearch versions 5-7.x are supported, was: 2.4"In v5.x, the index_patterns field was named template"In v5.x, the index_patterns field was named template"\"template\":""template":"Until v7.x, we delimited index and type with a colon"Until v7.x, we delimited index and type with a colon"\"template\": \"zipkin:autocomplete-*\"""template": "zipkin:autocomplete-*""\"index_patterns\": \"zipkin:autocomplete-*\"""index_patterns": "zipkin:autocomplete-*"""
      + "  \"mappings\": {\n"
      + "    \"dependency\": {\n"
      + "      \"enabled\": false\n"
      + "    }\n"
      + "  }"  "mappings": {
    "dependency": {
      "enabled": false
    }
  }""
      + "  \"mappings\": {\n"
      + "    \"autocomplete\": {\n"
      + "      \"enabled\": true,\n"
      + "      \"properties\": {\n"
      + "        \"tagKey\": { \"type\": \"keyword\", \"norms\": false },\n"
      + "        \"tagValue\": { \"type\": \"keyword\", \"norms\": false }\n"
      + "      }\n"
      + "    }\n"
      + "  }"  "mappings": {
    "autocomplete": {
      "enabled": true,
      "properties": {
        "tagKey": { "type": "keyword", "norms": false },
        "tagValue": { "type": "keyword", "norms": false }
      }
    }
  }"Starting at v7.x, we delimit index and type with hyphen"Starting at v7.x, we delimit index and type with hyphen"\"index_patterns\": \"zipkin-autocomplete-*\"""index_patterns": "zipkin-autocomplete-*""7.x does not support the key index.mapper.dynamic"7.x does not support the key index.mapper.dynamic"\"index.mapper.dynamic\": false""index.mapper.dynamic": false""
      + "  \"mappings\": {\n"
      + "    \"enabled\": false\n"
      + "  }"  "mappings": {
    "enabled": false
  }""
      + "  \"mappings\": {\n"
      + "    \"enabled\": true,\n"
      + "    \"properties\": {\n"
      + "      \"tagKey\": { \"type\": \"keyword\", \"norms\": false },\n"
      + "      \"tagValue\": { \"type\": \"keyword\", \"norms\": false }\n"
      + "    }\n"
      + "  }"  "mappings": {
    "enabled": true,
    "properties": {
      "tagKey": { "type": "keyword", "norms": false },
      "tagValue": { "type": "keyword", "norms": false }
    }
  }"\"priority\": 0\n""priority": 0
""
        + "  \"mappings\": {\n"
        + "    \"span\": {\n"
        + "      \"properties\": {\n"
        + "        \"traceId\": { \"type\": \"keyword\", \"norms\": false },\n"
        + "        \"annotations\": { \"enabled\": false },\n"
        + "        \"tags\": { \"enabled\": false }\n"
        + "      }\n"
        + "    }\n"
        + "  }"  "mappings": {
    "span": {
      "properties": {
        "traceId": { "type": "keyword", "norms": false },
        "annotations": { "enabled": false },
        "tags": { "enabled": false }
      }
    }
  }""
        + "  \"mappings\": {\n"
        + "    \"properties\": {\n"
        + "      \"traceId\": { \"type\": \"keyword\", \"norms\": false },\n"
        + "      \"annotations\": { \"enabled\": false },\n"
        + "      \"tags\": { \"enabled\": false }\n"
        + "    }\n"
        + "  }"  "mappings": {
    "properties": {
      "traceId": { "type": "keyword", "norms": false },
      "annotations": { "enabled": false },
      "tags": { "enabled": false }
    }
  }"analysis"analysis doesn't wrap in a type nameC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ElasticsearchExtension.javaElasticsearchExtensionC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integrationintegrationzipkin2.elasticsearch.integrationIGNORE_THESE_WARNINGSindex(org.junit.jupiter.api.TestInfo)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ElasticsearchExtension.classbaseUrl()computeStorageBuildercomputeStorageBuilder()ElasticsearchExtension(int)Class<ElasticsearchExtension>majorVersionGenericContainer<ElasticsearchContainer>Container<ElasticsearchContainer>GenericContainer<ElasticsearchContainer>(java.util.concurrent.Future)GenericContainer<ElasticsearchContainer>(java.lang.String)GenericContainer<ElasticsearchContainer>()GenericContainer<ElasticsearchContainer>(org.testcontainers.images.RemoteDockerImage)GenericContainer<ElasticsearchContainer>(org.testcontainers.utility.DockerImageName)"Using baseUrl "Using baseUrl Function<AggregatedHttpResponse,HttpResponse>Function<AggregatedHttpResponse,V>Function<? super HttpResponse,? extends V>Function<V,HttpResponse>Function<? super V,? extends AggregatedHttpResponse>apply(com.linecorp.armeria.common.AggregatedHttpResponse)warningHeader"warning"warningStream<Pattern>BaseStream<Pattern,Stream<Pattern>>? super PatternPredicate<? super Pattern>Spliterator<Pattern>Iterator<Pattern>Optional<Pattern>Comparator<? super Pattern>Collector<? super Pattern,A,R>BiConsumer<R,? super Pattern>BiFunction<U,? super Pattern,U>BinaryOperator<Pattern>BiFunction<Pattern,Pattern,Pattern>reduce(java.util.regex.Pattern,java.util.function.BinaryOperator)Consumer<? super Pattern>Function<? super Pattern,? extends DoubleStream>Function<? super Pattern,? extends LongStream>Function<? super Pattern,? extends IntStream>Function<? super Pattern,? extends Stream<? extends R>>ToDoubleFunction<? super Pattern>ToLongFunction<? super Pattern>ToIntFunction<? super Pattern>Function<? super Pattern,? extends R>Predicate<Pattern>List<Pattern>Collection<Pattern>Iterable<Pattern>? extends PatternCollection<? extends Pattern>Iterable<? extends Pattern>add(java.util.regex.Pattern)test(java.util.regex.Pattern)"Detected usage of deprecated API for request "Detected usage of deprecated API for request ":\n":
"ES_DEBUG"ES_DEBUGC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ElasticsearchExtension$1.classElasticsearchExtension$1"zipkin-test"zipkin-testElasticsearchContainerElasticsearchContainer(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ElasticsearchExtension$ElasticsearchContainer.classElasticsearchExtension$ElasticsearchContainerC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integrationC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearchC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes"ghcr.io/openzipkin/zipkin-elasticsearch"ghcr.io/openzipkin/zipkin-elasticsearch":2.23.2":2.23.2 Elasticsearch 7 never returns a response when receiving an HTTP/2 preface instead of the more valid behavior of returning a bad request response, so we can't use the preface. ES will return a 'warning' response header when using deprecated api, detect this and fail early so we can do something about it. Example usage: https://github.com/elastic/elasticsearch/blob/3049e55f093487bb582a7e49ad624961415ba31c/x-pack/plugin/security/src/internalClusterTest/java/org/elasticsearch/integration/IndexPrivilegeIntegTests.java#L559 Convert AggregatedHttpResponse back to HttpResponse. When ES_DEBUG=true log full headers, request and response body to the category com.linecorp.armeria.client.loggingC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorage.javaITElasticsearchStoragetestUsageOfDeprecatedFeaturestestUsageOfDeprecatedFeatures()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorage.classaggregateDependenciesaggregateDependencies(zipkin2.elasticsearch.ElasticsearchStorage,java.util.List)elasticsearch()ITElasticsearchStorage()Class<ITElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITTraces.classITElasticsearchStorage$ITTracesITTraces<ElasticsearchStorage>ITStorage<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITSpanStore.classITElasticsearchStorage$ITSpanStoreITSpanStore<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITSpanStoreHeavy.classITElasticsearchStorage$ITSpanStoreHeavyITSpanStoreHeavy<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITSearchEnabledFalse.classITElasticsearchStorage$ITSearchEnabledFalseITSearchEnabledFalse<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITServiceAndSpanNames.classITElasticsearchStorage$ITServiceAndSpanNamesITServiceAndSpanNames<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITAutocompleteTags.classITElasticsearchStorage$ITAutocompleteTagsITAutocompleteTags<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITStrictTraceIdFalse.classITElasticsearchStorage$ITStrictTraceIdFalseITStrictTraceIdFalse<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITDependencies.classITElasticsearchStorage$ITDependenciesITDependencies<ElasticsearchStorage>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorage$ITDependenciesHeavy.classITElasticsearchStorage$ITDependenciesHeavyITDependenciesHeavy<ElasticsearchStorage>webClient"/_migration/deprecations"/_migration/deprecations"The ElasticSearch instance used during IT's is using deprecated features or "
        + "configuration. This is likely nothing to be really worried about (for example 'xpack.monitoring.enabled' "
        + "setting), but nevertheless it should be looked at to see if our docker image used during "
        + "integration tests needs updating for the next version of ElasticSearch. "
        + "See https://www.elastic.co/guide/en/elasticsearch/reference/current/migration-api-deprecation.html"
        + "for more information. This is the deprecation warning we received:\n\n"The ElasticSearch instance used during IT's is using deprecated features or configuration. This is likely nothing to be really worried about (for example 'xpack.monitoring.enabled' setting), but nevertheless it should be looked at to see if our docker image used during integration tests needs updating for the next version of ElasticSearch. See https://www.elastic.co/guide/en/elasticsearch/reference/current/migration-api-deprecation.htmlfor more information. This is the deprecation warning we received:

C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorageV6.javaITElasticsearchStorageV6C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorageV6.classITElasticsearchStorageV6()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorageV7.javaITElasticsearchStorageV7C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITElasticsearchStorageV7.classITElasticsearchStorageV7()ITEnsureIndexTemplateITEnsureIndexTemplate()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/integration/ITElasticsearchStorageV7$ITEnsureIndexTemplate.classITElasticsearchStorageV7$ITEnsureIndexTemplateC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITEnsureIndexTemplate.javaCONTENT_TYPEDELETEPUTJSON_UTF_8http(com.linecorp.armeria.common.HttpMethod,java.lang.String)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ITEnsureIndexTemplate.classcatchAllTemplatecatchAllTemplate()catchAllIndexPathcatchAllIndexPath()setUpCatchAllTemplatesetUpCatchAllTemplate()createZipkinIndexTemplate_getTraces_returnsSuccesscreateZipkinIndexTemplate_getTraces_returnsSuccess(org.junit.jupiter.api.TestInfo)"queryTest"queryTest"ok""/_template/*"/_template/*"/_template"/_template"queryTest="queryTest="/_index_template/catch-all"/_index_template/catch-all"{\n"
      + "  \"index_patterns\" : [\"*\"],\n"
      + "  \"priority\" : 0,\n"
      + "  \"template\": {\n"
      + "    \"settings\" : {\n"
      + "      \"number_of_shards\" : 1\n"
      + "    },\n"
      + "    \"mappings\" : {\n"
      + "      \"_source\": {\"enabled\": false }\n"
      + "    }\n"
      + "  }\n"
      + "}"{
  "index_patterns" : ["*"],
  "priority" : 0,
  "template": {
    "settings" : {
      "number_of_shards" : 1
    },
    "mappings" : {
      "_source": {"enabled": false }
    }
  }
} We need a different index pattern per test Delete all templates in order to create the "catch-all" index template, because ES does not allow multiple index templates of the same index_patterns and priority Implicitly creates an index template Get all templates. We don't assert on this at the moment. This is for logging on ES_DEBUG. Now, add a span, which should be indexed differently than default. Assert that Zipkin's templates work and source is returned Delete "catch-all" index template so it does not interfere with any other testCreate a "catch-all" index template with the lowest priority prior to running tests to ensurethat the index templates created during tests with higher priority function as designed. Onlyapplicable for ES >= 7.8Catch-all template doesn't store sourceC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/IgnoredDeprecationWarnings.javaIgnoredDeprecationWarningsC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/IgnoredDeprecationWarnings.classIgnoredDeprecationWarnings()"Elasticsearch 7\\.x will read, but not allow creation of new indices containing ':'"Elasticsearch 7\.x will read, but not allow creation of new indices containing ':'"has index patterns \\[.*] matching patterns from existing older templates"has index patterns \[.*] matching patterns from existing older templates"has index patterns \\[.*] matching patterns from existing composable templates"has index patterns \[.*] matching patterns from existing composable templatesWhen ES emits a deprecation warning header in response to a method being called, the integrationtest will fail. We cannot always fix our code however to take into account all deprecationwarnings, as we have to support multiple versions of ES. For these cases, add the warning messageto {@link #IGNORE_THESE_WARNINGS} array so it will not raise an exception anymore. These will be matched using header.contains(ignored[i]), so find a unique substring of the warning header for it to be ignoredC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/BulkCallBuilderTest.javaBulkCallBuilderTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal"{\"took\":0,\"errors\":true,\"items\":[{\"index\":{\"_index\":\"dev-zipkin:span-2019.04.18\",\"_type\":\"span\",\"_id\":\"2511\",\"status\":429,\"error\":{\"type\":\"es_rejected_execution_exception\",\"reason\":\"rejected execution of org.elasticsearch.transport.TransportService$7@7ec1ea93 on EsThreadPoolExecutor[bulk, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@621571ba[Running, pool size = 4, active threads = 4, queued tasks = 200, completed tasks = 3838534]]\"}}}]}"{"took":0,"errors":true,"items":[{"index":{"_index":"dev-zipkin:span-2019.04.18","_type":"span","_id":"2511","status":429,"error":{"type":"es_rejected_execution_exception","reason":"rejected execution of org.elasticsearch.transport.TransportService$7@7ec1ea93 on EsThreadPoolExecutor[bulk, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@621571ba[Running, pool size = 4, active threads = 4, queued tasks = 200, completed tasks = 3838534]]"}}}]}"rejected execution of org.elasticsearch.transport.TransportService$7@7ec1ea93 on EsThreadPoolExecutor[bulk, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@621571ba[Running, pool size = 4, active threads = 4, queued tasks = 200, completed tasks = 3838534]]"rejected execution of org.elasticsearch.transport.TransportService$7@7ec1ea93 on EsThreadPoolExecutor[bulk, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@621571ba[Running, pool size = 4, active threads = 4, queued tasks = 200, completed tasks = 3838534]]"{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"zipkin-2017-05-14\",\"node\":\"IqceAwZnSvyv0V0xALkEnQ\",\"reason\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.\"}}]},\"status\":400}"{"error":{"root_cause":[{"type":"illegal_argument_exception","reason":"Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead."}],"type":"search_phase_execution_exception","reason":"all shards failed","phase":"query","grouped":true,"failed_shards":[{"shard":0,"index":"zipkin-2017-05-14","node":"IqceAwZnSvyv0V0xALkEnQ","reason":{"type":"illegal_argument_exception","reason":"Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead."}}]},"status":400}"Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead."Fielddata is disabled on text fields by default. Set fielddata=true on [spanName] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/BulkIndexWriterTest.javaBulkIndexWriterTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/BulkIndexWriterTest.classSTABLE_SPAN"7180c278b62e8f6a216a2aea45d08fc9-198140c2a26bfa58fed4a572dfe3d63b"7180c278b62e8f6a216a2aea45d08fc9-198140c2a26bfa58fed4a572dfe3d63b"7180c278b62e8f6a216a2aea45d08fc9-bfe7a3c0d9ee83b1d218bd0f383f006a"7180c278b62e8f6a216a2aea45d08fc9-bfe7a3c0d9ee83b1d218bd0f383f006a"{\"timestamp_millis\":1,\"traceId\":"{"timestamp_millis":1,"traceId":"{\"_q\":[\"\\\"foo\"],\"traceId"{"_q":["\"foo"],"traceId"\"bar""bar"{\"_q\":[\"\\\"foo\",\"\\\"foo=\\\"bar\"],\"traceId"{"_q":["\"foo","\"foo=\"bar"],"traceId Our usual test span depends on currentTime for testing span stores with TTL, but we'd prefer to have a fixed span here to avoid depending on business logic in test assertions. ignores timestamp_millis fieldC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/IndexNameFormatterTest.javaIndexNameFormatterTestiso8601C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/IndexNameFormatterTest.classformatter"yyyy-MM-dd'T'HH:mm:ssX"yyyy-MM-dd'T'HH:mm:ssX"2016-11-01T01:01:01Z"2016-11-01T01:01:01Z"zipkin*span-2016-11-01"zipkin*span-2016-11-01"2016-11-01T23:59:59Z"2016-11-01T23:59:59Z"2016-11-15T01:01:01Z"2016-11-15T01:01:01Z"2016-11-16T23:59:59Z"2016-11-16T23:59:59Z"zipkin*span-2016-11-15"zipkin*span-2016-11-15"zipkin*span-2016-11-16"zipkin*span-2016-11-16"2016-11-1T01:01:01Z"2016-11-1T01:01:01Z"2016-11-3T23:59:59Z"2016-11-3T23:59:59Z"zipkin*span-2016-11-02"zipkin*span-2016-11-02"zipkin*span-2016-11-03"zipkin*span-2016-11-03"2016-10-31T01:01:01Z"2016-10-31T01:01:01Z"zipkin*span-2016-10-31"zipkin*span-2016-10-31"2016-10-01T01:01:01Z"2016-10-01T01:01:01Z"2016-10-31T23:59:59Z"2016-10-31T23:59:59Z"zipkin*span-2016-10-*"zipkin*span-2016-10-*"2016-12-01T23:59:59Z"2016-12-01T23:59:59Z"zipkin*span-2016-11-*"zipkin*span-2016-11-*"zipkin*span-2016-12-01"zipkin*span-2016-12-01"2016-02-28T01:01:01Z"2016-02-28T01:01:01Z"2016-04-01T23:59:59Z"2016-04-01T23:59:59Z"zipkin*span-2016-02-28"zipkin*span-2016-02-28"zipkin*span-2016-02-29"zipkin*span-2016-02-29"zipkin*span-2016-03-*"zipkin*span-2016-03-*"zipkin*span-2016-04-01"zipkin*span-2016-04-01"2016-01-01T01:01:01Z"2016-01-01T01:01:01Z"2016-12-31T23:59:59Z"2016-12-31T23:59:59Z"zipkin*span-2016-*"zipkin*span-2016-*"2018-01-01T23:59:59Z"2018-01-01T23:59:59Z"zipkin*span-2016-12-*"zipkin*span-2016-12-*"zipkin*span-2017-*"zipkin*span-2017-*"zipkin*span-2018-01-01"zipkin*span-2018-01-01"zipkin*span-2016.11.01"zipkin*span-2016.11.01"zipkin*span-2016.11.15"zipkin*span-2016.11.15"zipkin*span-2016.11.16"zipkin*span-2016.11.16"zipkin*span-2016.11.02"zipkin*span-2016.11.02"zipkin*span-2016.11.03"zipkin*span-2016.11.03"zipkin*span-2016.10.31"zipkin*span-2016.10.31"zipkin*span-2016.10.*"zipkin*span-2016.10.*"zipkin*span-2016.11.*"zipkin*span-2016.11.*"zipkin*span-2016.12.01"zipkin*span-2016.12.01"zipkin*span-2016.02.28"zipkin*span-2016.02.28"zipkin*span-2016.02.29"zipkin*span-2016.02.29"zipkin*span-2016.03.*"zipkin*span-2016.03.*"zipkin*span-2016.04.01"zipkin*span-2016.04.01"zipkin*span-2016.*"zipkin*span-2016.*"zipkin*span-2016.12.*"zipkin*span-2016.12.*"zipkin*span-2017.*"zipkin*span-2017.*"zipkin*span-2018.01.01"zipkin*span-2018.01.01"2016-10-30T01:01:01Z"2016-10-30T01:01:01Z"zipkin*span-2016.10.0*"zipkin*span-2016.10.0*"zipkin*span-2016.10.1*"zipkin*span-2016.10.1*"zipkin*span-2016.10.2*"zipkin*span-2016.10.2*"zipkin*span-2016.10.30"zipkin*span-2016.10.30"2016-10-09T01:01:01Z"2016-10-09T01:01:01Z"zipkin*span-2016.10.09"zipkin*span-2016.10.09"2016-10-19T01:01:01Z"2016-10-19T01:01:01Z"zipkin*span-2016.10.19"zipkin*span-2016.10.19"2016-06-01T01:01:01Z"2016-06-01T01:01:01Z"2016-06-30T01:01:01Z"2016-06-30T01:01:01Z"zipkin*span-2016.06.*"zipkin*span-2016.06.*C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/HttpCallTest.javaHttpCallTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/clientPLAIN_TEXT_UTF_8failstreamingContentstreamingContent()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/HttpCallTest.classthrowsRuntimeExceptionAsReasonWhenPresentthrowsRuntimeExceptionAsReasonWhenPresent()unprocessedRequestunprocessedRequest()wrongSchemewrongScheme()setsCustomNamesetsCustomName()executionException_messageexecutionException_message()releasesAllReferencesToByteBufreleasesAllReferencesToByteBuf()executionException_404executionException_404()executionException_5xxexecutionException_5xx()clonedcloned()executionException_conversionExceptionexecutionException_conversionException()propagatesOnDispatcherThreadWhenFatalpropagatesOnDispatcherThreadWhenFatal()emptyContentemptyContent()REQUESTHttpCallTest()HttpCall<String>Base<String>Call<String>BodyConverter<String>CompletableCallback<String>C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/internal/client/HttpCallTest$CompletableCallback.classHttpCallTest$CompletableCallbackC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/internal/clientC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/test-classes/zipkin2/elasticsearch/internalCompletableFuture<String>CompletionStage<String>Callback<String>CompletableCallback<String>()? extends CompletionStage<String>Function<Throwable,? extends CompletionStage<String>>Function<Throwable,? extends String>BiFunction<? super String,Throwable,? extends U>Function<? super String,? extends CompletionStage<U>>CompletionStage<? extends String>Function<? super String,U>BiConsumer<? super String,? super U>BiFunction<? super String,? super U,? extends V>completeOnTimeout(java.lang.String,long,java.util.concurrent.TimeUnit)obtrudeValue(java.lang.String)CompletableFuture<String>(java.lang.Object)CompletableFuture<String>()BiFunction<? super R,? super S,? extends String>BiApply<R,S,String>BiCompletion<R,S,String>UniCompletion<R,String>Function<? super Throwable,? extends String>UniExceptionally<String>UniCompletion<String,String>BiFunction<? super S,Throwable,? extends String>UniHandle<S,String>UniCompletion<S,String>UniWhenComplete<String>encodeOutcome(java.lang.String,java.lang.Throwable)completeValue(java.lang.String)encodeValue(java.lang.String)onSuccess(java.lang.String)ErrorHandler<String>FlatMapper<String,R>Mapper<String,R>Call<String>()Base<String>()"hello"helloLinkedBlockingQueue<Object>AbstractQueue<Object>Queue<Object>BlockingQueue<Object>LinkedBlockingQueue<Object>()Spliterator<Object>Iterator<Object>AbstractCollection<Object>()AbstractQueue<Object>()Collection<? super Object>Iterable<? super Object>Node<Object>LinkedBlockingQueue<Object>(java.util.Collection)LinkedBlockingQueue<Object>(int)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/HttpCallTest$1.classHttpCallTest$1Function<Object,T>AbstractObjectAssert<ObjectAssert<Object>,Object>(java.lang.Object,java.lang.Class)"expected callbacks to never signal"expected callbacks to never signal"eeek"eeek"response for / failed: 500 Internal Server Error"response for / failed: 500 Internal Server ErrorClass<FileNotFoundException>"{\"Message\":\"error\"}"{"Message":"error"}encodedBufHttpCall<Object>(com.linecorp.armeria.client.WebClient,zipkin2.elasticsearch.internal.client.HttpCall.RequestSupplier,zipkin2.elasticsearch.internal.client.HttpCall.BodyConverter,java.lang.String)Map<AggregatedHttpResponse,String>responseToMessageLinkedHashMap<AggregatedHttpResponse,String>HashMap<AggregatedHttpResponse,String>AbstractMap<AggregatedHttpResponse,String>LinkedHashMap<AggregatedHttpResponse,String>()merge(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String,java.util.function.BiFunction)BiFunction<? super AggregatedHttpResponse,? super String,? extends String>compute(com.linecorp.armeria.common.AggregatedHttpResponse,java.util.function.BiFunction)computeIfPresent(com.linecorp.armeria.common.AggregatedHttpResponse,java.util.function.BiFunction)Function<? super AggregatedHttpResponse,? extends String>computeIfAbsent(com.linecorp.armeria.common.AggregatedHttpResponse,java.util.function.Function)replace(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String)replace(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String,java.lang.String)putIfAbsent(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String)BiConsumer<? super AggregatedHttpResponse,? super String>Entry<AggregatedHttpResponse,String>Set<Entry<AggregatedHttpResponse,String>>Collection<Entry<AggregatedHttpResponse,String>>Iterable<Entry<AggregatedHttpResponse,String>>Set<AggregatedHttpResponse>Collection<AggregatedHttpResponse>Iterable<AggregatedHttpResponse>Map<? extends AggregatedHttpResponse,? extends String>put(com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String)AbstractMap<AggregatedHttpResponse,String>()Node<AggregatedHttpResponse,String>TreeNode<AggregatedHttpResponse,String>newTreeNode(int,com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String,java.util.HashMap.Node)newNode(int,com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String,java.util.HashMap.Node)Node<AggregatedHttpResponse,String>[]putVal(int,com.linecorp.armeria.common.AggregatedHttpResponse,java.lang.String,boolean,boolean)HashMap<AggregatedHttpResponse,String>(java.util.Map)HashMap<AggregatedHttpResponse,String>()HashMap<AggregatedHttpResponse,String>(int)HashMap<AggregatedHttpResponse,String>(int,float)LinkedHashMap<AggregatedHttpResponse,String>(int,float,boolean)LinkedHashMap<AggregatedHttpResponse,String>(java.util.Map)LinkedHashMap<AggregatedHttpResponse,String>(int)LinkedHashMap<AggregatedHttpResponse,String>(int,float)"{\"Message\":\"User: anonymous is not authorized to perform: es:ESHttpGet\"}"{"Message":"User: anonymous is not authorized to perform: es:ESHttpGet"}"response for / failed: 403 Forbidden"response for / failed: 403 Forbidden"Message: sleet"Message: sleet"response for / failed: Message: sleet"response for / failed: Message: sleetAtomicReference<RequestLog>AtomicReference<RequestLog>()weakCompareAndSetRelease(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)weakCompareAndSetAcquire(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)weakCompareAndSetVolatile(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)compareAndExchangeRelease(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)compareAndExchangeAcquire(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)compareAndExchange(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)setRelease(com.linecorp.armeria.common.logging.RequestLog)setOpaque(com.linecorp.armeria.common.logging.RequestLog)setPlain(com.linecorp.armeria.common.logging.RequestLog)BinaryOperator<RequestLog>BiFunction<RequestLog,RequestLog,RequestLog>accumulateAndGet(com.linecorp.armeria.common.logging.RequestLog,java.util.function.BinaryOperator)getAndAccumulate(com.linecorp.armeria.common.logging.RequestLog,java.util.function.BinaryOperator)UnaryOperator<RequestLog>Function<RequestLog,RequestLog>getAndSet(com.linecorp.armeria.common.logging.RequestLog)weakCompareAndSetPlain(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)weakCompareAndSet(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)compareAndSet(com.linecorp.armeria.common.logging.RequestLog,com.linecorp.armeria.common.logging.RequestLog)lazySet(com.linecorp.armeria.common.logging.RequestLog)set(com.linecorp.armeria.common.logging.RequestLog)AtomicReference<RequestLog>(com.linecorp.armeria.common.logging.RequestLog)"custom-name"custom-nameAtomicReferenceAssert<RequestLog>C:/Users/Semiu/.m2/repository/org/assertj/assertj-core/3.18.1/assertj-core-3.18.1.jar/org/assertj/core/api/AtomicReferenceAssert.classAtomicReferenceAssertAbstractAssert<AtomicReferenceAssert<RequestLog>,AtomicReference<RequestLog>>Assert<AtomicReferenceAssert<RequestLog>,AtomicReference<RequestLog>>Descriptable<AtomicReferenceAssert<RequestLog>>ExtensionPoints<AtomicReferenceAssert<RequestLog>,AtomicReference<RequestLog>>AtomicReferenceAssert<>doesNotHaveValuedoesNotHaveValue(com.linecorp.armeria.common.logging.RequestLog)? super AtomicReference<RequestLog>Condition<? super AtomicReference<RequestLog>>Descriptable<Condition<? super AtomicReference<RequestLog>>>Comparator<? super AtomicReference<RequestLog>>Function<? super AtomicReference<RequestLog>,? extends T>Consumer<AtomicReference<RequestLog>>Predicate<? super AtomicReference<RequestLog>>AbstractAssert<AtomicReferenceAssert<RequestLog>,AtomicReference<RequestLog>>(java.util.concurrent.atomic.AtomicReference,java.lang.Class)hasValueMatchinghasValueMatching(java.util.function.Predicate,java.lang.String)Predicate<? super RequestLog>hasValueMatching(java.util.function.Predicate)doesNotHaveValue(java.lang.Object)hasValue(com.linecorp.armeria.common.logging.RequestLog)AtomicReference<V>AtomicReferenceAssert(java.util.concurrent.atomic.AtomicReference)AtomicReferenceAssert<RequestLog>(java.util.concurrent.atomic.AtomicReference)"SSL"SSLC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/HttpCallTest$2.classHttpCallTest$2writeBodywriteBody(zipkin2.elasticsearch.internal.client.HttpCall.RequestStream)" world" worldAbstractComparableAssert<?,HttpMethod>AbstractObjectAssert<?,HttpMethod>AbstractAssert<?,HttpMethod>Assert<?,HttpMethod>ExtensionPoints<?,HttpMethod>ComparableAssert<?,HttpMethod>? super HttpMethodCondition<? super HttpMethod>Descriptable<Condition<? super HttpMethod>>Comparator<? super HttpMethod>Function<? super HttpMethod,? extends T>Consumer<HttpMethod>Predicate<? super HttpMethod>AbstractAssert<?,HttpMethod>(com.linecorp.armeria.common.HttpMethod,java.lang.Class) to access package-private stuff It can take some time for the HTTP response to process. Wait until we reach the parser Wait a little longer for a callback to fire (it should never do this) Force this to be a ref-counted response Invoke the parser directly because using the fake server will not result in ref-counted For simplicity, we also parse messages from AWS Elasticsearch, as it prevents copy/paste. note: not json In this case, we give request context depending on JDK this is "OPENSSL_internal" or "not an SSL/TLS record" TODO(adriancole): Find a home for this generic conversion between Call and Java 8.C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/SearchCallFactoryTest.javaSearchCallFactoryTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/SearchCallFactoryTest.class"zipkin:span-2016-10-01"zipkin:span-2016-10-01Declaring queries alphabetically helps simplify amazon signature logicC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/SearchRequestTest.javaSearchRequestTestC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/internal/client/SearchRequestTest.class"zipkin-2016.11.31"zipkin-2016.11.31"{\"size\":10000}"{"size":10000}Indices and type affect the request URI, not the json bodyC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/$AutoValue_ElasticsearchStorage.java$AutoValue_ElasticsearchStorageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/$AutoValue_ElasticsearchStorage.class$AutoValue_ElasticsearchStorage(zipkin2.elasticsearch.ElasticsearchStorage.LazyHttpClient,java.lang.String,boolean,boolean,boolean,java.util.List,int,int,int,int,zipkin2.elasticsearch.internal.IndexNameFormatter,boolean,int,java.lang.Integer)"Null lazyHttpClient"Null lazyHttpClient"Null autocompleteKeys"Null autocompleteKeys"Null indexNameFormatter"Null indexNameFormatterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/$AutoValue_ElasticsearchStorage$Builder.class$AutoValue_ElasticsearchStorage$BuilderBuilder(zipkin2.elasticsearch.ElasticsearchStorage)indexNameFormatterBuilder$indexNameFormatter$builder" lazyHttpClient" lazyHttpClient" flushOnWrites" flushOnWrites" strictTraceId" strictTraceId" searchEnabled" searchEnabled" autocompleteKeys" autocompleteKeys" autocompleteTtl" autocompleteTtl" autocompleteCardinality" autocompleteCardinality" indexShards" indexShards" indexReplicas" indexReplicas" ensureTemplates" ensureTemplates" namesLookback" namesLookback"Missing required properties:"Missing required properties:C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/AutoValue_ElasticsearchStorage.javaAutoValue_ElasticsearchStorageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/AutoValue_ElasticsearchStorage.classAutoValue_ElasticsearchStorage(zipkin2.elasticsearch.ElasticsearchStorage.LazyHttpClient,java.lang.String,boolean,boolean,boolean,java.util.List,int,int,int,int,zipkin2.elasticsearch.internal.IndexNameFormatter,boolean,int,java.lang.Integer)lazyHttpClient$pipeline$flushOnWrites$strictTraceId$searchEnabled$autocompleteKeys$autocompleteTtl$autocompleteCardinality$indexShards$indexReplicas$indexNameFormatter$ensureTemplates$namesLookback$templatePriority$"version() cannot return null"version() cannot return null"http() cannot return null"http() cannot return nullC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/AutoValue_IndexTemplates.javaAutoValue_IndexTemplatesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/AutoValue_IndexTemplates.classAutoValue_IndexTemplates(zipkin2.elasticsearch.ElasticsearchVersion,char,java.lang.String,java.lang.String,java.lang.String)"IndexTemplates{"
        + "version="IndexTemplates{version=", "
        + "indexTypeDelimiter=", indexTypeDelimiter=", "
        + "dependency=", dependency=", "
        + "autocomplete=", autocomplete=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/AutoValue_IndexTemplates$Builder.classAutoValue_IndexTemplates$Builder"Null version"Null version"Null dependency"Null dependency"Null autocomplete"Null autocomplete" version" version" indexTypeDelimiter" indexTypeDelimiter" span" span" dependency" dependency" autocomplete" autocompleteC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/internal/AutoValue_BulkCallBuilder_IndexEntry.java"Null index"Null index"Null typeName"Null typeName"Null input"Null input"Null writer"Null writer"IndexEntry{"
        + "index="IndexEntry{index=", "
        + "typeName=", typeName=", "
        + "input=", input=", "
        + "writer=", writer=BulkIndexWriter<?>IndexEntry<?>()C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/internal/AutoValue_IndexNameFormatter.javaAutoValue_IndexNameFormatterC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/generated-sources/annotations/zipkin2/elasticsearch/internal/AutoValue_IndexNameFormatter.classAutoValue_IndexNameFormatter(java.lang.String,char,java.time.format.DateTimeFormatter)"IndexNameFormatter{"
        + "index="IndexNameFormatter{index=", "
        + "dateSeparator=", dateSeparator=", "
        + "dateFormat=", dateFormat=C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/elasticsearch/target/classes/zipkin2/elasticsearch/internal/AutoValue_IndexNameFormatter$Builder.classAutoValue_IndexNameFormatter$BuilderBuilder(zipkin2.elasticsearch.internal.IndexNameFormatter)"Property \"dateSeparator\" has not been set"Property "dateSeparator" has not been set"Null dateFormat"Null dateFormat" index" index" dateSeparator" dateSeparator" dateFormat" dateFormatC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/pom.xmlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1mysql-v1Storage: MySQL (v1)jooq.version3.14.4 jOOQ doesn't add the Generated annotation, so we have to explicitly disable rules -Xep:InconsistentCapitalization:OFForg.jooqjooq${jooq.version} for Generated annotation jooq-codegen-mavenjdbcjdbc:mysql://localhost:3306/zipkinuserrelationsdeprecatedpojos Prevents Intellij from conflating source level with api level generatedAnnotationTypeJAVAX_ANNOTATION_GENERATEDdatabaseorg.jooq.meta.mysql.MySQLDatabaseinputSchemapackageNamezipkin2.storage.mysql.v1.internal.generatedsrc/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2/storage/mysql/v1/AggregateDependencies.javaAggregateDependenciesC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2/storage/mysql/v1C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2/storage/mysqlC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2/storageC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/javaC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/mainC:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/srcZIPKIN_ANNOTATIONSZIPKIN_SPANSAggregateDependencies(zipkin2.storage.mysql.v1.Schema,long,long)C:/Users/Semiu/Java/openzipkin_zipkin/zipkin-storage/mysql-v1/src/main/java/zipkin2/storage/mysql/v1/AggregateDependencies.classstartTsEndstartTsBeginschemaFunction<DSLContext,List<DependencyLink>>Record1<Long>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jarjooq-3.14.4C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4C:/Users/Semiu/.m2/repository/org/jooq/jooqC:/Users/Semiu/.m2/repository/org/jooqC:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/orgC:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooqC:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record1.classRecord1SelectConditionStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectConditionStep.classSelectConditionStepSelectConnectByStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectConnectByStep.classSelectConnectByStepSelectGroupByStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectGroupByStep.classSelectGroupByStepSelectHavingStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectHavingStep.classSelectHavingStepSelectWindowStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectWindowStep.classSelectWindowStepSelectQualifyStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectQualifyStep.classSelectQualifyStepSelectOrderByStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectOrderByStep.classSelectOrderByStepSelectLimitStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectLimitStep.classSelectLimitStepSelectForUpdateStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectForUpdateStep.classSelectForUpdateStepSelectForStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectForStep.classSelectForStepSelectOptionStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectOptionStep.classSelectOptionStepSelectUnionStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectUnionStep.classSelectUnionStepSelectCorrelatedSubqueryStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectCorrelatedSubqueryStep.classSelectCorrelatedSubqueryStepSelectFinalStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectFinalStep.classSelectFinalStepSelect<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Select.classSelectResultQuery<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/ResultQuery.classResultQueryIterable<Record1<Long>>Publisher<Record1<Long>>C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.2/reactive-streams-1.0.2.jarreactive-streams-1.0.2C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.21.0.2C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.2/reactive-streams-1.0.2.jar/orgC:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.2/reactive-streams-1.0.2.jar/org/reactivestreamsC:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.2/reactive-streams-1.0.2.jar/org/reactivestreams/Publisher.classTableLike<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/TableLike.classTableLiketraceIDsSelectJoinStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectJoinStep.classSelectJoinStepSelectWhereStep<Record1<Long>>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectWhereStep.classSelectWhereStepSelectConditionStep<>SelectConnectByStep<>SelectGroupByStep<>SelectHavingStep<>SelectWindowStep<>SelectQualifyStep<>SelectOrderByStep<>SelectLimitStep<>SelectForUpdateStep<>SelectForStep<>SelectOptionStep<>SelectUnionStep<>SelectCorrelatedSubqueryStep<>SelectFinalStep<>Select<>ResultQuery<>Publisher<>TableLike<>where(org.jooq.Condition)Spliterator<Record1<Long>>? super Record1<Long>Consumer<? super Record1<Long>>Iterator<Record1<Long>>Subscriber<? super T>C:/Users/Semiu/.m2/repository/org/reactivestreams/reactive-streams/1.0.2/reactive-streams-1.0.2.jar/org/reactivestreams/Subscriber.classSubscribersubscribe(org.reactivestreams.Subscriber)Subscriber<? super Record1<Long>>Field<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Field.classSelectField<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectField.classSelectFieldTyped<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Typed.classTypedOrderField<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/OrderField.classOrderFieldT1T2T3T4T5T6T7T8T9T10T11T12T13T14T15T16T17T18T19T20T21T22Record22<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record22.classRecord22ResultQuery<Record22<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>>Iterable<Record22<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>>Publisher<Record22<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>>coercecoerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Field<T1>SelectField<T1>Typed<T1>OrderField<T1>Field<T2>SelectField<T2>Typed<T2>OrderField<T2>Field<T3>SelectField<T3>Typed<T3>OrderField<T3>Field<T4>SelectField<T4>Typed<T4>OrderField<T4>Field<T5>SelectField<T5>Typed<T5>OrderField<T5>Field<T6>SelectField<T6>Typed<T6>OrderField<T6>Field<T7>SelectField<T7>Typed<T7>OrderField<T7>Field<T8>SelectField<T8>Typed<T8>OrderField<T8>Field<T9>SelectField<T9>Typed<T9>OrderField<T9>Field<T10>SelectField<T10>Typed<T10>OrderField<T10>Field<T11>SelectField<T11>Typed<T11>OrderField<T11>Field<T12>SelectField<T12>Typed<T12>OrderField<T12>Field<T13>SelectField<T13>Typed<T13>OrderField<T13>Field<T14>SelectField<T14>Typed<T14>OrderField<T14>Field<T15>SelectField<T15>Typed<T15>OrderField<T15>Field<T16>SelectField<T16>Typed<T16>OrderField<T16>Field<T17>SelectField<T17>Typed<T17>OrderField<T17>Field<T18>SelectField<T18>Typed<T18>OrderField<T18>Field<T19>SelectField<T19>Typed<T19>OrderField<T19>Field<T20>SelectField<T20>Typed<T20>OrderField<T20>Field<T21>SelectField<T21>Typed<T21>OrderField<T21>Field<T22>SelectField<T22>Typed<T22>OrderField<T22>Record21<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record21.classRecord21ResultQuery<Record21<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>>Iterable<Record21<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>>Publisher<Record21<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record20<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record20.classRecord20ResultQuery<Record20<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>>Iterable<Record20<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>>Publisher<Record20<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record19<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record19.classRecord19ResultQuery<Record19<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>>Iterable<Record19<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>>Publisher<Record19<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record18<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record18.classRecord18ResultQuery<Record18<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>>Iterable<Record18<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>>Publisher<Record18<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record17<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record17.classRecord17ResultQuery<Record17<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>>Iterable<Record17<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>>Publisher<Record17<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record16<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record16.classRecord16ResultQuery<Record16<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>>Iterable<Record16<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>>Publisher<Record16<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record15<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record15.classRecord15ResultQuery<Record15<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>>Iterable<Record15<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>>Publisher<Record15<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record14<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record14.classRecord14ResultQuery<Record14<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>>Iterable<Record14<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>>Publisher<Record14<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record13<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record13.classRecord13ResultQuery<Record13<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>>Iterable<Record13<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>>Publisher<Record13<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record12<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record12.classRecord12ResultQuery<Record12<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>>Iterable<Record12<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>>Publisher<Record12<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record11<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record11.classRecord11ResultQuery<Record11<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>>Iterable<Record11<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>>Publisher<Record11<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record10.classRecord10ResultQuery<Record10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>>Iterable<Record10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>>Publisher<Record10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record9<T1,T2,T3,T4,T5,T6,T7,T8,T9>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record9.classRecord9ResultQuery<Record9<T1,T2,T3,T4,T5,T6,T7,T8,T9>>Iterable<Record9<T1,T2,T3,T4,T5,T6,T7,T8,T9>>Publisher<Record9<T1,T2,T3,T4,T5,T6,T7,T8,T9>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record8<T1,T2,T3,T4,T5,T6,T7,T8>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record8.classRecord8ResultQuery<Record8<T1,T2,T3,T4,T5,T6,T7,T8>>Iterable<Record8<T1,T2,T3,T4,T5,T6,T7,T8>>Publisher<Record8<T1,T2,T3,T4,T5,T6,T7,T8>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record7<T1,T2,T3,T4,T5,T6,T7>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record7.classRecord7ResultQuery<Record7<T1,T2,T3,T4,T5,T6,T7>>Iterable<Record7<T1,T2,T3,T4,T5,T6,T7>>Publisher<Record7<T1,T2,T3,T4,T5,T6,T7>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record6<T1,T2,T3,T4,T5,T6>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record6.classRecord6ResultQuery<Record6<T1,T2,T3,T4,T5,T6>>Iterable<Record6<T1,T2,T3,T4,T5,T6>>Publisher<Record6<T1,T2,T3,T4,T5,T6>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record5<T1,T2,T3,T4,T5>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record5.classRecord5ResultQuery<Record5<T1,T2,T3,T4,T5>>Iterable<Record5<T1,T2,T3,T4,T5>>Publisher<Record5<T1,T2,T3,T4,T5>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record4<T1,T2,T3,T4>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record4.classRecord4ResultQuery<Record4<T1,T2,T3,T4>>Iterable<Record4<T1,T2,T3,T4>>Publisher<Record4<T1,T2,T3,T4>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field,org.jooq.Field)Record3<T1,T2,T3>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record3.classRecord3ResultQuery<Record3<T1,T2,T3>>Iterable<Record3<T1,T2,T3>>Publisher<Record3<T1,T2,T3>>coerce(org.jooq.Field,org.jooq.Field,org.jooq.Field)Record2<T1,T2>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Record2.classRecord2ResultQuery<Record2<T1,T2>>Iterable<Record2<T1,T2>>Publisher<Record2<T1,T2>>coerce(org.jooq.Field,org.jooq.Field)Record1<T1>ResultQuery<Record1<T1>>Iterable<Record1<T1>>Publisher<Record1<T1>>coerce(org.jooq.Field)Field<?>SelectField<?>Typed<?>OrderField<?>? extends Field<?>Collection<? extends Field<?>>Iterable<? extends Field<?>>ResultQuery<Record>Iterable<Record>Publisher<Record>coerce(java.util.Collection)Field<?>[]coerce(org.jooq.Field[])Table<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Table.classTableResultQuery<X>Iterable<X>Publisher<X>coerce(org.jooq.Table)Table<X>TableLike<X>Name[]internintern(org.jooq.Name[])intern(java.lang.String[])intern(int[])intern(org.jooq.Field[])resultSetHoldabilityresultSetHoldability(int)resultSetTyperesultSetType(int)resultSetConcurrencyresultSetConcurrency(int)fetchSizefetchSize(int)maxRowsmaxRows(int)keepStatementkeepStatement(boolean)queryTimeout(int)poolablepoolable(boolean)bind(int,java.lang.Object)bind(java.lang.String,java.lang.Object)Class<? extends R>getRecordTypegetRecordType()? extends Record1<Long>Class<? extends Record1<Long>>FutureResult<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/FutureResult.classFutureResultFutureResult<R>Result<R>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Result.classResultList<R>Collection<R>Iterable<R>Future<Result<R>>fetchLaterfetchLater(java.util.concurrent.ExecutorService)FutureResult<Record1<Long>>Result<Record1<Long>>List<Record1<Long>>Collection<Record1<Long>>Future<Result<Record1<Long>>>fetchLater()CompletionStage<Result<R>>fetchAsyncfetchAsync(java.util.concurrent.Executor)CompletionStage<Result<Record1<Long>>>fetchAsync()RecordMapper<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/RecordMapper.classRecordMapperfetchfetch(org.jooq.RecordMapper)RecordMapper<? super R,E>RecordMapper<? super Record1<Long>,E>RecordHandler<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/RecordHandler.classRecordHandlerHRecordHandler<? super R>fetchIntofetchInto(org.jooq.RecordHandler)Result<>ZResult<Z>List<Z>Collection<Z>Iterable<Z>fetchInto(org.jooq.Table)Table<Z>TableLike<Z>fetchInto(java.lang.Class)Class<? extends E>Converter<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Converter.classConverterSet<U>Collection<U>Iterable<U>fetchSetfetchSet(org.jooq.Field,org.jooq.Converter)Field<T>SelectField<T>Typed<T>OrderField<T>Converter<? super T,? extends U>fetchSet(org.jooq.Field,java.lang.Class)fetchSet(org.jooq.Field)fetchSet(org.jooq.Name,org.jooq.Converter)Converter<?,? extends U>fetchSet(org.jooq.Name,java.lang.Class)Set<?>fetchSet(org.jooq.Name)fetchSet(java.lang.String,org.jooq.Converter)fetchSet(java.lang.String,java.lang.Class)fetchSet(java.lang.String)fetchSet(int,org.jooq.Converter)fetchSet(int,java.lang.Class)fetchSet(int)fetchSet(org.jooq.RecordMapper)U[]fetchArrayfetchArray(org.jooq.Field,org.jooq.Converter)fetchArray(org.jooq.Field,java.lang.Class)fetchArray(org.jooq.Field)fetchArray(org.jooq.Name,org.jooq.Converter)fetchArray(org.jooq.Name,java.lang.Class)fetchArray(org.jooq.Name)fetchArray(java.lang.String,org.jooq.Converter)fetchArray(java.lang.String,java.lang.Class)fetchArray(java.lang.String)fetchArray(int,org.jooq.Converter)fetchArray(int,java.lang.Class)fetchArray(int)Record[]R[]fetchArray()Record1[]Record1<>Record1<>[]Record1<Long>[]Object[][]fetchArraysfetchArrays()Map<?,List<E>>fetchGroupsfetchGroups(org.jooq.Name,org.jooq.RecordMapper)fetchGroups(java.lang.String,org.jooq.RecordMapper)fetchGroups(int,org.jooq.RecordMapper)Map<K,List<E>>fetchGroups(org.jooq.Field,org.jooq.RecordMapper)Field<K>SelectField<K>Typed<K>OrderField<K>fetchGroups(org.jooq.Name,java.lang.Class)fetchGroups(java.lang.String,java.lang.Class)fetchGroups(int,java.lang.Class)fetchGroups(org.jooq.Field,java.lang.Class)Map<S,List<E>>fetchGroups(org.jooq.Table,org.jooq.RecordMapper)Table<S>TableLike<S>fetchGroups(org.jooq.Table,java.lang.Class)Result<T>Map<S,Result<T>>fetchGroups(org.jooq.Table,org.jooq.Table)Table<T>TableLike<T>Map<S,Result<R>>fetchGroups(org.jooq.Table)Map<S,Result<Record1<Long>>>List<V>Map<K,List<V>>fetchGroups(org.jooq.RecordMapper,org.jooq.RecordMapper)RecordMapper<? super R,K>RecordMapper<? super R,V>RecordMapper<? super Record1<Long>,K>RecordMapper<? super Record1<Long>,V>fetchGroups(org.jooq.RecordMapper,java.lang.Class)Map<K,Result<R>>fetchGroups(org.jooq.RecordMapper)Map<K,Result<Record1<Long>>>fetchGroups(java.lang.Class,org.jooq.RecordMapper)Class<? extends K>fetchGroups(java.lang.Class,java.lang.Class)Class<? extends V>fetchGroups(java.lang.Class)Map<Record,List<E>>fetchGroups(org.jooq.Name[],org.jooq.RecordMapper)fetchGroups(java.lang.String[],org.jooq.RecordMapper)fetchGroups(int[],org.jooq.RecordMapper)Field<>[]fetchGroups(org.jooq.Field[],org.jooq.RecordMapper)fetchGroups(org.jooq.Name[],java.lang.Class)fetchGroups(java.lang.String[],java.lang.Class)fetchGroups(int[],java.lang.Class)fetchGroups(org.jooq.Field[],java.lang.Class)Result<Record>List<Record>Collection<Record>Map<Record,Result<Record>>fetchGroups(org.jooq.Name[],org.jooq.Name[])fetchGroups(java.lang.String[],java.lang.String[])fetchGroups(int[],int[])fetchGroups(org.jooq.Field[],org.jooq.Field[])Map<Record,Result<R>>fetchGroups(org.jooq.Name[])Map<Record,Result<Record1<Long>>>fetchGroups(java.lang.String[])fetchGroups(int[])fetchGroups(org.jooq.Field[])Map<?,List<?>>fetchGroups(org.jooq.Name,org.jooq.Name)fetchGroups(java.lang.String,java.lang.String)fetchGroups(int,int)fetchGroups(org.jooq.Field,org.jooq.Field)Field<V>SelectField<V>Typed<V>OrderField<V>Map<?,Result<R>>fetchGroups(org.jooq.Name)Map<?,Result<Record1<Long>>>fetchGroups(java.lang.String)fetchGroups(int)fetchGroups(org.jooq.Field)Map<?,E>fetchMapfetchMap(org.jooq.Name,org.jooq.RecordMapper)fetchMap(java.lang.String,org.jooq.RecordMapper)fetchMap(int,org.jooq.RecordMapper)Map<K,E>fetchMap(org.jooq.Field,org.jooq.RecordMapper)fetchMap(org.jooq.Name,java.lang.Class)fetchMap(java.lang.String,java.lang.Class)fetchMap(int,java.lang.Class)fetchMap(org.jooq.Field,java.lang.Class)Map<S,E>fetchMap(org.jooq.Table,org.jooq.RecordMapper)fetchMap(org.jooq.Table,java.lang.Class)Map<S,T>fetchMap(org.jooq.Table,org.jooq.Table)Map<S,R>fetchMap(org.jooq.Table)Map<S,Record1<Long>>fetchMap(org.jooq.RecordMapper,org.jooq.RecordMapper)fetchMap(org.jooq.RecordMapper,java.lang.Class)Map<K,R>fetchMap(org.jooq.RecordMapper)Map<K,Record1<Long>>fetchMap(java.lang.Class,org.jooq.RecordMapper)fetchMap(java.lang.Class,java.lang.Class)fetchMap(java.lang.Class)Map<List<?>,E>fetchMap(org.jooq.Name[],org.jooq.RecordMapper)fetchMap(java.lang.String[],org.jooq.RecordMapper)fetchMap(int[],org.jooq.RecordMapper)fetchMap(org.jooq.Field[],org.jooq.RecordMapper)fetchMap(org.jooq.Name[],java.lang.Class)fetchMap(java.lang.String[],java.lang.Class)fetchMap(int[],java.lang.Class)fetchMap(org.jooq.Field[],java.lang.Class)Map<Record,Record>fetchMap(org.jooq.Name[],org.jooq.Name[])fetchMap(java.lang.String[],java.lang.String[])fetchMap(int[],int[])fetchMap(org.jooq.Field[],org.jooq.Field[])Map<Record,R>fetchMap(org.jooq.Name[])Map<Record,Record1<Long>>fetchMap(java.lang.String[])fetchMap(int[])fetchMap(org.jooq.Field[])fetchMap(org.jooq.Name,org.jooq.Name)fetchMap(java.lang.String,java.lang.String)fetchMap(int,int)fetchMap(org.jooq.Field,org.jooq.Field)Map<?,R>fetchMap(org.jooq.Name)Map<?,Record1<Long>>fetchMap(java.lang.String)fetchMap(int)fetchMap(org.jooq.Field)List<Map<String,Object>>Collection<Map<String,Object>>Iterable<Map<String,Object>>fetchMapsfetchMaps()fetchAnyIntofetchAnyInto(org.jooq.Table)fetchAnyInto(java.lang.Class)fetchAnyArrayfetchAnyArray()fetchAnyMapfetchAnyMap()fetchAnyfetchAny(org.jooq.RecordMapper)fetchAny()fetchAny(org.jooq.Name,org.jooq.Converter)fetchAny(org.jooq.Name,java.lang.Class)fetchAny(org.jooq.Name)fetchAny(java.lang.String,org.jooq.Converter)fetchAny(java.lang.String,java.lang.Class)fetchAny(java.lang.String)fetchAny(int,org.jooq.Converter)fetchAny(int,java.lang.Class)fetchAny(int)fetchAny(org.jooq.Field,org.jooq.Converter)fetchAny(org.jooq.Field,java.lang.Class)fetchAny(org.jooq.Field)Optional<Z>fetchOptionalIntofetchOptionalInto(org.jooq.Table)Optional<E>fetchOptionalInto(java.lang.Class)Optional<Object[]>fetchOptionalArrayfetchOptionalArray()Optional<Map<String,Object>>fetchOptionalMapfetchOptionalMap()fetchOptionalfetchOptional(org.jooq.RecordMapper)Optional<R>fetchOptional()Optional<Record1<Long>>fetchOptional(org.jooq.Name,org.jooq.Converter)fetchOptional(org.jooq.Name,java.lang.Class)Optional<?>fetchOptional(org.jooq.Name)fetchOptional(java.lang.String,org.jooq.Converter)fetchOptional(java.lang.String,java.lang.Class)fetchOptional(java.lang.String)fetchOptional(int,org.jooq.Converter)fetchOptional(int,java.lang.Class)fetchOptional(int)fetchOptional(org.jooq.Field,org.jooq.Converter)fetchOptional(org.jooq.Field,java.lang.Class)fetchOptional(org.jooq.Field)fetchSingleIntofetchSingleInto(org.jooq.Table)fetchSingleInto(java.lang.Class)fetchSingleArrayfetchSingleArray()fetchSingleMapfetchSingleMap()fetchSinglefetchSingle(org.jooq.RecordMapper)fetchSingle()fetchSingle(org.jooq.Name,org.jooq.Converter)fetchSingle(org.jooq.Name,java.lang.Class)fetchSingle(org.jooq.Name)fetchSingle(java.lang.String,org.jooq.Converter)fetchSingle(java.lang.String,java.lang.Class)fetchSingle(java.lang.String)fetchSingle(int,org.jooq.Converter)fetchSingle(int,java.lang.Class)fetchSingle(int)fetchSingle(org.jooq.Field,org.jooq.Converter)fetchSingle(org.jooq.Field,java.lang.Class)fetchSingle(org.jooq.Field)fetchOneIntofetchOneInto(org.jooq.Table)fetchOneInto(java.lang.Class)fetchOneArrayfetchOneArray()fetchOneMapfetchOneMap()fetchOnefetchOne(org.jooq.RecordMapper)fetchOne()fetchOne(org.jooq.Name,org.jooq.Converter)fetchOne(org.jooq.Name,java.lang.Class)fetchOne(org.jooq.Name)fetchOne(java.lang.String,org.jooq.Converter)fetchOne(java.lang.String,java.lang.Class)fetchOne(java.lang.String)fetchOne(int,org.jooq.Converter)fetchOne(int,java.lang.Class)fetchOne(int)fetchOne(org.jooq.Field,org.jooq.Converter)fetchOne(org.jooq.Field,java.lang.Class)fetchOne(org.jooq.Field)List<U>fetch(org.jooq.Name,org.jooq.Converter)fetch(org.jooq.Name,java.lang.Class)fetch(org.jooq.Name)fetch(java.lang.String,org.jooq.Converter)fetch(java.lang.String,java.lang.Class)fetch(java.lang.String)fetch(int,org.jooq.Converter)fetch(int,java.lang.Class)fetch(int)fetch(org.jooq.Field,org.jooq.Converter)fetch(org.jooq.Field,java.lang.Class)fetch(org.jooq.Field)fetchManyfetchMany()Cursor<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Cursor.classCursorCursor<R>fetchLazyfetchLazy(int)Cursor<Record1<Long>>fetchLazy()Collector<? super R,A,X>Collector<? super Record1<Long>,A,X>Stream<Record1<Long>>BaseStream<Record1<Long>,Stream<Record1<Long>>>Stream<Z>BaseStream<Z,Stream<Z>>fetchStreamIntofetchStreamInto(org.jooq.Table)fetchStreamInto(java.lang.Class)fetchStreamfetchStream()Spliterator<R>Consumer<? super R>Iterator<R>fetchResultSetfetchResultSet()fetch()getResult()? super Field<?>BiFunction<? super Field<?>,? super Integer,? extends String>Table<R>asTableasTable(java.lang.String,java.util.function.BiFunction)Table<Record1<Long>>Function<? super Field<?>,? extends String>asTable(java.lang.String,java.util.function.Function)Table<?>TableLike<?>asTable(org.jooq.Table,org.jooq.Field[])asTable(org.jooq.Table)asTable(org.jooq.Name,org.jooq.Name[])asTable(org.jooq.Name)asTable(java.lang.String,java.lang.String[])asTable(java.lang.String)asTable()indexOf(org.jooq.Name)indexOf(java.lang.String)indexOf(org.jooq.Field)fields(int[])fields(org.jooq.Name[])fields(java.lang.String[])fields(org.jooq.Field[])fields()DataType<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/DataType.classDataTypefield(int,org.jooq.DataType)DataType<T>field(int,java.lang.Class)field(int)field(org.jooq.Name,org.jooq.DataType)field(org.jooq.Name,java.lang.Class)field(org.jooq.Name)field(java.lang.String,org.jooq.DataType)field(java.lang.String,java.lang.Class)field(java.lang.String)field(org.jooq.Field)Stream<Field<?>>BaseStream<Field<?>,Stream<Field<?>>>fieldStreamfieldStream()fieldsRowfieldsRow()fetchCountfetchCount()List<Field<?>>Collection<Field<?>>Iterable<Field<?>>getSelectgetSelect()Select<? extends R>ResultQuery<? extends R>Iterable<? extends R>Publisher<? extends R>TableLike<? extends R>intersectAllintersectAll(org.jooq.Select)Select<? extends Record1<Long>>ResultQuery<? extends Record1<Long>>Iterable<? extends Record1<Long>>Publisher<? extends Record1<Long>>TableLike<? extends Record1<Long>>intersectintersect(org.jooq.Select)exceptAllexceptAll(org.jooq.Select)exceptexcept(org.jooq.Select)unionAllunionAll(org.jooq.Select)unionunion(org.jooq.Select)SelectQuery<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectQuery.classSelectQuerySelectQuery<R>Select<R>ResultQuery<R>Publisher<R>TableLike<R>getQuerygetQuery()SelectQuery<Record1<Long>>notBetweenSymmetricnotBetweenSymmetric(org.jooq.Select,org.jooq.Select)BetweenAndStepR<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/BetweenAndStepR.classBetweenAndStepRBetweenAndStepR<R>notBetweenSymmetric(org.jooq.Select)BetweenAndStepR<Record1<Long>>notBetweenSymmetric(org.jooq.Record,org.jooq.Record)notBetweenSymmetric(org.jooq.Record1,org.jooq.Record1)notBetweenSymmetric(org.jooq.Record)notBetweenSymmetric(org.jooq.Record1)notBetweennotBetween(org.jooq.Select,org.jooq.Select)notBetween(org.jooq.Select)notBetween(org.jooq.Record,org.jooq.Record)notBetween(org.jooq.Record1,org.jooq.Record1)notBetween(org.jooq.Record)notBetween(org.jooq.Record1)betweenSymmetricbetweenSymmetric(org.jooq.Select,org.jooq.Select)betweenSymmetric(org.jooq.Select)betweenSymmetric(org.jooq.Record,org.jooq.Record)betweenSymmetric(org.jooq.Record1,org.jooq.Record1)betweenSymmetric(org.jooq.Record)betweenSymmetric(org.jooq.Record1)betweenbetween(org.jooq.Select,org.jooq.Select)BetweenAndStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/BetweenAndStep.classBetweenAndStepBetweenAndStep<R>between(org.jooq.Select)BetweenAndStep<Record1<Long>>between(org.jooq.Record,org.jooq.Record)between(org.jooq.Record1,org.jooq.Record1)between(org.jooq.Record)between(org.jooq.Record1)QuantifiedSelect<? extends R>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/QuantifiedSelect.classQuantifiedSelectisNotDistinctFromisNotDistinctFrom(org.jooq.QuantifiedSelect)QuantifiedSelect<? extends Record1<Long>>isNotDistinctFrom(org.jooq.Select)isNotDistinctFrom(org.jooq.Record)isNotDistinctFrom(org.jooq.Record1)isDistinctFromisDistinctFrom(org.jooq.QuantifiedSelect)isDistinctFrom(org.jooq.Select)isDistinctFrom(org.jooq.Record)isDistinctFrom(org.jooq.Record1)notInnotIn(org.jooq.Select)notIn(org.jooq.Record[])notIn(org.jooq.Record1[])in(org.jooq.Select)in(org.jooq.Record[])in(org.jooq.Record1[])greaterOrEqualgreaterOrEqual(org.jooq.QuantifiedSelect)greaterOrEqual(org.jooq.Select)greaterOrEqual(org.jooq.Record)greaterOrEqual(org.jooq.Record1)gege(org.jooq.QuantifiedSelect)ge(org.jooq.Select)ge(org.jooq.Record)ge(org.jooq.Record1)greaterThangreaterThan(org.jooq.QuantifiedSelect)greaterThan(org.jooq.Select)greaterThan(org.jooq.Record)greaterThan(org.jooq.Record1)gtgt(org.jooq.QuantifiedSelect)gt(org.jooq.Select)gt(org.jooq.Record)gt(org.jooq.Record1)lessOrEquallessOrEqual(org.jooq.QuantifiedSelect)lessOrEqual(org.jooq.Select)lessOrEqual(org.jooq.Record)lessOrEqual(org.jooq.Record1)lele(org.jooq.QuantifiedSelect)le(org.jooq.Select)le(org.jooq.Record)le(org.jooq.Record1)lessThanlessThan(org.jooq.QuantifiedSelect)lessThan(org.jooq.Select)lessThan(org.jooq.Record)lessThan(org.jooq.Record1)ltlt(org.jooq.QuantifiedSelect)lt(org.jooq.Select)lt(org.jooq.Record)lt(org.jooq.Record1)notEqualnotEqual(org.jooq.QuantifiedSelect)notEqual(org.jooq.Select)notEqual(org.jooq.Record)notEqual(org.jooq.Record1)nene(org.jooq.QuantifiedSelect)ne(org.jooq.Select)ne(org.jooq.Record)ne(org.jooq.Record1)equal(org.jooq.QuantifiedSelect)equal(org.jooq.Select)equal(org.jooq.Record)equal(org.jooq.Record1)eq(org.jooq.QuantifiedSelect)eq(org.jooq.Select)eq(org.jooq.Record)eq(org.jooq.Record1)compare(org.jooq.Comparator,org.jooq.QuantifiedSelect)compare(org.jooq.Comparator,org.jooq.Select)compare(org.jooq.Comparator,org.jooq.Record)compare(org.jooq.Comparator,org.jooq.Record1)SelectOrderByStep<R>SelectLimitStep<R>SelectForUpdateStep<R>SelectForStep<R>SelectOptionStep<R>SelectUnionStep<R>SelectCorrelatedSubqueryStep<R>SelectFinalStep<R>option(java.lang.String)SelectForUpdateOfStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectForUpdateOfStep.classSelectForUpdateOfStepSelectForUpdateWaitStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectForUpdateWaitStep.classSelectForUpdateWaitStepSelectForUpdateOfStep<R>SelectForUpdateWaitStep<R>forKeyShareforKeyShare()SelectForUpdateOfStep<Record1<Long>>SelectForUpdateWaitStep<Record1<Long>>forShareforShare()forNoKeyUpdateforNoKeyUpdate()forUpdateforUpdate()? extends NumberParam<? extends Number>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/Param.classParamField<? extends Number>SelectField<? extends Number>Typed<? extends Number>OrderField<? extends Number>SelectLimitAfterOffsetStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectLimitAfterOffsetStep.classSelectLimitAfterOffsetStepSelectLimitAfterOffsetStep<R>offset(org.jooq.Param)SelectLimitAfterOffsetStep<Record1<Long>>offset(java.lang.Number)offset(int)SelectLimitPercentAfterOffsetStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectLimitPercentAfterOffsetStep.classSelectLimitPercentAfterOffsetStepSelectWithTiesAfterOffsetStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectWithTiesAfterOffsetStep.classSelectWithTiesAfterOffsetStepSelectLimitPercentAfterOffsetStep<R>SelectWithTiesAfterOffsetStep<R>limit(org.jooq.Param,org.jooq.Param)SelectLimitPercentAfterOffsetStep<Record1<Long>>SelectWithTiesAfterOffsetStep<Record1<Long>>limit(org.jooq.Param,java.lang.Number)Param<Integer>Field<Integer>SelectField<Integer>Typed<Integer>OrderField<Integer>limit(org.jooq.Param,int)limit(java.lang.Number,org.jooq.Param)limit(int,org.jooq.Param)limit(java.lang.Number,java.lang.Number)limit(int,int)SelectLimitPercentStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectLimitPercentStep.classSelectLimitPercentStepSelectWithTiesStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectWithTiesStep.classSelectWithTiesStepSelectOffsetStep<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectOffsetStep.classSelectOffsetStepSelectLimitPercentStep<R>SelectWithTiesStep<R>SelectOffsetStep<R>limit(org.jooq.Param)SelectLimitPercentStep<Record1<Long>>SelectWithTiesStep<Record1<Long>>SelectOffsetStep<Record1<Long>>limit(java.lang.Number)limit(int)orderByorderBy(int[])? extends OrderField<?>Collection<? extends OrderField<?>>Iterable<? extends OrderField<?>>SelectSeekStepN<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStepN.classSelectSeekStepNSelectSeekStepN<R>orderBy(java.util.Collection)SelectSeekStepN<Record1<Long>>OrderField[]OrderField<?>[]orderBy(org.jooq.OrderField[])SelectSeekStep22<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep22.classSelectSeekStep22SelectSeekStep22<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep22<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21,T22>SelectSeekStep21<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep21.classSelectSeekStep21SelectSeekStep21<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep21<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20,T21>SelectSeekStep20<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep20.classSelectSeekStep20SelectSeekStep20<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep20<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19,T20>SelectSeekStep19<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep19.classSelectSeekStep19SelectSeekStep19<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep19<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18,T19>SelectSeekStep18<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep18.classSelectSeekStep18SelectSeekStep18<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep18<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17,T18>SelectSeekStep17<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep17.classSelectSeekStep17SelectSeekStep17<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep17<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16,T17>SelectSeekStep16<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep16.classSelectSeekStep16SelectSeekStep16<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep16<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15,T16>SelectSeekStep15<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep15.classSelectSeekStep15SelectSeekStep15<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep15<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14,T15>SelectSeekStep14<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep14.classSelectSeekStep14SelectSeekStep14<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep14<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13,T14>SelectSeekStep13<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep13.classSelectSeekStep13SelectSeekStep13<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep13<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12,T13>SelectSeekStep12<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep12.classSelectSeekStep12SelectSeekStep12<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep12<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11,T12>SelectSeekStep11<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep11.classSelectSeekStep11SelectSeekStep11<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField,org.jooq.OrderField)SelectSeekStep11<Record1<Long>,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10,T11>SelectSeekStep10<>C:/Users/Semiu/.m2/repository/org/jooq/jooq/3.14.4/jooq-3.14.4.jar/org/jooq/SelectSeekStep10.classSelectSeekStep10SelectSeekStep10<R,T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>orderBy(org.jooq.OrderField,org.jooq.OrderField,org.jooq.Orde z  Y    